"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[74561],{90561:function(e,t,n){n.d(t,{ys:function(){return V}});var i=n(76775),r=n(69205),o=n(70906),a=n(53709),s=n(68990),c=n(40039),l=n(71650),u=n(33368),h=n(74075),f=n(51764),p=n(25070),d=function(){function e(t,n,i){(0,l.Z)(this,e),this.state=t,this.pos=n,this.explicit=i,this.abortListeners=[]}return(0,u.Z)(e,[{key:"tokenBefore",value:function(e){for(var t=(0,p.qz)(this.state).resolveInner(this.pos,-1);t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}},{key:"matchBefore",value:function(e){var t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(b(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}},{key:"aborted",get:function(){return null==this.abortListeners}},{key:"addEventListener",value:function(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}]),e}();function m(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function v(e){var t=e.map((function(e){return"string"==typeof e?{label:e}:e})),n=t.every((function(e){return/^\w+$/.test(e.label)}))?[/\w*$/,/\w+$/]:function(e){var t,n=Object.create(null),i=Object.create(null),r=(0,c.Z)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value.label;n[o[0]]=!0;for(var a=1;a<o.length;a++)i[o[a]]=!0}}catch(l){r.e(l)}finally{r.f()}var s=m(n)+m(i)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(t),i=(0,s.Z)(n,2),r=i[0],o=i[1];return function(e){var n=e.matchBefore(o);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:r}:null}}var g=(0,u.Z)((function e(t,n,i,r){(0,l.Z)(this,e),this.completion=t,this.source=n,this.match=i,this.score=r}));function y(e){return e.selection.main.from}function b(e,t){var n,i=e.source,r=t&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp("".concat(r?"^":"","(?:").concat(i,")").concat(o?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}var k=h.q6.define();var x=new WeakMap;function w(e){if(!Array.isArray(e))return e;var t=x.get(e);return t||x.set(e,t=v(e)),t}var C=h.Py.define(),Z=h.Py.define(),S=function(){function e(t){(0,l.Z)(this,e),this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(var n=0;n<t.length;){var i=(0,h.gm)(t,n),r=(0,h.nZ)(i);this.chars.push(i);var o=t.slice(n,n+r),a=o.toUpperCase();this.folded.push((0,h.gm)(a==o?o.toLowerCase():a,0)),n+=r}this.astral=t.length!=this.chars.length}return(0,u.Z)(e,[{key:"match",value:function(e){if(0==this.pattern.length)return[-100];if(e.length<this.pattern.length)return null;var t=this.chars,n=this.folded,i=this.any,r=this.precise,o=this.byWord;if(1==t.length){var a=(0,h.gm)(e,0),s=(0,h.nZ)(a),c=s==e.length?0:-100;if(a==t[0]);else{if(a!=n[0])return null;c+=-200}return[c,0,s]}var l=e.indexOf(this.pattern);if(0==l)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];var u=t.length,f=0;if(l<0){for(var p=0,d=Math.min(e.length,200);p<d&&f<u;){var m=(0,h.gm)(e,p);m!=t[f]&&m!=n[f]||(i[f++]=p),p+=(0,h.nZ)(m)}if(f<u)return null}for(var v=0,g=0,y=!1,b=0,k=-1,x=-1,w=/[a-z]/.test(e),C=!0,Z=0,S=Math.min(e.length,200),M=0;Z<S&&g<u;){var L=(0,h.gm)(e,Z);l<0&&(v<u&&L==t[v]&&(r[v++]=Z),b<u&&(L==t[b]||L==n[b]?(0==b&&(k=Z),x=Z+1,b++):b=0));var T=void 0,D=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(T=(0,h.bg)(L))!=T.toLowerCase()?1:T!=T.toUpperCase()?2:0;(!Z||1==D&&w||0==M&&0!=D)&&(t[g]==L||n[g]==L&&(y=!0)?o[g++]=Z:o.length&&(C=!1)),M=D,Z+=(0,h.nZ)(L)}return g==u&&0==o[0]&&C?this.result((y?-200:0)-100,o,e):b==u&&0==k?[-200-e.length+(x==e.length?0:-100),0,x]:l>-1?[-700-e.length,l,l+this.pattern.length]:b==u?[-900-e.length,k,x]:g==u?this.result((y?-200:0)-100-700+(C?0:-1100),o,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}},{key:"result",value:function(e,t,n){var i,r=[e-n.length],o=1,a=(0,c.Z)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=s+(this.astral?(0,h.nZ)((0,h.gm)(n,s)):1);o>1&&r[o-1]==s?r[o-1]=l:(r[o++]=s,r[o++]=l)}}catch(u){a.e(u)}finally{a.f()}return r}}]),e}(),M=h.r$.define({combine:function(e){return(0,h.BO)(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:function(){return""},optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:T,compareCompletions:function(e,t){return e.label.localeCompare(t.label)},interactionDelay:75},{defaultKeymap:function(e,t){return e&&t},closeOnBlur:function(e,t){return e&&t},icons:function(e,t){return e&&t},tooltipClass:function(e,t){return function(n){return L(e(n),t(n))}},optionClass:function(e,t){return function(n){return L(e(n),t(n))}},addToOptions:function(e,t){return e.concat(t)}})}});function L(e,t){return e?t?e+" "+t:e:t}function T(e,t,n,i,r){var o,a,s=e.textDirection==f.Nm.RTL,c=s,l=!1,u="top",h=t.left-r.left,p=r.right-t.right,d=i.right-i.left,m=i.bottom-i.top;if(c&&h<Math.min(d,p)?c=!1:!c&&p<Math.min(d,h)&&(c=!0),d<=(c?h:p))o=Math.max(r.top,Math.min(n.top,r.bottom-m))-t.top,a=Math.min(400,c?h:p);else{l=!0,a=Math.min(400,(s?t.right:r.right-t.left)-30);var v=r.bottom-t.bottom;v>=m||v>t.top?o=n.bottom-t.top:(u="bottom",o=t.bottom-n.top)}return{style:"".concat(u,": ").concat(o,"px; max-width: ").concat(a,"px"),class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":c?"left":"right")}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return function(n){var i=n.state.field(Q,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(M).interactionDelay)return!1;var r,o=1;"page"==t&&(r=(0,f.gB)(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));var a=i.open.options.length,s=i.open.selected>-1?i.open.selected+o*(e?1:-1):e?0:a-1;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:_.of(s)}),!0}}var I=(0,u.Z)((function e(t,n){(0,l.Z)(this,e),this.active=t,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0})),A=f.lg.fromClass(function(){function e(t){(0,l.Z)(this,e),this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;var n,i=(0,c.Z)(t.state.field(Q).active);try{for(i.s();!(n=i.n()).done;){var r=n.value;1==r.state&&this.startQuery(r)}}catch(o){i.e(o)}finally{i.f()}}return(0,u.Z)(e,[{key:"update",value:function(e){var t=this,n=e.state.field(Q);if(e.selectionSet||e.docChanged||e.startState.field(Q)!=n){for(var i=e.transactions.some((function(e){return(e.selection||e.docChanged)&&!$(e)})),r=0;r<this.running.length;r++){var o=this.running[r];if(i||o.updates.length+e.transactions.length>50&&Date.now()-o.time>1e3){var s,l=(0,c.Z)(o.context.abortListeners);try{for(l.s();!(s=l.n()).done;){var u=s.value;try{u()}catch(v){(0,f.OO)(this.view.state,v)}}}catch(g){l.e(g)}finally{l.f()}o.context.abortListeners=null,this.running.splice(r--,1)}else{var h;(h=o.updates).push.apply(h,(0,a.Z)(e.transactions))}}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=n.active.some((function(e){return 1==e.state&&!t.running.some((function(t){return t.active.source==e.source}))}))?setTimeout((function(){return t.startUpdate()}),50):-1,0!=this.composing){var p,d=(0,c.Z)(e.transactions);try{for(d.s();!(p=d.n()).done;){var m=p.value;"input"==$(m)?this.composing=2:2==this.composing&&m.selection&&(this.composing=3)}}catch(g){d.e(g)}finally{d.f()}}}}},{key:"startUpdate",value:function(){var e=this;this.debounceUpdate=-1;var t,n=this.view.state.field(Q),i=(0,c.Z)(n.active);try{var r=function(){var n=t.value;1!=n.state||e.running.some((function(e){return e.active.source==n.source}))||e.startQuery(n)};for(i.s();!(t=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}}},{key:"startQuery",value:function(e){var t=this,n=this.view.state,i=y(n),r=new d(n,i,e.explicitPos==i),o=new I(e,r);this.running.push(o),Promise.resolve(e.source(r)).then((function(e){o.context.aborted||(o.done=e||null,t.scheduleAccept())}),(function(e){t.view.dispatch({effects:Z.of(null)}),(0,f.OO)(t.view.state,e)}))}},{key:"scheduleAccept",value:function(){var e=this;this.running.every((function(e){return void 0!==e.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return e.accept()}),50))}},{key:"accept",value:function(){var e,t=this;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var n=[],i=this.view.state.facet(M),r=function(r){var a=t.running[r];if(void 0===a.done)return o=r,"continue";if(t.running.splice(r--,1),a.done){var s,l=new N(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(e=a.done.to)&&void 0!==e?e:y(a.updates.length?a.updates[0].startState:t.view.state)),u=(0,c.Z)(a.updates);try{for(u.s();!(s=u.n()).done;){var h=s.value;l=l.update(h,i)}}catch(g){u.e(g)}finally{u.f()}if(l.hasResult())return n.push(l),o=r,"continue"}var f=t.view.state.field(Q).active.find((function(e){return e.source==a.active.source}));if(f&&1==f.state)if(null==a.done){var p,d=new z(a.active.source,0),m=(0,c.Z)(a.updates);try{for(m.s();!(p=m.n()).done;){var v=p.value;d=d.update(v,i)}}catch(g){m.e(g)}finally{m.f()}1!=d.state&&n.push(d)}else t.startQuery(f);o=r},o=0;o<this.running.length;o++)r(o);n.length&&this.view.dispatch({effects:U.of(n)})}}]),e}(),{eventHandlers:{blur:function(e){var t=this.view.state.field(Q,!1);if(t&&t.tooltip&&this.view.state.facet(M).closeOnBlur){var n=t.open&&(0,f.gB)(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||this.view.dispatch({effects:Z.of(null)})}},compositionstart:function(){this.composing=1},compositionend:function(){var e=this;3==this.composing&&setTimeout((function(){return e.view.dispatch({effects:C.of(!1)})}),20),this.composing=0}}});function P(e,t){var n,i,r,o,a,s,c,l=t.completion.apply||t.completion.label,u=e.state.field(Q).active.find((function(e){return e.source==t.source}));return u instanceof N&&("string"==typeof l?e.dispatch(Object.assign(Object.assign({},(n=e.state,i=l,r=u.from,o=u.to,a=n.selection.main,s=r-a.from,c=o-a.from,Object.assign(Object.assign({},n.changeByRange((function(e){return e!=a&&r!=o&&n.sliceDoc(e.from+s,e.from+c)!=n.sliceDoc(r,o)?{range:e}:{changes:{from:e.from+s,to:o==a.from?e.to:e.from+c,insert:i},range:h.jT.cursor(e.from+s+i.length)}}))),{userEvent:"input.complete"}))),{annotations:k.of(t.completion)})):l(e,t.completion,u.from,u.to),!0)}function R(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){var i=Math.floor(t/n);return{from:i*n,to:(i+1)*n}}var r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}var q=function(){function e(t,n){var i=this;(0,l.Z)(this,e),this.view=t,this.stateField=n,this.info=null,this.placeInfoReq={read:function(){return i.measureInfo()},write:function(e){return i.placeInfo(e)},key:this},this.space=null,this.currentClass="";var r=t.state.field(n),o=r.open,s=o.options,c=o.selected,u=t.state.facet(M);this.optionContent=function(e){var t=e.addToOptions.slice();return e.icons&&t.push({render:function(e){var t,n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&(t=n.classList).add.apply(t,(0,a.Z)(e.type.split(/\s+/g).map((function(e){return"cm-completionIcon-"+e})))),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render:function(e,t,n){var i=document.createElement("span");i.className="cm-completionLabel";for(var r=e.label,o=0,a=1;a<n.length;){var s=n[a++],c=n[a++];s>o&&i.appendChild(document.createTextNode(r.slice(o,s)));var l=i.appendChild(document.createElement("span"));l.appendChild(document.createTextNode(r.slice(s,c))),l.className="cm-completionMatchedText",o=c}return o<r.length&&i.appendChild(document.createTextNode(r.slice(o))),i},position:50},{render:function(e){if(!e.detail)return null;var t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((function(e,t){return e.position-t.position})).map((function(e){return e.render}))}(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=R(s.length,c,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(function(e){for(var n,r=e.target;r&&r!=i.dom;r=r.parentNode)if("LI"==r.nodeName&&(n=/-(\d+)$/.exec(r.id))&&+n[1]<s.length)return P(t,s[+n[1]]),void e.preventDefault()})),this.dom.addEventListener("focusout",(function(e){var n=t.state.field(i.stateField,!1);n&&n.tooltip&&t.state.facet(M).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:Z.of(null)})})),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",(function(){i.info&&i.view.requestMeasure(i.placeInfoReq)}))}return(0,u.Z)(e,[{key:"mount",value:function(){this.updateSel()}},{key:"update",value:function(e){var t,n,i,r=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=o&&(this.updateSel(),(null===(t=r.open)||void 0===t?void 0:t.disabled)!=(null===(n=o.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(i=r.open)||void 0===i?void 0:i.disabled)))}},{key:"updateTooltipClass",value:function(e){var t=this.tooltipClass(e);if(t!=this.currentClass){var n,i=(0,c.Z)(this.currentClass.split(" "));try{for(i.s();!(n=i.n()).done;){var r=n.value;r&&this.dom.classList.remove(r)}}catch(l){i.e(l)}finally{i.f()}var o,a=(0,c.Z)(t.split(" "));try{for(a.s();!(o=a.n()).done;){var s=o.value;s&&this.dom.classList.add(s)}}catch(l){a.e(l)}finally{a.f()}this.currentClass=t}}},{key:"positioned",value:function(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}},{key:"updateSel",value:function(){var e=this,t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=R(n.options.length,n.selected,this.view.state.facet(M).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,t.id,this.range)),this.list.addEventListener("scroll",(function(){e.info&&e.view.requestMeasure(e.placeInfoReq)}))),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);var i=n.options[n.selected].completion,r=i.info;if(!r)return;var o="string"==typeof r?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then((function(n){n&&e.view.state.field(e.stateField,!1)==t&&e.addInfoPane(n)})).catch((function(t){return(0,f.OO)(e.view.state,t,"completion info")})):this.addInfoPane(o)}}},{key:"addInfoPane",value:function(e){var t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfoReq)}},{key:"updateSelectedOption",value:function(e){for(var t=null,n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return t&&function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<n.top?e.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(e.scrollTop+=i.bottom-n.bottom)}(this.list,t),t}},{key:"measureInfo",value:function(){var e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;var t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){var o=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(M).positionInfo(this.view,t,i,n,r)}},{key:"placeInfo",value:function(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}},{key:"createListBox",value:function(e,t,n){var i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(var r=null,o=n.from;o<n.to;o++){var a=e[o],s=a.completion,l=a.match,u=s.section;if(u){var h="string"==typeof u?u:u.name;if(h!=r&&(o>n.from||0==n.from))if(r=h,"string"!=typeof u&&u.header)i.appendChild(u.header(u));else i.appendChild(document.createElement("completion-section")).textContent=h}var f=i.appendChild(document.createElement("li"));f.id=t+"-"+o,f.setAttribute("role","option");var p=this.optionClass(s);p&&(f.className=p);var d,m=(0,c.Z)(this.optionContent);try{for(m.s();!(d=m.n()).done;){var v=(0,d.value)(s,this.view.state,l);v&&f.appendChild(v)}}catch(g){m.e(g)}finally{m.f()}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}]),e}();function O(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}var E=function(){function e(t,n,i,r,o,a){(0,l.Z)(this,e),this.options=t,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=a}return(0,u.Z)(e,[{key:"setSelected",value:function(t,n){return t==this.selected||t>=this.options.length?this:new e(this.options,j(n,t),this.tooltip,this.timestamp,t,this.disabled)}},{key:"map",value:function(t){return new e(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}],[{key:"build",value:function(t,n,i,r,o){var a=function(e,t){var n,i=[],r=null,o=function(e){i.push(e);var t=e.completion.section;if(t){r||(r=[]);var n="string"==typeof t?t:t.name;r.some((function(e){return e.name==n}))||r.push("string"==typeof t?{name:n}:t)}},a=(0,c.Z)(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.hasResult())if(!1===s.result.filter){var l,u=s.result.getMatch,h=(0,c.Z)(s.result.options);try{for(h.s();!(l=h.n()).done;){var f=l.value,p=[1e9-i.length];if(u){var d,m=(0,c.Z)(u(f));try{for(m.s();!(d=m.n()).done;){var v=d.value;p.push(v)}}catch($){m.e($)}finally{m.f()}}o(new g(f,s.source,p,p[0]))}}catch($){h.e($)}finally{h.f()}}else{var y,b=new S(t.sliceDoc(s.from,s.to)),k=void 0,x=(0,c.Z)(s.result.options);try{for(x.s();!(y=x.n()).done;){var w=y.value;(k=b.match(w.label))&&o(new g(w,s.source,k,k[0]+(w.boost||0)))}}catch($){x.e($)}finally{x.f()}}}}catch($){a.e($)}finally{a.f()}if(r){var C,Z=Object.create(null),L=0,T=(0,c.Z)(r.sort((function(e,t){var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)})));try{for(T.s();!(C=T.n()).done;){var D=C.value;L-=1e5,Z[D.name]=L}}catch($){T.e($)}finally{T.f()}var I,A=(0,c.Z)(i);try{for(A.s();!(I=A.n()).done;){var P=I.value,R=P.completion.section;R&&(P.score+=Z["string"==typeof R?R:R.name])}}catch($){A.e($)}finally{A.f()}}var q,E=[],W=null,F=t.facet(M).compareCompletions,j=(0,c.Z)(i.sort((function(e,t){return t.score-e.score||F(e.completion,t.completion)})));try{for(j.s();!(q=j.n()).done;){var B=q.value;!W||W.label!=B.completion.label||W.detail!=B.completion.detail||null!=W.type&&null!=B.completion.type&&W.type!=B.completion.type||W.apply!=B.completion.apply?E.push(B):O(B.completion)>O(W)&&(E[E.length-1]=B),W=B.completion}}catch($){j.e($)}finally{j.f()}return E}(t,n);if(!a.length)return r&&t.some((function(e){return 1==e.state}))?new e(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;var s,l=n.facet(M).selectOnOpen?0:-1;if(r&&r.selected!=l&&-1!=r.selected)for(var u=r.options[r.selected].completion,h=0;h<a.length;h++)if(a[h].completion==u){l=h;break}return new e(a,j(i,l),{pos:t.reduce((function(e,t){return t.hasResult()?Math.min(e,t.from):e}),1e8),create:(s=Q,function(e){return new q(e,s)}),above:o.aboveCursor},r?r.timestamp:Date.now(),l,!1)}}]),e}(),W=function(){function e(t,n,i){(0,l.Z)(this,e),this.active=t,this.id=n,this.open=i}return(0,u.Z)(e,[{key:"update",value:function(t){var n=this,i=t.state,r=i.facet(M),o=(r.override||i.languageDataAt("autocomplete",y(i)).map(w)).map((function(e){return(n.active.find((function(t){return t.source==e}))||new z(e,n.active.some((function(e){return 0!=e.state}))?1:0)).update(t,r)}));o.length==this.active.length&&o.every((function(e,t){return e==n.active[t]}))&&(o=this.active);var a=this.open;a&&t.docChanged&&(a=a.map(t.changes)),t.selection||o.some((function(e){return e.hasResult()&&t.changes.touchesRange(e.from,e.to)}))||!function(e,t){if(e==t)return!0;for(var n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;var r=n==e.length,o=i==t.length;if(r||o)return r==o;if(e[n++].result!=t[i++].result)return!1}}(o,this.active)?a=E.build(o,i,this.id,a,r):a&&a.disabled&&!o.some((function(e){return 1==e.state}))&&(a=null),!a&&o.every((function(e){return 1!=e.state}))&&o.some((function(e){return e.hasResult()}))&&(o=o.map((function(e){return e.hasResult()?new z(e.source,0):e})));var s,l=(0,c.Z)(t.effects);try{for(l.s();!(s=l.n()).done;){var u=s.value;u.is(_)&&(a=a&&a.setSelected(u.value,this.id))}}catch(h){l.e(h)}finally{l.f()}return o==this.active&&a==this.open?this:new e(o,this.id,a)}},{key:"tooltip",get:function(){return this.open?this.open.tooltip:null}},{key:"attrs",get:function(){return this.open?this.open.attrs:F}}],[{key:"start",value:function(){return new e(B,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}}]),e}();var F={"aria-autocomplete":"list"};function j(e,t){var n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}var B=[];function $(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}var z=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,l.Z)(this,e),this.source=t,this.state=n,this.explicitPos=i}return(0,u.Z)(e,[{key:"hasResult",value:function(){return!1}},{key:"update",value:function(t,n){var i=$(t),r=this;i?r=r.handleUserEvent(t,i,n):t.docChanged?r=r.handleChange(t):t.selection&&0!=r.state&&(r=new e(r.source,0));var o,a=(0,c.Z)(t.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.is(C))r=new e(r.source,1,s.value?y(t.state):-1);else if(s.is(Z))r=new e(r.source,0);else if(s.is(U)){var l,u=(0,c.Z)(s.value);try{for(u.s();!(l=u.n()).done;){var h=l.value;h.source==r.source&&(r=h)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){a.e(f)}finally{a.f()}return r}},{key:"handleUserEvent",value:function(t,n,i){return"delete"!=n&&i.activateOnTyping?new e(this.source,1):this.map(t.changes)}},{key:"handleChange",value:function(t){return t.changes.touchesRange(y(t.startState))?new e(this.source,0):this.map(t.changes)}},{key:"map",value:function(t){return t.empty||this.explicitPos<0?this:new e(this.source,this.state,t.mapPos(this.explicitPos))}}]),e}(),N=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(e,i,r,o,a){var s;return(0,l.Z)(this,n),(s=t.call(this,e,2,i)).result=r,s.from=o,s.to=a,s}return(0,u.Z)(n,[{key:"hasResult",value:function(){return!0}},{key:"handleUserEvent",value:function(e,t,i){var r,o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=y(e.state);if((this.explicitPos<0?s<=o:s<this.from)||s>a||"delete"==t&&y(e.startState)==this.from)return new z(this.source,"input"==t&&i.activateOnTyping?1:0);var c,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,i){if(!e)return!1;var r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):b(e,!0).test(r)}(this.result.validFor,e.state,o,a)?new n(this.source,l,this.result,o,a):this.result.update&&(c=this.result.update(this.result,o,a,new d(e.state,s,l>=0)))?new n(this.source,l,c,c.from,null!==(r=c.to)&&void 0!==r?r:y(e.state)):new z(this.source,1,l)}},{key:"handleChange",value:function(e){return e.changes.touchesRange(this.from,this.to)?new z(this.source,0):this.map(e.changes)}},{key:"map",value:function(e){return e.empty?this:new n(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}]),n}(z);var U=h.Py.define({map:function(e,t){return e.map((function(e){return e.map(t)}))}}),_=h.Py.define(),Q=h.QQ.define({create:function(){return W.start()},update:function(e,t){return e.update(t)},provide:function(e){return[f.hJ.from(e,(function(e){return e.tooltip})),f.tk.contentAttributes.from(e,(function(e){return e.attrs}))]}}),H=f.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ’'"}},".cm-completionIcon-class":{"&:after":{content:"'â—‹'"}},".cm-completionIcon-interface":{"&:after":{content:"'â—Œ'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð‘¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð‘¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âˆª'"}},".cm-completionIcon-property":{"&:after":{content:"'â–¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðŸ”‘ï¸Ž'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â–¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var K=new(function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(h.uU));K.startSide=1,K.endSide=-1;"object"==("undefined"==typeof navigator?"undefined":(0,i.Z)(navigator))&&navigator.userAgent;function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Q,M.of(e),A,J,H]}var G=[{key:"Ctrl-Space",run:function(e){return!!e.state.field(Q,!1)&&(e.dispatch({effects:C.of(!0)}),!0)}},{key:"Escape",run:function(e){var t=e.state.field(Q,!1);return!(!t||!t.active.some((function(e){return 0!=e.state})))&&(e.dispatch({effects:Z.of(null)}),!0)}},{key:"ArrowDown",run:D(!0)},{key:"ArrowUp",run:D(!1)},{key:"PageDown",run:D(!0,"page")},{key:"PageUp",run:D(!1,"page")},{key:"Enter",run:function(e){var t=e.state.field(Q,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(M).interactionDelay)&&(!!t.open.disabled||P(e,t.open.options[t.open.selected]))}}],J=h.Wl.highest(f.$f.computeN([M],(function(e){return e.facet(M).defaultKeymap?[G]:[]})))},17429:function(e,t,n){n.d(t,{b:function(){return l}});var i=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","do","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","set","raw","endraw","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","call","endcall","macro","endmacro","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","without","context","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","pluralize","autoescape","endautoescape"],r=/^[+\-*&%=<>!?|~^]/,o=/^[:\[\(\{]/,a=["true","false"],s=/^(\d[+\-\*\/])?\d+(\.\d+)?/;function c(e,t){var n=e.peek();if(t.incomment)return e.skipTo("#}")?(e.eatWhile(/\#|}/),t.incomment=!1):e.skipToEnd(),"comment";if(t.intag){if(t.operator){if(t.operator=!1,e.match(a))return"atom";if(e.match(s))return"number"}if(t.sign){if(t.sign=!1,e.match(a))return"atom";if(e.match(s))return"number"}if(t.instring)return n==t.instring&&(t.instring=!1),e.next(),"string";if("'"==n||'"'==n)return t.instring=n,e.next(),"string";if(t.inbraces>0&&")"==n)e.next(),t.inbraces--;else if("("==n)e.next(),t.inbraces++;else if(t.inbrackets>0&&"]"==n)e.next(),t.inbrackets--;else if("["==n)e.next(),t.inbrackets++;else{if(!t.lineTag&&(e.match(t.intag+"}")||e.eat("-")&&e.match(t.intag+"}")))return t.intag=!1,"tag";if(e.match(r))return t.operator=!0,"operator";if(e.match(o))t.sign=!0;else{if(1==e.column()&&t.lineTag&&e.match(i))return"keyword";if(e.eat(" ")||e.sol()){if(e.match(i))return"keyword";if(e.match(a))return"atom";if(e.match(s))return"number";e.sol()&&e.next()}else e.next()}}return"variable"}if(e.eat("{")){if(e.eat("#"))return t.incomment=!0,e.skipTo("#}")?(e.eatWhile(/\#|}/),t.incomment=!1):e.skipToEnd(),"comment";if(n=e.eat(/\{|%/))return t.intag=n,t.inbraces=0,t.inbrackets=0,"{"==n&&(t.intag="}"),e.eat("-"),"tag"}else if(e.eat("#")){if("#"==e.peek())return e.skipToEnd(),"comment";if(!e.eol())return t.intag=!0,t.lineTag=!0,t.inbraces=0,t.inbrackets=0,"tag"}e.next()}i=new RegExp("(("+i.join(")|(")+"))\\b"),a=new RegExp("(("+a.join(")|(")+"))\\b");var l={name:"jinja2",startState:function(){return{tokenize:c,inbrackets:0,inbraces:0}},token:function(e,t){var n=t.tokenize(e,t);return e.eol()&&t.lineTag&&!t.instring&&0==t.inbraces&&0==t.inbrackets&&(t.intag=!1,t.lineTag=!1),n},languageData:{commentTokens:{block:{open:"{#",close:"#}",line:"##"}}}}},76697:function(e,t,n){n.d(t,{r:function(){return r}});var i=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i"),r={name:"yaml",token:function(e,t){var n=e.peek(),r=t.escaped;if(t.escaped=!1,"#"==n&&(0==e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(t.literal&&e.indentation()>t.keyCol)return e.skipToEnd(),"string";if(t.literal&&(t.literal=!1),e.sol()){if(t.keyCol=0,t.pair=!1,t.pairStart=!1,e.match("---"))return"def";if(e.match("..."))return"def";if(e.match(/^\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return"{"==n?t.inlinePairs++:"}"==n?t.inlinePairs--:"["==n?t.inlineList++:t.inlineList--,"meta";if(t.inlineList>0&&!r&&","==n)return e.next(),"meta";if(t.inlinePairs>0&&!r&&","==n)return t.keyCol=0,t.pair=!1,t.pairStart=!1,e.next(),"meta";if(t.pairStart){if(e.match(/^\s*(\||\>)\s*/))return t.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(0==t.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(t.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(i))return"keyword"}return!t.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(t.pair=!0,t.keyCol=e.indentation(),"atom"):t.pair&&e.match(/^:\s*/)?(t.pairStart=!0,"meta"):(t.pairStart=!1,t.escaped="\\"==n,e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}}},39011:function(e,t,n){n.d(t,{sW:function(){return I},Lp:function(){return ue}});var i=n(53709),r=n(69205),o=n(70906),a=n(76775),s=n(40039),c=n(68990),l=n(71650),u=n(33368),h=n(51764),f=n(74075);function p(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==(0,a.Z)(n)&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?e.setAttribute(i,r):null!=r&&(e[i]=r)}t++}for(;t<arguments.length;t++)d(e,arguments[t]);return e}function d(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)d(e,t[n])}}var m="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},v=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;(0,l.Z)(this,e),this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,r),this.bufferStart=i,this.normalize=o?function(e){return o(m(e))}:m,this.query=this.normalize(n)}return(0,u.Z)(e,[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,f.gm)(this.buffer,this.bufferPos)}},{key:"next",value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=(0,f.bg)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,f.nZ)(e);for(var i=this.normalize(t),r=0,o=n;;r++){var a=i.charCodeAt(r),s=this.match(a,o);if(s)return this.value=s,this;if(r==i.length-1)break;o==n&&r<t.length&&t.charCodeAt(r)==a&&o++}}}},{key:"match",value:function(e,t){for(var n=null,i=0;i<this.matches.length;i+=2){var r=this.matches[i],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?n={from:this.matches[i+1],to:t+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}]),e}();"undefined"!=typeof Symbol&&(v.prototype[Symbol.iterator]=function(){return this});var g={from:-1,to:-1,match:/.*/.exec("")},y="gm"+(null==/x/.unicode?"":"u"),b=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length;if((0,l.Z)(this,e),this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=g,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new w(t,n,i,r,o);this.re=new RegExp(n,y+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.iter=t.iter();var a=t.lineAt(r);this.curLineStart=a.from,this.matchPos=C(t,r),this.getLine(this.curLineStart)}return(0,u.Z)(e,[{key:"getLine",value:function(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}},{key:"nextLine",value:function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}},{key:"next",value:function(){for(var e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;var t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){var n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=C(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}]),e}(),k=new WeakMap,x=function(){function e(t,n){(0,l.Z)(this,e),this.from=t,this.text=n}return(0,u.Z)(e,[{key:"to",get:function(){return this.from+this.text.length}}],[{key:"get",value:function(t,n,i){var r=k.get(t);if(!r||r.from>=i||r.to<=n){var o=new e(n,t.sliceString(n,i));return k.set(t,o),o}if(r.from==n&&r.to==i)return r;var a=r.text,s=r.from;return s>n&&(a=t.sliceString(n,s)+a,s=n),r.to<i&&(a+=t.sliceString(r.to,i)),k.set(t,new e(s,a)),new e(n,a.slice(n-s,i-s))}}]),e}(),w=function(){function e(t,n,i,r,o){(0,l.Z)(this,e),this.text=t,this.to=o,this.done=!1,this.value=g,this.matchPos=C(t,r),this.re=new RegExp(n,y+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.flat=x.get(t,r,this.chunkEnd(r+5e3))}return(0,u.Z)(e,[{key:"chunkEnd",value:function(e){return e>=this.to?this.to:this.text.lineAt(e).to}},{key:"next",value:function(){for(;;){var e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){var n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=C(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=x.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}]),e}();function C(e,t){if(t>=e.length)return t;for(var n,i=e.lineAt(t);t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}function Z(e){var t=p("input",{class:"cm-textfield",name:"line"});function n(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(n){var i=e.state,r=i.doc.lineAt(i.selection.main.head),o=(0,c.Z)(n,5),a=o[1],s=o[2],l=o[3],u=o[4],h=l?+l.slice(1):0,p=s?+s:r.number;if(s&&u){var d=p/100;a&&(d=d*("-"==a?-1:1)+r.number/i.doc.lines),p=Math.round(i.doc.lines*d)}else s&&a&&(p=p*("-"==a?-1:1)+r.number);var m=i.doc.line(Math.max(1,Math.min(i.doc.lines,p)));e.dispatch({effects:S.of(!1),selection:f.jT.cursor(m.from+Math.max(0,Math.min(h,m.length))),scrollIntoView:!0}),e.focus()}}return{dom:p("form",{class:"cm-gotoLine",onkeydown:function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({effects:S.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:function(e){e.preventDefault(),n()}},p("label",e.state.phrase("Go to line"),": ",t)," ",p("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(b.prototype[Symbol.iterator]=w.prototype[Symbol.iterator]=function(){return this});var S=f.Py.define(),M=f.QQ.define({create:function(){return!0},update:function(e,t){var n,i=(0,s.Z)(t.effects);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.is(S)&&(e=r.value)}}catch(o){i.e(o)}finally{i.f()}return e},provide:function(e){return h.mH.from(e,(function(e){return e?Z:null}))}}),L=h.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),T={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},D=f.r$.define({combine:function(e){return(0,f.BO)(e,T,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}});function I(e){var t=[O,q];return e&&t.push(D.of(e)),t}var A=h.p.mark({class:"cm-selectionMatch"}),P=h.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function R(e,t,n,i){return!(0!=n&&e(t.sliceDoc(n-1,n))==f.D0.Word||i!=t.doc.length&&e(t.sliceDoc(i,i+1))==f.D0.Word)}var q=h.lg.fromClass(function(){function e(t){(0,l.Z)(this,e),this.decorations=this.getDeco(t)}return(0,u.Z)(e,[{key:"update",value:function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t=e.state.facet(D),n=e.state,i=n.selection;if(i.ranges.length>1)return h.p.none;var r,o=i.main,a=null;if(o.empty){if(!t.highlightWordAroundCursor)return h.p.none;var c=n.wordAt(o.head);if(!c)return h.p.none;a=n.charCategorizer(o.head),r=n.sliceDoc(c.from,c.to)}else{var l=o.to-o.from;if(l<t.minSelectionLength||l>200)return h.p.none;if(t.wholeWords){if(r=n.sliceDoc(o.from,o.to),!R(a=n.charCategorizer(o.head),n,o.from,o.to)||!function(e,t,n,i){return e(t.sliceDoc(n,n+1))==f.D0.Word&&e(t.sliceDoc(i-1,i))==f.D0.Word}(a,n,o.from,o.to))return h.p.none}else if(!(r=n.sliceDoc(o.from,o.to).trim()))return h.p.none}var u,p=[],d=(0,s.Z)(e.visibleRanges);try{for(d.s();!(u=d.n()).done;)for(var m=u.value,g=new v(n.doc,r,m.from,m.to);!g.next().done;){var y=g.value,b=y.from,k=y.to;if((!a||R(a,n,b,k))&&(o.empty&&b<=o.from&&k>=o.to?p.push(P.range(b,k)):(b>=o.to||k<=o.from)&&p.push(A.range(b,k)),p.length>t.maxMatches))return h.p.none}}catch(x){d.e(x)}finally{d.f()}return h.p.set(p)}}]),e}(),{decorations:function(e){return e.decorations}}),O=h.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var E=f.r$.define({combine:function(e){return(0,f.BO)(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:function(e){return new he(e)},scrollToMatch:function(e){return h.tk.scrollIntoView(e)}})}});var W=function(){function e(t){(0,l.Z)(this,e),this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,y),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}return(0,u.Z)(e,[{key:"unquote",value:function(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"}))}},{key:"eq",value:function(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}},{key:"create",value:function(){return this.regexp?new U(this):new B(this)}},{key:"getCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=e.doc?e:f.yy.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?$(this,i,t,n):j(this,i,t,n)}}]),e}(),F=(0,u.Z)((function e(t){(0,l.Z)(this,e),this.spec=t}));function j(e,t,n,i){return new v(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:function(e){return e.toLowerCase()},e.wholeWord?(r=t.doc,o=t.charCategorizer(t.selection.main.head),function(e,t,n,i){return(i>e||i+n.length<t)&&(i=Math.max(0,e-2),n=r.sliceString(i,Math.min(r.length,t+2))),!(o(z(n,e-i))==f.D0.Word&&o(N(n,e-i))==f.D0.Word||o(N(n,t-i))==f.D0.Word&&o(z(n,t-i))==f.D0.Word)}):void 0);var r,o}var B=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,u.Z)(n,[{key:"nextMatch",value:function(e,t,n){var i=j(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=j(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var i=n;;){for(var r=Math.max(t,i-1e4-this.spec.unquoted.length),o=j(this.spec,e,r,i),a=null;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==t)return null;i-=1e4}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}},{key:"getReplacement",value:function(e){return this.spec.unquote(this.spec.replace)}},{key:"matchAll",value:function(e,t){for(var n=j(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}},{key:"highlight",value:function(e,t,n,i){for(var r=j(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)}}]),n}(F);function $(e,t,n,i){return new b(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),function(e,t,n){return!n[0].length||(r(z(n.input,n.index))!=f.D0.Word||r(N(n.input,n.index))!=f.D0.Word)&&(r(N(n.input,n.index+n[0].length))!=f.D0.Word||r(z(n.input,n.index+n[0].length))!=f.D0.Word)}):void 0},n,i);var r}function z(e,t){return e.slice((0,f.cp)(e,t,!1),t)}function N(e,t){return e.slice(t,(0,f.cp)(e,t))}var U=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"nextMatch",value:function(e,t,n){var i=$(this.spec,e,n,e.doc.length).next();return i.done&&(i=$(this.spec,e,0,t).next()),i.done?null:i.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var i=1;;i++){for(var r=Math.max(t,n-1e4*i),o=$(this.spec,e,r,n),a=null;!o.next().done;)a=o.value;if(a&&(r==t||a.from>r+10))return a;if(r==t)return null}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}},{key:"getReplacement",value:function(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(function(t,n){return"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t})))}},{key:"matchAll",value:function(e,t){for(var n=$(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}},{key:"highlight",value:function(e,t,n,i){for(var r=$(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)}}]),n}(F),_=f.Py.define(),Q=f.Py.define(),H=f.QQ.define({create:function(e){return new K(oe(e).create(),null)},update:function(e,t){var n,i=(0,s.Z)(t.effects);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.is(_)?e=new K(r.value.create(),e.panel):r.is(Q)&&(e=new K(e.query,r.value?re:null))}}catch(o){i.e(o)}finally{i.f()}return e},provide:function(e){return h.mH.from(e,(function(e){return e.panel}))}});var K=(0,u.Z)((function e(t,n){(0,l.Z)(this,e),this.query=t,this.panel=n})),V=h.p.mark({class:"cm-searchMatch"}),G=h.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),J=h.lg.fromClass(function(){function e(t){(0,l.Z)(this,e),this.view=t,this.decorations=this.highlight(t.state.field(H))}return(0,u.Z)(e,[{key:"update",value:function(e){var t=e.state.field(H);(t!=e.startState.field(H)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}},{key:"highlight",value:function(e){var t=e.query;if(!e.panel||!t.spec.valid)return h.p.none;for(var n=this.view,i=new f.f_,r=0,o=n.visibleRanges,a=o.length;r<a;r++){for(var s=o[r],c=s.from,l=s.to;r<a-1&&l>o[r+1].from-500;)l=o[++r].to;t.highlight(n.state,c,l,(function(e,t){var r=n.state.selection.ranges.some((function(n){return n.from==e&&n.to==t}));i.add(e,t,r?G:V)}))}return i.finish()}}]),e}(),{decorations:function(e){return e.decorations}});function X(e){return function(t){var n=t.state.field(H,!1);return n&&n.query.spec.valid?e(t,n):ce(t)}}var Y=X((function(e,t){var n=t.query,i=e.state.selection.main.to,r=n.nextMatch(e.state,i,i);if(!r)return!1;var o=f.jT.single(r.from,r.to),a=e.state.facet(E);return e.dispatch({selection:o,effects:[me(e,r),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),se(e),!0})),ee=X((function(e,t){var n=t.query,i=e.state,r=i.selection.main.from,o=n.prevMatch(i,r,r);if(!o)return!1;var a=f.jT.single(o.from,o.to),s=e.state.facet(E);return e.dispatch({selection:a,effects:[me(e,o),s.scrollToMatch(a.main,e)],userEvent:"select.search"}),se(e),!0})),te=X((function(e,t){var n=t.query.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:f.jT.create(n.map((function(e){return f.jT.range(e.from,e.to)}))),userEvent:"select.search.matches"}),!0)})),ne=X((function(e,t){var n=t.query,i=e.state,r=i.selection.main,o=r.from,a=r.to;if(i.readOnly)return!1;var s=n.nextMatch(i,o,o);if(!s)return!1;var c,l,u=[],p=[];if(s.from==o&&s.to==a&&(l=i.toText(n.getReplacement(s)),u.push({from:s.from,to:s.to,insert:l}),s=n.nextMatch(i,s.from,s.to),p.push(h.tk.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(o).number)+"."))),s){var d=0==u.length||u[0].from>=s.to?0:s.to-s.from-l.length;c=f.jT.single(s.from-d,s.to-d),p.push(me(e,s)),p.push(i.facet(E).scrollToMatch(c.main,e))}return e.dispatch({changes:u,selection:c,effects:p,userEvent:"input.replace"}),!0})),ie=X((function(e,t){var n=t.query;if(e.state.readOnly)return!1;var i=n.matchAll(e.state,1e9).map((function(e){return{from:e.from,to:e.to,insert:n.getReplacement(e)}}));if(!i.length)return!1;var r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:h.tk.announce.of(r),userEvent:"input.replace.all"}),!0}));function re(e){return e.state.facet(E).createPanel(e)}function oe(e,t){var n,i,r,o,a=e.selection.main,s=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!s)return t;var c=e.facet(E);return new W({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:c.literal)?s:s.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==t?void 0:t.caseSensitive)&&void 0!==i?i:c.caseSensitive,literal:null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:c.literal,wholeWord:null!==(o=null==t?void 0:t.wholeWord)&&void 0!==o?o:c.wholeWord})}function ae(e){var t=(0,h.Sd)(e,re);return t&&t.dom.querySelector("[main-field]")}function se(e){var t=ae(e);t&&t==e.root.activeElement&&t.select()}var ce=function(e){var t=e.state.field(H,!1);if(t&&t.panel){var n=ae(e);if(n&&n!=e.root.activeElement){var i=oe(e.state,t.query.spec);i.valid&&e.dispatch({effects:_.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[Q.of(!0),t?_.of(oe(e.state,t.query.spec)):f.Py.appendConfig.of(ge)]});return!0},le=function(e){var t=e.state.field(H,!1);if(!t||!t.panel)return!1;var n=(0,h.Sd)(e,re);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Q.of(!1)}),!0},ue=[{key:"Mod-f",run:ce,scope:"editor search-panel"},{key:"F3",run:Y,shift:ee,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Y,shift:ee,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:le,scope:"editor search-panel"},{key:"Mod-Shift-l",run:function(e){var t=e.state,n=e.dispatch,i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;for(var r=i.main,o=r.from,a=r.to,s=[],c=0,l=new v(t.doc,t.sliceDoc(o,a));!l.next().done;){if(s.length>1e3)return!1;l.value.from==o&&(c=s.length),s.push(f.jT.range(l.value.from,l.value.to))}return n(t.update({selection:f.jT.create(s,c),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:function(e){var t=(0,h.Sd)(e,Z);if(!t){var n=[S.of(!0)];null==e.state.field(M,!1)&&n.push(f.Py.appendConfig.of([M,L])),e.dispatch({effects:n}),t=(0,h.Sd)(e,Z)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:function(e){var t=e.state,n=e.dispatch,i=t.selection.ranges;if(i.some((function(e){return e.from===e.to})))return function(e){var t=e.state,n=e.dispatch,i=t.selection,r=f.jT.create(i.ranges.map((function(e){return t.wordAt(e.head)||f.jT.cursor(e.head)})),i.mainIndex);return!r.eq(i)&&(n(t.update({selection:r})),!0)}({state:t,dispatch:n});var r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some((function(e){return t.sliceDoc(e.from,e.to)!=r})))return!1;var o=function(e,t){for(var n=e.selection,i=n.main,r=n.ranges,o=e.wordAt(i.head),s=o&&o.from==i.from&&o.to==i.to,c=function(n,i){if(i.next(),!i.done){if(n&&r.some((function(e){return e.from==i.value.from})))return l=n,u=i,"continue";if(s){var o=e.wordAt(i.value.from);if(!o||o.from!=i.value.from||o.to!=i.value.to)return l=n,u=i,"continue"}return{v:i.value}}if(n)return{v:null};i=new v(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),l=n=!0,u=i},l=!1,u=new v(e.doc,t,r[r.length-1].to);;){var h=c(l,u);if("continue"!==h&&"object"===(0,a.Z)(h))return h.v}}(t,r);return!!o&&(n(t.update({selection:t.selection.addRange(f.jT.range(o.from,o.to),!1),effects:h.tk.scrollIntoView(o.to)})),!0)},preventDefault:!0}],he=function(){function e(t){var n=this;(0,l.Z)(this,e),this.view=t;var r=this.query=t.state.field(H).query.spec;function o(e,t,n){return p("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=p("input",{value:r.search,placeholder:fe(t,"Find"),"aria-label":fe(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=p("input",{value:r.replace,placeholder:fe(t,"Replace"),"aria-label":fe(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=p("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=p("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=p("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit}),this.dom=p("div",{onkeydown:function(e){return n.keydown(e)},class:"cm-search"},[this.searchField,o("next",(function(){return Y(t)}),[fe(t,"next")]),o("prev",(function(){return ee(t)}),[fe(t,"previous")]),o("select",(function(){return te(t)}),[fe(t,"all")]),p("label",null,[this.caseField,fe(t,"match case")]),p("label",null,[this.reField,fe(t,"regexp")]),p("label",null,[this.wordField,fe(t,"by word")])].concat((0,i.Z)(t.state.readOnly?[]:[p("br"),this.replaceField,o("replace",(function(){return ne(t)}),[fe(t,"replace")]),o("replaceAll",(function(){return ie(t)}),[fe(t,"replace all")])]),[p("button",{name:"close",onclick:function(){return le(t)},"aria-label":fe(t,"close"),type:"button"},["Ã—"])]))}return(0,u.Z)(e,[{key:"commit",value:function(){var e=new W({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_.of(e)}))}},{key:"keydown",value:function(e){(0,h.$1)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ee:Y)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),ne(this.view))}},{key:"update",value:function(e){var t,n=(0,s.Z)(e.transactions);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,o=(0,s.Z)(r.effects);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.is(_)&&!a.value.eq(this.query)&&this.setQuery(a.value)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}}},{key:"setQuery",value:function(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}},{key:"mount",value:function(){this.searchField.select()}},{key:"pos",get:function(){return 80}},{key:"top",get:function(){return this.view.state.facet(E).top}}]),e}();function fe(e,t){return e.state.phrase(t)}var pe=30,de=/[\s\.,:;?!]/;function me(e,t){var n=t.from,i=t.to,r=e.state.doc.lineAt(n),o=e.state.doc.lineAt(i).to,a=Math.max(r.from,n-pe),s=Math.min(o,i+pe),c=e.state.sliceDoc(a,s);if(a!=r.from)for(var l=0;l<pe;l++)if(!de.test(c[l+1])&&de.test(c[l])){c=c.slice(l);break}if(s!=o)for(var u=c.length-1;u>c.length-pe;u--)if(!de.test(c[u-1])&&de.test(c[u])){c=c.slice(0,u);break}return h.tk.announce.of("".concat(e.state.phrase("current match"),". ").concat(c," ").concat(e.state.phrase("on line")," ").concat(r.number,"."))}var ve=h.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ge=[H,f.Wl.lowest(J),ve]}}]);
//# sourceMappingURL=74561-9ULgpvPTEIo.js.map