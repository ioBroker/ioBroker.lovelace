{"version":3,"sources":["webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/components/ha-card.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/components/ha-icon.ts","webpack:///./src/common/entity/compute_state_domain.ts","webpack:///./src/components/entity/state-badge.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/common/util/debounce.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./src/components/ha-switch.ts","webpack:///./src/panels/config/ha-config-section.js","webpack:///./src/common/string/compare.ts","webpack:///src/mwc-switch-css.ts","webpack:///./src/data/device_registry.ts","webpack:///./src/data/area_registry.ts","webpack:///foundation.ts","webpack:///constants.ts","webpack:///src/mwc-switch-base.ts","webpack:///src/mwc-switch.ts","webpack:///./src/data/entity_registry.ts","webpack:///./src/data/device_automation.ts","webpack:///./src/common/entity/valid_entity_id.ts","webpack:///./src/common/search/search-input.ts","webpack:///./src/common/util/render-status.ts","webpack:///./src/data/config_entries.ts","webpack:///./src/components/data-table/sort_filter_worker.ts","webpack:///./src/components/ha-checkbox.ts","webpack:///./src/components/data-table/ha-data-table.ts","webpack:///./src/data/automation.ts","webpack:///./src/components/entity/ha-state-icon.js","webpack:///./src/panels/config/devices/ha-devices-data-table.ts","webpack:///./src/panels/config/entity_registry/show-dialog-entity-registry-detail.ts","webpack:///./src/panels/config/devices/ha-config-devices-dashboard.ts","webpack:///./src/dialogs/device-registry-detail/show-dialog-device-registry-detail.ts","webpack:///./src/panels/config/devices/device-detail/ha-device-card.ts","webpack:///./src/components/ha-chips.ts","webpack:///./node_modules/@material/chips/dist/mdc.chips.min.css","webpack:///./src/panels/config/devices/device-detail/ha-device-automation-card.ts","webpack:///./src/panels/config/devices/device-detail/ha-device-triggers-card.ts","webpack:///./src/panels/config/devices/device-detail/ha-device-conditions-card.ts","webpack:///./src/panels/config/devices/device-detail/ha-device-actions-card.ts","webpack:///./src/panels/config/devices/device-detail/ha-device-entities-card.ts","webpack:///./src/panels/config/devices/ha-config-device-page.ts","webpack:///./src/panels/config/devices/ha-config-devices.ts"],"names":["computeStateName","stateObj","undefined","attributes","friendly_name","computeObjectId","entity_id","replace","HaCard","property","css","html","this","header","LitElement","customElements","define","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","counter","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","notify","persistent_notification","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","zone","domainIcon","domain","state","console","warn","DEFAULT_DOMAIN_ICON","ironIconClass","get","loaded","HaIcon","node","eventName","methodName","_iconsetName","computeStateDomain","computeDomain","StateBadge","query","overrideIcon","stateIcon","changedProps","has","iconStyle","color","filter","hostStyle","backgroundImage","entity_picture","overrideImage","imageUrl","hass","hassUrl","display","hs_color","hue","sat","brightness","errorMessage","Object","assign","_icon","style","entityId","substr","indexOf","debounce","func","wait","timeout","immediate","args","context","later","apply","callNow","clearTimeout","setTimeout","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","domainIcons","binary_sensor","activated","device_class","cover","open","dclass","battery","Number","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","icon","MwcSwitch","customElement","HaSwitch","setProperty","classList","toggle","Boolean","_slot","assignedNodes","length","HaConfigSection","type","narrow","isWide","value","classes","PolymerElement","compare","a","b","caseInsensitiveCompare","toLowerCase","computeDeviceName","device","entities","name_by_user","name","fallbackDeviceName","localize","entity","states","updateDeviceRegistryEntry","deviceId","updates","callWS","device_id","fetchDeviceRegistry","conn","sendMessagePromise","subscribeDeviceRegistryUpdates","store","subscribeEvents","then","devices","setState","subscribeDeviceRegistry","onChange","createCollection","createAreaRegistryEntry","values","updateAreaRegistryEntry","areaId","area_id","deleteAreaRegistryEntry","fetchAreaRegistry","areas","sort","ent1","ent2","subscribeAreaRegistryUpdates","subscribeAreaRegistry","defineProperty","checked","disabled","mdcFoundationClass","e","mdcFoundation","handleChange","formElement","mdcRoot","setNativeControlChecked","setNativeControlDisabled","interactionNode","_changeHandler","rippleNode","ripple","setChecked","setDisabled","Switch","styles","computeEntityRegistryName","entry","updateEntityRegistryEntry","removeEntityRegistryEntry","fetchEntityRegistry","subscribeEntityRegistryUpdates","subscribeEntityRegistry","fetchDeviceActions","fetchDeviceConditions","fetchDeviceTriggers","fetchDeviceActionCapabilities","action","fetchDeviceConditionCapabilities","condition","fetchDeviceTriggerCapabilities","trigger","whitelist","deviceAutomationsEqual","includes","is","localizeDeviceAutomationAction","subtype","localizeDeviceAutomationCondition","localizeDeviceAutomationTrigger","validEntityId","isValidEntityId","test","createValidEntityId","input","_filterInputChanged","_clearSearch","fireEvent","String","_filterChanged","target","afterNextRender","cb","requestAnimationFrame","nextRender","Promise","resolve","getConfigEntries","callApi","deleteConfigEntry","configEntryId","getConfigEntrySystemOptions","entry_id","updateConfigEntrySystemOptions","params","addMethods","methods","module","exports","w","Worker","MwcCheckbox","HaCheckbox","HaDataTable","Array","MDCDataTableFoundation","queryAll","ev","_filter","detail","_worker","sortFilterWorker","properties","columnId","_filterable","columns","some","column","filterable","direction","_sortDirection","_sortColumn","clonedColumns","deepClone","forEach","title","template","_sortColumns","_filterData","_handleSearchChange","selectable","_handleHeaderRowCheckboxChange","_headerIndeterminate","_headerChecked","entries","map","columnEntry","key","sorted","sortable","classMap","_handleHeaderClick","repeat","_filteredData","row","id","_handleRowClick","_handleRowCheckboxChange","_checkedRows","addClassAtRowIndex","rowIndex","cssClasses","rowElements","add","getRowCount","data","getRowElements","getRowIdAtIndex","_getRowIdAtIndex","getRowIndexByChildElement","el","prototype","call","closest","getSelectedRowCount","isCheckboxAtRowIndexChecked","isHeaderRowCheckboxChecked","isRowsSelectable","notifyRowSelectionChanged","notifySelectedAll","notifyUnselectedAll","registerHeaderRowCheckbox","registerRowCheckboxes","removeClassAtRowIndex","remove","setAttributeAtRowIndex","attr","setAttribute","setHeaderRowCheckboxChecked","setHeaderRowCheckboxIndeterminate","indeterminate","setRowCheckboxCheckedAtIndex","_setRowChecked","startTime","Date","getTime","curRequest","filterProm","filterSortData","all","curTime","elapsed","getAttribute","_headerCheckbox","handleHeaderRowCheckboxChange","checkbox","rowId","handleRowCheckboxChange","bubbles","index","splice","selected","_debounceSearch","BaseElement","inititialAutomationEditorData","deleteAutomation","showAutomationEditor","navigate","getAutomationEditorInitData","HaStateIcon","memoizeOne","outputDevices","deviceLookup","deviceEntityLookup","push","entryLookup","areaLookup","area","config_entries","find","entryId","model","manufacturer","integration","entId","join","battery_entity","_batteryEntity","batteryEntity","_columns","_devices","_handleRowClicked","loadEntityRegistryDetailDialog","showEntityRegistryDetailDialog","element","systemLogDetailParams","dialogTag","dialogImport","dialogParams","loadDeviceRegistryDetailDialog","HaDeviceCard","_computeArea","via_device_id","_computeDeviceName","sw_version","dev","items","item","idx","_handleClick","unsafeCSS","HaDeviceAutomationCard","localizeDeviceAutomation","_localizeDeviceAutomation","oldHass","language","automations","headerKey","_handleAutomationClicked","_showDisabled","_showDisabledChanged","disabled_by","_openMoreInfo","stateName","_openEditEntry","currentTarget","HaConfigDevicePage","_computeEntityName","triggers","_triggers","conditions","_conditions","actions","_actions","_device","_entities","_showSettings","deviceRegistryDetailParams","updateEntry","async","oldDeviceName","newDeviceName","renameEntityid","showAdvanced","confirm","updateProms","newEntityId","newName","oldSearch","new_entity_id","HaConfigDevices","defaultPage","routes","dashboard","tag","cache","_loadData","_unsubs","pop","addEventListener","pageEl","_currentPage","routeTail","path","_entityRegistryEntries","_configEntries","_deviceRegistryEntries","_areas","configEntries","conf1","conf2","connection","HassRouterPage"],"mappings":"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","file":"chunk.8c26f4080cbde5bc9e32.js","sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateName = (stateObj: HassEntity): string => {\n  return stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n};\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nclass HaCard extends LitElement {\n  @property() public header?: string;\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 2px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0 2px 2px 0 rgba(0, 0, 0, 0.14),\n          0 1px 5px 0 rgba(0, 0, 0, 0.12),\n          0 3px 1px -2px rgba(0, 0, 0, 0.2)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 32px;\n        padding: 24px 16px 16px;\n        display: block;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`\n            <div class=\"card-header\">${this.header}</div>\n          `\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ncustomElements.define(\"ha-card\", HaCard);\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  counter: \"hass:counter\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  persistent_notification: \"hass:bell\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n  zone: \"hass:map-marker\",\n};\n\nexport const domainIcon = (domain: string, state?: string): string => {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n};\n","import { Constructor } from \"../types\";\n\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport const computeStateDomain = (stateObj: HassEntity) => {\n  return computeDomain(stateObj.entity_id);\n};\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  PropertyValues,\n  query,\n} from \"lit-element\";\nimport \"../ha-icon\";\nimport { computeStateDomain } from \"../../common/entity/compute_state_domain\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"../ha-icon\";\nimport { HomeAssistant } from \"../../types\";\n\nclass StateBadge extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public stateObj?: HassEntity;\n  @property() public overrideIcon?: string;\n  @property() public overrideImage?: string;\n  @query(\"ha-icon\") private _icon!: HaIcon;\n\n  protected render(): TemplateResult | void {\n    const stateObj = this.stateObj;\n\n    if (!stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        id=\"icon\"\n        data-domain=${computeStateDomain(stateObj)}\n        data-state=${stateObj.state}\n        .icon=${this.overrideIcon || stateIcon(stateObj)}\n      ></ha-icon>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\") || !this.stateObj) {\n      return;\n    }\n    const stateObj = this.stateObj;\n\n    const iconStyle: Partial<CSSStyleDeclaration> = {\n      color: \"\",\n      filter: \"\",\n    };\n    const hostStyle: Partial<CSSStyleDeclaration> = {\n      backgroundImage: \"\",\n    };\n    if (stateObj) {\n      // hide icon if we have entity picture\n      if (\n        (stateObj.attributes.entity_picture && !this.overrideIcon) ||\n        this.overrideImage\n      ) {\n        let imageUrl = this.overrideImage || stateObj.attributes.entity_picture;\n        if (this.hass) {\n          imageUrl = this.hass.hassUrl(imageUrl);\n        }\n        hostStyle.backgroundImage = `url(${imageUrl})`;\n        iconStyle.display = \"none\";\n      } else {\n        if (stateObj.attributes.hs_color) {\n          const hue = stateObj.attributes.hs_color[0];\n          const sat = stateObj.attributes.hs_color[1];\n          if (sat > 10) {\n            iconStyle.color = `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n          }\n        }\n        if (stateObj.attributes.brightness) {\n          const brightness = stateObj.attributes.brightness;\n          if (typeof brightness !== \"number\") {\n            const errorMessage = `Type error: state-badge expected number, but type of ${\n              stateObj.entity_id\n            }.attributes.brightness is ${typeof brightness} (${brightness})`;\n            // tslint:disable-next-line\n            console.warn(errorMessage);\n          }\n          // lowest brighntess will be around 50% (that's pretty dark)\n          iconStyle.filter = `brightness(${(brightness + 245) / 5}%)`;\n        }\n      }\n    }\n    Object.assign(this._icon.style, iconStyle);\n    Object.assign(this.style, hostStyle);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        color: var(--paper-item-icon-color, #44739e);\n        border-radius: 50%;\n        height: 40px;\n        text-align: center;\n        background-size: cover;\n        line-height: 40px;\n        vertical-align: middle;\n      }\n\n      ha-icon {\n        transition: color 0.3s ease-in-out, filter 0.3s ease-in-out;\n      }\n\n      /* Color the icon if light or sun is on */\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      /* Color the icon if unavailable */\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-badge\": StateBadge;\n  }\n}\n\ncustomElements.define(\"state-badge\", StateBadge);\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string => {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n};\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// tslint:disable-next-line: ban-types\nexport const debounce = <T extends Function>(\n  func: T,\n  wait,\n  immediate = false\n): T => {\n  let timeout;\n  // @ts-ignore\n  return function(...args) {\n    // tslint:disable:no-this-assignment\n    // @ts-ignore\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport { domainIcon } from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport const sensorIcon = (state: HassEntity) => {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n};\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\nimport { binarySensorIcon } from \"./binary_sensor_icon\";\n\nimport { computeDomain } from \"./compute_domain\";\nimport { domainIcon } from \"./domain_icon\";\nimport { coverIcon } from \"./cover_icon\";\nimport { sensorIcon } from \"./sensor_icon\";\nimport { inputDateTimeIcon } from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport const stateIcon = (state: HassEntity) => {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport const binarySensorIcon = (state: HassEntity) => {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n};\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { domainIcon } from \"./domain_icon\";\n\nexport const coverIcon = (state: HassEntity): string => {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    case \"door\":\n      return open ? \"hass:door-open\" : \"hass:door-closed\";\n    case \"shutter\":\n      return open ? \"hass:window-shutter-open\" : \"hass:window-shutter\";\n    case \"blind\":\n      return open ? \"hass:blinds-open\" : \"hass:blinds\";\n    case \"window\":\n      return open ? \"hass:window-open\" : \"hass:window-closed\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n};\n","/** Return an icon representing an input datetime state. */\nimport { domainIcon } from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const inputDateTimeIcon = (state: HassEntity): string => {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n};\n","import { customElement, CSSResult, css, query } from \"lit-element\";\nimport \"@material/mwc-switch\";\nimport { style } from \"@material/mwc-switch/mwc-switch-css\";\n// tslint:disable-next-line\nimport { Switch } from \"@material/mwc-switch\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nconst MwcSwitch = customElements.get(\"mwc-switch\") as Constructor<Switch>;\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends MwcSwitch {\n  @query(\"slot\") private _slot!: HTMLSlotElement;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\n      \"--mdc-theme-secondary\",\n      \"var(--switch-checked-color)\"\n    );\n    this.classList.toggle(\n      \"slotted\",\n      Boolean(this._slot.assignedNodes().length)\n    );\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        :host {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n          background-color: var(--switch-checked-button-color);\n          border-color: var(--switch-checked-button-color);\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__track {\n          background-color: var(--switch-checked-track-color);\n          border-color: var(--switch-checked-track-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n          background-color: var(--switch-unchecked-button-color);\n          border-color: var(--switch-unchecked-button-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n          background-color: var(--switch-unchecked-track-color);\n          border-color: var(--switch-unchecked-track-color);\n        }\n        :host(.slotted) .mdc-switch {\n          margin-right: 24px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../resources/ha-style\";\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding: 28px 20px 0;\n          max-width: 1040px;\n          margin: 0 auto;\n        }\n\n        .header {\n          @apply --paper-font-display1;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .together {\n          margin-top: 32px;\n        }\n\n        .intro {\n          @apply --paper-font-subhead;\n          width: 100%;\n          max-width: 400px;\n          margin-right: 40px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .panel {\n          margin-top: -24px;\n        }\n\n        .panel ::slotted(*) {\n          margin-top: 24px;\n          display: block;\n        }\n\n        .narrow.content {\n          max-width: 640px;\n        }\n        .narrow .together {\n          margin-top: 20px;\n        }\n        .narrow .header {\n          @apply --paper-font-headline;\n        }\n        .narrow .intro {\n          font-size: 14px;\n          padding-bottom: 20px;\n          margin-right: 0;\n          max-width: 500px;\n        }\n      </style>\n      <div class$=\"[[computeContentClasses(isWide)]]\">\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = \"content \";\n\n    return isWide ? classes : classes + \"narrow\";\n  }\n\n  computeClasses(isWide) {\n    var classes = \"together layout \";\n\n    return classes + (isWide ? \"horizontal\" : \"vertical narrow\");\n  }\n}\n\ncustomElements.define(\"ha-config-section\", HaConfigSection);\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {css} from 'lit-element';\n\nexport const style = css`.mdc-switch{display:inline-block;position:relative;outline:none;user-select:none}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);border-color:#018786;border-color:var(--mdc-theme-secondary, #018786)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786);border-color:#018786;border-color:var(--mdc-theme-secondary, #018786)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:#000;border-color:#000}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#fff;border-color:#fff}.mdc-switch__native-control{left:0;right:initial;position:absolute;top:0;width:68px;height:48px;margin:0;opacity:0;cursor:pointer;pointer-events:auto}[dir=rtl] .mdc-switch__native-control,.mdc-switch__native-control[dir=rtl]{left:initial;right:0}.mdc-switch__track{box-sizing:border-box;width:32px;height:14px;border:1px solid;border-radius:7px;opacity:.38;transition:opacity 90ms cubic-bezier(0.4, 0, 0.2, 1),background-color 90ms cubic-bezier(0.4, 0, 0.2, 1),border-color 90ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch__thumb-underlay{left:-18px;right:initial;display:flex;position:absolute;top:-17px;align-items:center;justify-content:center;width:48px;height:48px;transform:translateX(0);transition:transform 90ms cubic-bezier(0.4, 0, 0.2, 1),background-color 90ms cubic-bezier(0.4, 0, 0.2, 1),border-color 90ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl] .mdc-switch__thumb-underlay,.mdc-switch__thumb-underlay[dir=rtl]{left:initial;right:-18px}.mdc-switch__thumb{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0,0,0,.12);box-sizing:border-box;width:20px;height:20px;border:10px solid;border-radius:50%;pointer-events:none;z-index:1}.mdc-switch--checked .mdc-switch__track{opacity:.54}.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(20px)}[dir=rtl] .mdc-switch--checked .mdc-switch__thumb-underlay,.mdc-switch--checked .mdc-switch__thumb-underlay[dir=rtl]{transform:translateX(-20px)}.mdc-switch--checked .mdc-switch__native-control{transform:translateX(-20px)}[dir=rtl] .mdc-switch--checked .mdc-switch__native-control,.mdc-switch--checked .mdc-switch__native-control[dir=rtl]{transform:translateX(20px)}.mdc-switch--disabled{opacity:.38;pointer-events:none}.mdc-switch--disabled .mdc-switch__thumb{border-width:1px}.mdc-switch--disabled .mdc-switch__native-control{cursor:default;pointer-events:none}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-ripple-surface--test-edge-var-bug{--mdc-ripple-surface-test-edge-var: 1px solid #000;visibility:hidden}.mdc-ripple-surface--test-edge-var-bug::before{border:var(--mdc-ripple-surface-test-edge-var)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay::before,.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay::after{background-color:#9e9e9e}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay:hover::before{opacity:.08}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay.mdc-ripple-upgraded--background-focused::before,.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.24}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.24}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb-underlay.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: 0.24}.mdc-switch__thumb-underlay{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-switch__thumb-underlay::before,.mdc-switch__thumb-underlay::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:\"\"}.mdc-switch__thumb-underlay::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1}.mdc-switch__thumb-underlay.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-switch__thumb-underlay.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-switch__thumb-underlay.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-switch__thumb-underlay.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-switch__thumb-underlay.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-switch__thumb-underlay::before,.mdc-switch__thumb-underlay::after{top:calc(50% - 50%);left:calc(50% - 50%);width:100%;height:100%}.mdc-switch__thumb-underlay.mdc-ripple-upgraded::before,.mdc-switch__thumb-underlay.mdc-ripple-upgraded::after{top:var(--mdc-ripple-top, calc(50% - 50%));left:var(--mdc-ripple-left, calc(50% - 50%));width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-switch__thumb-underlay.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-switch__thumb-underlay::before,.mdc-switch__thumb-underlay::after{background-color:#018786}@supports not (-ms-ime-align: auto){.mdc-switch__thumb-underlay::before,.mdc-switch__thumb-underlay::after{background-color:var(--mdc-theme-secondary, #018786)}}.mdc-switch__thumb-underlay:hover::before{opacity:.04}.mdc-switch__thumb-underlay.mdc-ripple-upgraded--background-focused::before,.mdc-switch__thumb-underlay:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.12}.mdc-switch__thumb-underlay:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-switch__thumb-underlay:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12}.mdc-switch__thumb-underlay.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: 0.12}:host{outline:none}`;\n","import { HomeAssistant } from \"../types\";\nimport { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { debounce } from \"../common/util/debounce\";\nimport { EntityRegistryEntry } from \"./entity_registry\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\n\nexport interface DeviceRegistryEntry {\n  id: string;\n  config_entries: string[];\n  connections: Array<[string, string]>;\n  manufacturer: string;\n  model?: string;\n  name?: string;\n  sw_version?: string;\n  via_device_id?: string;\n  area_id?: string;\n  name_by_user?: string;\n}\n\nexport interface DeviceRegistryEntryMutableParams {\n  area_id?: string | null;\n  name_by_user?: string | null;\n}\n\nexport const computeDeviceName = (\n  device: DeviceRegistryEntry,\n  hass: HomeAssistant,\n  entities?: EntityRegistryEntry[] | string[]\n) => {\n  return (\n    device.name_by_user ||\n    device.name ||\n    (entities && fallbackDeviceName(hass, entities)) ||\n    hass.localize(\"ui.panel.config.devices.unnamed_device\")\n  );\n};\n\nexport const fallbackDeviceName = (\n  hass: HomeAssistant,\n  entities: EntityRegistryEntry[] | string[]\n) => {\n  for (const entity of entities || []) {\n    const entityId = typeof entity === \"string\" ? entity : entity.entity_id;\n    const stateObj = hass.states[entityId];\n    if (stateObj) {\n      return computeStateName(stateObj);\n    }\n  }\n  return undefined;\n};\n\nexport const updateDeviceRegistryEntry = (\n  hass: HomeAssistant,\n  deviceId: string,\n  updates: Partial<DeviceRegistryEntryMutableParams>\n) =>\n  hass.callWS<DeviceRegistryEntry>({\n    type: \"config/device_registry/update\",\n    device_id: deviceId,\n    ...updates,\n  });\n\nconst fetchDeviceRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/device_registry/list\",\n  });\n\nconst subscribeDeviceRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchDeviceRegistry(conn).then((devices) =>\n          store.setState(devices, true)\n        ),\n      500,\n      true\n    ),\n    \"device_registry_updated\"\n  );\n\nexport const subscribeDeviceRegistry = (\n  conn: Connection,\n  onChange: (devices: DeviceRegistryEntry[]) => void\n) =>\n  createCollection<DeviceRegistryEntry[]>(\n    \"_dr\",\n    fetchDeviceRegistry,\n    subscribeDeviceRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { compare } from \"../common/string/compare\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface AreaRegistryEntry {\n  area_id: string;\n  name: string;\n}\n\nexport interface AreaRegistryEntryMutableParams {\n  name: string;\n}\n\nexport const createAreaRegistryEntry = (\n  hass: HomeAssistant,\n  values: AreaRegistryEntryMutableParams\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/create\",\n    ...values,\n  });\n\nexport const updateAreaRegistryEntry = (\n  hass: HomeAssistant,\n  areaId: string,\n  updates: Partial<AreaRegistryEntryMutableParams>\n) =>\n  hass.callWS<AreaRegistryEntry>({\n    type: \"config/area_registry/update\",\n    area_id: areaId,\n    ...updates,\n  });\n\nexport const deleteAreaRegistryEntry = (hass: HomeAssistant, areaId: string) =>\n  hass.callWS({\n    type: \"config/area_registry/delete\",\n    area_id: areaId,\n  });\n\nconst fetchAreaRegistry = (conn) =>\n  conn\n    .sendMessagePromise({\n      type: \"config/area_registry/list\",\n    })\n    .then((areas) => areas.sort((ent1, ent2) => compare(ent1.name, ent2.name)));\n\nconst subscribeAreaRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchAreaRegistry(conn).then((areas) => store.setState(areas, true)),\n      500,\n      true\n    ),\n    \"area_registry_updated\"\n  );\n\nexport const subscribeAreaRegistry = (\n  conn: Connection,\n  onChange: (areas: AreaRegistryEntry[]) => void\n) =>\n  createCollection<AreaRegistryEntry[]>(\n    \"_areaRegistry\",\n    fetchAreaRegistry,\n    subscribeAreaRegistryUpdates,\n    conn,\n    onChange\n  );\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, strings } from './constants';\nvar MDCSwitchFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCSwitchFoundation, _super);\n    function MDCSwitchFoundation(adapter) {\n        return _super.call(this, tslib_1.__assign({}, MDCSwitchFoundation.defaultAdapter, adapter)) || this;\n    }\n    Object.defineProperty(MDCSwitchFoundation, \"strings\", {\n        /** The string constants used by the switch. */\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSwitchFoundation, \"cssClasses\", {\n        /** The CSS classes used by the switch. */\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCSwitchFoundation, \"defaultAdapter\", {\n        /** The default Adapter for the switch. */\n        get: function () {\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                setNativeControlChecked: function () { return undefined; },\n                setNativeControlDisabled: function () { return undefined; },\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** Sets the checked state of the switch. */\n    MDCSwitchFoundation.prototype.setChecked = function (checked) {\n        this.adapter_.setNativeControlChecked(checked);\n        this.updateCheckedStyling_(checked);\n    };\n    /** Sets the disabled state of the switch. */\n    MDCSwitchFoundation.prototype.setDisabled = function (disabled) {\n        this.adapter_.setNativeControlDisabled(disabled);\n        if (disabled) {\n            this.adapter_.addClass(cssClasses.DISABLED);\n        }\n        else {\n            this.adapter_.removeClass(cssClasses.DISABLED);\n        }\n    };\n    /** Handles the change event for the switch native control. */\n    MDCSwitchFoundation.prototype.handleChange = function (evt) {\n        var nativeControl = evt.target;\n        this.updateCheckedStyling_(nativeControl.checked);\n    };\n    /** Updates the styling of the switch based on its checked state. */\n    MDCSwitchFoundation.prototype.updateCheckedStyling_ = function (checked) {\n        if (checked) {\n            this.adapter_.addClass(cssClasses.CHECKED);\n        }\n        else {\n            this.adapter_.removeClass(cssClasses.CHECKED);\n        }\n    };\n    return MDCSwitchFoundation;\n}(MDCFoundation));\nexport { MDCSwitchFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCSwitchFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/** CSS classes used by the switch. */\nvar cssClasses = {\n    /** Class used for a switch that is in the \"checked\" (on) position. */\n    CHECKED: 'mdc-switch--checked',\n    /** Class used for a switch that is disabled. */\n    DISABLED: 'mdc-switch--disabled',\n};\n/** String constants used by the switch. */\nvar strings = {\n    /** A CSS selector used to locate the native HTML control for the switch.  */\n    NATIVE_CONTROL_SELECTOR: '.mdc-switch__native-control',\n    /** A CSS selector used to locate the ripple surface element for the switch. */\n    RIPPLE_SURFACE_SELECTOR: '.mdc-switch__thumb-underlay',\n};\nexport { cssClasses, strings };\n//# sourceMappingURL=constants.js.map","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {addHasRemoveClass, FormElement, HTMLElementWithRipple, observer} from '@material/mwc-base/form-element.js';\nimport {ripple} from '@material/mwc-ripple/ripple-directive.js';\nimport {MDCSwitchAdapter} from '@material/switch/adapter';\nimport MDCSwitchFoundation from '@material/switch/foundation.js';\nimport {html, property, query} from 'lit-element';\n\nexport class SwitchBase extends FormElement {\n  @property({type: Boolean})\n  @observer(function(this: SwitchBase, value: boolean) {\n    this.mdcFoundation.setChecked(value);\n  })\n  checked = false;\n\n  @property({type: Boolean})\n  @observer(function(this: SwitchBase, value: boolean) {\n    this.mdcFoundation.setDisabled(value);\n  })\n  disabled = false;\n\n  @query('.mdc-switch') protected mdcRoot!: HTMLElement;\n\n  @query('input') protected formElement!: HTMLInputElement;\n\n  protected mdcFoundation!: MDCSwitchFoundation;\n\n  private _changeHandler(e: Event) {\n    this.mdcFoundation.handleChange(e);\n    // catch \"click\" event and sync properties\n    this.checked = this.formElement.checked;\n  }\n\n  protected readonly mdcFoundationClass = MDCSwitchFoundation;\n\n  protected createAdapter(): MDCSwitchAdapter {\n    return {\n      ...addHasRemoveClass(this.mdcRoot),\n      setNativeControlChecked: (checked: boolean) => {\n        this.formElement.checked = checked;\n      },\n      setNativeControlDisabled: (disabled: boolean) => {\n        this.formElement.disabled = disabled;\n      },\n    };\n  }\n\n  get ripple() {\n    return this.rippleNode.ripple;\n  }\n\n  @query('.mdc-switch__thumb-underlay')\n  protected rippleNode!: HTMLElementWithRipple;\n\n  protected render() {\n    return html`\n      <div class=\"mdc-switch\">\n        <div class=\"mdc-switch__track\"></div>\n        <div class=\"mdc-switch__thumb-underlay\" .ripple=\"${ripple({\n      interactionNode: this\n    })}\">\n          <div class=\"mdc-switch__thumb\">\n            <input\n              type=\"checkbox\"\n              id=\"basic-switch\"\n              class=\"mdc-switch__native-control\"\n              role=\"switch\"\n              @change=\"${this._changeHandler}\">\n          </div>\n        </div>\n      </div>\n      <slot></slot>`;\n  }\n}\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {customElement} from 'lit-element';\n\nimport {SwitchBase} from './mwc-switch-base.js';\nimport {style} from './mwc-switch-css.js';\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'mwc-switch': Switch;\n  }\n}\n\n@customElement('mwc-switch')\nexport class Switch extends SwitchBase {\n  static styles = style;\n}\n","import { createCollection, Connection } from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport interface EntityRegistryEntry {\n  entity_id: string;\n  name: string;\n  platform: string;\n  config_entry_id?: string;\n  device_id?: string;\n  disabled_by: string | null;\n}\n\nexport interface EntityRegistryEntryUpdateParams {\n  name?: string | null;\n  disabled_by?: string | null;\n  new_entity_id?: string;\n}\n\nexport const computeEntityRegistryName = (\n  hass: HomeAssistant,\n  entry: EntityRegistryEntry\n): string | null => {\n  if (entry.name) {\n    return entry.name;\n  }\n  const state = hass.states[entry.entity_id];\n  return state ? computeStateName(state) : null;\n};\n\nexport const updateEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string,\n  updates: Partial<EntityRegistryEntryUpdateParams>\n): Promise<EntityRegistryEntry> =>\n  hass.callWS<EntityRegistryEntry>({\n    type: \"config/entity_registry/update\",\n    entity_id: entityId,\n    ...updates,\n  });\n\nexport const removeEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"config/entity_registry/remove\",\n    entity_id: entityId,\n  });\n\nconst fetchEntityRegistry = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config/entity_registry/list\",\n  });\n\nconst subscribeEntityRegistryUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchEntityRegistry(conn).then((entities) =>\n          store.setState(entities, true)\n        ),\n      500,\n      true\n    ),\n    \"entity_registry_updated\"\n  );\n\nexport const subscribeEntityRegistry = (\n  conn: Connection,\n  onChange: (entities: EntityRegistryEntry[]) => void\n) =>\n  createCollection<EntityRegistryEntry[]>(\n    \"_entityRegistry\",\n    fetchEntityRegistry,\n    subscribeEntityRegistryUpdates,\n    conn,\n    onChange\n  );\n","import { HomeAssistant } from \"../types\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\n\nexport interface DeviceAutomation {\n  device_id: string;\n  domain: string;\n  entity_id: string;\n  type?: string;\n  subtype?: string;\n  event?: string;\n}\n\n// tslint:disable-next-line: no-empty-interface\nexport interface DeviceAction extends DeviceAutomation {}\n\nexport interface DeviceCondition extends DeviceAutomation {\n  condition: string;\n}\n\nexport interface DeviceTrigger extends DeviceAutomation {\n  platform: string;\n}\n\nexport const fetchDeviceActions = (hass: HomeAssistant, deviceId: string) =>\n  hass.callWS<DeviceAction[]>({\n    type: \"device_automation/action/list\",\n    device_id: deviceId,\n  });\n\nexport const fetchDeviceConditions = (hass: HomeAssistant, deviceId: string) =>\n  hass.callWS<DeviceCondition[]>({\n    type: \"device_automation/condition/list\",\n    device_id: deviceId,\n  });\n\nexport const fetchDeviceTriggers = (hass: HomeAssistant, deviceId: string) =>\n  hass.callWS<DeviceTrigger[]>({\n    type: \"device_automation/trigger/list\",\n    device_id: deviceId,\n  });\n\nexport const fetchDeviceActionCapabilities = (\n  hass: HomeAssistant,\n  action: DeviceAction\n) =>\n  hass.callWS<DeviceAction[]>({\n    type: \"device_automation/action/capabilities\",\n    action,\n  });\n\nexport const fetchDeviceConditionCapabilities = (\n  hass: HomeAssistant,\n  condition: DeviceCondition\n) =>\n  hass.callWS<DeviceCondition[]>({\n    type: \"device_automation/condition/capabilities\",\n    condition,\n  });\n\nexport const fetchDeviceTriggerCapabilities = (\n  hass: HomeAssistant,\n  trigger: DeviceTrigger\n) =>\n  hass.callWS<DeviceTrigger[]>({\n    type: \"device_automation/trigger/capabilities\",\n    trigger,\n  });\n\nconst whitelist = [\"above\", \"below\", \"code\", \"for\"];\n\nexport const deviceAutomationsEqual = (\n  a: DeviceAutomation,\n  b: DeviceAutomation\n) => {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n\n  for (const property in a) {\n    if (whitelist.includes(property)) {\n      continue;\n    }\n    if (!Object.is(a[property], b[property])) {\n      return false;\n    }\n  }\n  for (const property in b) {\n    if (whitelist.includes(property)) {\n      continue;\n    }\n    if (!Object.is(a[property], b[property])) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexport const localizeDeviceAutomationAction = (\n  hass: HomeAssistant,\n  action: DeviceAction\n) => {\n  const state = action.entity_id ? hass.states[action.entity_id] : undefined;\n  return hass.localize(\n    `component.${action.domain}.device_automation.action_type.${action.type}`,\n    \"entity_name\",\n    state ? computeStateName(state) : \"<unknown>\",\n    \"subtype\",\n    hass.localize(\n      `component.${action.domain}.device_automation.action_subtype.${action.subtype}`\n    )\n  );\n};\n\nexport const localizeDeviceAutomationCondition = (\n  hass: HomeAssistant,\n  condition: DeviceCondition\n) => {\n  const state = condition.entity_id\n    ? hass.states[condition.entity_id]\n    : undefined;\n  return hass.localize(\n    `component.${condition.domain}.device_automation.condition_type.${condition.type}`,\n    \"entity_name\",\n    state ? computeStateName(state) : \"<unknown>\",\n    \"subtype\",\n    hass.localize(\n      `component.${condition.domain}.device_automation.condition_subtype.${condition.subtype}`\n    )\n  );\n};\n\nexport const localizeDeviceAutomationTrigger = (\n  hass: HomeAssistant,\n  trigger: DeviceTrigger\n) => {\n  const state = trigger.entity_id ? hass.states[trigger.entity_id] : undefined;\n  return hass.localize(\n    `component.${trigger.domain}.device_automation.trigger_type.${trigger.type}`,\n    \"entity_name\",\n    state ? computeStateName(state) : \"<unknown>\",\n    \"subtype\",\n    hass.localize(\n      `component.${trigger.domain}.device_automation.trigger_subtype.${trigger.subtype}`\n    )\n  );\n};\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\n\nexport const isValidEntityId = (entityId: string) =>\n  validEntityId.test(entityId);\n\nexport const createValidEntityId = (input: string) =>\n  input\n    .toLowerCase()\n    .replace(/\\s|\\'/g, \"_\") // replace spaces and quotes with underscore\n    .replace(/\\W/g, \"\") // remove not allowed chars\n    .replace(/_{2,}/g, \"_\") // replace multiple underscores with 1\n    .replace(/_$/, \"\"); // remove underscores at the end\n","import { TemplateResult, html } from \"lit-html\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  LitElement,\n  property,\n} from \"lit-element\";\nimport { fireEvent } from \"../dom/fire_event\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-button\";\n\n@customElement(\"search-input\")\nclass SearchInput extends LitElement {\n  @property() private filter?: string;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <div class=\"search-container\">\n        <paper-input\n          autofocus\n          label=\"Search\"\n          .value=${this.filter}\n          @value-changed=${this._filterInputChanged}\n        >\n          <iron-icon\n            icon=\"hass:magnify\"\n            slot=\"prefix\"\n            class=\"prefix\"\n          ></iron-icon>\n          ${this.filter &&\n            html`\n              <paper-icon-button\n                slot=\"suffix\"\n                class=\"suffix\"\n                @click=${this._clearSearch}\n                icon=\"hass:close\"\n                alt=\"Clear\"\n                title=\"Clear\"\n              ></paper-icon-button>\n            `}\n        </paper-input>\n      </div>\n    `;\n  }\n\n  private async _filterChanged(value: string) {\n    fireEvent(this, \"value-changed\", { value: String(value) });\n  }\n\n  private async _filterInputChanged(e) {\n    this._filterChanged(e.target.value);\n  }\n\n  private async _clearSearch() {\n    this._filterChanged(\"\");\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-input {\n        flex: 1 1 auto;\n        margin: 0 16px;\n      }\n      .search-container {\n        display: inline-flex;\n        width: 100%;\n        align-items: center;\n      }\n      .prefix {\n        margin: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"search-input\": SearchInput;\n  }\n}\n","export const afterNextRender = (cb: () => void): void => {\n  requestAnimationFrame(() => setTimeout(cb, 0));\n};\n\nexport const nextRender = () => {\n  return new Promise((resolve) => {\n    afterNextRender(resolve);\n  });\n};\n","import { HomeAssistant } from \"../types\";\n\nexport interface ConfigEntry {\n  entry_id: string;\n  domain: string;\n  title: string;\n  source: string;\n  state: string;\n  connection_class: string;\n  supports_options: boolean;\n}\n\nexport interface ConfigEntrySystemOptions {\n  disable_new_entities: boolean;\n}\n\nexport const getConfigEntries = (hass: HomeAssistant) =>\n  hass.callApi<ConfigEntry[]>(\"GET\", \"config/config_entries/entry\");\n\nexport const deleteConfigEntry = (hass: HomeAssistant, configEntryId: string) =>\n  hass.callApi<{\n    require_restart: boolean;\n  }>(\"DELETE\", `config/config_entries/entry/${configEntryId}`);\n\nexport const getConfigEntrySystemOptions = (\n  hass: HomeAssistant,\n  configEntryId: string\n) =>\n  hass.callWS<ConfigEntrySystemOptions>({\n    type: \"config_entries/system_options/list\",\n    entry_id: configEntryId,\n  });\n\nexport const updateConfigEntrySystemOptions = (\n  hass: HomeAssistant,\n  configEntryId: string,\n  params: Partial<ConfigEntrySystemOptions>\n) =>\n  hass.callWS({\n    type: \"config_entries/system_options/update\",\n    entry_id: configEntryId,\n    ...params,\n  });\n","\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"filterSortData\",\"filterData\",\"sortData\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"cc942aac2c181bb444ae.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import { customElement, CSSResult, css } from \"lit-element\";\nimport \"@material/mwc-checkbox\";\n// tslint:disable-next-line\nimport { Checkbox } from \"@material/mwc-checkbox\";\nimport { style } from \"@material/mwc-checkbox/mwc-checkbox-css\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nconst MwcCheckbox = customElements.get(\"mwc-checkbox\") as Constructor<Checkbox>;\n\n@customElement(\"ha-checkbox\")\nexport class HaCheckbox extends MwcCheckbox {\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\"--mdc-theme-secondary\", \"var(--primary-color)\");\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate)\n          ~ .mdc-checkbox__background {\n          border-color: rgba(var(--rgb-primary-text-color), 0.54);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-checkbox\": HaCheckbox;\n  }\n}\n","import { repeat } from \"lit-html/directives/repeat\";\nimport deepClone from \"deep-clone-simple\";\n\nimport {\n  MDCDataTableAdapter,\n  MDCDataTableFoundation,\n} from \"@material/data-table\";\n\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport {\n  html,\n  query,\n  queryAll,\n  CSSResult,\n  css,\n  customElement,\n  property,\n  TemplateResult,\n  PropertyValues,\n} from \"lit-element\";\n\nimport { BaseElement } from \"@material/mwc-base/base-element\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\n// @ts-ignore\n// tslint:disable-next-line: no-implicit-dependencies\nimport sortFilterWorker from \"workerize-loader!./sort_filter_worker\";\n\nimport \"../ha-icon\";\nimport \"../../common/search/search-input\";\nimport \"../ha-checkbox\";\n// tslint:disable-next-line\nimport { HaCheckbox } from \"../ha-checkbox\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { nextRender } from \"../../common/util/render-status\";\nimport { debounce } from \"../../common/util/debounce\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"selection-changed\": SelectionChangedEvent;\n    \"row-click\": RowClickedEvent;\n    \"sorting-changed\": SortingChangedEvent;\n  }\n}\n\nexport interface RowClickedEvent {\n  id: string;\n}\n\nexport interface SelectionChangedEvent {\n  id: string;\n  selected: boolean;\n}\n\nexport interface SortingChangedEvent {\n  column: string;\n  direction: SortingDirection;\n}\n\nexport type SortingDirection = \"desc\" | \"asc\" | null;\n\nexport interface DataTableColumnContainer {\n  [key: string]: DataTableColumnData;\n}\n\nexport interface DataTableSortColumnData {\n  sortable?: boolean;\n  filterable?: boolean;\n  filterKey?: string;\n  direction?: SortingDirection;\n}\n\nexport interface DataTableColumnData extends DataTableSortColumnData {\n  title: string;\n  type?: \"numeric\" | \"icon\";\n  template?: <T>(data: any, row: T) => TemplateResult;\n}\n\nexport interface DataTableRowData {\n  [key: string]: any;\n}\n\n@customElement(\"ha-data-table\")\nexport class HaDataTable extends BaseElement {\n  @property({ type: Object }) public columns: DataTableColumnContainer = {};\n  @property({ type: Array }) public data: DataTableRowData[] = [];\n  @property({ type: Boolean }) public selectable = false;\n  @property({ type: String }) public id = \"id\";\n  protected mdcFoundation!: MDCDataTableFoundation;\n  protected readonly mdcFoundationClass = MDCDataTableFoundation;\n  @query(\".mdc-data-table\") protected mdcRoot!: HTMLElement;\n  @queryAll(\".mdc-data-table__row\") protected rowElements!: HTMLElement[];\n  @query(\"#header-checkbox\") private _headerCheckbox!: HaCheckbox;\n  @property({ type: Boolean }) private _filterable = false;\n  @property({ type: Boolean }) private _headerChecked = false;\n  @property({ type: Boolean }) private _headerIndeterminate = false;\n  @property({ type: Array }) private _checkedRows: string[] = [];\n  @property({ type: String }) private _filter = \"\";\n  @property({ type: String }) private _sortColumn?: string;\n  @property({ type: String }) private _sortDirection: SortingDirection = null;\n  @property({ type: Array }) private _filteredData: DataTableRowData[] = [];\n  private _sortColumns: {\n    [key: string]: DataTableSortColumnData;\n  } = {};\n  private curRequest = 0;\n  private _worker: any | undefined;\n\n  private _debounceSearch = debounce(\n    (ev) => {\n      this._filter = ev.detail.value;\n    },\n    200,\n    false\n  );\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this._worker = sortFilterWorker();\n  }\n\n  protected updated(properties: PropertyValues) {\n    super.updated(properties);\n\n    if (properties.has(\"columns\")) {\n      this._filterable = Object.values(this.columns).some(\n        (column) => column.filterable\n      );\n\n      for (const columnId in this.columns) {\n        if (this.columns[columnId].direction) {\n          this._sortDirection = this.columns[columnId].direction!;\n          this._sortColumn = columnId;\n          break;\n        }\n      }\n\n      const clonedColumns: DataTableColumnContainer = deepClone(this.columns);\n      Object.values(clonedColumns).forEach((column: DataTableColumnData) => {\n        delete column.title;\n        delete column.type;\n        delete column.template;\n      });\n\n      this._sortColumns = clonedColumns;\n    }\n\n    if (\n      properties.has(\"data\") ||\n      properties.has(\"columns\") ||\n      properties.has(\"_filter\") ||\n      properties.has(\"_sortColumn\") ||\n      properties.has(\"_sortDirection\")\n    ) {\n      this._filterData();\n    }\n  }\n\n  protected render() {\n    return html`\n      ${this._filterable\n        ? html`\n            <search-input\n              @value-changed=${this._handleSearchChange}\n            ></search-input>\n          `\n        : \"\"}\n      <div class=\"mdc-data-table\">\n        <table class=\"mdc-data-table__table\">\n          <thead>\n            <tr class=\"mdc-data-table__header-row\">\n              ${this.selectable\n                ? html`\n                    <th\n                      class=\"mdc-data-table__header-cell mdc-data-table__header-cell--checkbox\"\n                      role=\"columnheader\"\n                      scope=\"col\"\n                    >\n                      <ha-checkbox\n                        id=\"header-checkbox\"\n                        class=\"mdc-data-table__row-checkbox\"\n                        @change=${this._handleHeaderRowCheckboxChange}\n                        .indeterminate=${this._headerIndeterminate}\n                        .checked=${this._headerChecked}\n                      >\n                      </ha-checkbox>\n                    </th>\n                  `\n                : \"\"}\n              ${Object.entries(this.columns).map((columnEntry) => {\n                const [key, column] = columnEntry;\n                const sorted = key === this._sortColumn;\n                const classes = {\n                  \"mdc-data-table__header-cell--numeric\": Boolean(\n                    column.type && column.type === \"numeric\"\n                  ),\n                  \"mdc-data-table__header-cell--icon\": Boolean(\n                    column.type && column.type === \"icon\"\n                  ),\n                  sortable: Boolean(column.sortable),\n                  \"not-sorted\": Boolean(column.sortable && !sorted),\n                };\n                return html`\n                  <th\n                    class=\"mdc-data-table__header-cell ${classMap(classes)}\"\n                    role=\"columnheader\"\n                    scope=\"col\"\n                    @click=${this._handleHeaderClick}\n                    data-column-id=\"${key}\"\n                  >\n                    ${column.sortable\n                      ? html`\n                          <ha-icon\n                            .icon=${sorted && this._sortDirection === \"desc\"\n                              ? \"hass:arrow-down\"\n                              : \"hass:arrow-up\"}\n                          ></ha-icon>\n                        `\n                      : \"\"}\n                    <span>${column.title}</span>\n                  </th>\n                `;\n              })}\n            </tr>\n          </thead>\n          <tbody class=\"mdc-data-table__content\">\n            ${repeat(\n              this._filteredData!,\n              (row: DataTableRowData) => row[this.id],\n              (row: DataTableRowData) => html`\n                <tr\n                  data-row-id=\"${row[this.id]}\"\n                  @click=${this._handleRowClick}\n                  class=\"mdc-data-table__row\"\n                >\n                  ${this.selectable\n                    ? html`\n                        <td\n                          class=\"mdc-data-table__cell mdc-data-table__cell--checkbox\"\n                        >\n                          <ha-checkbox\n                            class=\"mdc-data-table__row-checkbox\"\n                            @change=${this._handleRowCheckboxChange}\n                            .checked=${this._checkedRows.includes(row[this.id])}\n                          >\n                          </ha-checkbox>\n                        </td>\n                      `\n                    : \"\"}\n                  ${Object.entries(this.columns).map((columnEntry) => {\n                    const [key, column] = columnEntry;\n                    return html`\n                      <td\n                        class=\"mdc-data-table__cell ${classMap({\n                          \"mdc-data-table__cell--numeric\": Boolean(\n                            column.type && column.type === \"numeric\"\n                          ),\n                          \"mdc-data-table__cell--icon\": Boolean(\n                            column.type && column.type === \"icon\"\n                          ),\n                        })}\"\n                      >\n                        ${column.template\n                          ? column.template(row[key], row)\n                          : row[key]}\n                      </td>\n                    `;\n                  })}\n                </tr>\n              `\n            )}\n          </tbody>\n        </table>\n      </div>\n    `;\n  }\n\n  protected createAdapter(): MDCDataTableAdapter {\n    return {\n      addClassAtRowIndex: (rowIndex: number, cssClasses: string) => {\n        this.rowElements[rowIndex].classList.add(cssClasses);\n      },\n      getRowCount: () => this.data.length,\n      getRowElements: () => this.rowElements,\n      getRowIdAtIndex: (rowIndex: number) => this._getRowIdAtIndex(rowIndex),\n      getRowIndexByChildElement: (el: Element) =>\n        Array.prototype.indexOf.call(this.rowElements, el.closest(\"tr\")),\n      getSelectedRowCount: () => this._checkedRows.length,\n      isCheckboxAtRowIndexChecked: (rowIndex: number) =>\n        this._checkedRows.includes(this._getRowIdAtIndex(rowIndex)),\n      isHeaderRowCheckboxChecked: () => this._headerChecked,\n      isRowsSelectable: () => true,\n      notifyRowSelectionChanged: () => undefined,\n      notifySelectedAll: () => undefined,\n      notifyUnselectedAll: () => undefined,\n      registerHeaderRowCheckbox: () => undefined,\n      registerRowCheckboxes: () => undefined,\n      removeClassAtRowIndex: (rowIndex: number, cssClasses: string) => {\n        this.rowElements[rowIndex].classList.remove(cssClasses);\n      },\n      setAttributeAtRowIndex: (\n        rowIndex: number,\n        attr: string,\n        value: string\n      ) => {\n        this.rowElements[rowIndex].setAttribute(attr, value);\n      },\n      setHeaderRowCheckboxChecked: (checked: boolean) => {\n        this._headerChecked = checked;\n      },\n      setHeaderRowCheckboxIndeterminate: (indeterminate: boolean) => {\n        this._headerIndeterminate = indeterminate;\n      },\n      setRowCheckboxCheckedAtIndex: (rowIndex: number, checked: boolean) => {\n        this._setRowChecked(this._getRowIdAtIndex(rowIndex), checked);\n      },\n    };\n  }\n\n  private async _filterData() {\n    const startTime = new Date().getTime();\n    this.curRequest++;\n    const curRequest = this.curRequest;\n\n    const filterProm = this._worker.filterSortData(\n      this.data,\n      this._sortColumns,\n      this._filter,\n      this._sortDirection,\n      this._sortColumn\n    );\n\n    const [data] = await Promise.all([filterProm, nextRender]);\n\n    const curTime = new Date().getTime();\n    const elapsed = curTime - startTime;\n\n    if (elapsed < 100) {\n      await new Promise((resolve) => setTimeout(resolve, 100 - elapsed));\n    }\n    if (this.curRequest !== curRequest) {\n      return;\n    }\n    this._filteredData = data;\n  }\n\n  private _getRowIdAtIndex(rowIndex: number): string {\n    return this.rowElements[rowIndex].getAttribute(\"data-row-id\")!;\n  }\n\n  private _handleHeaderClick(ev: Event) {\n    const columnId = (ev.target as HTMLElement)\n      .closest(\"th\")!\n      .getAttribute(\"data-column-id\")!;\n    if (!this.columns[columnId].sortable) {\n      return;\n    }\n    if (!this._sortDirection || this._sortColumn !== columnId) {\n      this._sortDirection = \"asc\";\n    } else if (this._sortDirection === \"asc\") {\n      this._sortDirection = \"desc\";\n    } else {\n      this._sortDirection = null;\n    }\n\n    this._sortColumn = this._sortDirection === null ? undefined : columnId;\n\n    fireEvent(this, \"sorting-changed\", {\n      column: columnId,\n      direction: this._sortDirection,\n    });\n  }\n\n  private _handleHeaderRowCheckboxChange() {\n    this._headerChecked = this._headerCheckbox.checked;\n    this._headerIndeterminate = this._headerCheckbox.indeterminate;\n    this.mdcFoundation.handleHeaderRowCheckboxChange();\n  }\n\n  private _handleRowCheckboxChange(ev: Event) {\n    const checkbox = ev.target as HaCheckbox;\n    const rowId = checkbox.closest(\"tr\")!.getAttribute(\"data-row-id\");\n\n    this._setRowChecked(rowId!, checkbox.checked);\n    this.mdcFoundation.handleRowCheckboxChange(ev);\n  }\n\n  private _handleRowClick(ev: Event) {\n    const rowId = (ev.target as HTMLElement)\n      .closest(\"tr\")!\n      .getAttribute(\"data-row-id\")!;\n    fireEvent(this, \"row-click\", { id: rowId }, { bubbles: false });\n  }\n\n  private _setRowChecked(rowId: string, checked: boolean) {\n    if (checked && !this._checkedRows.includes(rowId)) {\n      this._checkedRows = [...this._checkedRows, rowId];\n    } else if (!checked) {\n      const index = this._checkedRows.indexOf(rowId);\n      if (index !== -1) {\n        this._checkedRows.splice(index, 1);\n      }\n    }\n    fireEvent(this, \"selection-changed\", {\n      id: rowId,\n      selected: checked,\n    });\n  }\n\n  private _handleSearchChange(ev: CustomEvent): void {\n    this._debounceSearch(ev);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      /* default mdc styles, colors changed, without checkbox styles */\n\n      .mdc-data-table__content {\n        font-family: Roboto, sans-serif;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-size: 0.875rem;\n        line-height: 1.25rem;\n        font-weight: 400;\n        letter-spacing: 0.0178571429em;\n        text-decoration: inherit;\n        text-transform: inherit;\n      }\n\n      .mdc-data-table {\n        background-color: var(--data-table-background-color);\n        border-radius: 4px;\n        border-width: 1px;\n        border-style: solid;\n        border-color: rgba(var(--rgb-primary-text-color), 0.12);\n        display: inline-flex;\n        flex-direction: column;\n        box-sizing: border-box;\n        overflow-x: auto;\n      }\n\n      .mdc-data-table__row--selected {\n        background-color: rgba(var(--rgb-primary-color), 0.04);\n      }\n\n      .mdc-data-table__row {\n        border-top-color: rgba(var(--rgb-primary-text-color), 0.12);\n      }\n\n      .mdc-data-table__row {\n        border-top-width: 1px;\n        border-top-style: solid;\n      }\n\n      .mdc-data-table__row:not(.mdc-data-table__row--selected):hover {\n        background-color: rgba(var(--rgb-primary-text-color), 0.04);\n      }\n\n      .mdc-data-table__header-cell {\n        color: var(--primary-text-color);\n      }\n\n      .mdc-data-table__cell {\n        color: var(--primary-text-color);\n      }\n\n      .mdc-data-table__header-row {\n        height: 56px;\n      }\n\n      .mdc-data-table__row {\n        height: 52px;\n      }\n\n      .mdc-data-table__cell,\n      .mdc-data-table__header-cell {\n        padding-right: 16px;\n        padding-left: 16px;\n      }\n\n      .mdc-data-table__header-cell--checkbox,\n      .mdc-data-table__cell--checkbox {\n        /* @noflip */\n        padding-left: 16px;\n        /* @noflip */\n        padding-right: 0;\n      }\n      [dir=\"rtl\"] .mdc-data-table__header-cell--checkbox,\n      .mdc-data-table__header-cell--checkbox[dir=\"rtl\"],\n      [dir=\"rtl\"] .mdc-data-table__cell--checkbox,\n      .mdc-data-table__cell--checkbox[dir=\"rtl\"] {\n        /* @noflip */\n        padding-left: 0;\n        /* @noflip */\n        padding-right: 16px;\n      }\n\n      .mdc-data-table__table {\n        width: 100%;\n        border: 0;\n        white-space: nowrap;\n        border-collapse: collapse;\n      }\n\n      .mdc-data-table__cell {\n        font-family: Roboto, sans-serif;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-size: 0.875rem;\n        line-height: 1.25rem;\n        font-weight: 400;\n        letter-spacing: 0.0178571429em;\n        text-decoration: inherit;\n        text-transform: inherit;\n      }\n\n      .mdc-data-table__cell--numeric {\n        text-align: right;\n      }\n      [dir=\"rtl\"] .mdc-data-table__cell--numeric,\n      .mdc-data-table__cell--numeric[dir=\"rtl\"] {\n        /* @noflip */\n        text-align: left;\n      }\n\n      .mdc-data-table__cell--icon {\n        color: var(--secondary-text-color);\n        text-align: center;\n      }\n\n      .mdc-data-table__header-cell {\n        font-family: Roboto, sans-serif;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-size: 0.875rem;\n        line-height: 1.375rem;\n        font-weight: 500;\n        letter-spacing: 0.0071428571em;\n        text-decoration: inherit;\n        text-transform: inherit;\n        text-align: left;\n      }\n      [dir=\"rtl\"] .mdc-data-table__header-cell,\n      .mdc-data-table__header-cell[dir=\"rtl\"] {\n        /* @noflip */\n        text-align: right;\n      }\n\n      .mdc-data-table__header-cell--numeric {\n        text-align: right;\n      }\n      [dir=\"rtl\"] .mdc-data-table__header-cell--numeric,\n      .mdc-data-table__header-cell--numeric[dir=\"rtl\"] {\n        /* @noflip */\n        text-align: left;\n      }\n\n      .mdc-data-table__header-cell--icon {\n        text-align: center;\n      }\n\n      /* custom from here */\n\n      .mdc-data-table {\n        display: block;\n      }\n      .mdc-data-table__header-cell {\n        overflow: hidden;\n      }\n      .mdc-data-table__header-cell.sortable {\n        cursor: pointer;\n      }\n      .mdc-data-table__header-cell.not-sorted:not(.mdc-data-table__header-cell--numeric):not(.mdc-data-table__header-cell--icon)\n        span {\n        position: relative;\n        left: -24px;\n      }\n      .mdc-data-table__header-cell.not-sorted > * {\n        transition: left 0.2s ease 0s;\n      }\n      .mdc-data-table__header-cell.not-sorted ha-icon {\n        left: -36px;\n      }\n      .mdc-data-table__header-cell.not-sorted:not(.mdc-data-table__header-cell--numeric):not(.mdc-data-table__header-cell--icon):hover\n        span {\n        left: 0px;\n      }\n      .mdc-data-table__header-cell:hover.not-sorted ha-icon {\n        left: 0px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-data-table\": HaDataTable;\n  }\n}\n","import {\n  HassEntityBase,\n  HassEntityAttributeBase,\n} from \"home-assistant-js-websocket\";\nimport { HomeAssistant } from \"../types\";\nimport { navigate } from \"../common/navigate\";\n\nexport interface AutomationEntity extends HassEntityBase {\n  attributes: HassEntityAttributeBase & {\n    id?: string;\n    last_triggered: string;\n  };\n}\n\nexport interface AutomationConfig {\n  alias: string;\n  description: string;\n  trigger: any[];\n  condition?: any[];\n  action: any[];\n}\n\nexport const deleteAutomation = (hass: HomeAssistant, id: string) =>\n  hass.callApi(\"DELETE\", `config/automation/config/${id}`);\n\nlet inititialAutomationEditorData: Partial<AutomationConfig> | undefined;\n\nexport const showAutomationEditor = (\n  el: HTMLElement,\n  data?: Partial<AutomationConfig>\n) => {\n  inititialAutomationEditorData = data;\n  navigate(el, \"/config/automation/new\");\n};\n\nexport const getAutomationEditorInitData = () => {\n  const data = inititialAutomationEditorData;\n  inititialAutomationEditorData = undefined;\n  return data;\n};\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../ha-icon\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\n\nclass HaStateIcon extends PolymerElement {\n  static get template() {\n    return html`\n      <ha-icon icon=\"[[computeIcon(stateObj)]]\"></ha-icon>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  computeIcon(stateObj) {\n    return stateIcon(stateObj);\n  }\n}\n\ncustomElements.define(\"ha-state-icon\", HaStateIcon);\n","import \"../../../components/data-table/ha-data-table\";\nimport \"../../../components/entity/ha-state-icon\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport {\n  LitElement,\n  html,\n  TemplateResult,\n  property,\n  customElement,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\n// tslint:disable-next-line\nimport {\n  DataTableColumnContainer,\n  RowClickedEvent,\n  DataTableRowData,\n} from \"../../../components/data-table/ha-data-table\";\n// tslint:disable-next-line\nimport {\n  DeviceRegistryEntry,\n  computeDeviceName,\n} from \"../../../data/device_registry\";\nimport { EntityRegistryEntry } from \"../../../data/entity_registry\";\nimport { ConfigEntry } from \"../../../data/config_entries\";\nimport { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport { navigate } from \"../../../common/navigate\";\nimport { LocalizeFunc } from \"../../../common/translations/localize\";\n\nexport interface DeviceRowData extends DeviceRegistryEntry {\n  device?: DeviceRowData;\n  area?: string;\n  integration?: string;\n  battery_entity?: string;\n}\n\nexport interface DeviceEntityLookup {\n  [deviceId: string]: EntityRegistryEntry[];\n}\n\n@customElement(\"ha-devices-data-table\")\nexport class HaDevicesDataTable extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow = false;\n  @property() public devices!: DeviceRegistryEntry[];\n  @property() public entries!: ConfigEntry[];\n  @property() public entities!: EntityRegistryEntry[];\n  @property() public areas!: AreaRegistryEntry[];\n  @property() public domain!: string;\n\n  private _devices = memoizeOne(\n    (\n      devices: DeviceRegistryEntry[],\n      entries: ConfigEntry[],\n      entities: EntityRegistryEntry[],\n      areas: AreaRegistryEntry[],\n      domain: string,\n      localize: LocalizeFunc\n    ) => {\n      // Some older installations might have devices pointing at invalid entryIDs\n      // So we guard for that.\n\n      let outputDevices: DeviceRowData[] = devices;\n\n      const deviceLookup: { [deviceId: string]: DeviceRegistryEntry } = {};\n      for (const device of devices) {\n        deviceLookup[device.id] = device;\n      }\n\n      const deviceEntityLookup: DeviceEntityLookup = {};\n      for (const entity of entities) {\n        if (!entity.device_id) {\n          continue;\n        }\n        if (!(entity.device_id in deviceEntityLookup)) {\n          deviceEntityLookup[entity.device_id] = [];\n        }\n        deviceEntityLookup[entity.device_id].push(entity);\n      }\n\n      const entryLookup: { [entryId: string]: ConfigEntry } = {};\n      for (const entry of entries) {\n        entryLookup[entry.entry_id] = entry;\n      }\n\n      const areaLookup: { [areaId: string]: AreaRegistryEntry } = {};\n      for (const area of areas) {\n        areaLookup[area.area_id] = area;\n      }\n\n      if (domain) {\n        outputDevices = outputDevices.filter((device) =>\n          device.config_entries.find(\n            (entryId) =>\n              entryId in entryLookup && entryLookup[entryId].domain === domain\n          )\n        );\n      }\n\n      outputDevices = outputDevices.map((device) => {\n        return {\n          ...device,\n          name: computeDeviceName(\n            device,\n            this.hass,\n            deviceEntityLookup[device.id]\n          ),\n          model: device.model || \"<unknown>\",\n          manufacturer: device.manufacturer || \"<unknown>\",\n          area: device.area_id ? areaLookup[device.area_id].name : \"No area\",\n          integration: device.config_entries.length\n            ? device.config_entries\n                .filter((entId) => entId in entryLookup)\n                .map(\n                  (entId) =>\n                    localize(\n                      `component.${entryLookup[entId].domain}.config.title`\n                    ) || entryLookup[entId].domain\n                )\n                .join(\", \")\n            : \"No integration\",\n          battery_entity: this._batteryEntity(device.id, deviceEntityLookup),\n        };\n      });\n\n      return outputDevices;\n    }\n  );\n\n  private _columns = memoizeOne(\n    (narrow: boolean): DataTableColumnContainer =>\n      narrow\n        ? {\n            name: {\n              title: \"Device\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              template: (name, device: DataTableRowData) => {\n                const battery = device.battery_entity\n                  ? this.hass.states[device.battery_entity]\n                  : undefined;\n                // Have to work on a nice layout for mobile\n                return html`\n                  ${name}<br />\n                  ${device.area} | ${device.integration}<br />\n                  ${battery\n                    ? html`\n                        ${battery.state}%\n                        <ha-state-icon\n                          .hass=${this.hass!}\n                          .stateObj=${battery}\n                        ></ha-state-icon>\n                      `\n                    : \"\"}\n                `;\n              },\n            },\n          }\n        : {\n            name: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.device\"\n              ),\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n            },\n            manufacturer: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.manufacturer\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            model: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.model\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            area: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.area\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            integration: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.integration\"\n              ),\n              sortable: true,\n              filterable: true,\n            },\n            battery_entity: {\n              title: this.hass.localize(\n                \"ui.panel.config.devices.data_table.battery\"\n              ),\n              sortable: true,\n              type: \"numeric\",\n              template: (batteryEntity: string) => {\n                const battery = batteryEntity\n                  ? this.hass.states[batteryEntity]\n                  : undefined;\n                return battery\n                  ? html`\n                      ${battery.state}%\n                      <ha-state-icon\n                        .hass=${this.hass!}\n                        .stateObj=${battery}\n                      ></ha-state-icon>\n                    `\n                  : html`\n                      -\n                    `;\n              },\n            },\n          }\n  );\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-data-table\n        .columns=${this._columns(this.narrow)}\n        .data=${this._devices(\n          this.devices,\n          this.entries,\n          this.entities,\n          this.areas,\n          this.domain,\n          this.hass.localize\n        )}\n        @row-click=${this._handleRowClicked}\n      ></ha-data-table>\n    `;\n  }\n\n  private _batteryEntity(\n    deviceId: string,\n    deviceEntityLookup: DeviceEntityLookup\n  ): string | undefined {\n    const batteryEntity = (deviceEntityLookup[deviceId] || []).find(\n      (entity) =>\n        this.hass.states[entity.entity_id] &&\n        this.hass.states[entity.entity_id].attributes.device_class === \"battery\"\n    );\n\n    return batteryEntity ? batteryEntity.entity_id : undefined;\n  }\n\n  private _handleRowClicked(ev: CustomEvent) {\n    const deviceId = (ev.detail as RowClickedEvent).id;\n    navigate(this, `/config/devices/device/${deviceId}`);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-devices-data-table\": HaDevicesDataTable;\n  }\n}\n","import { fireEvent } from \"../../../common/dom/fire_event\";\nimport { EntityRegistryEntry } from \"../../../data/entity_registry\";\n\nexport interface EntityRegistryDetailDialogParams {\n  entry: EntityRegistryEntry;\n}\n\nexport const loadEntityRegistryDetailDialog = () =>\n  import(\n    /* webpackChunkName: \"entity-registry-detail-dialog\" */ \"./dialog-entity-registry-detail\"\n  );\n\nexport const showEntityRegistryDetailDialog = (\n  element: HTMLElement,\n  systemLogDetailParams: EntityRegistryDetailDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-entity-registry-detail\",\n    dialogImport: loadEntityRegistryDetailDialog,\n    dialogParams: systemLogDetailParams,\n  });\n};\n","import \"../../../layouts/hass-subpage\";\nimport \"./ha-devices-data-table\";\n\nimport {\n  LitElement,\n  html,\n  TemplateResult,\n  property,\n  customElement,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\nimport { DeviceRegistryEntry } from \"../../../data/device_registry\";\nimport { EntityRegistryEntry } from \"../../../data/entity_registry\";\nimport { ConfigEntry } from \"../../../data/config_entries\";\nimport { AreaRegistryEntry } from \"../../../data/area_registry\";\n\n@customElement(\"ha-config-devices-dashboard\")\nexport class HaConfigDeviceDashboard extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow = false;\n  @property() public devices!: DeviceRegistryEntry[];\n  @property() public entries!: ConfigEntry[];\n  @property() public entities!: EntityRegistryEntry[];\n  @property() public areas!: AreaRegistryEntry[];\n  @property() public domain!: string;\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-subpage\n        header=${this.hass.localize(\"ui.panel.config.devices.caption\")}\n      >\n        <div class=\"content\">\n          <ha-devices-data-table\n            .hass=${this.hass}\n            .narrow=${this.narrow}\n            .devices=${this.devices}\n            .entries=${this.entries}\n            .entities=${this.entities}\n            .areas=${this.areas}\n            .domain=${this.domain}\n          ></ha-devices-data-table>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .content {\n        padding: 4px;\n      }\n      ha-devices-data-table {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-devices-dashboard\": HaConfigDeviceDashboard;\n  }\n}\n","import { fireEvent } from \"../../common/dom/fire_event\";\nimport {\n  DeviceRegistryEntry,\n  DeviceRegistryEntryMutableParams,\n} from \"../../data/device_registry\";\n\nexport interface DeviceRegistryDetailDialogParams {\n  device: DeviceRegistryEntry;\n  updateEntry: (\n    updates: Partial<DeviceRegistryEntryMutableParams>\n  ) => Promise<unknown>;\n}\n\nexport const loadDeviceRegistryDetailDialog = () =>\n  import(\n    /* webpackChunkName: \"device-registry-detail-dialog\" */ \"./dialog-device-registry-detail\"\n  );\n\nexport const showDeviceRegistryDetailDialog = (\n  element: HTMLElement,\n  deviceRegistryDetailParams: DeviceRegistryDetailDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-device-registry-detail\",\n    dialogImport: loadDeviceRegistryDetailDialog,\n    dialogParams: deviceRegistryDetailParams,\n  });\n};\n","import \"../../../../components/ha-card\";\n\nimport {\n  DeviceRegistryEntry,\n  computeDeviceName,\n} from \"../../../../data/device_registry\";\nimport { loadDeviceRegistryDetailDialog } from \"../../../../dialogs/device-registry-detail/show-dialog-device-registry-detail\";\nimport {\n  LitElement,\n  html,\n  customElement,\n  property,\n  TemplateResult,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { AreaRegistryEntry } from \"../../../../data/area_registry\";\n\n@customElement(\"ha-device-card\")\nexport class HaDeviceCard extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public device!: DeviceRegistryEntry;\n  @property() public devices!: DeviceRegistryEntry[];\n  @property() public areas!: AreaRegistryEntry[];\n  @property() public narrow!: boolean;\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-card>\n        <div class=\"card-content\">\n          <div class=\"info\">\n            <div class=\"model\">${this.device.model}</div>\n            <div class=\"manuf\">\n              ${this.hass.localize(\n                \"ui.panel.config.integrations.config_entry.manuf\",\n                \"manufacturer\",\n                this.device.manufacturer\n              )}\n            </div>\n            ${this.device.area_id\n              ? html`\n                  <div class=\"area\">\n                    <div class=\"extra-info\">\n                      ${this.hass.localize(\n                        \"ui.panel.config.integrations.config_entry.area\",\n                        \"area\",\n                        this._computeArea(this.areas, this.device)\n                      )}\n                    </div>\n                  </div>\n                `\n              : \"\"}\n          </div>\n          ${this.device.via_device_id\n            ? html`\n                <div class=\"extra-info\">\n                  ${this.hass.localize(\n                    \"ui.panel.config.integrations.config_entry.via\"\n                  )}\n                  <span class=\"hub\"\n                    >${this._computeDeviceName(\n                      this.devices,\n                      this.device.via_device_id\n                    )}</span\n                  >\n                </div>\n              `\n            : \"\"}\n          ${this.device.sw_version\n            ? html`\n                <div class=\"extra-info\">\n                  ${this.hass.localize(\n                    \"ui.panel.config.integrations.config_entry.firmware\",\n                    \"version\",\n                    this.device.sw_version\n                  )}\n                </div>\n              `\n            : \"\"}\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    loadDeviceRegistryDetailDialog();\n  }\n\n  private _computeArea(areas, device) {\n    if (!areas || !device || !device.area_id) {\n      return \"No Area\";\n    }\n    // +1 because of \"No Area\" entry\n    return areas.find((area) => area.area_id === device.area_id).name;\n  }\n\n  private _computeDeviceName(devices, deviceId) {\n    const device = devices.find((dev) => dev.id === deviceId);\n    return device\n      ? computeDeviceName(device, this.hass)\n      : `(${this.hass.localize(\n          \"ui.panel.config.integrations.config_entry.device_unavailable\"\n        )})`;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-card {\n        flex: 1 0 100%;\n        padding-bottom: 10px;\n        min-width: 0;\n      }\n      .device {\n        width: 30%;\n      }\n      .area {\n        color: var(--primary-text-color);\n      }\n      .extra-info {\n        margin-top: 8px;\n      }\n      .manuf,\n      .entity-id,\n      .model {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n}\n","import {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n  customElement,\n  unsafeCSS,\n} from \"lit-element\";\n\n// @ts-ignore\nimport chipStyles from \"@material/chips/dist/mdc.chips.min.css\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"chip-clicked\": { index: string };\n  }\n}\n\n@customElement(\"ha-chips\")\nexport class HaChips extends LitElement {\n  @property() public items = [];\n\n  protected render(): TemplateResult {\n    if (this.items.length === 0) {\n      return html``;\n    }\n    return html`\n      <div class=\"mdc-chip-set\">\n        ${this.items.map(\n          (item, idx) =>\n            html`\n              <button\n                class=\"mdc-chip\"\n                .index=${idx}\n                @click=${this._handleClick}\n              >\n                <span class=\"mdc-chip__text\">${item}</span>\n              </button>\n            `\n        )}\n      </div>\n    `;\n  }\n\n  private _handleClick(ev) {\n    fireEvent(\n      this,\n      \"chip-clicked\",\n      { index: ev.target.closest(\"button\").index },\n      { bubbles: false }\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ${unsafeCSS(chipStyles)}\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-chips\": HaChips;\n  }\n}\n","export default \"/**\\n * @license\\n * Copyright Google LLC All Rights Reserved.\\n *\\n * Use of this source code is governed by an MIT-style license that can be\\n * found in the LICENSE file at https://github.com/material-components/material-components-web/blob/master/LICENSE\\n */\\n.mdc-chip__icon--leading{color:rgba(0,0,0,.54)}.mdc-chip__icon--trailing{color:rgba(0,0,0,.54)}.mdc-chip__icon--trailing:hover{color:rgba(0,0,0,.62)}.mdc-chip__icon--trailing:focus{color:rgba(0,0,0,.87)}.mdc-chip__icon.mdc-chip__icon--leading:not(.mdc-chip__icon--leading-hidden){width:20px;height:20px;font-size:20px}.mdc-chip__icon.mdc-chip__icon--trailing{width:18px;height:18px;font-size:18px}.mdc-chip__icon--trailing{margin-right:-4px;margin-left:4px}.mdc-chip{border-radius:16px;background-color:#e0e0e0;color:rgba(0,0,0,.87);font-family:Roboto, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:.875rem;line-height:1.25rem;font-weight:400;letter-spacing:.0178571429em;text-decoration:inherit;text-transform:inherit;height:32px;display:inline-flex;position:relative;align-items:center;box-sizing:border-box;padding:0 12px;border-width:0;outline:none;cursor:pointer;-webkit-appearance:none;overflow:hidden}.mdc-chip:hover{color:rgba(0,0,0,.87)}.mdc-chip.mdc-chip--selected .mdc-chip__checkmark,.mdc-chip .mdc-chip__icon--leading:not(.mdc-chip__icon--leading-hidden){margin-left:-4px;margin-right:4px}[dir=rtl] .mdc-chip.mdc-chip--selected .mdc-chip__checkmark,.mdc-chip.mdc-chip--selected .mdc-chip__checkmark[dir=rtl],[dir=rtl] .mdc-chip .mdc-chip__icon--leading:not(.mdc-chip__icon--leading-hidden),.mdc-chip .mdc-chip__icon--leading:not(.mdc-chip__icon--leading-hidden)[dir=rtl]{margin-left:4px;margin-right:-4px}.mdc-chip::-moz-focus-inner{padding:0;border:0}.mdc-chip:hover{color:#000;color:var(--mdc-theme-on-surface, #000)}.mdc-chip--exit{transition:opacity 75ms cubic-bezier(0.4, 0, 0.2, 1),width 150ms cubic-bezier(0, 0, 0.2, 1),padding 100ms linear,margin 100ms linear;opacity:0}.mdc-chip__text{white-space:nowrap}.mdc-chip__icon{border-radius:50%;outline:none;vertical-align:middle}.mdc-chip__checkmark{height:20px}.mdc-chip__checkmark-path{transition:stroke-dashoffset 150ms 50ms cubic-bezier(0.4, 0, 0.6, 1);stroke-width:2px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-chip--selected .mdc-chip__checkmark-path{stroke-dashoffset:0}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected .mdc-chip__icon--leading{color:rgba(98,0,238,.54)}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected:hover{color:#6200ee;color:var(--mdc-theme-primary, #6200ee)}.mdc-chip-set--choice .mdc-chip .mdc-chip__checkmark-path{stroke:#6200ee;stroke:var(--mdc-theme-primary, #6200ee)}.mdc-chip-set--choice .mdc-chip--selected{background-color:#fff;background-color:var(--mdc-theme-surface, #fff)}.mdc-chip__checkmark-svg{width:0;height:20px;transition:width 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-chip--selected .mdc-chip__checkmark-svg{width:20px}.mdc-chip-set--filter .mdc-chip__icon--leading{transition:opacity 75ms linear;transition-delay:-50ms;opacity:1}.mdc-chip-set--filter .mdc-chip__icon--leading+.mdc-chip__checkmark{transition:opacity 75ms linear;transition-delay:80ms;opacity:0}.mdc-chip-set--filter .mdc-chip__icon--leading+.mdc-chip__checkmark .mdc-chip__checkmark-svg{transition:width 0ms}.mdc-chip-set--filter .mdc-chip--selected .mdc-chip__icon--leading{opacity:0}.mdc-chip-set--filter .mdc-chip--selected .mdc-chip__icon--leading+.mdc-chip__checkmark{width:0;opacity:1}.mdc-chip-set--filter .mdc-chip__icon--leading-hidden.mdc-chip__icon--leading{width:0;opacity:0}.mdc-chip-set--filter .mdc-chip__icon--leading-hidden.mdc-chip__icon--leading+.mdc-chip__checkmark{width:20px}@-webkit-keyframes mdc-ripple-fg-radius-in{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{-webkit-transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1));transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@keyframes mdc-ripple-fg-radius-in{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1);transform:translate(var(--mdc-ripple-fg-translate-start, 0)) scale(1)}to{-webkit-transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1));transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}}@-webkit-keyframes mdc-ripple-fg-opacity-in{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@keyframes mdc-ripple-fg-opacity-in{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity, 0)}}@-webkit-keyframes mdc-ripple-fg-opacity-out{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}@keyframes mdc-ripple-fg-opacity-out{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity, 0)}to{opacity:0}}.mdc-ripple-surface--test-edge-var-bug{--mdc-ripple-surface-test-edge-var: 1px solid #000;visibility:hidden}.mdc-ripple-surface--test-edge-var-bug::before{border:var(--mdc-ripple-surface-test-edge-var)}.mdc-chip{--mdc-ripple-fg-size: 0;--mdc-ripple-left: 0;--mdc-ripple-top: 0;--mdc-ripple-fg-scale: 1;--mdc-ripple-fg-translate-end: 0;--mdc-ripple-fg-translate-start: 0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-chip::before,.mdc-chip::after{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:\\\"\\\"}.mdc-chip::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1}.mdc-chip.mdc-ripple-upgraded::before{-webkit-transform:scale(var(--mdc-ripple-fg-scale, 1));transform:scale(var(--mdc-ripple-fg-scale, 1))}.mdc-chip.mdc-ripple-upgraded::after{top:0;left:0;-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:center center;transform-origin:center center}.mdc-chip.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top, 0);left:var(--mdc-ripple-left, 0)}.mdc-chip.mdc-ripple-upgraded--foreground-activation::after{-webkit-animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards;animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-chip.mdc-ripple-upgraded--foreground-deactivation::after{-webkit-animation:mdc-ripple-fg-opacity-out 150ms;animation:mdc-ripple-fg-opacity-out 150ms;-webkit-transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1));transform:translate(var(--mdc-ripple-fg-translate-end, 0)) scale(var(--mdc-ripple-fg-scale, 1))}.mdc-chip::before,.mdc-chip::after{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-chip.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size, 100%);height:var(--mdc-ripple-fg-size, 100%)}.mdc-chip::before,.mdc-chip::after{background-color:rgba(0,0,0,.87)}.mdc-chip:hover::before{opacity:.04}.mdc-chip:not(.mdc-ripple-upgraded):focus::before,.mdc-chip.mdc-ripple-upgraded--background-focused::before{transition-duration:75ms;opacity:.12}.mdc-chip:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-chip:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12}.mdc-chip.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: 0.12}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected::before{opacity:.08}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected::before,.mdc-chip-set--choice .mdc-chip.mdc-chip--selected::after{background-color:#6200ee}@supports not (-ms-ime-align: auto){.mdc-chip-set--choice .mdc-chip.mdc-chip--selected::before,.mdc-chip-set--choice .mdc-chip.mdc-chip--selected::after{background-color:var(--mdc-theme-primary, #6200ee)}}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected:hover::before{opacity:.12}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected:not(.mdc-ripple-upgraded):focus::before,.mdc-chip-set--choice .mdc-chip.mdc-chip--selected.mdc-ripple-upgraded--background-focused::before{transition-duration:75ms;opacity:.2}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.2}.mdc-chip-set--choice .mdc-chip.mdc-chip--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity: 0.2}@-webkit-keyframes mdc-chip-entry{from{-webkit-transform:scale(0.8);transform:scale(0.8);opacity:.4}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes mdc-chip-entry{from{-webkit-transform:scale(0.8);transform:scale(0.8);opacity:.4}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}.mdc-chip-set{padding:4px;display:flex;flex-wrap:wrap;box-sizing:border-box}.mdc-chip-set .mdc-chip{margin:4px}.mdc-chip-set--input .mdc-chip{-webkit-animation:mdc-chip-entry 100ms cubic-bezier(0, 0, 0.2, 1);animation:mdc-chip-entry 100ms cubic-bezier(0, 0, 0.2, 1)}\\n\\n/*# sourceMappingURL=mdc.chips.min.css.map*/\"","import { LitElement, TemplateResult, html, property } from \"lit-element\";\nimport { HomeAssistant } from \"../../../../types\";\nimport { DeviceAutomation } from \"../../../../data/device_automation\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-chips\";\nimport { showAutomationEditor } from \"../../../../data/automation\";\n\nexport abstract class HaDeviceAutomationCard<\n  T extends DeviceAutomation\n> extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public deviceId?: string;\n  @property() public automations: T[] = [];\n\n  protected headerKey = \"\";\n  protected type = \"\";\n\n  private _localizeDeviceAutomation: (\n    hass: HomeAssistant,\n    automation: T\n  ) => string;\n\n  constructor(\n    localizeDeviceAutomation: HaDeviceAutomationCard<\n      T\n    >[\"_localizeDeviceAutomation\"]\n  ) {\n    super();\n    this._localizeDeviceAutomation = localizeDeviceAutomation;\n  }\n\n  protected shouldUpdate(changedProps): boolean {\n    if (changedProps.has(\"deviceId\") || changedProps.has(\"automations\")) {\n      return true;\n    }\n    const oldHass = changedProps.get(\"hass\");\n    if (!oldHass || this.hass.language !== oldHass.language) {\n      return true;\n    }\n    return false;\n  }\n\n  protected render(): TemplateResult {\n    if (this.automations.length === 0) {\n      return html``;\n    }\n    return html`\n      <ha-card>\n        <div class=\"card-header\">\n          ${this.hass.localize(this.headerKey)}\n        </div>\n        <div class=\"card-content\">\n          <ha-chips\n            @chip-clicked=${this._handleAutomationClicked}\n            .items=${this.automations.map((automation) =>\n              this._localizeDeviceAutomation(this.hass, automation)\n            )}\n          >\n          </ha-chips>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private _handleAutomationClicked(ev: CustomEvent) {\n    const automation = this.automations[ev.detail.index];\n    if (!automation) {\n      return;\n    }\n    const data = {};\n    data[this.type] = [automation];\n    showAutomationEditor(this, data);\n  }\n}\n","import { customElement } from \"lit-element\";\nimport {\n  DeviceTrigger,\n  localizeDeviceAutomationTrigger,\n} from \"../../../../data/device_automation\";\n\nimport { HaDeviceAutomationCard } from \"./ha-device-automation-card\";\n\n@customElement(\"ha-device-triggers-card\")\nexport class HaDeviceTriggersCard extends HaDeviceAutomationCard<\n  DeviceTrigger\n> {\n  protected type = \"trigger\";\n  protected headerKey = \"ui.panel.config.devices.automation.triggers.caption\";\n\n  constructor() {\n    super(localizeDeviceAutomationTrigger);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-device-triggers-card\": HaDeviceTriggersCard;\n  }\n}\n","import { customElement } from \"lit-element\";\nimport {\n  DeviceCondition,\n  localizeDeviceAutomationCondition,\n} from \"../../../../data/device_automation\";\n\nimport \"../../../../components/ha-card\";\n\nimport { HaDeviceAutomationCard } from \"./ha-device-automation-card\";\n\n@customElement(\"ha-device-conditions-card\")\nexport class HaDeviceConditionsCard extends HaDeviceAutomationCard<\n  DeviceCondition\n> {\n  protected type = \"condition\";\n  protected headerKey = \"ui.panel.config.devices.automation.conditions.caption\";\n\n  constructor() {\n    super(localizeDeviceAutomationCondition);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-device-conditions-card\": HaDeviceConditionsCard;\n  }\n}\n","import { customElement } from \"lit-element\";\nimport {\n  DeviceAction,\n  localizeDeviceAutomationAction,\n} from \"../../../../data/device_automation\";\n\nimport \"../../../../components/ha-card\";\n\nimport { HaDeviceAutomationCard } from \"./ha-device-automation-card\";\n\n@customElement(\"ha-device-actions-card\")\nexport class HaDeviceActionsCard extends HaDeviceAutomationCard<DeviceAction> {\n  protected type = \"action\";\n  protected headerKey = \"ui.panel.config.devices.automation.actions.caption\";\n\n  constructor() {\n    super(localizeDeviceAutomationAction);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-device-actions-card\": HaDeviceActionsCard;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  property,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\n\nimport { HomeAssistant } from \"../../../../types\";\n\nimport \"../../../../components/entity/state-badge\";\n\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\n\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-icon\";\nimport \"../../../../components/ha-switch\";\nimport { showEntityRegistryDetailDialog } from \"../../entity_registry/show-dialog-entity-registry-detail\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { computeDomain } from \"../../../../common/entity/compute_domain\";\nimport { domainIcon } from \"../../../../common/entity/domain_icon\";\n// tslint:disable-next-line\nimport { HaSwitch } from \"../../../../components/ha-switch\";\nimport { EntityRegistryStateEntry } from \"../ha-config-device-page\";\n\n@customElement(\"ha-device-entities-card\")\nexport class HaDeviceEntitiesCard extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public deviceId!: string;\n  @property() public entities!: EntityRegistryStateEntry[];\n  @property() public narrow!: boolean;\n  @property() private _showDisabled = false;\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-card>\n        <paper-item>\n          <ha-switch\n            ?checked=${this._showDisabled}\n            @change=${this._showDisabledChanged}\n            >${this.hass.localize(\n              \"ui.panel.config.entity_registry.picker.show_disabled\"\n            )}\n          </ha-switch>\n        </paper-item>\n        ${this.entities.length\n          ? this.entities.map((entry: EntityRegistryStateEntry) => {\n              if (!this._showDisabled && entry.disabled_by) {\n                return \"\";\n              }\n              const stateObj = this.hass.states[entry.entity_id];\n              return html`\n                <paper-icon-item\n                  .entry=${entry}\n                  class=${classMap({ \"disabled-entry\": !!entry.disabled_by })}\n                >\n                  ${stateObj\n                    ? html`\n                        <state-badge\n                          @click=${this._openMoreInfo}\n                          .stateObj=${stateObj}\n                          slot=\"item-icon\"\n                        ></state-badge>\n                      `\n                    : html`\n                        <ha-icon\n                          slot=\"item-icon\"\n                          .icon=${domainIcon(computeDomain(entry.entity_id))}\n                        ></ha-icon>\n                      `}\n                  <paper-item-body two-line @click=${this._openMoreInfo}>\n                    <div class=\"name\">${entry.stateName}</div>\n                    <div class=\"secondary entity-id\">${entry.entity_id}</div>\n                  </paper-item-body>\n                  <div class=\"buttons\">\n                    ${stateObj\n                      ? html`\n                          <paper-icon-button\n                            @click=${this._openMoreInfo}\n                            icon=\"hass:information-outline\"\n                          ></paper-icon-button>\n                        `\n                      : \"\"}\n                    <paper-icon-button\n                      @click=${this._openEditEntry}\n                      icon=\"hass:settings\"\n                    ></paper-icon-button>\n                  </div>\n                </paper-icon-item>\n              `;\n            })\n          : html`\n              <div class=\"config-entry-row\">\n                <paper-item-body two-line>\n                  <div>\n                    ${this.hass.localize(\n                      \"ui.panel.config.devices.entities.none\"\n                    )}\n                  </div>\n                </paper-item-body>\n              </div>\n            `}\n      </ha-card>\n    `;\n  }\n\n  private _showDisabledChanged(ev: Event) {\n    this._showDisabled = (ev.target as HaSwitch).checked;\n  }\n\n  private _openEditEntry(ev: MouseEvent): void {\n    const entry = (ev.currentTarget! as any).closest(\"paper-icon-item\").entry;\n    showEntityRegistryDetailDialog(this, {\n      entry,\n    });\n  }\n\n  private _openMoreInfo(ev: MouseEvent) {\n    const entry = (ev.currentTarget! as any).closest(\"paper-icon-item\").entry;\n    fireEvent(this, \"hass-more-info\", { entityId: entry.entity_id });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-icon {\n        width: 40px;\n      }\n      .entity-id {\n        color: var(--secondary-text-color);\n      }\n      .buttons {\n        text-align: right;\n        margin: 0 0 0 8px;\n      }\n      .disabled-entry {\n        color: var(--secondary-text-color);\n      }\n      state-badge {\n        cursor: pointer;\n      }\n      paper-icon-item:not(.disabled-entry) paper-item-body {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n","import {\n  property,\n  LitElement,\n  html,\n  customElement,\n  css,\n  CSSResult,\n} from \"lit-element\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../layouts/hass-error-screen\";\nimport \"../ha-config-section\";\n\nimport \"./device-detail/ha-device-card\";\nimport \"./device-detail/ha-device-triggers-card\";\nimport \"./device-detail/ha-device-conditions-card\";\nimport \"./device-detail/ha-device-actions-card\";\nimport \"./device-detail/ha-device-entities-card\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ConfigEntry } from \"../../../data/config_entries\";\nimport {\n  EntityRegistryEntry,\n  updateEntityRegistryEntry,\n} from \"../../../data/entity_registry\";\nimport {\n  DeviceRegistryEntry,\n  updateDeviceRegistryEntry,\n} from \"../../../data/device_registry\";\nimport { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport {\n  loadDeviceRegistryDetailDialog,\n  showDeviceRegistryDetailDialog,\n} from \"../../../dialogs/device-registry-detail/show-dialog-device-registry-detail\";\n\nimport {\n  DeviceTrigger,\n  DeviceAction,\n  DeviceCondition,\n  fetchDeviceTriggers,\n  fetchDeviceConditions,\n  fetchDeviceActions,\n} from \"../../../data/device_automation\";\nimport { compare } from \"../../../common/string/compare\";\nimport { computeStateName } from \"../../../common/entity/compute_state_name\";\nimport { createValidEntityId } from \"../../../common/entity/valid_entity_id\";\n\nexport interface EntityRegistryStateEntry extends EntityRegistryEntry {\n  stateName?: string;\n}\n\n@customElement(\"ha-config-device-page\")\nexport class HaConfigDevicePage extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public devices!: DeviceRegistryEntry[];\n  @property() public entries!: ConfigEntry[];\n  @property() public entities!: EntityRegistryEntry[];\n  @property() public areas!: AreaRegistryEntry[];\n  @property() public deviceId!: string;\n  @property() public narrow!: boolean;\n  @property() public showAdvanced!: boolean;\n  @property() private _triggers: DeviceTrigger[] = [];\n  @property() private _conditions: DeviceCondition[] = [];\n  @property() private _actions: DeviceAction[] = [];\n\n  private _device = memoizeOne(\n    (\n      deviceId: string,\n      devices: DeviceRegistryEntry[]\n    ): DeviceRegistryEntry | undefined =>\n      devices ? devices.find((device) => device.id === deviceId) : undefined\n  );\n\n  private _entities = memoizeOne(\n    (\n      deviceId: string,\n      entities: EntityRegistryEntry[]\n    ): EntityRegistryStateEntry[] =>\n      entities\n        .filter((entity) => entity.device_id === deviceId)\n        .map((entity) => {\n          return { ...entity, stateName: this._computeEntityName(entity) };\n        })\n        .sort((ent1, ent2) =>\n          compare(\n            ent1.stateName || `zzz${ent1.entity_id}`,\n            ent2.stateName || `zzz${ent2.entity_id}`\n          )\n        )\n  );\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    loadDeviceRegistryDetailDialog();\n  }\n\n  protected updated(changedProps): void {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"deviceId\")) {\n      if (this.deviceId) {\n        fetchDeviceTriggers(this.hass, this.deviceId).then(\n          (triggers) => (this._triggers = triggers)\n        );\n        fetchDeviceConditions(this.hass, this.deviceId).then(\n          (conditions) => (this._conditions = conditions)\n        );\n        fetchDeviceActions(this.hass, this.deviceId).then(\n          (actions) => (this._actions = actions)\n        );\n      } else {\n        this._triggers = [];\n        this._conditions = [];\n        this._actions = [];\n      }\n    }\n  }\n\n  protected render() {\n    const device = this._device(this.deviceId, this.devices);\n\n    if (!device) {\n      return html`\n        <hass-error-screen\n          error=\"${this.hass.localize(\n            \"ui.panel.config.devices.device_not_found\"\n          )}\"\n        ></hass-error-screen>\n      `;\n    }\n\n    const entities = this._entities(this.deviceId, this.entities);\n\n    return html`\n      <hass-subpage .header=${device.name_by_user || device.name}>\n        <paper-icon-button\n          slot=\"toolbar-icon\"\n          icon=\"hass:settings\"\n          @click=${this._showSettings}\n        ></paper-icon-button>\n        <ha-config-section .isWide=${!this.narrow}>\n          <span slot=\"header\"\n            >${this.hass.localize(\"ui.panel.config.devices.info\")}</span\n          >\n          <span slot=\"introduction\">\n            ${this.hass.localize(\"ui.panel.config.devices.details\")}\n          </span>\n          <ha-device-card\n            .hass=${this.hass}\n            .areas=${this.areas}\n            .devices=${this.devices}\n            .device=${device}\n          ></ha-device-card>\n\n          ${entities.length\n            ? html`\n                <div class=\"header\">\n                  ${this.hass.localize(\"ui.panel.config.devices.entities\")}\n                </div>\n                <ha-device-entities-card\n                  .hass=${this.hass}\n                  .entities=${entities}\n                >\n                </ha-device-entities-card>\n              `\n            : html``}\n          ${this._triggers.length ||\n          this._conditions.length ||\n          this._actions.length\n            ? html`\n                <div class=\"header\">\n                  ${this.hass.localize(\"ui.panel.config.devices.automations\")}\n                </div>\n                ${this._triggers.length\n                  ? html`\n                      <ha-device-triggers-card\n                        .hass=${this.hass}\n                        .automations=${this._triggers}\n                      ></ha-device-triggers-card>\n                    `\n                  : \"\"}\n                ${this._conditions.length\n                  ? html`\n                      <ha-device-conditions-card\n                        .hass=${this.hass}\n                        .automations=${this._conditions}\n                      ></ha-device-conditions-card>\n                    `\n                  : \"\"}\n                ${this._actions.length\n                  ? html`\n                      <ha-device-actions-card\n                        .hass=${this.hass}\n                        .automations=${this._actions}\n                      ></ha-device-actions-card>\n                    `\n                  : \"\"}\n              `\n            : html``}\n        </ha-config-section>\n      </hass-subpage>\n    `;\n  }\n\n  private _computeEntityName(entity) {\n    if (entity.name) {\n      return entity.name;\n    }\n    const state = this.hass.states[entity.entity_id];\n    return state ? computeStateName(state) : null;\n  }\n\n  private async _showSettings() {\n    const device = this._device(this.deviceId, this.devices)!;\n    showDeviceRegistryDetailDialog(this, {\n      device,\n      updateEntry: async (updates) => {\n        const oldDeviceName = device.name_by_user || device.name;\n        const newDeviceName = updates.name_by_user;\n        await updateDeviceRegistryEntry(this.hass, this.deviceId, updates);\n\n        if (\n          !oldDeviceName ||\n          !newDeviceName ||\n          oldDeviceName === newDeviceName\n        ) {\n          return;\n        }\n        const entities = this._entities(this.deviceId, this.entities);\n\n        const renameEntityid =\n          this.showAdvanced &&\n          confirm(\n            this.hass.localize(\n              \"ui.panel.config.devices.confirm_rename_entity_ids\"\n            )\n          );\n\n        const updateProms = entities.map((entity) => {\n          const name = entity.name || entity.stateName;\n          let newEntityId: string | null = null;\n          let newName: string | null = null;\n\n          if (name && name.includes(oldDeviceName)) {\n            newName = name.replace(oldDeviceName, newDeviceName);\n          }\n\n          if (renameEntityid) {\n            const oldSearch = createValidEntityId(oldDeviceName);\n            if (entity.entity_id.includes(oldSearch)) {\n              newEntityId = entity.entity_id.replace(\n                oldSearch,\n                createValidEntityId(newDeviceName)\n              );\n            }\n          }\n\n          if (!newName && !newEntityId) {\n            return new Promise((resolve) => resolve());\n          }\n\n          return updateEntityRegistryEntry(this.hass!, entity.entity_id, {\n            name: newName || name,\n            disabled_by: entity.disabled_by,\n            new_entity_id: newEntityId || entity.entity_id,\n          });\n        });\n        await Promise.all(updateProms);\n      },\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .header {\n        font-family: var(--paper-font-display1_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-display1_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-display1_-_font-size);\n        font-weight: var(--paper-font-display1_-_font-weight);\n        letter-spacing: var(--paper-font-display1_-_letter-spacing);\n        line-height: var(--paper-font-display1_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      ha-config-section *:last-child {\n        padding-bottom: 24px;\n      }\n    `;\n  }\n}\n","import \"@polymer/app-route/app-route\";\n\nimport \"./ha-config-devices-dashboard\";\nimport \"./ha-config-device-page\";\nimport { compare } from \"../../../common/string/compare\";\nimport {\n  subscribeAreaRegistry,\n  AreaRegistryEntry,\n} from \"../../../data/area_registry\";\nimport {\n  HassRouterPage,\n  RouterOptions,\n} from \"../../../layouts/hass-router-page\";\nimport { property, customElement, PropertyValues } from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\nimport { ConfigEntry, getConfigEntries } from \"../../../data/config_entries\";\nimport {\n  EntityRegistryEntry,\n  subscribeEntityRegistry,\n} from \"../../../data/entity_registry\";\nimport {\n  DeviceRegistryEntry,\n  subscribeDeviceRegistry,\n} from \"../../../data/device_registry\";\nimport { UnsubscribeFunc } from \"home-assistant-js-websocket\";\n\n@customElement(\"ha-config-devices\")\nclass HaConfigDevices extends HassRouterPage {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow!: boolean;\n  @property() public showAdvanced!: boolean;\n\n  protected routerOptions: RouterOptions = {\n    defaultPage: \"dashboard\",\n    routes: {\n      dashboard: {\n        tag: \"ha-config-devices-dashboard\",\n        cache: true,\n      },\n      device: {\n        tag: \"ha-config-device-page\",\n      },\n    },\n  };\n\n  @property() private _configEntries: ConfigEntry[] = [];\n  @property() private _entityRegistryEntries: EntityRegistryEntry[] = [];\n  @property() private _deviceRegistryEntries: DeviceRegistryEntry[] = [];\n  @property() private _areas: AreaRegistryEntry[] = [];\n\n  private _unsubs?: UnsubscribeFunc[];\n\n  public connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.hass) {\n      return;\n    }\n    this._loadData();\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubs) {\n      while (this._unsubs.length) {\n        this._unsubs.pop()!();\n      }\n      this._unsubs = undefined;\n    }\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"hass-reload-entries\", () => {\n      this._loadData();\n    });\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (!this._unsubs && changedProps.has(\"hass\")) {\n      this._loadData();\n    }\n  }\n\n  protected updatePageEl(pageEl) {\n    pageEl.hass = this.hass;\n\n    if (this._currentPage === \"dashboard\") {\n      pageEl.domain = this.routeTail.path.substr(1);\n    } else if (this._currentPage === \"device\") {\n      pageEl.deviceId = this.routeTail.path.substr(1);\n    }\n\n    pageEl.entities = this._entityRegistryEntries;\n    pageEl.entries = this._configEntries;\n    pageEl.devices = this._deviceRegistryEntries;\n    pageEl.areas = this._areas;\n    pageEl.narrow = this.narrow;\n    pageEl.showAdvanced = this.showAdvanced;\n  }\n\n  private _loadData() {\n    getConfigEntries(this.hass).then((configEntries) => {\n      this._configEntries = configEntries.sort((conf1, conf2) =>\n        compare(conf1.title, conf2.title)\n      );\n    });\n    if (this._unsubs) {\n      return;\n    }\n    this._unsubs = [\n      subscribeAreaRegistry(this.hass.connection, (areas) => {\n        this._areas = areas;\n      }),\n      subscribeEntityRegistry(this.hass.connection, (entries) => {\n        this._entityRegistryEntries = entries;\n      }),\n      subscribeDeviceRegistry(this.hass.connection, (entries) => {\n        this._deviceRegistryEntries = entries;\n      }),\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-devices\": HaConfigDevices;\n  }\n}\n"],"sourceRoot":""}