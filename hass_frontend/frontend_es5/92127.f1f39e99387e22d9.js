"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["92127"],{92091:function(e,t,i){function a(e){return!!e&&(e instanceof Date&&!isNaN(e.valueOf()))}i.d(t,{Z:()=>a})},46467:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{D_:()=>w,NC:()=>k,Nh:()=>y,U8:()=>C,WB:()=>p,mn:()=>u,p6:()=>l,ud:()=>f,yQ:()=>_});i(63434),i(9359),i(1331),i(96829);var n=i(16485),o=i(27486),r=i(20382),s=i(11104),d=e([n,s]);[n,s]=d.then?(await d)():d;(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,s.f)(e.time_zone,t)})));const l=(e,t,i)=>c(t,i.time_zone).format(e),c=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,s.f)(e.time_zone,t)}))),u=(e,t,i)=>h(t,i.time_zone).format(e),h=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,s.f)(e.time_zone,t)}))),p=(e,t,i)=>{var a,n,o,s;const d=m(t,i.time_zone);if(t.date_format===r.t6.language||t.date_format===r.t6.system)return d.format(e);const l=d.formatToParts(e),c=null===(a=l.find((e=>"literal"===e.type)))||void 0===a?void 0:a.value,u=null===(n=l.find((e=>"day"===e.type)))||void 0===n?void 0:n.value,h=null===(o=l.find((e=>"month"===e.type)))||void 0===o?void 0:o.value,p=null===(s=l.find((e=>"year"===e.type)))||void 0===s?void 0:s.value,f=l.at(l.length-1);let g="literal"===(null==f?void 0:f.type)?null==f?void 0:f.value:"";"bg"===t.language&&t.date_format===r.t6.YMD&&(g="");return{[r.t6.DMY]:`${u}${c}${h}${c}${p}${g}`,[r.t6.MDY]:`${h}${c}${u}${c}${p}${g}`,[r.t6.YMD]:`${p}${c}${h}${c}${u}${g}`}[t.date_format]},m=(0,o.Z)(((e,t)=>{const i=e.date_format===r.t6.system?void 0:e.language;return e.date_format===r.t6.language||(e.date_format,r.t6.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,s.f)(e.time_zone,t)})})),f=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short",timeZone:(0,s.f)(e.time_zone,t)}))),k=(e,t,i)=>v(t,i.time_zone).format(e),v=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric",timeZone:(0,s.f)(e.time_zone,t)}))),y=(e,t,i)=>b(t,i.time_zone).format(e),b=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",timeZone:(0,s.f)(e.time_zone,t)}))),_=(e,t,i)=>x(t,i.time_zone).format(e),x=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",timeZone:(0,s.f)(e.time_zone,t)}))),w=(e,t,i)=>$(t,i.time_zone).format(e),$=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",timeZone:(0,s.f)(e.time_zone,t)}))),C=(e,t,i)=>z(t,i.time_zone).format(e),z=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"short",timeZone:(0,s.f)(e.time_zone,t)})));a()}catch(l){a(l)}}))},64214:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{DG:()=>f,E8:()=>y,W0:()=>p,o0:()=>u,yD:()=>k});var n=i(16485),o=i(27486),r=i(46467),s=i(33570),d=i(11104),l=i(16922),c=e([n,r,s,d]);[n,r,s,d]=c.then?(await c)():c;const u=(e,t,i)=>h(t,i.time_zone).format(e),h=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,l.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.y)(e)?"h12":"h23",timeZone:(0,d.f)(e.time_zone,t)}))),p=e=>m().format(e),m=(0,o.Z)((()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))),f=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",hour:(0,l.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.y)(e)?"h12":"h23",timeZone:(0,d.f)(e.time_zone,t)}))),k=(e,t,i)=>v(t,i.time_zone).format(e),v=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"short",day:"numeric",hour:(0,l.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.y)(e)?"h12":"h23",timeZone:(0,d.f)(e.time_zone,t)}))),y=(e,t,i)=>b(t,i.time_zone).format(e),b=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,l.y)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,l.y)(e)?"h12":"h23",timeZone:(0,d.f)(e.time_zone,t)})));a()}catch(u){a(u)}}))},33570:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{Vu:()=>u,Zs:()=>f,mr:()=>l,xO:()=>p});var n=i(16485),o=i(27486),r=i(11104),s=i(16922),d=e([n,r]);[n,r]=d.then?(await d)():d;const l=(e,t,i)=>c(t,i.time_zone).format(e),c=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,s.y)(e)?"h12":"h23",timeZone:(0,r.f)(e.time_zone,t)}))),u=(e,t,i)=>h(t,i.time_zone).format(e),h=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{hour:(0,s.y)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,s.y)(e)?"h12":"h23",timeZone:(0,r.f)(e.time_zone,t)}))),p=(e,t,i)=>m(t,i.time_zone).format(e),m=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",hour:(0,s.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,s.y)(e)?"h12":"h23",timeZone:(0,r.f)(e.time_zone,t)}))),f=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,o.Z)(((e,t)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,r.f)(e.time_zone,t)})));a()}catch(l){a(l)}}))},11104:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{Q:()=>u,f:()=>h});var n,o,r,s=i(16485),d=i(20382),l=e([s]);s=(l.then?(await l)():l)[0];const c=null===(n=Intl.DateTimeFormat)||void 0===n||null===(o=(r=n.call(Intl)).resolvedOptions)||void 0===o?void 0:o.call(r).timeZone,u=null!=c?c:"UTC",h=(e,t)=>e===d.c_.local&&c?u:t;a()}catch(c){a(c)}}))},16922:function(e,t,i){i.d(t,{y:()=>o});i(19083),i(61006);var a=i(27486),n=i(20382);const o=(0,a.Z)((e=>{if(e.time_format===n.zt.language||e.time_format===n.zt.system){const t=e.time_format===n.zt.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e.time_format===n.zt.am_pm}))},68958:function(e,t,i){i.d(t,{t:()=>o});i(92745),i(9359),i(31526),i(77439),i(19423),i(88972);class a{constructor(e=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=e,e===window.localStorage&&window.addEventListener("storage",(e=>{e.key&&this.hasKey(e.key)&&(this._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,this._listeners[e.key]&&this._listeners[e.key].forEach((t=>t(e.oldValue?JSON.parse(e.oldValue):e.oldValue,this._storage[e.key]))))}))}addFromStorage(e){if(!this._storage[e]){const t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}subscribeChanges(e,t){return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],()=>{this.unsubscribeChanges(e,t)}}unsubscribeChanges(e,t){if(!(e in this._listeners))return;const i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}hasKey(e){return e in this._storage}getValue(e){return this._storage[e]}setValue(e,t){const i=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(a){}finally{this._listeners[e]&&this._listeners[e].forEach((e=>e(i,t)))}}}const n={},o=e=>t=>{const i=e.storage||"localStorage";let o;i&&i in n?o=n[i]:(o=new a(window[i]),n[i]=o);const r=String(t.key),s=e.key||String(t.key),d=t.initializer?t.initializer():void 0;o.addFromStorage(s);const l=!1!==e.subscribe?e=>o.subscribeChanges(s,((i,a)=>{e.requestUpdate(t.key,i)})):void 0,c=()=>o.hasKey(s)?e.deserializer?e.deserializer(o.getValue(s)):o.getValue(s):d;return{kind:"method",placement:"prototype",key:t.key,descriptor:{set(i){((i,a)=>{let n;e.state&&(n=c()),o.setValue(s,e.serializer?e.serializer(a):a),e.state&&i.requestUpdate(t.key,n)})(this,i)},get(){return c()},enumerable:!0,configurable:!0},finisher(i){if(e.state&&e.subscribe){const e=i.prototype.connectedCallback,t=i.prototype.disconnectedCallback;i.prototype.connectedCallback=function(){e.call(this),this[`__unbsubLocalStorage${r}`]=null==l?void 0:l(this)},i.prototype.disconnectedCallback=function(){var e;t.call(this),null===(e=this[`__unbsubLocalStorage${r}`])||void 0===e||e.call(this),this[`__unbsubLocalStorage${r}`]=void 0}}e.state&&i.createProperty(t.key,Object.assign({noAccessor:!0},e.stateOptions))}}}},87733:function(e,t,i){i.d(t,{f:()=>a});const a=e=>e.charAt(0).toUpperCase()+e.slice(1)},29095:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(61701),n=(i(71695),i(47021),i(57243)),o=i(50778),r=(i(59826),i(17170)),s=(i(37583),e([r]));r=(s.then?(await s)():s)[0];let d,l,c,u,h,p,m=e=>e;const f="M2.2,16.06L3.88,12L2.2,7.94L6.26,6.26L7.94,2.2L12,3.88L16.06,2.2L17.74,6.26L21.8,7.94L20.12,12L21.8,16.06L17.74,17.74L16.06,21.8L12,20.12L7.94,21.8L6.26,17.74L2.2,16.06M13,17V15H11V17H13M13,13V7H11V13H13Z",g="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z";(0,a.Z)([(0,o.Mo)("ha-progress-button")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"progress",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"raised",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"unelevated",value(){return!1}},{kind:"field",decorators:[(0,o.SB)()],key:"_result",value:void 0},{kind:"method",key:"render",value:function(){const e=this._result||this.progress;return(0,n.dy)(d||(d=m` <ha-button .raised="${0}" .label="${0}" .unelevated="${0}" .disabled="${0}" class="${0}"> <slot name="icon" slot="icon"></slot> <slot></slot> </ha-button> ${0} `),this.raised,this.label,this.unelevated,this.disabled||this.progress,this._result||"",e?(0,n.dy)(l||(l=m` <div class="progress"> ${0} </div> `),"success"===this._result?(0,n.dy)(c||(c=m`<ha-svg-icon .path="${0}"></ha-svg-icon>`),g):"error"===this._result?(0,n.dy)(u||(u=m`<ha-svg-icon .path="${0}"></ha-svg-icon>`),f):this.progress?(0,n.dy)(h||(h=m`<ha-spinner size="small"></ha-spinner>`)):n.Ld):n.Ld)}},{kind:"method",key:"actionSuccess",value:function(){this._setResult("success")}},{kind:"method",key:"actionError",value:function(){this._setResult("error")}},{kind:"method",key:"_setResult",value:function(e){this._result=e,setTimeout((()=>{this._result=void 0}),2e3)}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(p||(p=m`:host{outline:0;display:inline-block;position:relative;pointer-events:none}ha-button{transition:all 1s;pointer-events:initial}ha-button.success{--mdc-theme-primary:white;background-color:var(--success-color);transition:none;border-radius:4px;pointer-events:none}ha-button[raised].success,ha-button[unelevated].success{--mdc-theme-primary:var(--success-color);--mdc-theme-on-primary:white}ha-button.error{--mdc-theme-primary:white;background-color:var(--error-color);transition:none;border-radius:4px;pointer-events:none}ha-button[raised].error,ha-button[unelevated].error{--mdc-theme-primary:var(--error-color);--mdc-theme-on-primary:white}.progress{bottom:4px;position:absolute;text-align:center;top:4px;width:100%}ha-svg-icon{color:#fff}ha-button.error slot,ha-button.success slot{visibility:hidden}:host([destructive]){--mdc-theme-primary:var(--error-color)}`))}}]}}),n.oi);t()}catch(d){t(d)}}))},83456:function(e,t,i){var a=i(61701),n=(i(71695),i(47021),i(92444)),o=i(76688),r=i(57243),s=i(50778);let d,l=e=>e;(0,a.Z)([(0,s.Mo)("ha-checkbox")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",static:!0,key:"styles",value(){return[o.W,(0,r.iv)(d||(d=l`:host{--mdc-theme-secondary:var(--primary-color)}`))]}}]}}),n.A)},55486:function(e,t,i){var a=i(61701),n=(i(71695),i(47021),i(4918)),o=i(6394),r=i(57243),s=i(50778),d=i(35359),l=i(36522);let c,u,h=e=>e;(0,a.Z)([(0,s.Mo)("ha-formfield")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"disabled",value(){return!1}},{kind:"method",key:"render",value:function(){const e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return(0,r.dy)(c||(c=h` <div class="mdc-form-field ${0}"> <slot></slot> <label class="mdc-label" @click="${0}"> <slot name="label">${0}</slot> </label> </div>`),(0,d.$)(e),this._labelClick,this.label)}},{kind:"method",key:"_labelClick",value:function(){const e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,l.B)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,l.B)(e,"change");break;default:e.click()}}},{kind:"field",static:!0,key:"styles",value(){return[o.W,(0,r.iv)(u||(u=h`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:4px}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`))]}}]}}),n.a)},54202:function(e,t,i){i.r(t),i.d(t,{HaIconButtonArrowPrev:()=>l});var a=i(61701),n=(i(71695),i(47021),i(57243)),o=i(50778),r=i(5111);i(23334);let s,d=e=>e;let l=(0,a.Z)([(0,o.Mo)("ha-icon-button-arrow-prev")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_icon",value(){return"rtl"===r.E.document.dir?"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z":"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}},{kind:"method",key:"render",value:function(){var e;return(0,n.dy)(s||(s=d` <ha-icon-button .disabled="${0}" .label="${0}" .path="${0}"></ha-icon-button> `),this.disabled,this.label||(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.back"))||"Back",this._icon)}}]}}),n.oi)},34326:function(e,t,i){var a=i(61701),n=(i(71695),i(47021),i(57243)),o=i(50778);i(23334),i(83166);let r,s,d,l=e=>e;(0,a.Z)([(0,o.Mo)("ha-password-field")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"invalid",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:"error-message"})],key:"errorMessage",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"icon",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"iconTrailing",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)()],key:"autocomplete",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"autocorrect",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:"input-spellcheck"})],key:"inputSpellcheck",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"value",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"placeholder",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"label",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean,reflect:!0})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"required",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Number})],key:"minLength",value(){return-1}},{kind:"field",decorators:[(0,o.Cb)({type:Number})],key:"maxLength",value(){return-1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean,reflect:!0})],key:"outlined",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"helper",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"validateOnInitialRender",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"validationMessage",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"autoValidate",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"pattern",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:Number})],key:"size",value(){return null}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"helperPersistent",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"charCounter",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"endAligned",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"prefix",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"suffix",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:String})],key:"name",value(){return""}},{kind:"field",decorators:[(0,o.Cb)({type:String,attribute:"input-mode"})],key:"inputMode",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"readOnly",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({attribute:!1,type:String})],key:"autocapitalize",value(){return""}},{kind:"field",decorators:[(0,o.SB)()],key:"_unmaskedPassword",value(){return!1}},{kind:"field",decorators:[(0,o.IO)("ha-textfield")],key:"_textField",value:void 0},{kind:"method",key:"render",value:function(){var e;return(0,n.dy)(r||(r=l`<ha-textfield .invalid="${0}" .errorMessage="${0}" .icon="${0}" .iconTrailing="${0}" .autocomplete="${0}" .autocorrect="${0}" .inputSpellcheck="${0}" .value="${0}" .placeholder="${0}" .label="${0}" .disabled="${0}" .required="${0}" .minLength="${0}" .maxLength="${0}" .outlined="${0}" .helper="${0}" .validateOnInitialRender="${0}" .validationMessage="${0}" .autoValidate="${0}" .pattern="${0}" .size="${0}" .helperPersistent="${0}" .charCounter="${0}" .endAligned="${0}" .prefix="${0}" .name="${0}" .inputMode="${0}" .readOnly="${0}" .autocapitalize="${0}" .type="${0}" .suffix="${0}" @input="${0}" @change="${0}"></ha-textfield> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button>`),this.invalid,this.errorMessage,this.icon,this.iconTrailing,this.autocomplete,this.autocorrect,this.inputSpellcheck,this.value,this.placeholder,this.label,this.disabled,this.required,this.minLength,this.maxLength,this.outlined,this.helper,this.validateOnInitialRender,this.validationMessage,this.autoValidate,this.pattern,this.size,this.helperPersistent,this.charCounter,this.endAligned,this.prefix,this.name,this.inputMode,this.readOnly,this.autocapitalize,this._unmaskedPassword?"text":"password",(0,n.dy)(s||(s=l`<div style="width:24px"></div>`)),this._handleInputEvent,this._handleChangeEvent,(null===(e=this.hass)||void 0===e?void 0:e.localize(this._unmaskedPassword?"ui.components.selectors.text.hide_password":"ui.components.selectors.text.show_password"))||(this._unmaskedPassword?"Hide password":"Show password"),this._toggleUnmaskedPassword,this._unmaskedPassword?"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z":"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z")}},{kind:"method",key:"focus",value:function(){this._textField.focus()}},{kind:"method",key:"checkValidity",value:function(){return this._textField.checkValidity()}},{kind:"method",key:"reportValidity",value:function(){return this._textField.reportValidity()}},{kind:"method",key:"setCustomValidity",value:function(e){return this._textField.setCustomValidity(e)}},{kind:"method",key:"layout",value:function(){return this._textField.layout()}},{kind:"method",key:"_toggleUnmaskedPassword",value:function(){this._unmaskedPassword=!this._unmaskedPassword}},{kind:"method",decorators:[(0,o.hO)({passive:!0})],key:"_handleInputEvent",value:function(e){this.value=e.target.value}},{kind:"method",decorators:[(0,o.hO)({passive:!0})],key:"_handleChangeEvent",value:function(e){this.value=e.target.value,this._reDispatchEvent(e)}},{kind:"method",key:"_reDispatchEvent",value:function(e){const t=new Event(e.type,e);this.dispatchEvent(t)}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(d||(d=l`:host{display:block;position:relative}ha-textfield{width:100%}ha-icon-button{position:absolute;top:8px;right:8px;inset-inline-start:initial;inset-inline-end:8px;--mdc-icon-button-size:40px;--mdc-icon-size:20px;color:var(--secondary-text-color);direction:var(--direction)}`))}}]}}),n.oi)},17170:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(61701),n=i(72621),o=(i(71695),i(47021),i(97677)),r=i(43580),s=i(57243),d=i(50778),l=e([o]);o=(l.then?(await l)():l)[0];let c,u=e=>e;(0,a.Z)([(0,d.Mo)("ha-spinner")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)()],key:"size",value:void 0},{kind:"method",key:"updated",value:function(e){if((0,n.Z)(i,"updated",this,3)([e]),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--ha-spinner-size","16px");break;case"small":this.style.setProperty("--ha-spinner-size","28px");break;case"medium":this.style.setProperty("--ha-spinner-size","48px");break;case"large":this.style.setProperty("--ha-spinner-size","68px");break;case void 0:this.style.removeProperty("--ha-progress-ring-size")}}},{kind:"field",static:!0,key:"styles",value(){return[r.Z,(0,s.iv)(c||(c=u`:host{--indicator-color:var(
          --ha-spinner-indicator-color,
          var(--primary-color)
        );--track-color:var(--ha-spinner-divider-color, var(--divider-color));--track-width:4px;--speed:3.5s;font-size:var(--ha-spinner-size, 48px)}`))]}}]}}),o.Z);t()}catch(c){t(c)}}))},83166:function(e,t,i){var a=i(61701),n=i(72621),o=(i(71695),i(47021),i(1105)),r=i(33990),s=i(57243),d=i(50778),l=i(5111);let c,u,h,p,m=e=>e;(0,a.Z)([(0,d.Mo)("ha-textfield")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"invalid",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:"error-message"})],key:"errorMessage",value:void 0},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"icon",value(){return!1}},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"iconTrailing",value(){return!1}},{kind:"field",decorators:[(0,d.Cb)()],key:"autocomplete",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"autocorrect",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:"input-spellcheck"})],key:"inputSpellcheck",value:void 0},{kind:"field",decorators:[(0,d.IO)("input")],key:"formElement",value:void 0},{kind:"method",key:"updated",value:function(e){(0,n.Z)(i,"updated",this,3)([e]),(e.has("invalid")||e.has("errorMessage"))&&(this.setCustomValidity(this.invalid?this.errorMessage||this.validationMessage||"Invalid":""),(this.invalid||this.validateOnInitialRender||e.has("invalid")&&void 0!==e.get("invalid"))&&this.reportValidity()),e.has("autocomplete")&&(this.autocomplete?this.formElement.setAttribute("autocomplete",this.autocomplete):this.formElement.removeAttribute("autocomplete")),e.has("autocorrect")&&(this.autocorrect?this.formElement.setAttribute("autocorrect",this.autocorrect):this.formElement.removeAttribute("autocorrect")),e.has("inputSpellcheck")&&(this.inputSpellcheck?this.formElement.setAttribute("spellcheck",this.inputSpellcheck):this.formElement.removeAttribute("spellcheck"))}},{kind:"method",key:"renderIcon",value:function(e,t=!1){const i=t?"trailing":"leading";return(0,s.dy)(c||(c=m` <span class="mdc-text-field__icon mdc-text-field__icon--${0}" tabindex="${0}"> <slot name="${0}Icon"></slot> </span> `),i,t?1:-1,i)}},{kind:"field",static:!0,key:"styles",value(){return[r.W,(0,s.iv)(u||(u=m`.mdc-text-field__input{width:var(--ha-textfield-input-width,100%)}.mdc-text-field:not(.mdc-text-field--with-leading-icon){padding:var(--text-field-padding,0px 16px)}.mdc-text-field__affix--suffix{padding-left:var(--text-field-suffix-padding-left,12px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,12px);padding-inline-end:var(--text-field-suffix-padding-right,0px);direction:ltr}.mdc-text-field--with-leading-icon{padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,16px);direction:var(--direction)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:var(--text-field-suffix-padding-left,0px);padding-right:var(--text-field-suffix-padding-right,0px);padding-inline-start:var(--text-field-suffix-padding-left,0px);padding-inline-end:var(--text-field-suffix-padding-right,0px)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--suffix{color:var(--secondary-text-color)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon{color:var(--secondary-text-color)}.mdc-text-field__icon--leading{margin-inline-start:16px;margin-inline-end:8px;direction:var(--direction)}.mdc-text-field__icon--trailing{padding:var(--textfield-icon-trailing-padding,12px)}.mdc-floating-label:not(.mdc-floating-label--float-above){text-overflow:ellipsis;width:inherit;padding-right:30px;padding-inline-end:30px;padding-inline-start:initial;box-sizing:border-box;direction:var(--direction)}input{text-align:var(--text-field-text-align,start)}input[type=color]{height:20px}::-ms-reveal{display:none}:host([no-spinner]) input::-webkit-inner-spin-button,:host([no-spinner]) input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=color]::-webkit-color-swatch-wrapper{padding:0}:host([no-spinner]) input[type=number]{-moz-appearance:textfield}.mdc-text-field__ripple{overflow:hidden}.mdc-text-field{overflow:var(--text-field-overflow)}.mdc-floating-label{inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start);direction:var(--direction);text-align:var(--float-start)}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px - var(--text-field-suffix-padding-left,0px));inset-inline-start:calc(48px + var(--text-field-suffix-padding-left,0px))!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field__input[type=number]{direction:var(--direction)}.mdc-text-field__affix--prefix{padding-right:var(--text-field-prefix-padding-right,2px);padding-inline-end:var(--text-field-prefix-padding-right,2px);padding-inline-start:initial}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--prefix{color:var(--mdc-text-field-label-ink-color)}#helper-text ha-markdown{display:inline-block}`)),"rtl"===l.E.document.dir?(0,s.iv)(h||(h=m`.mdc-floating-label,.mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field__icon--leading,.mdc-text-field__input[type=number]{direction:rtl;--direction:rtl}`)):(0,s.iv)(p||(p=m``))]}}]}}),o.P)},26779:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{$u:()=>g,Kn:()=>f,LG:()=>h,OT:()=>p,U0:()=>x,UR:()=>m});i(19083),i(71695),i(61893),i(55751),i(26200),i(25754),i(22246),i(9359),i(56475),i(1331),i(31526),i(70104),i(19423),i(23669),i(40251),i(19134),i(11740),i(97003),i(92789),i(36810),i(14953),i(58402),i(31503),i(16440),i(2213),i(57385),i(71375),i(15524),i(20267),i(21917),i(56193),i(25020),i(86913),i(47021),i(71513),i(75656),i(50100),i(18084);var n=i(66952),o=i(55116),r=i(5423),s=i(27486),d=i(64214),l=i(33570),c=(i(58014),i(57816),i(92091)),u=(i(11257),e([d,n,l]));[d,n,l]=u.then?(await u)():u;const h=e=>e.callWS({type:"backup/config/info"}),p=e=>{const t=e.find(k);if(t)return t;const i=e.find(v);return i||e[0]},m="backup.local",f="hassio.local",g="cloud.cloud",k=e=>[m,f].includes(e),v=e=>{const[t,i]=e.split(".");return"hassio"===t&&"local"!==i},y=["automatic","manual","addon_update"],b=((0,n.z)((e=>e?y:y.filter((e=>"addon_update"!==e)))),(0,o.H)((0,r.B)(new Date,4),45)),_=(0,o.H)((0,r.B)(new Date,5),45),x=((0,s.Z)(((e,t,i)=>{if((0,c.Z)(i))return(0,l.mr)(i,e,t);if("string"==typeof i&&i){const a=i.split(":"),n=(0,o.H)((0,r.B)(new Date,parseInt(a[0])),parseInt(a[1]));return(0,l.mr)(n,e,t)}return`${(0,l.mr)(b,e,t)} - ${(0,l.mr)(_,e,t)}`})),"application/x-tar");a()}catch(h){a(h)}}))},71562:function(e,t,i){i.d(t,{_n:()=>n,gC:()=>r,h8:()=>o});i(71695),i(9359),i(31526),i(77439),i(40251),i(11740),i(47021),i(71513),i(75656),i(50100),i(18084);var a=i(11257);const n=async()=>(0,a.h9)(fetch(`${location.protocol}//${location.host}/api/onboarding/backup/info`)),o=async e=>(0,a.h9)(fetch(`${location.protocol}//${location.host}/api/onboarding/backup/restore`,{method:"POST",body:JSON.stringify(e)})),r=async(e,t)=>{const i=new FormData;i.append("file",e);const n=new URLSearchParams;return t.forEach((e=>{n.append("agent_id",e)})),(0,a.h9)(fetch(`${location.protocol}//${location.host}/api/onboarding/backup/upload?${n.toString()}`,{method:"POST",body:i}))}},56785:function(e,t,i){i.d(t,{js:()=>n,rY:()=>a});i(19083),i(71695),i(40251),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(47021),i(17803);const a=e=>e.data,n=e=>"object"==typeof e?"object"==typeof e.body?e.body.message||"Unknown error, see supervisor logs":e.body||e.message||"Unknown error, see supervisor logs":e;new Set([502,503,504])},28728:function(e,t,i){i.a(e,(async function(e,a){try{i.r(t);var n=i(61701),o=i(72621),r=(i(19083),i(71695),i(9359),i(1331),i(40251),i(19134),i(61006),i(97003),i(47021),i(57243)),s=i(50778),d=i(50519),l=i(46461),c=(i(21596),i(58776)),u=i(83523),h=i(17409),p=i(71562),m=i(26779),f=i(68958),g=i(37013),k=i(72473),v=e([d,l,m]);[d,l,m]=v.then?(await v)():v;let y,b,_,x,w,$,C,z,I=e=>e;const L=5e3;(0,n.Z)([(0,s.Mo)("onboarding-restore-backup")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"supervisor",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)()],key:"mode",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_view",value(){return"loading"}},{kind:"field",decorators:[(0,s.SB)()],key:"_backup",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_backupInfo",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_failed",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_cloudStatus",value:void 0},{kind:"field",decorators:[(0,f.t)({key:"onboarding-restore-backup-backup-id"})],key:"_backupId",value:void 0},{kind:"field",decorators:[(0,f.t)({key:"onboarding-restore-running"})],key:"_restoreRunning",value:void 0},{kind:"method",key:"render",value:function(){var e;return(0,r.dy)(y||(y=I` ${0} ${0} `),"loading"===this._view?(0,r.dy)(b||(b=I`<onboarding-loading></onboarding-loading>`)):"upload"===this._view?(0,r.dy)(_||(_=I` <onboarding-restore-backup-upload .supervisor="${0}" .localize="${0}" @backup-uploaded="${0}"></onboarding-restore-backup-upload> `),this.supervisor,this.localize,this._backupUploaded):"cloud_login"===this._view?(0,r.dy)(x||(x=I` <onboarding-restore-backup-cloud-login .localize="${0}" @ha-refresh-cloud-status="${0}"></onboarding-restore-backup-cloud-login> `),this.localize,this._showCloudBackup):"empty_cloud"===this._view?(0,r.dy)(w||(w=I` <onboarding-restore-backup-no-cloud-backup .localize="${0}" @sign-out="${0}"></onboarding-restore-backup-no-cloud-backup> `),this.localize,this._signOut):"restore"===this._view?(0,r.dy)($||($=I`<onboarding-restore-backup-restore .mode="${0}" .localize="${0}" .backup="${0}" .supervisor="${0}" .error="${0}" @restore-started="${0}" @restore-backup-back="${0}" @sign-out="${0}"></onboarding-restore-backup-restore>`),this.mode,this.localize,this._backup,this.supervisor,this._failed?this.localize("ui.panel.page-onboarding.restore."+("password_incorrect"===(null===(e=this._backupInfo)||void 0===e||null===(e=e.last_action_event)||void 0===e?void 0:e.reason)?"failed_wrong_password_description":"failed_description")):this._error,this._restoreStarted,this._back,this._signOut):r.Ld,"status"===this._view&&this._backupInfo?(0,r.dy)(C||(C=I`<onboarding-restore-backup-status .localize="${0}" .backupInfo="${0}" @restore-backup-back="${0}"></onboarding-restore-backup-status>`),this.localize,this._backupInfo,this._back):r.Ld)}},{kind:"method",key:"firstUpdated",value:function(e){(0,o.Z)(a,"firstUpdated",this,3)([e]),"cloud"===this.mode?(Promise.all([i.e("91552"),i.e("78456"),i.e("56898"),i.e("35671"),i.e("8795"),i.e("71588"),i.e("92139"),i.e("31241"),i.e("45125"),i.e("88482"),i.e("51273"),i.e("18865"),i.e("44959"),i.e("70147"),i.e("79931"),i.e("44251"),i.e("65005"),i.e("60487"),i.e("3371"),i.e("1466"),i.e("38326"),i.e("10745"),i.e("80809"),i.e("70639"),i.e("92368"),i.e("86915"),i.e("29477"),i.e("69507")]).then(i.bind(i,61877)),i.e("30543").then(i.bind(i,28506))):i.e("19655").then(i.bind(i,75547)),this._loadBackupInfo()}},{kind:"method",key:"_loadBackupInfo",value:async function(){var e;let t;try{t=await(0,p._n)()}catch(l){if(this._restoreRunning){var i;if("Request error"===l.error||500===l.status_code&&"backup_disabled"===(null===(i=l.body)||void 0===i?void 0:i.error))return void this._scheduleLoadBackupInfo();if(404===l.status_code)return this._restoreRunning=void 0,this._backupId=void 0,void window.location.replace("/")}return this._error=(null==l?void 0:l.message)||"Cannot get backup info",void("loading"===this._view&&(this._view="upload"))}const{last_action_event:a,state:n,backups:o}=t;if(this._backupInfo={state:n,last_action_event:a},"cloud"===this.mode){var r;try{this._cloudStatus=await(0,g.Ey)()}catch(l){this._error=(null==l?void 0:l.message)||"Cannot get ioBroker Cloud status"}if(null!==(r=this._cloudStatus)&&void 0!==r&&r.logged_in&&!this._backupId){var s;if(this._backup=o.find((({agents:e})=>Object.keys(e).includes(m.$u))),!this._backup)return void(this._view="empty_cloud");this._backupId=null===(s=this._backup)||void 0===s?void 0:s.backup_id}}else this._backupId&&(this._backup=o.find((({backup_id:e})=>e===this._backupId)));const d="restore_backup"===(null==a?void 0:a.manager_state)&&"failed"===(null==a?void 0:a.state);if(d&&(this._failed=!0),this._restoreRunning)return this._view="status",void(d||"restore_backup"!==n?(this._failed=!0,this._restoreRunning=void 0):this._scheduleLoadBackupInfo());this._backup?this._view="restore":"upload"===this.mode?this._view="upload":null!==(e=this._cloudStatus)&&void 0!==e&&e.logged_in?this._view="empty_cloud":this._view="cloud_login"}},{kind:"method",key:"_showCloudBackup",value:function(){this._view="loading",this._loadBackupInfo()}},{kind:"method",key:"_scheduleLoadBackupInfo",value:function(){setTimeout((()=>this._loadBackupInfo()),L)}},{kind:"method",key:"_backupUploaded",value:async function(e){this._backupId=e.detail.backupId,await this._loadBackupInfo()}},{kind:"method",key:"_restoreStarted",value:async function(){this._backupInfo&&(this._backupInfo.state="restore_backup"),this._view="status",this._restoreRunning=!0,await this._loadBackupInfo()}},{kind:"method",key:"_signOut",value:async function(){this._view="loading",(0,k.C)(this,{id:"sign-out-ha-cloud",message:this.localize("ui.panel.page-onboarding.restore.ha-cloud.sign_out_progress")}),this._backupId=void 0,this._cloudStatus=void 0;try{await(0,g.He)(),(0,k.C)(this,{id:"sign-out-ha-cloud",message:this.localize("ui.panel.page-onboarding.restore.ha-cloud.sign_out_success")})}catch(e){console.error(e),(0,k.C)(this,{id:"sign-out-ha-cloud",message:this.localize("ui.panel.page-onboarding.restore.ha-cloud.sign_out_error")})}(0,u.c)(`${location.pathname}?${(0,c.pc)("page")}`)}},{kind:"method",key:"_back",value:async function(){this._view="loading",this._backup=void 0,this._backupId=void 0,"upload"===this.mode?this._view="upload":(0,u.c)(`${location.pathname}?${(0,c.pc)("page")}`)}},{kind:"field",static:!0,key:"styles",value(){return[h.I,(0,r.iv)(z||(z=I`:host{display:flex;flex-direction:column;position:relative}.logout{white-space:nowrap}`))]}}]}}),r.oi);a()}catch(y){a(y)}}))},50519:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(61701),n=(i(71695),i(9359),i(70104),i(40251),i(47021),i(57243)),o=i(50778),r=(i(59826),i(99426),i(19993),i(74633),i(29095)),s=(i(54202),i(34326),i(29232),i(15369),i(26779)),d=i(71562),l=i(36522),c=i(17409),u=i(64214),h=e([r,s,u]);[r,s,u]=h.then?(await h)():h;let p,m,f,g,k,v,y,b,_,x,w,$,C=e=>e;(0,a.Z)([(0,o.Mo)("onboarding-restore-backup-restore")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"backup",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"supervisor",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)()],key:"error",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"mode",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_encryptionKey",value(){return""}},{kind:"field",decorators:[(0,o.SB)()],key:"_encryptionKeyWrong",value(){return!1}},{kind:"field",decorators:[(0,o.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_loading",value(){return!1}},{kind:"field",decorators:[(0,o.SB)()],key:"_selectedData",value:void 0},{kind:"field",decorators:[(0,o.IO)("ha-progress-button")],key:"_progressButtonElement",value:void 0},{kind:"method",key:"render",value:function(){const e=(0,s.OT)(Object.keys(this.backup.agents)),t=this.backup.agents[e].protected,i=(0,u.W0)(new Date(this.backup.date)),a=0===this.backup.addons.length&&0===this.backup.folders.length;return(0,n.dy)(p||(p=C` <ha-icon-button-arrow-prev .label="${0}" @click="${0}"></ha-icon-button-arrow-prev> <h1> ${0} </h1> ${0} ${0} <ha-md-list> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text">${0}</span> </ha-md-list-item> ${0} </ha-md-list> ${0} ${0} ${0} ${0} ${0} <div class="actions${0}"> ${0} <ha-progress-button unelevated .progress="${0}" .disabled="${0}" @click="${0}"> ${0} </ha-progress-button> </div> `),this.localize("ui.panel.page-onboarding.restore.back"),this._back,this.localize("ui.panel.page-onboarding.restore.details.restore.title"),this.backup.homeassistant_included?(0,n.dy)(m||(m=C`<div class="description"> ${0} </div>`),this.localize("ui.panel.page-onboarding.restore.confirm_restore_full_backup_text")):(0,n.dy)(f||(f=C` <ha-alert alert-type="error"> ${0} </ha-alert> `),this.localize("ui.panel.page-onboarding.restore.details.home_assistant_missing")),this.error?(0,n.dy)(g||(g=C`<ha-alert alert-type="error" .title="${0}"> ${0} </ha-alert>`),this.localize("ui.panel.page-onboarding.restore.failed"),this.error):n.Ld,this.localize("ui.panel.page-onboarding.restore.details.summary.created"),i,a?(0,n.dy)(k||(k=C`<ha-md-list-item> <span slot="headline"> ${0} </span> <ha-backup-formfield-label slot="supporting-text" .version="${0}" .label="${0}"></ha-backup-formfield-label> </ha-md-list-item>`),this.localize("ui.panel.page-onboarding.restore.details.summary.content"),this.backup.homeassistant_version,this.localize("ui.panel.page-onboarding.restore.data_picker."+(this.backup.database_included?"settings_and_history":"settings"))):n.Ld,a?n.Ld:(0,n.dy)(v||(v=C`<h2> ${0} </h2>`),this.localize("ui.panel.page-onboarding.restore.select_type")),this.backup.homeassistant_included&&!this.supervisor&&this.backup.addons.length>0?(0,n.dy)(y||(y=C`<ha-alert class="supervisor-warning"> ${0} <a slot="action" href="https://www.home-assistant.io/installation/#advanced-installation-methods" target="_blank" rel="noreferrer noopener"> <ha-button>${0}</ha-button> </a> </ha-alert>`),this.localize("ui.panel.page-onboarding.restore.details.addons_unsupported"),this.localize("ui.panel.page-onboarding.restore.ha-cloud.learn_more")):n.Ld,a?n.Ld:(0,n.dy)(b||(b=C`<ha-backup-data-picker translation-key-panel="page-onboarding.restore" .localize="${0}" .data="${0}" .value="${0}" @value-changed="${0}" .requiredItems="${0}" .addonsDisabled="${0}"></ha-backup-data-picker>`),this.localize,this.backup,this._selectedData,this._selectedBackupChanged,["config"],!this.supervisor),this._error?(0,n.dy)(_||(_=C`<ha-alert alert-type="error">${0}</ha-alert> `),this._error):n.Ld,t?(0,n.dy)(x||(x=C`<div class="encryption"> <h2> ${0} </h2> <span> ${0} </span> <ha-password-field .disabled="${0}" @input="${0}" .label="${0}" .value="${0}" @keydown="${0}" .errorMessage="${0}" .invalid="${0}"></ha-password-field> </div>`),this.localize("ui.panel.page-onboarding.restore.details.restore.encryption.label"),this.localize("ui.panel.page-onboarding.restore.details.restore.encryption.description"+("cloud"===this.mode?"_cloud":"")),this._loading,this._encryptionKeyChanged,this.localize("ui.panel.page-onboarding.restore.details.restore.encryption.input_label"),this._encryptionKey,this._keyDown,this._encryptionKeyWrong?this.localize("ui.panel.page-onboarding.restore.details.restore.encryption.incorrect_key"):"",this._encryptionKeyWrong):n.Ld,"cloud"===this.mode?" cloud":"","cloud"===this.mode?(0,n.dy)(w||(w=C`<ha-button @click="${0}"> ${0} </ha-button>`),this._signOut,this.localize("ui.panel.page-onboarding.restore.ha-cloud.sign_out")):n.Ld,this._loading,this._loading||t&&""===this._encryptionKey||!this.backup.homeassistant_included,this._startRestore,this.localize("ui.panel.page-onboarding.restore.details.restore.action"))}},{kind:"method",key:"willUpdate",value:function(){this.hasUpdated||(this._selectedData={homeassistant_included:!0,folders:[],addons:[],homeassistant_version:this.backup.homeassistant_version,database_included:this.backup.database_included})}},{kind:"method",key:"_keyDown",value:function(e){"Enter"===e.key&&""!==this._encryptionKey&&this._progressButtonElement.click()}},{kind:"method",key:"_signOut",value:function(){(0,l.B)(this,"sign-out")}},{kind:"method",key:"_selectedBackupChanged",value:function(e){e.stopPropagation(),this._selectedData=e.detail.value}},{kind:"method",key:"_encryptionKeyChanged",value:function(e){this._encryptionKey=e.target.value}},{kind:"method",key:"_startRestore",value:async function(e){const t=Object.keys(this.backup.agents)[0],i=this.backup.agents[t].protected;if(this._loading||i&&""===this._encryptionKey||!this.backup.homeassistant_included||!this._selectedData)return;this._loading=!0;const a=e.currentTarget;this._error=void 0,this._encryptionKeyWrong=!1;const n=Object.keys(this.backup.agents)[0];try{await(0,d.h8)({agent_id:n,backup_id:this.backup.backup_id,password:this._encryptionKey||void 0,restore_addons:this._selectedData.addons.map((e=>e.slug)),restore_database:this._selectedData.database_included,restore_folders:this._selectedData.folders}),a.actionSuccess(),(0,l.B)(this,"restore-started")}catch(s){var o,r;if("Request error"===s.error)return a.actionSuccess(),void(0,l.B)(this,"restore-started");if(a.actionError(),"incorrect_password"===(null===(o=s.body)||void 0===o?void 0:o.code))this._encryptionKeyWrong=!0;else this._error=(null===(r=s.body)||void 0===r?void 0:r.message)||s.message||"Unknown error occurred";this._loading=!1}}},{kind:"method",key:"_back",value:function(){(0,l.B)(this,"restore-backup-back")}},{kind:"get",static:!0,key:"styles",value:function(){return[c.I,(0,n.iv)($||($=C`h1,p{text-align:left}.description{font-size:1rem;line-height:1.5rem;margin-top:24px;margin-bottom:16px}ha-alert{display:block;margin-top:16px}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px;--md-list-item-supporting-text-size:1rem;--md-list-item-label-text-size:0.875rem;--md-list-item-label-text-color:var(--secondary-text-color);--md-list-item-supporting-text-color:var(--primary-text-color)}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:8px;line-height:normal}h2{font-size:22px;margin-top:24px;margin-bottom:8px;font-style:normal;font-weight:400}.supervisor-warning{display:block;margin-bottom:16px}ha-backup-data-picker{display:block;margin-bottom:32px}.encryption{margin-bottom:32px}.encryption ha-password-field{margin-top:24px}.actions{display:flex;justify-content:flex-end}.actions.cloud{justify-content:space-between}a ha-button{--mdc-theme-primary:var(--primary-color);white-space:nowrap}`))]}}]}}),n.oi);t()}catch(p){t(p)}}))},46461:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(61701),n=(i(71695),i(47021),i(87515)),o=i(57243),r=i(50778),s=(i(99426),i(59826),i(17409)),d=i(36522),l=e([n]);n=(l.then?(await l)():l)[0];let c,u,h,p,m,f,g,k=e=>e;(0,a.Z)([(0,r.Mo)("onboarding-restore-backup-status")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"backupInfo",value:void 0},{kind:"method",key:"render",value:function(){var e,t;return(0,o.dy)(c||(c=k` <h1> ${0} </h1> ${0} <div class="card-content"> ${0} </div> ${0} `),this.localize("ui.panel.page-onboarding.restore."+("restore_backup"===this.backupInfo.state?"in_progress":"failed")),"restore_backup"===this.backupInfo.state?(0,o.dy)(u||(u=k` <p> ${0} </p>`),this.localize("ui.panel.page-onboarding.restore.in_progress_description")):o.Ld,"restore_backup"===this.backupInfo.state?(0,o.dy)(h||(h=k` <div class="loading"> <mwc-linear-progress indeterminate></mwc-linear-progress> </div> `)):(0,o.dy)(p||(p=k` <ha-alert alert-type="error"> ${0} </ha-alert> ${0} `),this.localize("ui.panel.page-onboarding.restore.failed_status_description"),null!==(e=this.backupInfo.last_action_event)&&void 0!==e&&e.reason?(0,o.dy)(m||(m=k` <div class="failed"> <h4>Error:</h4> ${0} </div> `),null===(t=this.backupInfo.last_action_event)||void 0===t?void 0:t.reason):o.Ld),"restore_backup"!==this.backupInfo.state?(0,o.dy)(f||(f=k`<div class="actions"> <ha-button @click="${0}"> ${0} </ha-button> </div>`),this._back,this.localize("ui.panel.page-onboarding.restore.back")):o.Ld)}},{kind:"method",key:"_back",value:function(){(0,d.B)(this,"restore-backup-back")}},{kind:"get",static:!0,key:"styles",value:function(){return[s.I,(0,o.iv)(g||(g=k`h1,p{text-align:left}.actions{display:flex;justify-content:flex-end}.loading{display:flex;justify-content:center;padding:32px}p{text-align:center;padding:0 16px;font-size:16px}.failed{padding:16px 0;font-size:16px}mwc-linear-progress{width:100%}`))]}}]}}),o.oi);t()}catch(c){t(c)}}))},30511:function(e,t,i){i.r(t),i.d(t,{mdiHomeAssistant:()=>a});const a="m12.151 1.5882c-.3262 0-.6523.1291-.8996.3867l-8.3848 8.7354c-.0619.0644-.1223.1368-.1807.2154-.0588.0789-.1151.1638-.1688.2534-.2593.4325-.4552.9749-.5232 1.4555-.0026.018-.0076.0369-.0094.0548-.0121.0987-.0184.1944-.0184.2857v8.0124a1.2731 1.2731 0 001.2731 1.2731h7.8313l-3.4484-3.593a1.7399 1.7399 0 111.0803-1.125l2.6847 2.7972v-10.248a1.7399 1.7399 0 111.5276-0v7.187l2.6702-2.782a1.7399 1.7399 0 111.0566 1.1505l-3.7269 3.8831v2.7299h8.174a1.2471 1.2471 0 001.2471-1.2471v-8.0375c0-.0912-.0059-.1868-.0184-.2855-.0603-.4935-.2636-1.0617-.5326-1.5105-.0537-.0896-.1101-.1745-.1684-.253-.0588-.079-.1191-.1513-.181-.2158l-8.3848-8.7363c-.2473-.2577-.5735-.3866-.8995-.3864"},58014:function(e,t,i){i.d(t,{N:()=>n,G:()=>o});var a=i(18117);const n=(e,t="")=>{const i=document.createElement("a");i.target="_blank",i.href=e,i.download=t,i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)},o=e=>{var t;return!(e=>!!e.auth.external&&a.G)(e)||!(null===(t=e.auth.external)||void 0===t||!t.config.downloadFileSupported)}},18117:function(e,t,i){i.d(t,{G:()=>a});i(19134),i(5740);const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=92127.f1f39e99387e22d9.js.map