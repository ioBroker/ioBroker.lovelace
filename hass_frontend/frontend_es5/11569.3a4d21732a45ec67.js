"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["11569"],{17712:function(t,e,a){a.r(e);var n=a(61701),o=a(72621),i=(a(52247),a(71695),a(40251),a(47021),a(72700),a(8038),a(71513),a(75656),a(50100),a(18084),a(57243)),s=a(50778),r=(a(68424),a(29095),a(96194)),d=a(58014),c=a(72473),l=a(34798);let h,u,p=t=>t,f=(0,n.Z)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_attached",value(){return!1}},{kind:"field",decorators:[(0,s.SB)()],key:"_waiting",value(){return!1}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)(a,"connectedCallback",this,3)([]),this._attached=!0}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(a,"disconnectedCallback",this,3)([]),this._attached=!1}},{kind:"method",key:"render",value:function(){return this._attached&&this.stateObj?(0,i.dy)(h||(h=p` <ha-camera-stream .hass="${0}" .stateObj="${0}" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="${0}" .progress="${0}" .disabled="${0}"> ${0} </ha-progress-button> </div> `),this.hass,this.stateObj,this._downloadSnapshot,this._waiting,this.stateObj.state===r.nZ,this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")):i.Ld}},{kind:"method",key:"_downloadSnapshot",value:async function(t){const e=t.currentTarget;this._waiting=!0;try{const t=await this.hass.callApiRaw("GET",`camera_proxy/${this.stateObj.entity_id}`);if(!t)throw new Error("No response from API");const e="image/png"===t.headers.get("content-type")?"png":"jpg",a=(new Date).toLocaleString(),n=`snapshot_${(0,l.l)(this.stateObj.entity_id)}_${a}.${e}`,o=await t.blob(),i=window.URL.createObjectURL(o);(0,d.N)(i,n)}catch(a){return this._waiting=!1,e.actionError(),void(0,c.C)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")})}this._waiting=!1,e.actionSuccess()}},{kind:"field",static:!0,key:"styles",value(){return(0,i.iv)(u||(u=p`:host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:12px;z-index:1;gap:8px}`))}}]}}),i.oi);customElements.define("more-info-camera",f)},58014:function(t,e,a){a.d(e,{N:()=>o,G:()=>i});var n=a(18117);const o=(t,e="")=>{const a=document.createElement("a");a.target="_blank",a.href=t,a.download=e,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},i=t=>{var e;return!(t=>!!t.auth.external&&n.G)(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},18117:function(t,e,a){a.d(e,{G:()=>n});a(19134),a(5740);const n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=11569.3a4d21732a45ec67.js.map