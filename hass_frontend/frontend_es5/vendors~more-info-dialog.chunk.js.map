{"version":3,"sources":["webpack:///./node_modules/@polymer/app-layout/app-toolbar/app-toolbar.js","webpack:///./node_modules/@polymer/iron-icon/iron-icon.js","webpack:///./node_modules/@polymer/iron-media-query/iron-media-query.js","webpack:///./node_modules/@polymer/paper-dialog-behavior/paper-dialog-behavior.js","webpack:///./node_modules/@polymer/paper-dialog-behavior/paper-dialog-shared-styles.js","webpack:///./node_modules/@vaadin/vaadin-button/src/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/lumo/vaadin-button-styles.js","webpack:///./node_modules/@vaadin/vaadin-button/theme/lumo/vaadin-button.js","webpack:///./node_modules/@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-helper.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-mixin.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay-content.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-overlay.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-infinite-scroller.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/src/vaadin-month-calendar.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-overlay-content-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/theme/lumo/vaadin-month-calendar-styles.js","webpack:///./node_modules/@vaadin/vaadin-date-picker/vaadin-date-picker.js","webpack:///./node_modules/@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js","webpack:///./node_modules/@vaadin/vaadin-element-mixin/vaadin-element-mixin.js","webpack:///./node_modules/@vaadin/vaadin-lumo-styles/mixins/field-button.js","webpack:///./node_modules/@vaadin/vaadin-lumo-styles/mixins/required-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field-mixin.js","webpack:///./node_modules/@vaadin/vaadin-text-field/src/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field-styles.js","webpack:///./node_modules/@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field.js","webpack:///./node_modules/@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js"],"names":["Polymer","_template","html","is","properties","icon","type","String","theme","src","_meta","value","Base","create","observers","_DEFAULT_ICONSET","_iconChanged","parts","split","_iconName","pop","_iconsetName","_updateIcon","_srcChanged","_usesIconset","_img","parentNode","dom","root","removeChild","_iconset","removeIcon","byKey","applyIcon","unlisten","window","listen","document","createElement","style","width","height","draggable","appendChild","queryMatches","Boolean","readOnly","notify","query","observer","full","_boundMQHandler","queryHandler","bind","_mq","attached","display","queryChanged","detached","_remove","_add","addListener","removeListener","matchMedia","mq","_setQueryMatches","matches","PaperDialogBehaviorImpl","hostAttributes","modal","__readied","listeners","ready","__prevNoCancelOnOutsideClick","noCancelOnOutsideClick","__prevNoCancelOnEscKey","noCancelOnEscKey","__prevWithBackdrop","withBackdrop","_modalChanged","readied","_updateClosingReasonConfirmed","confirmed","closingReason","_onDialogClick","event","path","i","l","indexOf","target","hasAttribute","close","stopPropagation","PaperDialogBehavior","IronOverlayBehavior","$_documentContainer","setAttribute","innerHTML","head","content","ButtonElement","$","button","_addActiveListeners","removeAttribute","disabled","addEventListener","e","keyCode","ElementMixin","ControlStateMixin","ThemableMixin","GestureEventListeners","PolymerElement","customElements","define","TabIndexMixin","superClass","tabindex","Number","reflectToAttribute","ShadyDOM","composedPath","_focus","focusElement","_setFocused","ensureEventComposed","composed","dispatchEvent","CustomEvent","bubbles","cancelable","shadowRoot","defaultPrevented","shiftKey","_isShiftTabbing","HTMLElement","prototype","focus","apply","setTimeout","firefox","navigator","userAgent","match","parseFloat","nextSibling","fakeTarget","position","opacity","tabIndex","insertBefore","autofocus","focused","requestAnimationFrame","_boundKeydownListener","_bodyKeydownListener","_boundKeyupListener","_bodyKeyupListener","body","removeEventListener","_tabPressed","blur","_previousTabIndex","undefined","setProperties","console","warn","localName","DatePickerHelper","date","dayOfWeek","getDay","nearestThursdayDiff","nearestThursday","Date","getTime","firstOfJanuary","setFullYear","getFullYear","timeDiff","daysSinceFirstOfJanuary","Math","round","floor","date1","date2","getMonth","getDate","min","max","dates","filter","reduce","closestDate","candidate","candidateDiff","abs","closestDateDiff","day","month","year","DatePickerMixin","subclass","_boundOnScroll","_onScroll","_boundFocus","_boundUpdateAlignmentAndPosition","_updateAlignmentAndPosition","open","_preventDefault","_onKeydown","_onUserInput","_noInput","overlay","_overlayInitialized","opened","detail","_overlayContent","_close","_focusAndSelect","_onVaadinOverlayClose","readonly","str","exec","parseInt","setMonth","setDate","fullscreen","ios","i18n","_inputElement","parseDate","pad","num","fmt","substr","length","yearSign","yearFmt","yearAbs","join","_initOverlay","selectedDate","formatDate","__userInputOccurred","__dispatchChange","inputValue","_extractDateParts","_formatISO","validate","_focusedDate","_inputValue","focusedDate","_ignoreFocusedDateChange","overlayInitialized","property","oldValue","_parseDate","_dateEquals","_handleDateChange","_fullscreen","inputRect","getBoundingClientRect","bottomAlign","top","innerHeight","rightAlign","left","clientWidth","innerWidth","viewportWidth","documentElement","removeProperty","right","viewportHeight","clientHeight","bottom","getComputedStyle","getPropertyValue","_repositionYearScroller","_openedWithFocusRing","parsedInitialPosition","initialPosition","_selectedDate","_dateAllowed","_minDate","_maxDate","_getClosestDate","scrollToDate","_webkitOverflowScroll","_touchPrevented","_preventWebkitOverflowScrollingTouch","parentElement","_focusOverlayOnOpen","updateStyles","_ignoreAnnounce","element","result","webkitOverflowScrolling","oldInlineValue","push","forEach","prevented","dateObject","parsedDate","_isValidDate","_nativeInput","selectionStart","selectionEnd","invalid","checkValidity","inputValid","minMaxValid","inputValidity","contains","_setSelectionRange","a","b","setSelectionRange","preventDefault","keys","k","IronA11yKeysBehavior","keyboardEventMatchesKeys","d","isNaN","allowedKeys","_eventKey","focusCancel","revealDate","_userInputValueChanged","announceFocusedDate","_input","inputElement","unwrap","querySelector","required","name","label","showWeekNumbers","_fullscreenMediaQuery","Array","Object","monthNames","weekdays","weekdaysShort","firstDayOfWeek","week","calendar","clear","today","cancel","yearStr","replace","y","text","formatTitle","monthName","fullYear","computed","_ios","mixinBehaviors","IronResizableBehavior","DatePickerOverlayContentElement","_stopPropagation","_onOverlayFocus","_onOverlayBlur","_closeYearScroller","_toggleAnimateClass","setTouchAction","scrollers","IronA11yAnnouncer","requestAvailability","_currentlyFocusedDate","announce","concat","_getISOWeekNumber","cancelButton","animate","_scrollToPosition","_differenceInMonths","_originDate","yearsFromNow","diff","scrolledAboveViewport","monthScroller","visibleItems","itemHeight","scrolledBelowViewport","_focused","_visibleMonthIndex","yearScroller","_doIgnoreTaps","_repositionMonthScroller","_notTapping","_ignoreTaps","_debouncer","Debouncer","debounce","timeOut","after","_scrollToCurrentMonth","scrollDelta","yearDelta","targetPosition","_targetPosition","easingFunction","t","c","duration","start","smoothScroll","timestamp","currentTime","currentPos","oldPosition","range","dx","ddy","ddx","_yearScrollerWidth","newTranslateX","_translateX","_limit","_desktopMode","state","_handleTrack","_openYearScroller","enable","classList","add","remove","_isYearScrollerVisible","x","transform","index","months","_dateAfterXMonths","overlayContent","getRootNode","host","isToday","todayButton","isCancel","isScroller","eventKey","isFullscreen","isShift","_moveFocusByDays","_onTodayTap","_moveFocusInsideMonth","_moveFocusByMonths","_cancel","dateToFocus","_focusedMonthDate","_focusDate","minDate","maxDate","days","_focusClosestDate","targetMonth","todayMidnight","ThemePropertyMixin","DatePickerOverlayElement","DisableUpgradeMixin","OverlayElement","DatePickerElement","afterNextRender","sourceEvent","prevent","_clear","input","toString","errorMessage","placeholder","_userInputValue","InfiniteScrollerElement","_buffers","slice","call","querySelectorAll","fullHeight","_initialScroll","tpl","_TemplateClass","templatize","forwardHostProp","prop","buffer","children","insertionPoint","_itemWrapper","instance","isFirefox","toLowerCase","scroller","active","_initialized","_createPool","_initDone","_ensureStampedInstance","translateY","_reset","up","_bufferHeight","updated","reverse","_scrollDisabled","scrollTop","_initialIndex","bufferOffset","offsetTop","upperThresholdReached","lowerThresholdReached","_translateBuffer","_updateClones","_preventScrollEvent","_mayHaveMomentum","_debouncerScrollFinish","scrollerRect","_isVisible","_debouncerUpdateClones","container","itemWrapper","contentId","_contentIndex","slotName","flush","bufferSize","_finishInit","firstElementChild","tmpInstance","set","viewPortOnly","_firstIndex","bufferIndex","firstIndex","rect","_itemHeightVal","ShadyCSS","nativeCss","getComputedStyleValue","tmpStyleProp","setProperty","itemHeightPx","MonthCalendarElement","firstDate","lastDate","delta","weekDayNames","weekDayNamesShort","_applyFirstDayOfWeek","map","weekDay","weekDayShort","_dateAdd","startMonth","acc","_getWeekNumber","arr","ignoreTaps","ariaLabel","_getDate","_isToday","_days","DEV_MODE_CODE_REGEXP","isMinified","test","uncommentAndRun","isDevelopmentMode","isForcedDevelopmentMode","isLocalhost","isFlowProductionMode","localStorage","getItem","location","hostname","Vaadin","Flow","clients","productionModeApps","key","client","productionMode","callback","args","Function","log","runIfDevelopmentMode","developmentMode","registrations","developmentModeCallback","usageStatistics","statsJob","doctype","idlePeriod","enqueueDebouncer","HOST_PROPS","accessible","PROP_TYPE","DEFAULT","ACCESSIBLE","TextFieldMixin","__preventInput","stopImmediatePropagation","preventInvalidInput","_inputDebouncer","__fromClearButton","__userInput","clearButtonVisible","hasValue","clearButton","_valueClearing","changeEvent","newVal","oldVal","slotted","_slottedTagName","_slottedInput","_validateSlottedValue","_addInputListeners","_addIEListeners","_removeInputListeners","_removeIEListeners","_propagateHostAttributes","attr","attributesValues","attributeNames","_setOrToggleAttribute","node","pattern","maxlength","minlength","_boundOnInput","_boundOnChange","_boundOnBlur","_boundOnFocus","_onInput","_onChange","_onBlur","_onFocus","defaultInput","_onSlotChange","_onClearButtonClick","_onKeyDown","uniqueId","_uniqueId","_errorId","constructor","_labelId","autoselect","select","inputEvent","Event","_shouldPreventInput","_createPropertyObserver","errorId","labelId","isSafari","WEBKIT_PROPERTY","el","autocomplete","autocorrect","autocapitalize","TextFieldElement","list","title","maybeGatherAndSendStats"],"mappings":"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","file":"vendors~more-info-dialog.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\napp-toolbar is a horizontal toolbar containing items that can be used for\nlabel, navigation, search and actions.\n\n### Example\n\nAdd a title to the toolbar.\n\n```html\n<app-toolbar>\n  <div main-title>App name</div>\n</app-toolbar>\n```\n\nAdd a button to the left and right side of the toolbar.\n\n```html\n<app-toolbar>\n  <paper-icon-button icon=\"menu\"></paper-icon-button>\n  <div main-title>App name</div>\n  <paper-icon-button icon=\"search\"></paper-icon-button>\n</app-toolbar>\n```\n\nYou can use the attributes `top-item` or `bottom-item` to completely fit an\nelement to the top or bottom of the toolbar respectively.\n\n### Content attributes\n\nAttribute            | Description\n---------------------|---------------------------------------------------------\n`main-title`         | The main title element.\n`condensed-title`    | The title element if used inside a condensed app-header.\n`spacer`             | Adds a left margin of `64px`.\n`bottom-item`        | Sticks the element to the bottom of the toolbar.\n`top-item`           | Sticks the element to the top of the toolbar.\n\n### Styling\n\nCustom property              | Description                  | Default\n-----------------------------|------------------------------|-----------------------\n`--app-toolbar-font-size`    | Toolbar font size            | 20px\n\n@group App Elements\n@element app-toolbar\n@demo app-toolbar/demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        position: relative;\n        height: 64px;\n        padding: 0 16px;\n        pointer-events: none;\n        font-size: var(--app-toolbar-font-size, 20px);\n      }\n\n      :host ::slotted(*) {\n        pointer-events: auto;\n      }\n\n      :host ::slotted(paper-icon-button) {\n        /* paper-icon-button/issues/33 */\n        font-size: 0;\n      }\n\n      :host ::slotted([main-title]),\n      :host ::slotted([condensed-title]) {\n        pointer-events: none;\n        @apply --layout-flex;\n      }\n\n      :host ::slotted([bottom-item]) {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      :host ::slotted([top-item]) {\n        position: absolute;\n        top: 0;\n        right: 0;\n        left: 0;\n      }\n\n      :host ::slotted([spacer]) {\n        margin-left: 64px;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'app-toolbar'\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\n\nimport {IronMeta} from '@polymer/iron-meta/iron-meta.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {Base} from '@polymer/polymer/polymer-legacy.js';\n\n/**\n\nThe `iron-icon` element displays an icon. By default an icon renders as a 24px\nsquare.\n\nExample using src:\n\n    <iron-icon src=\"star.png\"></iron-icon>\n\nExample setting size to 32px x 32px:\n\n    <iron-icon class=\"big\" src=\"big_star.png\"></iron-icon>\n\n    <style is=\"custom-style\">\n      .big {\n        --iron-icon-height: 32px;\n        --iron-icon-width: 32px;\n      }\n    </style>\n\nThe iron elements include several sets of icons. To use the default set of\nicons, import `iron-icons.js` and use the `icon` attribute to specify an icon:\n\n    <script type=\"module\">\n      import \"@polymer/iron-icons/iron-icons.js\";\n    </script>\n\n    <iron-icon icon=\"menu\"></iron-icon>\n\nTo use a different built-in set of icons, import the specific\n`iron-icons/<iconset>-icons.js`, and specify the icon as `<iconset>:<icon>`.\nFor example, to use a communication icon, you would use:\n\n    <script type=\"module\">\n      import \"@polymer/iron-icons/communication-icons.js\";\n    </script>\n\n    <iron-icon icon=\"communication:email\"></iron-icon>\n\nYou can also create custom icon sets of bitmap or SVG icons.\n\nExample of using an icon named `cherry` from a custom iconset with the ID\n`fruit`:\n\n    <iron-icon icon=\"fruit:cherry\"></iron-icon>\n\nSee `<iron-iconset>` and `<iron-iconset-svg>` for more information about how to\ncreate a custom iconset.\n\nSee the `iron-icons` demo to see the icons available in the various iconsets.\n\n### Styling\n\nThe following custom properties are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--iron-icon` | Mixin applied to the icon | {}\n`--iron-icon-width` | Width of the icon | `24px`\n`--iron-icon-height` | Height of the icon | `24px`\n`--iron-icon-fill-color` | Fill color of the svg icon | `currentcolor`\n`--iron-icon-stroke-color` | Stroke color of the svg icon | none\n\n@group Iron Elements\n@element iron-icon\n@demo demo/index.html\n@hero hero.svg\n@homepage polymer.github.io\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        @apply --layout-inline;\n        @apply --layout-center-center;\n        position: relative;\n\n        vertical-align: middle;\n\n        fill: var(--iron-icon-fill-color, currentcolor);\n        stroke: var(--iron-icon-stroke-color, none);\n\n        width: var(--iron-icon-width, 24px);\n        height: var(--iron-icon-height, 24px);\n        @apply --iron-icon;\n      }\n\n      :host([hidden]) {\n        display: none;\n      }\n    </style>\n`,\n\n  is: 'iron-icon',\n\n  properties: {\n\n    /**\n     * The name of the icon to use. The name should be of the form:\n     * `iconset_name:icon_name`.\n     */\n    icon: {type: String},\n\n    /**\n     * The name of the theme to used, if one is specified by the\n     * iconset.\n     */\n    theme: {type: String},\n\n    /**\n     * If using iron-icon without an iconset, you can set the src to be\n     * the URL of an individual icon image file. Note that this will take\n     * precedence over a given icon attribute.\n     */\n    src: {type: String},\n\n    /**\n     * @type {!IronMeta}\n     */\n    _meta: {value: Base.create('iron-meta', {type: 'iconset'})}\n\n  },\n\n  observers: [\n    '_updateIcon(_meta, isAttached)',\n    '_updateIcon(theme, isAttached)',\n    '_srcChanged(src, isAttached)',\n    '_iconChanged(icon, isAttached)'\n  ],\n\n  _DEFAULT_ICONSET: 'icons',\n\n  _iconChanged: function(icon) {\n    var parts = (icon || '').split(':');\n    this._iconName = parts.pop();\n    this._iconsetName = parts.pop() || this._DEFAULT_ICONSET;\n    this._updateIcon();\n  },\n\n  _srcChanged: function(src) {\n    this._updateIcon();\n  },\n\n  _usesIconset: function() {\n    return this.icon || !this.src;\n  },\n\n  /** @suppress {visibility} */\n  _updateIcon: function() {\n    if (this._usesIconset()) {\n      if (this._img && this._img.parentNode) {\n        dom(this.root).removeChild(this._img);\n      }\n      if (this._iconName === '') {\n        if (this._iconset) {\n          this._iconset.removeIcon(this);\n        }\n      } else if (this._iconsetName && this._meta) {\n        this._iconset = /** @type {?Polymer.Iconset} */ (\n            this._meta.byKey(this._iconsetName));\n        if (this._iconset) {\n          this._iconset.applyIcon(this, this._iconName, this.theme);\n          this.unlisten(window, 'iron-iconset-added', '_updateIcon');\n        } else {\n          this.listen(window, 'iron-iconset-added', '_updateIcon');\n        }\n      }\n    } else {\n      if (this._iconset) {\n        this._iconset.removeIcon(this);\n      }\n      if (!this._img) {\n        this._img = document.createElement('img');\n        this._img.style.width = '100%';\n        this._img.style.height = '100%';\n        this._img.draggable = false;\n      }\n      this._img.src = this.src;\n      dom(this.root).appendChild(this._img);\n    }\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\n\n/**\n`iron-media-query` can be used to data bind to a CSS media query.\nThe `query` property is a bare CSS media query.\nThe `query-matches` property is a boolean representing whether the page matches\nthat media query.\n\nExample:\n\n```html\n<iron-media-query query=\"(min-width: 600px)\" query-matches=\"{{queryMatches}}\">\n</iron-media-query>\n```\n\n@group Iron Elements\n@demo demo/index.html\n@hero hero.svg\n@element iron-media-query\n*/\nPolymer({\n\n  is: 'iron-media-query',\n\n  properties: {\n\n    /**\n     * The Boolean return value of the media query.\n     */\n    queryMatches: {type: Boolean, value: false, readOnly: true, notify: true},\n\n    /**\n     * The CSS media query to evaluate.\n     */\n    query: {type: String, observer: 'queryChanged'},\n\n    /**\n     * If true, the query attribute is assumed to be a complete media query\n     * string rather than a single media feature.\n     */\n    full: {type: Boolean, value: false},\n\n    /**\n     * @type {function(MediaQueryList)}\n     */\n    _boundMQHandler: {\n      value: function() {\n        return this.queryHandler.bind(this);\n      }\n    },\n\n    /**\n     * @type {MediaQueryList}\n     */\n    _mq: {value: null}\n  },\n\n  attached: function() {\n    this.style.display = 'none';\n    this.queryChanged();\n  },\n\n  detached: function() {\n    this._remove();\n  },\n\n  _add: function() {\n    if (this._mq) {\n      this._mq.addListener(this._boundMQHandler);\n    }\n  },\n\n  _remove: function() {\n    if (this._mq) {\n      this._mq.removeListener(this._boundMQHandler);\n    }\n    this._mq = null;\n  },\n\n  queryChanged: function() {\n    this._remove();\n    var query = this.query;\n    if (!query) {\n      return;\n    }\n    if (!this.full && query[0] !== '(') {\n      query = '(' + query + ')';\n    }\n    this._mq = window.matchMedia(query);\n    this._add();\n    this.queryHandler(this._mq);\n  },\n\n  queryHandler: function(mq) {\n    this._setQueryMatches(mq.matches);\n  }\n\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronOverlayBehavior} from '@polymer/iron-overlay-behavior/iron-overlay-behavior.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n  Use `Polymer.PaperDialogBehavior` and `paper-dialog-shared-styles.html` to\n  implement a Material Design dialog.\n\n  For example, if `<paper-dialog-impl>` implements this behavior:\n\n      <paper-dialog-impl>\n          <h2>Header</h2>\n          <div>Dialog body</div>\n          <div class=\"buttons\">\n              <paper-button dialog-dismiss>Cancel</paper-button>\n              <paper-button dialog-confirm>Accept</paper-button>\n          </div>\n      </paper-dialog-impl>\n\n  `paper-dialog-shared-styles.html` provide styles for a header, content area,\n  and an action area for buttons. Use the `<h2>` tag for the header and the\n  `buttons` class for the action area. You can use the `paper-dialog-scrollable`\n  element (in its own repository) if you need a scrolling content area.\n\n  Use the `dialog-dismiss` and `dialog-confirm` attributes on interactive\n  controls to close the dialog. If the user dismisses the dialog with\n  `dialog-confirm`, the `closingReason` will update to include `confirmed:\n  true`.\n\n  ### Accessibility\n\n  This element has `role=\"dialog\"` by default. Depending on the context, it may\n  be more appropriate to override this attribute with `role=\"alertdialog\"`.\n\n  If `modal` is set, the element will prevent the focus from exiting the\n  element. It will also ensure that focus remains in the dialog.\n\n  @hero hero.svg\n  @demo demo/index.html\n  @polymerBehavior PaperDialogBehavior\n */\nexport const PaperDialogBehaviorImpl = {\n\n  hostAttributes: {'role': 'dialog', 'tabindex': '-1'},\n\n  properties: {\n\n    /**\n     * If `modal` is true, this implies `no-cancel-on-outside-click`,\n     * `no-cancel-on-esc-key` and `with-backdrop`.\n     */\n    modal: {type: Boolean, value: false},\n\n    __readied: {type: Boolean, value: false}\n\n  },\n\n  observers: ['_modalChanged(modal, __readied)'],\n\n  listeners: {'tap': '_onDialogClick'},\n\n  /**\n   * @return {void}\n   */\n  ready: function() {\n    // Only now these properties can be read.\n    this.__prevNoCancelOnOutsideClick = this.noCancelOnOutsideClick;\n    this.__prevNoCancelOnEscKey = this.noCancelOnEscKey;\n    this.__prevWithBackdrop = this.withBackdrop;\n    this.__readied = true;\n  },\n\n  _modalChanged: function(modal, readied) {\n    // modal implies noCancelOnOutsideClick, noCancelOnEscKey and withBackdrop.\n    // We need to wait for the element to be ready before we can read the\n    // properties values.\n    if (!readied) {\n      return;\n    }\n\n    if (modal) {\n      this.__prevNoCancelOnOutsideClick = this.noCancelOnOutsideClick;\n      this.__prevNoCancelOnEscKey = this.noCancelOnEscKey;\n      this.__prevWithBackdrop = this.withBackdrop;\n      this.noCancelOnOutsideClick = true;\n      this.noCancelOnEscKey = true;\n      this.withBackdrop = true;\n    } else {\n      // If the value was changed to false, let it false.\n      this.noCancelOnOutsideClick =\n          this.noCancelOnOutsideClick && this.__prevNoCancelOnOutsideClick;\n      this.noCancelOnEscKey =\n          this.noCancelOnEscKey && this.__prevNoCancelOnEscKey;\n      this.withBackdrop = this.withBackdrop && this.__prevWithBackdrop;\n    }\n  },\n\n  _updateClosingReasonConfirmed: function(confirmed) {\n    this.closingReason = this.closingReason || {};\n    this.closingReason.confirmed = confirmed;\n  },\n\n  /**\n   * Will dismiss the dialog if user clicked on an element with dialog-dismiss\n   * or dialog-confirm attribute.\n   */\n  _onDialogClick: function(event) {\n    // Search for the element with dialog-confirm or dialog-dismiss,\n    // from the root target until this (excluded).\n    var path = dom(event).path;\n    for (var i = 0, l = path.indexOf(this); i < l; i++) {\n      var target = path[i];\n      if (target.hasAttribute &&\n          (target.hasAttribute('dialog-dismiss') ||\n           target.hasAttribute('dialog-confirm'))) {\n        this._updateClosingReasonConfirmed(\n            target.hasAttribute('dialog-confirm'));\n        this.close();\n        event.stopPropagation();\n        break;\n      }\n    }\n  }\n\n};\n\n/** @polymerBehavior */\nexport const PaperDialogBehavior =\n    [IronOverlayBehavior, PaperDialogBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n### Styling\n\nThe following custom properties and mixins are available for styling.\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-dialog-background-color` | Dialog background color | `--primary-background-color`\n`--paper-dialog-color` | Dialog foreground color | `--primary-text-color`\n`--paper-dialog` | Mixin applied to the dialog | `{}`\n`--paper-dialog-title` | Mixin applied to the title (`<h2>`) element | `{}`\n`--paper-dialog-button-color` | Button area foreground color | `--default-primary-color`\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport '@polymer/paper-styles/shadow.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-dialog-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 24px 40px;\n\n        background: var(--paper-dialog-background-color, var(--primary-background-color));\n        color: var(--paper-dialog-color, var(--primary-text-color));\n\n        @apply --paper-font-body1;\n        @apply --shadow-elevation-16dp;\n        @apply --paper-dialog;\n      }\n\n      :host > ::slotted(*) {\n        margin-top: 20px;\n        padding: 0 24px;\n      }\n\n      :host > ::slotted(.no-padding) {\n        padding: 0;\n      }\n\n      \n      :host > ::slotted(*:first-child) {\n        margin-top: 24px;\n      }\n\n      :host > ::slotted(*:last-child) {\n        margin-bottom: 24px;\n      }\n\n      /* In 1.x, this selector was \\`:host > ::content h2\\`. In 2.x <slot> allows\n      to select direct children only, which increases the weight of this\n      selector, so we have to re-define first-child/last-child margins below. */\n      :host > ::slotted(h2) {\n        position: relative;\n        margin: 0;\n\n        @apply --paper-font-title;\n        @apply --paper-dialog-title;\n      }\n\n      /* Apply mixin again, in case it sets margin-top. */\n      :host > ::slotted(h2:first-child) {\n        margin-top: 24px;\n        @apply --paper-dialog-title;\n      }\n\n      /* Apply mixin again, in case it sets margin-bottom. */\n      :host > ::slotted(h2:last-child) {\n        margin-bottom: 24px;\n        @apply --paper-dialog-title;\n      }\n\n      :host > ::slotted(.paper-dialog-buttons),\n      :host > ::slotted(.buttons) {\n        position: relative;\n        padding: 8px 8px 8px 24px;\n        margin: 0;\n\n        color: var(--paper-dialog-button-color, var(--primary-color));\n\n        @apply --layout-horizontal;\n        @apply --layout-end-justified;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n * `<vaadin-button>` is a Web Component providing an accessible and customizable button.\n *\n * ```html\n * <vaadin-button>\n * </vaadin-button>\n * ```\n *\n * ```js\n * document.querySelector('vaadin-button').addEventListener('click', () => alert('Hello World!'));\n * ```\n *\n * ### Styling\n *\n * The following shadow DOM parts are exposed for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label (text) inside the button\n * `prefix` | A slot for e.g. an icon before the label\n * `suffix` | A slot for e.g. an icon after the label\n *\n *\n * The following attributes are exposed for styling:\n *\n * Attribute | Description\n * --------- | -----------\n * `active` | Set when the button is pressed down, either with mouse, touch or the keyboard.\n * `disabled` | Set when the button is disabled.\n * `focus-ring` | Set when the button is focused using the keyboard.\n * `focused` | Set when the button is focused.\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass ButtonElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        GestureEventListeners(PolymerElement)))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        outline: none;\n        white-space: nowrap;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      /* Ensure the button is always aligned on the baseline */\n      .vaadin-button-container::before {\n        content: \"\\\\2003\";\n        display: inline-block;\n        width: 0;\n      }\n\n      .vaadin-button-container {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n        width: 100%;\n        height: 100%;\n        min-height: inherit;\n        text-shadow: inherit;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n      }\n\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        flex: none;\n      }\n\n      [part=\"label\"] {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      #button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: inherit;\n      }\n    </style>\n    <div class=\"vaadin-button-container\">\n      <div part=\"prefix\">\n        <slot name=\"prefix\"></slot>\n      </div>\n      <div part=\"label\">\n        <slot></slot>\n      </div>\n      <div part=\"suffix\">\n        <slot name=\"suffix\"></slot>\n      </div>\n    </div>\n    <button id=\"button\" type=\"button\"></button>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-button';\n  }\n\n  static get version() {\n    return '2.2.0';\n  }\n\n  ready() {\n    super.ready();\n\n    // Leaving default role in the native button, makes navigation announcement\n    // being different when using focus navigation (tab) versus using normal\n    // navigation (arrows). The first way announces the label on a button\n    // since the focus is moved programmatically, and the second on a group.\n    this.setAttribute('role', 'button');\n    this.$.button.setAttribute('role', 'presentation');\n\n    this._addActiveListeners();\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // `active` state is preserved when the element is disconnected between keydown and keyup events.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('active')) {\n      this.removeAttribute('active');\n    }\n  }\n\n  _addActiveListeners() {\n    addListener(this, 'down', () => !this.disabled && this.setAttribute('active', ''));\n    addListener(this, 'up', () => this.removeAttribute('active'));\n    this.addEventListener('keydown', e => !this.disabled && [13, 32].indexOf(e.keyCode) >= 0 && this.setAttribute('active', ''));\n    this.addEventListener('keyup', () => this.removeAttribute('active'));\n    this.addEventListener('blur', () => this.removeAttribute('active'));\n  }\n\n  /**\n   * @protected\n   */\n  get focusElement() {\n    return this.$.button;\n  }\n}\n\ncustomElements.define(ButtonElement.is, ButtonElement);\n\nexport { ButtonElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-button\" theme-for=\"vaadin-button\">\n  <template>\n    <style>\n      :host {\n        /* Sizing */\n        --lumo-button-size: var(--lumo-size-m);\n        min-width: calc(var(--lumo-button-size) * 2);\n        height: var(--lumo-button-size);\n        padding: 0 calc(var(--lumo-button-size) / 3 + var(--lumo-border-radius) / 2);\n        margin: var(--lumo-space-xs) 0;\n        box-sizing: border-box;\n        /* Style */\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        font-weight: 500;\n        color: var(--_lumo-button-color, var(--lumo-primary-text-color));\n        background-color: var(--_lumo-button-background-color, var(--lumo-contrast-5pct));\n        border-radius: var(--lumo-border-radius);\n        cursor: default;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Set only for the internal parts so we dont affect the host vertical alignment */\n      [part=\"label\"],\n      [part=\"prefix\"],\n      [part=\"suffix\"] {\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      [part=\"label\"] {\n        padding: calc(var(--lumo-button-size) / 6) 0;\n      }\n\n      :host([theme~=\"small\"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-button-size: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"large\"]) {\n        font-size: var(--lumo-font-size-l);\n        --lumo-button-size: var(--lumo-size-l);\n      }\n\n      /* This needs to be the last selector for it to take priority */\n      :host([disabled][disabled]) {\n        pointer-events: none;\n        color: var(--lumo-disabled-text-color);\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      /* For interaction states */\n      :host::before,\n      :host::after {\n        content: \"\";\n        /* We rely on the host always being relative */\n        position: absolute;\n        z-index: 1;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background-color: currentColor;\n        border-radius: inherit;\n        opacity: 0;\n        transition: opacity 0.2s;\n        pointer-events: none;\n      }\n\n      /* Hover */\n\n      :host(:hover)::before {\n        opacity: 0.05;\n      }\n\n      /* Disable hover for touch devices */\n      @media (pointer: coarse) {\n        :host(:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      /* Active */\n\n      :host::after {\n        transition: opacity 1.4s, transform 0.1s;\n        filter: blur(8px);\n      }\n\n      :host([active])::before {\n        opacity: 0.1;\n        transition-duration: 0s;\n      }\n\n      :host([active])::after {\n        opacity: 0.1;\n        transition-duration: 0s, 0s;\n        transform: scale(0);\n      }\n\n      /* Keyboard focus */\n\n      :host([focus-ring]) {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Types (primary, tertiary, tertiary-inline */\n\n      :host([theme~=\"tertiary\"]),\n      :host([theme~=\"tertiary-inline\"]) {\n        background-color: transparent !important;\n        transition: opacity 0.2s;\n        min-width: 0;\n      }\n\n      :host([theme~=\"tertiary\"])::before,\n      :host([theme~=\"tertiary-inline\"])::before {\n        display: none;\n      }\n\n      :host([theme~=\"tertiary\"]) {\n        padding: 0 calc(var(--lumo-button-size) / 6);\n      }\n\n      @media (hover: hover) {\n        :host([theme*=\"tertiary\"]:not([active]):hover) {\n          opacity: 0.8;\n        }\n      }\n\n      :host([theme~=\"tertiary\"][active]),\n      :host([theme~=\"tertiary-inline\"][active]) {\n        opacity: 0.5;\n        transition-duration: 0s;\n      }\n\n      :host([theme~=\"tertiary-inline\"]) {\n        margin: 0;\n        height: auto;\n        padding: 0;\n        line-height: inherit;\n        font-size: inherit;\n      }\n\n      :host([theme~=\"tertiary-inline\"]) [part=\"label\"] {\n        padding: 0;\n        overflow: visible;\n        line-height: inherit;\n      }\n\n      :host([theme~=\"primary\"]) {\n        background-color: var(--_lumo-button-primary-background-color, var(--lumo-primary-color));\n        color: var(--_lumo-button-primary-color, var(--lumo-primary-contrast-color));\n        font-weight: 600;\n        min-width: calc(var(--lumo-button-size) * 2.5);\n      }\n\n      :host([theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-primary-color-50pct);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      :host([theme~=\"primary\"]:hover)::before {\n        opacity: 0.1;\n      }\n\n      :host([theme~=\"primary\"][active])::before {\n        background-color: var(--lumo-shade-20pct);\n      }\n\n      @media (pointer: coarse) {\n        :host([theme~=\"primary\"][active])::before {\n          background-color: var(--lumo-shade-60pct);\n        }\n\n        :host([theme~=\"primary\"]:not([active]):hover)::before {\n          opacity: 0;\n        }\n      }\n\n      :host([theme~=\"primary\"][active])::after {\n        opacity: 0.2;\n      }\n\n      /* Colors (success, error, contrast) */\n\n      :host([theme~=\"success\"]) {\n        color: var(--lumo-success-text-color);\n      }\n\n      :host([theme~=\"success\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-success-color);\n        color: var(--lumo-success-contrast-color);\n      }\n\n      :host([theme~=\"success\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-success-color-50pct);\n      }\n\n      :host([theme~=\"error\"]) {\n        color: var(--lumo-error-text-color);\n      }\n\n      :host([theme~=\"error\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-error-color);\n        color: var(--lumo-error-contrast-color);\n      }\n\n      :host([theme~=\"error\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([theme~=\"contrast\"]) {\n        color: var(--lumo-contrast);\n      }\n\n      :host([theme~=\"contrast\"][theme~=\"primary\"]) {\n        background-color: var(--lumo-contrast);\n        color: var(--lumo-base-color);\n      }\n\n      :host([theme~=\"contrast\"][theme~=\"primary\"][disabled]) {\n        background-color: var(--lumo-contrast-50pct);\n      }\n\n      /* Icons */\n\n      [part] ::slotted(iron-icon) {\n        display: inline-block;\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part] ::slotted(iron-icon[icon^=\"vaadin:\"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part=\"prefix\"] {\n        margin-left: -0.25em;\n        margin-right: 0.25em;\n      }\n\n      [part=\"suffix\"] {\n        margin-left: 0.25em;\n        margin-right: -0.25em;\n      }\n\n      /* Icon-only */\n\n      :host([theme~=\"icon\"]) {\n        min-width: var(--lumo-button-size);\n        padding-left: calc(var(--lumo-button-size) / 4);\n        padding-right: calc(var(--lumo-button-size) / 4);\n      }\n\n      :host([theme~=\"icon\"]) [part=\"prefix\"],\n      :host([theme~=\"icon\"]) [part=\"suffix\"] {\n        margin-left: 0;\n        margin-right: 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-button-styles.js';\nimport '../../src/vaadin-button.js';\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A private mixin to avoid problems with dynamic properties and Polymer Analyzer.\n * No need to expose these properties in the API docs.\n * @polymerMixin\n */\nconst TabIndexMixin = superClass => class VaadinTabIndexMixin extends superClass {\n  static get properties() {\n    var properties = {\n      /**\n       * Internal property needed to listen to `tabindex` attribute changes.\n       *\n       * For changing the tabindex of this component use the native `tabIndex` property.\n       * @private\n       */\n      tabindex: {\n        type: Number,\n        value: 0,\n        reflectToAttribute: true,\n        observer: '_tabindexChanged'\n      }\n    };\n\n    if (window.ShadyDOM) {\n      // ShadyDOM browsers need the `tabIndex` in order to notify when the user changes it programmatically.\n      properties['tabIndex'] = properties.tabindex;\n    }\n\n    return properties;\n  }\n};\n\n/**\n * Polymer.IronControlState is not a proper 2.0 class, also, its tabindex\n * implementation fails in the shadow dom, so we have this for vaadin elements.\n * @polymerMixin\n */\nexport const ControlStateMixin = superClass => class VaadinControlStateMixin extends TabIndexMixin(superClass) {\n  static get properties() {\n    return {\n      /**\n       * Specify that this control should have input focus when the page loads.\n       */\n      autofocus: {\n        type: Boolean\n      },\n\n      /**\n       * Stores the previous value of tabindex attribute of the disabled element\n       */\n      _previousTabIndex: {\n        type: Number\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      _isShiftTabbing: {\n        type: Boolean\n      }\n    };\n  }\n\n  ready() {\n    this.addEventListener('focusin', e => {\n      if (e.composedPath()[0] === this) {\n        this._focus(e);\n      } else if (e.composedPath().indexOf(this.focusElement) !== -1 && !this.disabled) {\n        this._setFocused(true);\n      }\n    });\n    this.addEventListener('focusout', e => this._setFocused(false));\n\n    // In super.ready() other 'focusin' and 'focusout' listeners might be\n    // added, so we call it after our own ones to ensure they execute first.\n    // Issue to watch out: when incorrect, <vaadin-combo-box> refocuses the\n    // input field on iOS after Done is pressed.\n    super.ready();\n\n    // This fixes the bug in Firefox 61 (https://bugzilla.mozilla.org/show_bug.cgi?id=1472887)\n    // where focusout event does not go out of shady DOM because composed property in the event is not true\n    const ensureEventComposed = e => {\n      if (!e.composed) {\n        e.target.dispatchEvent(new CustomEvent(e.type, {\n          bubbles: true,\n          composed: true,\n          cancelable: false\n        }));\n      }\n    };\n    this.shadowRoot.addEventListener('focusin', ensureEventComposed);\n    this.shadowRoot.addEventListener('focusout', ensureEventComposed);\n\n    this.addEventListener('keydown', e => {\n      if (!e.defaultPrevented && e.keyCode === 9) {\n        if (e.shiftKey) {\n          // Flag is checked in _focus event handler.\n          this._isShiftTabbing = true;\n          HTMLElement.prototype.focus.apply(this);\n          this._setFocused(false);\n          // Event handling in IE is asynchronous and the flag is removed asynchronously as well\n          setTimeout(() => this._isShiftTabbing = false, 0);\n        } else {\n          // Workaround for FF63-65 bug that causes the focus to get lost when\n          // blurring a slotted component with focusable shadow root content\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=1528686\n          // TODO: Remove when safe\n          const firefox = window.navigator.userAgent.match(/Firefox\\/(\\d\\d\\.\\d)/);\n          if (firefox\n            && parseFloat(firefox[1]) >= 63\n            && parseFloat(firefox[1]) < 66\n            && this.parentNode\n            && this.nextSibling) {\n            const fakeTarget = document.createElement('input');\n            fakeTarget.style.position = 'absolute';\n            fakeTarget.style.opacity = 0;\n            fakeTarget.tabIndex = this.tabIndex;\n\n            this.parentNode.insertBefore(fakeTarget, this.nextSibling);\n            fakeTarget.focus();\n            fakeTarget.addEventListener('focusout', () => this.parentNode.removeChild(fakeTarget));\n          }\n        }\n\n      }\n    });\n\n    if (this.autofocus && !this.focused && !this.disabled) {\n      window.requestAnimationFrame(() => {\n        this._focus();\n        this._setFocused(true);\n        this.setAttribute('focus-ring', '');\n      });\n    }\n\n    this._boundKeydownListener = this._bodyKeydownListener.bind(this);\n    this._boundKeyupListener = this._bodyKeyupListener.bind(this);\n  }\n\n  /**\n   * @protected\n   */\n  connectedCallback() {\n    super.connectedCallback();\n\n    document.body.addEventListener('keydown', this._boundKeydownListener, true);\n    document.body.addEventListener('keyup', this._boundKeyupListener, true);\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    document.body.removeEventListener('keydown', this._boundKeydownListener, true);\n    document.body.removeEventListener('keyup', this._boundKeyupListener, true);\n\n    // in non-Chrome browsers, blur does not fire on the element when it is disconnected.\n    // reproducible in `<vaadin-date-picker>` when closing on `Cancel` or `Today` click.\n    if (this.hasAttribute('focused')) {\n      this._setFocused(false);\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n    } else {\n      this.removeAttribute('focused');\n    }\n\n    // focus-ring is true when the element was focused from the keyboard.\n    // Focus Ring [A11ycasts]: https://youtu.be/ilj2P5-5CjI\n    if (focused && this._tabPressed) {\n      this.setAttribute('focus-ring', '');\n    } else {\n      this.removeAttribute('focus-ring');\n    }\n  }\n\n  _bodyKeydownListener(e) {\n    this._tabPressed = e.keyCode === 9;\n  }\n\n  _bodyKeyupListener() {\n    this._tabPressed = false;\n  }\n\n  /**\n   * Any element extending this mixin is required to implement this getter.\n   * It returns the actual focusable element in the component.\n   */\n  get focusElement() {\n    window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`);\n    return this;\n  }\n\n  _focus(e) {\n    if (this._isShiftTabbing) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Moving the focus from the host element causes firing of the blur event what leads to problems in IE.\n   * @private\n   */\n  focus() {\n    if (!this.focusElement || this.disabled) {\n      return;\n    }\n\n    this.focusElement.focus();\n    this._setFocused(true);\n  }\n\n  /**\n   * Native bluring in the host element does nothing because it does not have the focus.\n   * In chrome it works, but not in FF.\n   * @private\n   */\n  blur() {\n    this.focusElement.blur();\n    this._setFocused(false);\n  }\n\n  _disabledChanged(disabled) {\n    this.focusElement.disabled = disabled;\n    if (disabled) {\n      this.blur();\n      this._previousTabIndex = this.tabindex;\n      this.tabindex = -1;\n      this.setAttribute('aria-disabled', 'true');\n    } else {\n      if (typeof this._previousTabIndex !== 'undefined') {\n        this.tabindex = this._previousTabIndex;\n      }\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _tabindexChanged(tabindex) {\n    if (tabindex !== undefined) {\n      this.focusElement.tabIndex = tabindex;\n    }\n\n    if (this.disabled && this.tabindex) {\n      // If tabindex attribute was changed while checkbox was disabled\n      if (this.tabindex !== -1) {\n        this._previousTabIndex = this.tabindex;\n      }\n      this.tabindex = tabindex = undefined;\n    }\n\n    if (window.ShadyDOM) {\n      this.setProperties({tabIndex: tabindex, tabindex: tabindex});\n    }\n  }\n\n  /**\n   * @protected\n   */\n  click() {\n    if (!this.disabled) {\n      super.click();\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nexport const DatePickerHelper = class VaadinDatePickerHelper {\n  /**\n   * Get ISO 8601 week number for the given date.\n   *\n   * @param {Date} Date object\n   * @return {Number} Week number\n   */\n  static _getISOWeekNumber(date) {\n    // Ported from Vaadin Framework method com.vaadin.client.DateTimeService.getISOWeekNumber(date)\n    var dayOfWeek = date.getDay(); // 0 == sunday\n\n    // ISO 8601 use weeks that start on monday so we use\n    // mon=1,tue=2,...sun=7;\n    if (dayOfWeek === 0) {\n      dayOfWeek = 7;\n    }\n    // Find nearest thursday (defines the week in ISO 8601). The week number\n    // for the nearest thursday is the same as for the target date.\n    var nearestThursdayDiff = 4 - dayOfWeek; // 4 is thursday\n    var nearestThursday = new Date(date.getTime() + nearestThursdayDiff * 24 * 3600 * 1000);\n\n    var firstOfJanuary = new Date(0, 0);\n    firstOfJanuary.setFullYear(nearestThursday.getFullYear());\n\n    var timeDiff = nearestThursday.getTime() - firstOfJanuary.getTime();\n\n    // Rounding the result, as the division doesn't result in an integer\n    // when the given date is inside daylight saving time period.\n    var daysSinceFirstOfJanuary = Math.round(timeDiff / (24 * 3600 * 1000));\n\n    return Math.floor((daysSinceFirstOfJanuary) / 7 + 1);\n  }\n\n  /**\n   * Check if two dates are equal.\n   *\n   * @param {Date} date1\n   * @param {Date} date2\n   * @return {Boolean} True if the given date objects refer to the same date\n   */\n  static _dateEquals(date1, date2) {\n    return date1 instanceof Date && date2 instanceof Date &&\n        date1.getFullYear() === date2.getFullYear() &&\n        date1.getMonth() === date2.getMonth() &&\n        date1.getDate() === date2.getDate();\n  }\n\n  /**\n   * Check if the given date is in the range of allowed dates.\n   *\n   * @param {Date} date The date to check\n   * @param {Date} min Range start\n   * @param {Date} max Range end\n   * @return {Boolean} True if the date is in the range\n   */\n  static _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  /**\n   * Get closest date from array of dates.\n   *\n   * @param {Date} date The date to compare dates with\n   * @param {Array} dates Array of date objects\n   * @return {Date} Closest date\n   */\n  static _getClosestDate(date, dates) {\n    return dates.filter(date => date !== undefined)\n      .reduce((closestDate, candidate) => {\n        if (!candidate) {\n          return closestDate;\n        }\n\n        if (!closestDate) {\n          return candidate;\n        }\n\n        var candidateDiff = Math.abs(date.getTime() - candidate.getTime());\n        var closestDateDiff = Math.abs(closestDate.getTime() - date.getTime());\n        return candidateDiff < closestDateDiff ? candidate : closestDate;\n      });\n  }\n\n  /**\n   * Extracts the basic component parts of a date (day, month and year)\n   * to the expected format.\n   */\n  static _extractDateParts(date) {\n    return {\n      day: date.getDate(),\n      month: date.getMonth(),\n      year: date.getFullYear()\n    };\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { addListener } from '@polymer/polymer/lib/utils/gestures.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\n/**\n * @polymerMixin\n */\nexport const DatePickerMixin = subclass => class VaadinDatePickerMixin extends mixinBehaviors(\n  [IronResizableBehavior], subclass\n) {\n\n  static get properties() {\n    return {\n      /**\n       * The current selected date.\n       */\n      _selectedDate: {\n        type: Date\n      },\n\n      _focusedDate: Date,\n\n      /**\n       * The value for this element.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Set to true to mark the input as required.\n       */\n      required: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Date which should be visible when there is no value selected.\n       *\n       * The same date formats as for the `value` property are supported.\n       */\n      initialPosition: String,\n\n      /**\n       * The label for this element.\n       */\n      label: String,\n\n      /**\n       * Set true to open the date selector overlay.\n       */\n      opened: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set true to display ISO-8601 week numbers in the calendar. Notice that\n       * displaying week numbers is only supported when `i18n.firstDayOfWeek`\n       * is 1 (Monday).\n       */\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _fullscreen: {\n        value: false,\n        observer: '_fullscreenChanged'\n      },\n\n      _fullscreenMediaQuery: {\n        value: '(max-width: 420px), (max-height: 420px)'\n      },\n\n      // An array of ancestor elements whose -webkit-overflow-scrolling is forced from value\n      // 'touch' to value 'auto' in order to prevent them from clipping the dropdown. iOS only.\n      _touchPrevented: Array,\n\n      /**\n       * The object used to localize this component.\n       * To change the default localization, replace the entire\n       * _i18n_ object or just the property you want to modify.\n       *\n       * The object has the following JSON structure and default values:\n\n          {\n            // An array with the full names of months starting\n            // with January.\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September',\n              'October', 'November', 'December'\n            ],\n\n            // An array of weekday names starting with Sunday. Used\n            // in screen reader announcements.\n            weekdays: [\n              'Sunday', 'Monday', 'Tuesday', 'Wednesday',\n              'Thursday', 'Friday', 'Saturday'\n            ],\n\n            // An array of short weekday names starting with Sunday.\n            // Displayed in the calendar.\n            weekdaysShort: [\n              'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n            ],\n\n            // An integer indicating the first day of the week\n            // (0 = Sunday, 1 = Monday, etc.).\n            firstDayOfWeek: 0,\n\n            // Used in screen reader announcements along with week\n            // numbers, if they are displayed.\n            week: 'Week',\n\n            // Translation of the Calendar icon button title.\n            calendar: 'Calendar',\n\n            // Translation of the Clear icon button title.\n            clear: 'Clear',\n\n            // Translation of the Today shortcut button text.\n            today: 'Today',\n\n            // Translation of the Cancel button text.\n            cancel: 'Cancel',\n\n            // A function to format given `Object` as\n            // date string. Object is in the format `{ day: ..., month: ..., year: ... }`\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            formatDate: d => {\n              // returns a string representation of the given\n              // object in 'MM/DD/YYYY' -format\n            },\n\n            // A function to parse the given text to an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            // Must properly parse (at least) text formatted by `formatDate`.\n            // Setting the property to null will disable keyboard input feature.\n            // Note: The argument month is 0-based. This means that January = 0 and December = 11.\n            parseDate: text => {\n              // Parses a string in 'MM/DD/YY', 'MM/DD' or 'DD' -format to\n              // an `Object` in the format `{ day: ..., month: ..., year: ... }`.\n            }\n\n            // A function to format given `monthName` and\n            // `fullYear` integer as calendar title string.\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          }\n\n       *\n       * @default {English/US}\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            monthNames: [\n              'January', 'February', 'March', 'April', 'May',\n              'June', 'July', 'August', 'September', 'October', 'November', 'December'\n            ],\n            weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            firstDayOfWeek: 0,\n            week: 'Week',\n            calendar: 'Calendar',\n            clear: 'Clear',\n            today: 'Today',\n            cancel: 'Cancel',\n            formatDate: d => {\n              const yearStr = String(d.year).replace(/\\d+/, y => '0000'.substr(y.length) + y);\n              return [d.month + 1, d.day, yearStr].join('/');\n            },\n            parseDate: text => {\n              const parts = text.split('/');\n              const today = new Date();\n              let date, month = today.getMonth(), year = today.getFullYear();\n\n              if (parts.length === 3) {\n                year = parseInt(parts[2]);\n                if (parts[2].length < 3 && year >= 0) {\n                  year += year < 50 ? 2000 : 1900;\n                }\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 2) {\n                month = parseInt(parts[0]) - 1;\n                date = parseInt(parts[1]);\n              } else if (parts.length === 1) {\n                date = parseInt(parts[0]);\n              }\n\n              if (date !== undefined) {\n                return {day: date, month, year};\n              }\n            },\n            formatTitle: (monthName, fullYear) => {\n              return monthName + ' ' + fullYear;\n            }\n          };\n        }\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      min: {\n        type: String,\n        observer: '_minChanged'\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       *\n       * Supported date formats:\n       * - ISO 8601 `\"YYYY-MM-DD\"` (default)\n       * - 6-digit extended ISO 8601 `\"+YYYYYY-MM-DD\"`, `\"-YYYYYY-MM-DD\"`\n       *\n       * @type {String}\n       */\n      max: {\n        type: String,\n        observer: '_maxChanged'\n      },\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      _minDate: {\n        type: Date,\n        // null does not work here because minimizer passes undefined to overlay (#351)\n        value: ''\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      _maxDate: {\n        type: Date,\n        value: ''\n      },\n\n      _noInput: {\n        type: Boolean,\n        computed: '_isNoInput(_fullscreen, _ios, i18n, i18n.*)'\n      },\n\n      _ios: {\n        type: Boolean,\n        value: navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/)\n      },\n\n      _webkitOverflowScroll: {\n        type: Boolean,\n        value: document.createElement('div').style.webkitOverflowScrolling === ''\n      },\n\n      _ignoreAnnounce: {\n        value: true\n      },\n\n      _focusOverlayOnOpen: Boolean,\n\n      _overlayInitialized: Boolean\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateHasValue(value)',\n      '_validateInput(_selectedDate, _minDate, _maxDate)',\n      '_selectedDateChanged(_selectedDate, i18n.formatDate)',\n      '_focusedDateChanged(_focusedDate, i18n.formatDate)',\n      '_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this._boundOnScroll = this._onScroll.bind(this);\n    this._boundFocus = this._focus.bind(this);\n    this._boundUpdateAlignmentAndPosition = this._updateAlignmentAndPosition.bind(this);\n    addListener(this, 'tap', this.open);\n    this.addEventListener('touchend', this._preventDefault.bind(this));\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    this.addEventListener('input', this._onUserInput.bind(this));\n    this.addEventListener('focus', e => this._noInput && e.target.blur());\n  }\n\n  _initOverlay() {\n    this.$.overlay.removeAttribute('disable-upgrade');\n    this._overlayInitialized = true;\n\n    this.$.overlay.addEventListener('opened-changed', e => this.opened = e.detail.value);\n\n    this._overlayContent.addEventListener('close', this._close.bind(this));\n    this._overlayContent.addEventListener('focus-input', this._focusAndSelect.bind(this));\n    this.$.overlay.addEventListener('vaadin-overlay-escape-press', this._boundFocus);\n\n    // Keep focus attribute in focusElement for styling\n    this._overlayContent.addEventListener('focus', () => this.focusElement._setFocused(true));\n\n    this.$.overlay.addEventListener('vaadin-overlay-close', this._onVaadinOverlayClose.bind(this));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._overlayInitialized) {\n      this.$.overlay.removeEventListener('vaadin-overlay-escape-press', this._boundFocus);\n    }\n\n    this.opened = false;\n  }\n\n  /**\n   * Opens the dropdown.\n   */\n  open() {\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  _close(e) {\n    if (e) {\n      e.stopPropagation();\n    }\n    this._focus();\n    this.close();\n  }\n\n  /**\n   * Closes the dropdown.\n   */\n  close() {\n    if (this._overlayInitialized) {\n      this.$.overlay.close();\n    }\n  }\n\n  get _inputElement() {\n    return this._input();\n  }\n\n  get _nativeInput() {\n    if (this._inputElement) {\n      // vaadin-text-field's input is focusElement\n      // iron-input's input is inputElement\n      return this._inputElement.focusElement ? this._inputElement.focusElement :\n        this._inputElement.inputElement ? this._inputElement.inputElement :\n          window.unwrap ? window.unwrap(this._inputElement) : this._inputElement;\n    }\n  }\n\n  _parseDate(str) {\n    // Parsing with RegExp to ensure correct format\n    var parts = /^([-+]\\d{1}|\\d{2,4}|[-+]\\d{6})-(\\d{1,2})-(\\d{1,2})$/.exec(str);\n    if (!parts) {\n      return;\n    }\n\n    var date = new Date(0, 0); // Wrong date (1900-01-01), but with midnight in local time\n    date.setFullYear(parseInt(parts[1], 10));\n    date.setMonth(parseInt(parts[2], 10) - 1);\n    date.setDate(parseInt(parts[3], 10));\n    return date;\n  }\n\n  _isNoInput(fullscreen, ios, i18n) {\n    return !this._inputElement || fullscreen || ios || !i18n.parseDate;\n  }\n\n  _formatISO(date) {\n    if (!(date instanceof Date)) {\n      return '';\n    }\n\n    const pad = (num, fmt = '00') => (fmt + num).substr((fmt + num).length - fmt.length);\n\n    let yearSign = '';\n    let yearFmt = '0000';\n    let yearAbs = date.getFullYear();\n    if (yearAbs < 0) {\n      yearAbs = -yearAbs;\n      yearSign = '-';\n      yearFmt = '000000';\n    } else if (date.getFullYear() >= 10000) {\n      yearSign = '+';\n      yearFmt = '000000';\n    }\n\n    const year = yearSign + pad(yearAbs, yearFmt);\n    const month = pad(date.getMonth() + 1);\n    const day = pad(date.getDate());\n    return [year, month, day].join('-');\n  }\n\n  _openedChanged(opened) {\n    if (opened && !this._overlayInitialized) {\n      this._initOverlay();\n    }\n    if (this._overlayInitialized) {\n      this.$.overlay.opened = opened;\n    }\n    if (opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _selectedDateChanged(selectedDate, formatDate) {\n    if (selectedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    if (this.__userInputOccurred) {\n      this.__dispatchChange = true;\n    }\n    const inputValue = selectedDate && formatDate(DatePickerHelper._extractDateParts(selectedDate));\n    const value = this._formatISO(selectedDate);\n    if (value !== this.value) {\n      this.validate(inputValue);\n      this.value = value;\n    }\n    this.__userInputOccurred = false;\n    this.__dispatchChange = false;\n    this._focusedDate = selectedDate;\n    this._inputValue = selectedDate ? inputValue : '';\n  }\n\n  _focusedDateChanged(focusedDate, formatDate) {\n    if (focusedDate === undefined || formatDate === undefined) {\n      return;\n    }\n    this.__userInputOccurred = true;\n    if (!this._ignoreFocusedDateChange && !this._noInput) {\n      this._inputValue = focusedDate ? formatDate(DatePickerHelper._extractDateParts(focusedDate)) : '';\n    }\n  }\n\n  _updateHasValue(value) {\n    if (value) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n\n  __getOverlayTheme(theme, overlayInitialized) {\n    if (overlayInitialized) {\n      return theme;\n    }\n  }\n\n  _handleDateChange(property, value, oldValue) {\n    if (!value) {\n      this[property] = '';\n      return;\n    }\n\n    var date = this._parseDate(value);\n    if (!date) {\n      this.value = oldValue;\n      return;\n    }\n    if (!DatePickerHelper._dateEquals(this[property], date)) {\n      this[property] = date;\n    }\n  }\n\n  _valueChanged(value, oldValue) {\n    if (this.__dispatchChange) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n    }\n    this._handleDateChange('_selectedDate', value, oldValue);\n  }\n\n  _minChanged(value, oldValue) {\n    this._handleDateChange('_minDate', value, oldValue);\n  }\n\n  _maxChanged(value, oldValue) {\n    this._handleDateChange('_maxDate', value, oldValue);\n  }\n\n  _updateAlignmentAndPosition() {\n    if (!this._overlayInitialized) {\n      return;\n    }\n    if (!this._fullscreen) {\n      const inputRect = this._inputElement.getBoundingClientRect();\n\n      const bottomAlign = inputRect.top > window.innerHeight / 2;\n      const rightAlign = inputRect.left + this.clientWidth / 2 > window.innerWidth / 2;\n\n      if (rightAlign) {\n        const viewportWidth = Math.min(window.innerWidth, document.documentElement.clientWidth);\n        this.$.overlay.setAttribute('right-aligned', '');\n        this.$.overlay.style.removeProperty('left');\n        this.$.overlay.style.right = (viewportWidth - inputRect.right) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('right-aligned');\n        this.$.overlay.style.removeProperty('right');\n        this.$.overlay.style.left = inputRect.left + 'px';\n      }\n\n      if (bottomAlign) {\n        const viewportHeight = Math.min(window.innerHeight, document.documentElement.clientHeight);\n        this.$.overlay.setAttribute('bottom-aligned', '');\n        this.$.overlay.style.removeProperty('top');\n        this.$.overlay.style.bottom = (viewportHeight - inputRect.top) + 'px';\n      } else {\n        this.$.overlay.removeAttribute('bottom-aligned');\n        this.$.overlay.style.removeProperty('bottom');\n        this.$.overlay.style.top = inputRect.bottom + 'px';\n      }\n    }\n\n    this.$.overlay.setAttribute('dir',\n      getComputedStyle(this._inputElement).getPropertyValue('direction')\n    );\n    this._overlayContent._repositionYearScroller();\n  }\n\n  _fullscreenChanged() {\n    if (this._overlayInitialized && this.$.overlay.opened) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _onOverlayOpened() {\n    this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n\n    var parsedInitialPosition = this._parseDate(this.initialPosition);\n\n    var initialPosition = this._selectedDate || this._overlayContent.initialPosition ||\n      parsedInitialPosition || new Date();\n\n    if (parsedInitialPosition ||\n      DatePickerHelper._dateAllowed(initialPosition, this._minDate, this._maxDate)) {\n      this._overlayContent.initialPosition = initialPosition;\n    } else {\n      this._overlayContent.initialPosition =\n        DatePickerHelper._getClosestDate(initialPosition, [this._minDate, this._maxDate]);\n    }\n\n    this._overlayContent.scrollToDate(this._overlayContent.focusedDate || this._overlayContent.initialPosition);\n    // Have a default focused date\n    this._ignoreFocusedDateChange = true;\n    this._overlayContent.focusedDate = this._overlayContent.focusedDate || this._overlayContent.initialPosition;\n    this._ignoreFocusedDateChange = false;\n\n    window.addEventListener('scroll', this._boundOnScroll, true);\n    this.addEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._webkitOverflowScroll) {\n      this._touchPrevented = this._preventWebkitOverflowScrollingTouch(this.parentElement);\n    }\n\n    if (this._focusOverlayOnOpen) {\n      this._overlayContent.focus();\n      this._focusOverlayOnOpen = false;\n    } else {\n      this._focus();\n    }\n\n    if (this._noInput && this.focusElement) {\n      this.focusElement.blur();\n    }\n\n    this.updateStyles();\n\n    this._ignoreAnnounce = false;\n  }\n\n  // A hack needed for iOS to prevent dropdown from being clipped in an\n  // ancestor container with -webkit-overflow-scrolling: touch;\n  _preventWebkitOverflowScrollingTouch(element) {\n    var result = [];\n    while (element) {\n      if (window.getComputedStyle(element).webkitOverflowScrolling === 'touch') {\n        var oldInlineValue = element.style.webkitOverflowScrolling;\n        element.style.webkitOverflowScrolling = 'auto';\n        result.push({\n          element: element,\n          oldInlineValue: oldInlineValue\n        });\n      }\n      element = element.parentElement;\n    }\n    return result;\n  }\n\n  _onOverlayClosed() {\n    this._ignoreAnnounce = true;\n\n    window.removeEventListener('scroll', this._boundOnScroll, true);\n    this.removeEventListener('iron-resize', this._boundUpdateAlignmentAndPosition);\n\n    if (this._touchPrevented) {\n      this._touchPrevented.forEach(prevented =>\n        prevented.element.style.webkitOverflowScrolling = prevented.oldInlineValue);\n      this._touchPrevented = [];\n    }\n\n    this.updateStyles();\n\n    // Select the parsed input or focused date\n    this._ignoreFocusedDateChange = true;\n    if (this.i18n.parseDate) {\n      var inputValue = this._inputValue || '';\n      const dateObject = this.i18n.parseDate(inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._selectedDate = parsedDate;\n      } else {\n        this._selectedDate = null;\n        this._inputValue = inputValue;\n      }\n    } else if (this._focusedDate) {\n      this._selectedDate = this._focusedDate;\n    }\n    this._ignoreFocusedDateChange = false;\n\n    if (this._nativeInput && this._nativeInput.selectionStart) {\n      this._nativeInput.selectionStart = this._nativeInput.selectionEnd;\n    }\n    this.validate();\n  }\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @param {string} value Value to validate. Optional, defaults to user's input value.\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate(value) {\n    // reset invalid state on the underlying text field\n    this.invalid = false;\n    value = value !== undefined ? value : this._inputValue;\n    return !(this.invalid = !this.checkValidity(value));\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * Override the `checkValidity` method for custom validations.\n   *\n   * @param {string} value Value to validate. Optional, defaults to the selected date.\n   * @return {boolean} True if the value is valid\n   */\n  checkValidity(value) {\n    var inputValid = !value ||\n      (this._selectedDate && value === this.i18n.formatDate(DatePickerHelper._extractDateParts(this._selectedDate)));\n    var minMaxValid = !this._selectedDate ||\n      DatePickerHelper._dateAllowed(this._selectedDate, this._minDate, this._maxDate);\n\n    var inputValidity = true;\n    if (this._inputElement) {\n      if (this._inputElement.checkValidity) {\n        // vaadin native input elements have the checkValidity method\n        inputValidity = this._inputElement.checkValidity(value);\n      } else if (this._inputElement.validate) {\n        // iron-form-elements have the validate API\n        inputValidity = this._inputElement.validate(value);\n      }\n    }\n\n    return inputValid && minMaxValid && inputValidity;\n  }\n\n  _onScroll(e) {\n    if (e.target === window || !this._overlayContent.contains(e.target)) {\n      this._updateAlignmentAndPosition();\n    }\n  }\n\n  _focus() {\n    if (this._noInput) {\n      this._overlayInitialized && this._overlayContent.focus();\n    } else {\n      this._inputElement.focus();\n    }\n  }\n\n  _focusAndSelect() {\n    this._focus();\n    this._setSelectionRange(0, this._inputValue.length);\n  }\n\n  _setSelectionRange(a, b) {\n    if (this._nativeInput && this._nativeInput.setSelectionRange) {\n      this._nativeInput.setSelectionRange(a, b);\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'enter', 'esc', 'tab'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _isValidDate(d) {\n    return d && !isNaN(d.getTime());\n  }\n\n  _onKeydown(e) {\n    if (this._noInput) {\n      // The input element cannot be readonly as it would conflict with\n      // the required attribute. Both are not allowed on an input element.\n      // Therefore we prevent default on most keydown events.\n      var allowedKeys = [\n        9 // tab\n      ];\n      if (allowedKeys.indexOf(e.keyCode) === -1) {\n        e.preventDefault();\n      }\n    }\n\n    switch (this._eventKey(e)) {\n      case 'down':\n      case 'up':\n        // prevent scrolling the page with arrows\n        e.preventDefault();\n\n        if (this.opened) {\n          this._overlayContent.focus();\n          this._overlayContent._onKeydown(e);\n        } else {\n          this._focusOverlayOnOpen = true;\n          this.open();\n        }\n\n        break;\n      case 'enter': {\n        const dateObject = this.i18n.parseDate(this._inputValue);\n        const parsedDate = dateObject &&\n          this._parseDate(dateObject.year + '-' + (dateObject.month + 1) + '-' + dateObject.day);\n\n        if (this._overlayContent.focusedDate && this._isValidDate(parsedDate)) {\n          this._selectedDate = this._overlayContent.focusedDate;\n        }\n        this.close();\n        break;\n      }\n      case 'esc':\n        this._focusedDate = this._selectedDate;\n        this._close();\n        break;\n      case 'tab':\n        if (this.opened) {\n          e.preventDefault();\n          // Clear the selection range (remains visible on IE)\n          this._setSelectionRange(0, 0);\n          if (e.shiftKey) {\n            this._overlayContent.focusCancel();\n          } else {\n            this._overlayContent.focus();\n            this._overlayContent.revealDate(this._focusedDate);\n          }\n\n        }\n        break;\n    }\n  }\n\n  _validateInput(date, min, max) {\n    if (date && (min || max)) {\n      this.invalid = !DatePickerHelper._dateAllowed(date, min, max);\n    }\n  }\n\n  _onUserInput(e) {\n    if (!this.opened) {\n      this.open();\n    }\n    this._userInputValueChanged();\n  }\n\n  _userInputValueChanged(value) {\n    if (this.opened && this._inputValue) {\n      const dateObject = this.i18n.parseDate && this.i18n.parseDate(this._inputValue);\n      const parsedDate = dateObject &&\n        this._parseDate(`${dateObject.year}-${dateObject.month + 1}-${dateObject.day}`);\n\n      if (this._isValidDate(parsedDate)) {\n        this._ignoreFocusedDateChange = true;\n        if (!DatePickerHelper._dateEquals(parsedDate, this._focusedDate)) {\n          this._focusedDate = parsedDate;\n        }\n        this._ignoreFocusedDateChange = false;\n      }\n    }\n  }\n\n  _announceFocusedDate(_focusedDate, opened, _ignoreAnnounce) {\n    if (opened && !_ignoreAnnounce) {\n      this._overlayContent.announceFocusedDate();\n    }\n  }\n\n  get _overlayContent() {\n    return this.$.overlay.content.querySelector('#overlay-content');\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport '@vaadin/vaadin-button/src/vaadin-button.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport './vaadin-month-calendar.js';\nimport './vaadin-infinite-scroller.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport './vaadin-date-picker-styles.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { addListener, setTouchAction } from '@polymer/polymer/lib/utils/gestures.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayContentElement extends\n  ThemableMixin(\n    ThemePropertyMixin(\n      GestureEventListeners(PolymerElement))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        width: 100%;\n        outline: none;\n        background: #fff;\n      }\n\n      [part=\"overlay-header\"] {\n        display: flex;\n        flex-shrink: 0;\n        flex-wrap: nowrap;\n        align-items: center;\n      }\n\n      :host(:not([fullscreen])) [part=\"overlay-header\"] {\n        display: none;\n      }\n\n      [part=\"label\"] {\n        flex-grow: 1;\n      }\n\n      [part=\"clear-button\"]:not([showclear]) {\n        display: none;\n      }\n\n      [part=\"years-toggle-button\"] {\n        display: flex;\n      }\n\n      [part=\"years-toggle-button\"][desktop] {\n        display: none;\n      }\n\n      :host(:not([years-visible])) [part=\"years-toggle-button\"]::before {\n        transform: rotate(180deg);\n      }\n\n      #scrollers {\n        display: flex;\n        height: 100%;\n        width: 100%;\n        position: relative;\n        overflow: hidden;\n      }\n\n      [part=\"months\"],\n      [part=\"years\"] {\n        height: 100%;\n      }\n\n      [part=\"months\"] {\n        --vaadin-infinite-scroller-item-height: 270px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n\n      #scrollers[desktop] [part=\"months\"] {\n        right: 50px;\n        transform: none !important;\n      }\n\n      [part=\"years\"] {\n        --vaadin-infinite-scroller-item-height: 80px;\n        width: 50px;\n        position: absolute;\n        right: 0;\n        transform: translateX(100%);\n        -webkit-tap-highlight-color: transparent;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        /* Center the year scroller position. */\n        --vaadin-infinite-scroller-buffer-offset: 50%;\n      }\n\n      #scrollers[desktop] [part=\"years\"] {\n        position: absolute;\n        transform: none !important;\n      }\n\n      [part=\"years\"]::before {\n        content: '';\n        display: block;\n        background: transparent;\n        width: 0;\n        height: 0;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        border-width: 6px;\n        border-style: solid;\n        border-color: transparent;\n        border-left-color: #000;\n      }\n\n      :host(.animate) [part=\"months\"],\n      :host(.animate) [part=\"years\"] {\n        transition: all 200ms;\n      }\n\n      [part=\"toolbar\"] {\n        display: flex;\n        justify-content: space-between;\n        z-index: 2;\n        flex-shrink: 0;\n      }\n\n      [part~=\"overlay-header\"]:not([desktop]) {\n        padding-bottom: 40px;\n      }\n\n      [part~=\"years-toggle-button\"] {\n        position: absolute;\n        top: auto;\n        right: 8px;\n        bottom: 0;\n        z-index: 1;\n        padding: 8px;\n      }\n\n      #announcer {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0, 0, 0, 0);\n        clip-path: inset(100%);\n      }\n    </style>\n\n    <div id=\"announcer\" role=\"alert\" aria-live=\"polite\">\n      [[i18n.calendar]]\n    </div>\n\n    <div part=\"overlay-header\" on-touchend=\"_preventDefault\" desktop\\$=\"[[_desktopMode]]\" aria-hidden=\"true\">\n      <div part=\"label\">[[_formatDisplayed(selectedDate, i18n.formatDate, label)]]</div>\n      <div part=\"clear-button\" on-tap=\"_clear\" showclear\\$=\"[[_showClear(selectedDate)]]\"></div>\n      <div part=\"toggle-button\" on-tap=\"_cancel\"></div>\n\n      <div part=\"years-toggle-button\" desktop\\$=\"[[_desktopMode]]\" on-tap=\"_toggleYearScroller\" aria-hidden=\"true\">\n        [[_yearAfterXMonths(_visibleMonthIndex)]]\n      </div>\n    </div>\n\n    <div id=\"scrollers\" desktop\\$=\"[[_desktopMode]]\" on-track=\"_track\">\n      <vaadin-infinite-scroller id=\"monthScroller\" on-custom-scroll=\"_onMonthScroll\" on-touchstart=\"_onMonthScrollTouchStart\" buffer-size=\"3\" active=\"[[initialPosition]]\" part=\"months\">\n        <template>\n          <vaadin-month-calendar i18n=\"[[i18n]]\" month=\"[[_dateAfterXMonths(index)]]\" selected-date=\"{{selectedDate}}\" focused-date=\"[[focusedDate]]\" ignore-taps=\"[[_ignoreTaps]]\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[minDate]]\" max-date=\"[[maxDate]]\" focused\\$=\"[[_focused]]\" part=\"month\" theme\\$=\"[[theme]]\">\n          </vaadin-month-calendar>\n        </template>\n      </vaadin-infinite-scroller>\n      <vaadin-infinite-scroller id=\"yearScroller\" on-tap=\"_onYearTap\" on-custom-scroll=\"_onYearScroll\" on-touchstart=\"_onYearScrollTouchStart\" buffer-size=\"12\" active=\"[[initialPosition]]\" part=\"years\">\n        <template>\n          <div part=\"year-number\" role=\"button\" current\\$=\"[[_isCurrentYear(index)]]\" selected\\$=\"[[_isSelectedYear(index, selectedDate)]]\">\n            [[_yearAfterXYears(index)]]\n          </div>\n          <div part=\"year-separator\" aria-hidden=\"true\"></div>\n        </template>\n      </vaadin-infinite-scroller>\n    </div>\n\n    <div on-touchend=\"_preventDefault\" role=\"toolbar\" part=\"toolbar\">\n      <vaadin-button id=\"todayButton\" part=\"today-button\" disabled=\"[[!_isTodayAllowed(minDate, maxDate)]]\" on-tap=\"_onTodayTap\">\n        [[i18n.today]]\n      </vaadin-button>\n      <vaadin-button id=\"cancelButton\" part=\"cancel-button\" on-tap=\"_cancel\">\n        [[i18n.cancel]]\n      </vaadin-button>\n    </div>\n\n    <iron-media-query query=\"(min-width: 375px)\" query-matches=\"{{_desktopMode}}\"></iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker-overlay-content';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The value for this element.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * Date value which is focused using keyboard.\n       */\n      focusedDate: {\n        type: Date,\n        notify: true,\n        observer: '_focusedDateChanged'\n      },\n\n      _focusedMonthDate: Number,\n\n      /**\n       * Date which should be visible when there is no value selected.\n       */\n      initialPosition: {\n        type: Date,\n        observer: '_initialPositionChanged'\n      },\n\n      _originDate: {\n        value: new Date()\n      },\n\n      _visibleMonthIndex: Number,\n\n      _desktopMode: Boolean,\n\n      _translateX: {\n        observer: '_translateXChanged'\n      },\n\n      _yearScrollerWidth: {\n        value: 50\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      showWeekNumbers: {\n        type: Boolean\n      },\n\n      _ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: Date,\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: Date,\n\n      _focused: Boolean,\n\n      /**\n       * Input label\n       */\n      label: String\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setAttribute('tabindex', 0);\n    this.addEventListener('keydown', this._onKeydown.bind(this));\n    addListener(this, 'tap', this._stopPropagation);\n    this.addEventListener('focus', this._onOverlayFocus.bind(this));\n    this.addEventListener('blur', this._onOverlayBlur.bind(this));\n  }\n\n  /**\n   * Fired when the scroller reaches the target scrolling position.\n   * @event scroll-animation-finished\n   * @param {Number} detail.position new position\n   * @param {Number} detail.oldPosition old position\n   */\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._closeYearScroller();\n    this._toggleAnimateClass(true);\n    setTouchAction(this.$.scrollers, 'pan-y');\n    IronA11yAnnouncer.requestAvailability();\n  }\n\n  announceFocusedDate() {\n    var focusedDate = this._currentlyFocusedDate();\n    var announce = [];\n    if (DatePickerHelper._dateEquals(focusedDate, new Date())) {\n      announce.push(this.i18n.today);\n    }\n    announce = announce.concat([\n      this.i18n.weekdays[focusedDate.getDay()],\n      focusedDate.getDate(),\n      this.i18n.monthNames[focusedDate.getMonth()],\n      focusedDate.getFullYear()\n    ]);\n    if (this.showWeekNumbers && this.i18n.firstDayOfWeek === 1) {\n      announce.push(this.i18n.week);\n      announce.push(DatePickerHelper._getISOWeekNumber(focusedDate));\n    }\n    this.dispatchEvent(new CustomEvent('iron-announce', {\n      bubbles: true,\n      composed: true,\n      detail: {\n        text: announce.join(' ')\n      }\n    }));\n    return;\n  }\n\n  /**\n   * Focuses the cancel button\n   */\n  focusCancel() {\n    this.$.cancelButton.focus();\n  }\n\n  /**\n   * Scrolls the list to the given Date.\n   */\n  scrollToDate(date, animate) {\n    this._scrollToPosition(this._differenceInMonths(date, this._originDate), animate);\n  }\n\n  _focusedDateChanged(focusedDate) {\n    this.revealDate(focusedDate);\n  }\n\n  _isCurrentYear(yearsFromNow) {\n    return yearsFromNow === 0;\n  }\n\n  _isSelectedYear(yearsFromNow, selectedDate) {\n    if (selectedDate) {\n      return selectedDate.getFullYear() === this._originDate.getFullYear() + yearsFromNow;\n    }\n  }\n\n  /**\n   * Scrolls the month and year scrollers enough to reveal the given date.\n   */\n  revealDate(date) {\n    if (date) {\n      var diff = this._differenceInMonths(date, this._originDate);\n      var scrolledAboveViewport = this.$.monthScroller.position > diff;\n\n      var visibleItems = this.$.monthScroller.clientHeight / this.$.monthScroller.itemHeight;\n      var scrolledBelowViewport = this.$.monthScroller.position + visibleItems - 1 < diff;\n\n      if (scrolledAboveViewport) {\n        this._scrollToPosition(diff, true);\n      } else if (scrolledBelowViewport) {\n        this._scrollToPosition(diff - visibleItems + 1, true);\n      }\n    }\n  }\n\n  _onOverlayFocus() {\n    this._focused = true;\n  }\n\n  _onOverlayBlur() {\n    this._focused = false;\n  }\n\n  _initialPositionChanged(initialPosition) {\n    this.scrollToDate(initialPosition);\n  }\n\n  _repositionYearScroller() {\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n    this.$.yearScroller.position = (this.$.monthScroller.position + this._originDate.getMonth()) / 12;\n  }\n\n  _repositionMonthScroller() {\n    this.$.monthScroller.position = this.$.yearScroller.position * 12 - this._originDate.getMonth();\n    this._visibleMonthIndex = Math.floor(this.$.monthScroller.position);\n  }\n\n  _onMonthScroll() {\n    this._repositionYearScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScroll() {\n    this._repositionMonthScroller();\n    this._doIgnoreTaps();\n  }\n\n  _onYearScrollTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n\n    this._repositionMonthScroller();\n  }\n\n  _onMonthScrollTouchStart() {\n    this._repositionYearScroller();\n  }\n\n  _doIgnoreTaps() {\n    this._ignoreTaps = true;\n    this._debouncer = Debouncer.debounce(this._debouncer,\n      timeOut.after(300), () => this._ignoreTaps = false);\n  }\n\n  _formatDisplayed(date, formatDate, label) {\n    if (date) {\n      return formatDate(DatePickerHelper._extractDateParts(date));\n    } else {\n      return label;\n    }\n  }\n\n  _onTodayTap() {\n    var today = new Date();\n\n    if (Math.abs(this.$.monthScroller.position - this._differenceInMonths(today, this._originDate)) < 0.001) {\n      // Select today only if the month scroller is positioned approximately\n      // at the beginning of the current month\n      this.selectedDate = today;\n      this._close();\n    } else {\n      this._scrollToCurrentMonth();\n    }\n  }\n\n  _scrollToCurrentMonth() {\n    if (this.focusedDate) {\n      this.focusedDate = new Date();\n    }\n\n    this.scrollToDate(new Date(), true);\n  }\n\n  _showClear(selectedDate) {\n    return !!selectedDate;\n  }\n\n  _onYearTap(e) {\n    if (!this._ignoreTaps && !this._notTapping) {\n      var scrollDelta = e.detail.y - (this.$.yearScroller.getBoundingClientRect().top + this.$.yearScroller.clientHeight / 2);\n      var yearDelta = scrollDelta / this.$.yearScroller.itemHeight;\n      this._scrollToPosition(this.$.monthScroller.position + yearDelta * 12, true);\n    }\n  }\n\n  _scrollToPosition(targetPosition, animate) {\n    if (this._targetPosition !== undefined) {\n      this._targetPosition = targetPosition;\n      return;\n    }\n\n    if (!animate) {\n      this.$.monthScroller.position = targetPosition;\n      this._targetPosition = undefined;\n      this._repositionYearScroller();\n      return;\n    }\n\n    this._targetPosition = targetPosition;\n\n    // http://gizma.com/easing/\n    var easingFunction = (t, b, c, d) => {\n      t /= d / 2;\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      t--;\n      return -c / 2 * (t * (t - 2) - 1) + b;\n    };\n\n    var duration = animate ? 300 : 0;\n    var start = 0;\n    var initialPosition = this.$.monthScroller.position;\n\n    var smoothScroll = timestamp => {\n      start = start || timestamp;\n      var currentTime = timestamp - start;\n\n      if (currentTime < duration) {\n        var currentPos = easingFunction(currentTime, initialPosition, this._targetPosition - initialPosition, duration);\n        this.$.monthScroller.position = currentPos;\n        window.requestAnimationFrame(smoothScroll);\n      } else {\n        this.dispatchEvent(new CustomEvent('scroll-animation-finished', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            position: this._targetPosition,\n            oldPosition: initialPosition\n          }\n        }));\n\n        this.$.monthScroller.position = this._targetPosition;\n        this._targetPosition = undefined;\n      }\n\n      setTimeout(this._repositionYearScroller.bind(this), 1);\n    };\n\n    // Start the animation.\n    window.requestAnimationFrame(smoothScroll);\n  }\n\n  _limit(value, range) {\n    return Math.min(range.max, Math.max(range.min, value));\n  }\n\n  _handleTrack(e) {\n    // Check if horizontal movement threshold (dx) not exceeded or\n    // scrolling fast vertically (ddy).\n    if (Math.abs(e.detail.dx) < 10 || Math.abs(e.detail.ddy) > 10) {\n      return;\n    }\n\n    // If we're flinging quickly -> start animating already.\n    if (Math.abs(e.detail.ddx) > this._yearScrollerWidth / 3) {\n      this._toggleAnimateClass(true);\n    }\n\n    var newTranslateX = this._translateX + e.detail.ddx;\n    this._translateX = this._limit(newTranslateX, {\n      min: 0,\n      max: this._yearScrollerWidth\n    });\n  }\n\n  _track(e) {\n    if (this._desktopMode) {\n      // No need to track for swipe gestures on desktop.\n      return;\n    }\n\n    switch (e.detail.state) {\n      case 'start':\n        this._toggleAnimateClass(false);\n        break;\n\n      case 'track':\n        this._handleTrack(e);\n        break;\n\n      case 'end':\n        this._toggleAnimateClass(true);\n        if (this._translateX >= this._yearScrollerWidth / 2) {\n          this._closeYearScroller();\n        } else {\n          this._openYearScroller();\n        }\n        break;\n    }\n  }\n\n  _toggleAnimateClass(enable) {\n    if (enable) {\n      this.classList.add('animate');\n    } else {\n      this.classList.remove('animate');\n    }\n  }\n\n  _toggleYearScroller() {\n    this._isYearScrollerVisible() ? this._closeYearScroller() : this._openYearScroller();\n  }\n\n  _openYearScroller() {\n    this._translateX = 0;\n    this.setAttribute('years-visible', '');\n  }\n\n  _closeYearScroller() {\n    this.removeAttribute('years-visible');\n    this._translateX = this._yearScrollerWidth;\n  }\n\n  _isYearScrollerVisible() {\n    return this._translateX < this._yearScrollerWidth / 2;\n  }\n\n  _translateXChanged(x) {\n    if (!this._desktopMode) {\n      this.$.monthScroller.style.transform = 'translateX(' + (x - this._yearScrollerWidth) + 'px)';\n      this.$.yearScroller.style.transform = 'translateX(' + x + 'px)';\n    }\n  }\n\n  _yearAfterXYears(index) {\n    var result = new Date(this._originDate);\n    result.setFullYear(parseInt(index) + this._originDate.getFullYear());\n    return result.getFullYear();\n  }\n\n  _yearAfterXMonths(months) {\n    return this._dateAfterXMonths(months).getFullYear();\n  }\n\n  _dateAfterXMonths(months) {\n    var result = new Date(this._originDate);\n    result.setDate(1);\n    result.setMonth(parseInt(months) + this._originDate.getMonth());\n    return result;\n  }\n\n  _differenceInMonths(date1, date2) {\n    var months = (date1.getFullYear() - date2.getFullYear()) * 12;\n    return months - date2.getMonth() + date1.getMonth();\n  }\n\n  _differenceInYears(date1, date2) {\n    return this._differenceInMonths(date1, date2) / 12;\n  }\n\n  _clear() {\n    this.selectedDate = '';\n  }\n\n  _close() {\n    const overlayContent = this.getRootNode().host;\n    const overlay = overlayContent ? overlayContent.getRootNode().host : null;\n    if (overlay) {\n      overlay.opened = false;\n    }\n\n    this.dispatchEvent(new CustomEvent('close', {bubbles: true, composed: true}));\n  }\n\n  _cancel() {\n    this.focusedDate = this.selectedDate;\n    this._close();\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  /**\n   * Keyboard Navigation\n   */\n  _eventKey(e) {\n    var keys = ['down', 'up', 'right', 'left', 'enter', 'space', 'home', 'end', 'pageup', 'pagedown', 'tab', 'esc'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n      if (IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k)) {\n        return k;\n      }\n    }\n  }\n\n  _onKeydown(e) {\n    var focus = this._currentlyFocusedDate();\n\n    // Cannot use (today/cancel).focused flag because vaadin-text-field removes it\n    // previously in the keydown event.\n    const isToday = e.composedPath().indexOf(this.$.todayButton) >= 0;\n    const isCancel = e.composedPath().indexOf(this.$.cancelButton) >= 0;\n    const isScroller = !isToday && !isCancel;\n\n    var eventKey = this._eventKey(e);\n    if (eventKey === 'tab') {\n      // We handle tabs here and don't want to bubble up.\n      e.stopPropagation();\n\n      const isFullscreen = this.hasAttribute('fullscreen');\n      const isShift = e.shiftKey;\n\n      if (isFullscreen) {\n        e.preventDefault();\n      } else if (isShift && isScroller || !isShift && isCancel) {\n        // Return focus back to the input field\n        e.preventDefault();\n        this.dispatchEvent(new CustomEvent('focus-input', {bubbles: true, composed: true}));\n      } else if (isShift && isToday) {\n        // Browser returns focus back to the scrollable area. We need to set\n        // the focused flag, and move the scroll to focused date.\n        this._focused = true;\n        setTimeout(() => this.revealDate(this.focusedDate), 1);\n      } else {\n        // Browser moves the focus out of the scroller, hence focused flag must\n        // set to false.\n        this._focused = false;\n      }\n    } else if (eventKey) {\n      e.preventDefault();\n      e.stopPropagation();\n      switch (eventKey) {\n        case 'down':\n          this._moveFocusByDays(7);\n          this.focus();\n          break;\n        case 'up':\n          this._moveFocusByDays(-7);\n          this.focus();\n          break;\n        case 'right':\n          if (isScroller) {\n            this._moveFocusByDays(1);\n          }\n          break;\n        case 'left':\n          if (isScroller) {\n            this._moveFocusByDays(-1);\n          }\n          break;\n        case 'enter':\n          if (isScroller || isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          }\n          break;\n        case 'space':\n          if (isCancel) {\n            this._close();\n          } else if (isToday) {\n            this._onTodayTap();\n          } else {\n            var focusedDate = this.focusedDate;\n            if (DatePickerHelper._dateEquals(focusedDate, this.selectedDate)) {\n              this.selectedDate = '';\n              this.focusedDate = focusedDate;\n            } else {\n              this.selectedDate = focusedDate;\n            }\n          }\n          break;\n        case 'home':\n          this._moveFocusInsideMonth(focus, 'minDate');\n          break;\n        case 'end':\n          this._moveFocusInsideMonth(focus, 'maxDate');\n          break;\n        case 'pagedown':\n          this._moveFocusByMonths(e.shiftKey ? 12 : 1);\n          break;\n        case 'pageup':\n          this._moveFocusByMonths(e.shiftKey ? -12 : -1);\n          break;\n        case 'esc':\n          this._cancel();\n          break;\n      }\n    }\n  }\n\n  _currentlyFocusedDate() {\n    return this.focusedDate || this.selectedDate || this.initialPosition || new Date();\n  }\n\n  _focusDate(dateToFocus) {\n    this.focusedDate = dateToFocus;\n    this._focusedMonthDate = dateToFocus.getDate();\n  }\n\n  _focusClosestDate(focus) {\n    this._focusDate(DatePickerHelper._getClosestDate(focus, [this.minDate, this.maxDate]));\n  }\n\n  _moveFocusByDays(days) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth());\n    dateToFocus.setDate(focus.getDate() + days);\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (days > 0) { // down or right\n          this._focusDate(this.maxDate);\n        } else { // up or left\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusByMonths(months) {\n    var focus = this._currentlyFocusedDate();\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focus.getFullYear());\n    dateToFocus.setMonth(focus.getMonth() + months);\n\n    var targetMonth = dateToFocus.getMonth();\n\n    dateToFocus.setDate(this._focusedMonthDate || (this._focusedMonthDate = focus.getDate()));\n    if (dateToFocus.getMonth() !== targetMonth) {\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this.focusedDate = dateToFocus;\n    } else {\n      if (this._dateAllowed(focus, this.minDate, this.maxDate)) {\n        // Move to min or max date\n        if (months > 0) { // pagedown\n          this._focusDate(this.maxDate);\n        } else { // pageup\n          this._focusDate(this.minDate);\n        }\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focus);\n      }\n    }\n  }\n\n  _moveFocusInsideMonth(focusedDate, property) {\n    var dateToFocus = new Date(0, 0);\n    dateToFocus.setFullYear(focusedDate.getFullYear());\n\n    if (property === 'minDate') {\n      dateToFocus.setMonth(focusedDate.getMonth());\n      dateToFocus.setDate(1);\n    } else {\n      dateToFocus.setMonth(focusedDate.getMonth() + 1);\n      dateToFocus.setDate(0);\n    }\n\n    if (this._dateAllowed(dateToFocus, this.minDate, this.maxDate)) {\n      this._focusDate(dateToFocus);\n    } else {\n      if (this._dateAllowed(focusedDate, this.minDate, this.maxDate)) {\n        // Move to minDate or maxDate\n        this._focusDate(this[property]);\n      } else {\n        // Move to closest allowed date\n        this._focusClosestDate(focusedDate);\n      }\n    }\n  }\n\n  _dateAllowed(date, min, max) {\n    return (!min || date >= min) && (!max || date <= max);\n  }\n\n  _isTodayAllowed(min, max) {\n    var today = new Date();\n    var todayMidnight = new Date(0, 0);\n    todayMidnight.setFullYear(today.getFullYear());\n    todayMidnight.setMonth(today.getMonth());\n    todayMidnight.setDate(today.getDate());\n    return this._dateAllowed(todayMidnight, min, max);\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n}\n\ncustomElements.define(DatePickerOverlayContentElement.is, DatePickerOverlayContentElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\n\nimport { DisableUpgradeMixin } from '@polymer/polymer/lib/mixins/disable-upgrade-mixin.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-date-picker-overlay>` parts.\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @extends Vaadin.OverlayElement\n * @memberof Vaadin\n * @private\n */\nclass DatePickerOverlayElement extends DisableUpgradeMixin(OverlayElement) {\n  static get is() {\n    return 'vaadin-date-picker-overlay';\n  }\n}\n\ncustomElements.define(DatePickerOverlayElement.is, DatePickerOverlayElement);\n","import '@polymer/polymer/lib/elements/custom-style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-date-picker-overlay-styles\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style>\n      :host {\n        align-items: flex-start;\n        justify-content: flex-start;\n      }\n\n      :host([bottom-aligned]) {\n        justify-content: flex-end;\n      }\n\n      :host([right-aligned]) {\n        align-items: flex-end;\n      }\n\n      :host([right-aligned][dir=\"rtl\"]) {\n        align-items: flex-start;\n      }\n\n      [part=\"overlay\"] {\n        display: flex;\n        flex: auto;\n      }\n\n      [part~=\"content\"] {\n        flex: auto;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ThemePropertyMixin } from '@vaadin/vaadin-themable-mixin/vaadin-theme-property-mixin.js';\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport './vaadin-date-picker-overlay.js';\nimport './vaadin-date-picker-overlay-content.js';\nimport { DatePickerMixin } from './vaadin-date-picker-mixin.js';\nimport '@vaadin/vaadin-text-field/src/vaadin-text-field.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { prevent } from '@polymer/polymer/lib/utils/gestures.js';\n/**\n *\n * `<vaadin-date-picker>` is a date selection field which includes a scrollable\n * month calendar view.\n * ```html\n * <vaadin-date-picker label=\"Birthday\"></vaadin-date-picker>\n * ```\n * ```js\n * datePicker.value = '2016-03-02';\n * ```\n * When the selected `value` is changed, a `value-changed` event is triggered.\n *\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description | Theme for Element\n * ----------------|----------------|----------------\n * `text-field` | Input element | vaadin-date-picker\n * `clear-button` | Clear button | vaadin-date-picker\n * `toggle-button` | Toggle button | vaadin-date-picker\n * `overlay-content` | The overlay element | vaadin-date-picker\n * `overlay-header` | Fullscreen mode header | vaadin-date-picker-overlay-content\n * `label` | Fullscreen mode value/label | vaadin-date-picker-overlay-content\n * `clear-button` | Fullscreen mode clear button | vaadin-date-picker-overlay-content\n * `toggle-button` | Fullscreen mode toggle button | vaadin-date-picker-overlay-content\n * `years-toggle-button` | Fullscreen mode years scroller toggle | vaadin-date-picker-overlay-content\n * `months` | Months scroller | vaadin-date-picker-overlay-content\n * `years` | Years scroller | vaadin-date-picker-overlay-content\n * `toolbar` | Footer bar with buttons | vaadin-date-picker-overlay-content\n * `today-button` | Today button | vaadin-date-picker-overlay-content\n * `cancel-button` | Cancel button | vaadin-date-picker-overlay-content\n * `month` | Month calendar | vaadin-date-picker-overlay-content\n * `year-number` | Year number | vaadin-date-picker-overlay-content\n * `year-separator` | Year separator | vaadin-date-picker-overlay-content\n * `month-header` | Month title | vaadin-month-calendar\n * `weekdays` | Weekday container | vaadin-month-calendar\n * `weekday` | Weekday element | vaadin-month-calendar\n * `week-numbers` | Week numbers container | vaadin-month-calendar\n * `week-number` | Week number element | vaadin-month-calendar\n * `date` | Date element | vaadin-month-calendar\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `invalid` | Set when the element is invalid | :host\n * `opened` | Set when the date selector overlay is opened | :host\n * `readonly` | Set when the element is readonly | :host\n * `disabled` | Set when the element is disabled | :host\n * `today` | Set on the date corresponding to the current day | date\n * `focused` | Set on the focused date | date\n * `disabled` | Set on the date out of the allowed range | date\n * `selected` | Set on the selected date | date\n *\n * If you want to replace the default input field with a custom implementation, you should use the\n * [`<vaadin-date-picker-light>`](#vaadin-date-picker-light) element.\n *\n * In addition to `<vaadin-date-picker>` itself, the following internal\n * components are themable:\n *\n * - `<vaadin-text-field>`\n * - `<vaadin-date-picker-overlay>`\n * - `<vaadin-date-picker-overlay-content>`\n * - `<vaadin-month-calendar>`\n *\n * Note: the `theme` attribute value set on `<vaadin-date-picker>` is\n * propagated to the internal themable components listed above.\n *\n * @memberof Vaadin\n * @mixes Vaadin.ElementMixin\n * @mixes Vaadin.ControlStateMixin\n * @mixes Vaadin.ThemableMixin\n * @mixes Vaadin.ThemePropertyMixin\n * @mixes Vaadin.DatePickerMixin\n * @mixes Polymer.GestureEventListeners\n * @demo demo/index.html\n */\nclass DatePickerElement extends\n  ElementMixin(\n    ControlStateMixin(\n      ThemableMixin(\n        ThemePropertyMixin(\n          DatePickerMixin(\n            GestureEventListeners(PolymerElement)))))) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      :host([opened]) {\n        pointer-events: auto;\n      }\n\n      [part=\"text-field\"] {\n        width: 100%;\n        min-width: 0;\n      }\n\n      :host([disabled]) [part=\"clear-button\"],\n      :host([readonly]) [part=\"clear-button\"],\n      :host(:not([has-value])) [part=\"clear-button\"] {\n        display: none;\n      }\n    </style>\n\n\n    <vaadin-text-field id=\"input\" role=\"application\" autocomplete=\"off\" on-focus=\"_focus\" value=\"{{_userInputValue}}\" invalid=\"[[invalid]]\" label=\"[[label]]\" name=\"[[name]]\" placeholder=\"[[placeholder]]\" required=\"[[required]]\" disabled=\"[[disabled]]\" readonly=\"[[readonly]]\" error-message=\"[[errorMessage]]\" aria-label\\$=\"[[label]]\" part=\"text-field\" theme\\$=\"[[theme]]\">\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n      <div part=\"clear-button\" slot=\"suffix\" on-touchend=\"_clearTouchend\" on-click=\"_clear\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n      <div part=\"toggle-button\" slot=\"suffix\" on-tap=\"_toggle\" role=\"button\" aria-label\\$=\"[[i18n.calendar]]\" aria-expanded\\$=\"[[_getAriaExpanded(opened)]]\"></div>\n    </vaadin-text-field>\n\n    <vaadin-date-picker-overlay id=\"overlay\" fullscreen\\$=\"[[_fullscreen]]\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\" on-vaadin-overlay-open=\"_onOverlayOpened\" on-vaadin-overlay-close=\"_onOverlayClosed\" disable-upgrade=\"\">\n      <template>\n        <vaadin-date-picker-overlay-content id=\"overlay-content\" i18n=\"[[i18n]]\" fullscreen\\$=\"[[_fullscreen]]\" label=\"[[label]]\" selected-date=\"{{_selectedDate}}\" slot=\"dropdown-content\" focused-date=\"{{_focusedDate}}\" show-week-numbers=\"[[showWeekNumbers]]\" min-date=\"[[_minDate]]\" max-date=\"[[_maxDate]]\" role=\"dialog\" on-date-tap=\"_close\" part=\"overlay-content\" theme\\$=\"[[__getOverlayTheme(theme, _overlayInitialized)]]\">\n        </vaadin-date-picker-overlay-content>\n      </template>\n    </vaadin-date-picker-overlay>\n\n    <iron-media-query query=\"[[_fullscreenMediaQuery]]\" query-matches=\"{{_fullscreen}}\">\n    </iron-media-query>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-date-picker';\n  }\n\n  static get version() {\n    return '3.3.4';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The error message to display when the input is invalid.\n       */\n      errorMessage: String,\n\n      /**\n       * A placeholder string in addition to the label. If this is set, the label will always float.\n       */\n      placeholder: String,\n\n      /**\n       * Set to true to make this element read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * This property is set to true when the control value invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _userInputValue: String\n    };\n  }\n\n  static get observers() {\n    return [\n      '_userInputValueChanged(_userInputValue)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    // In order to have synchronized invalid property, we need to use the same validate logic.\n    afterNextRender(this, () => this._inputElement.validate = () => {});\n  }\n\n  _onVaadinOverlayClose(e) {\n    if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n      this.focusElement.setAttribute('focus-ring', '');\n    } else if (!this.hasAttribute('focused')) {\n      this.focusElement.blur();\n    }\n    if (e.detail.sourceEvent && e.detail.sourceEvent.composedPath().indexOf(this) !== -1) {\n      e.preventDefault();\n    }\n  }\n\n  _clear() {\n    this.__dispatchChange = true;\n    this.value = '';\n    this.validate();\n    this.focus();\n    prevent('tap');\n    this.__dispatchChange = false;\n  }\n\n  _clearTouchend(e) {\n    this._clear();\n    e.preventDefault();\n    prevent('tap');\n  }\n\n  _toggle(e) {\n    e.stopPropagation();\n    this[(this._overlayInitialized && this.$.overlay.opened) ? 'close' : 'open']();\n  }\n\n  _input() {\n    return this.$.input;\n  }\n\n  set _inputValue(value) {\n    this._inputElement.value = value;\n  }\n\n  get _inputValue() {\n    return this._inputElement.value;\n  }\n\n  _getAriaExpanded(opened) {\n    return Boolean(opened).toString();\n  }\n\n  /**\n   * Focussable element used by vaadin-control-state-mixin\n   */\n  get focusElement() {\n    return this._input() || this;\n  }\n}\n\ncustomElements.define(DatePickerElement.is, DatePickerElement);\n\nexport { DatePickerElement };\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass InfiniteScrollerElement extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n        overflow: hidden;\n        height: 500px;\n      }\n\n      #scroller {\n        position: relative;\n        height: 100%;\n        overflow: auto;\n        outline: none;\n        margin-right: -40px;\n        -webkit-overflow-scrolling: touch;\n        -ms-overflow-style: none;\n        overflow-x: hidden;\n      }\n\n      #scroller.notouchscroll {\n        -webkit-overflow-scrolling: auto;\n      }\n\n      #scroller::-webkit-scrollbar {\n        display: none;\n      }\n\n      .buffer {\n        position: absolute;\n        width: var(--vaadin-infinite-scroller-buffer-width, 100%);\n        box-sizing: border-box;\n        padding-right: 40px;\n        top: var(--vaadin-infinite-scroller-buffer-offset, 0);\n        animation: fadein 0.2s;\n      }\n\n      @keyframes fadein {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n    </style>\n\n    <div id=\"scroller\" on-scroll=\"_scroll\">\n      <div class=\"buffer\"></div>\n      <div class=\"buffer\"></div>\n      <div id=\"fullHeight\"></div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-infinite-scroller';\n  }\n\n  static get properties() {\n    return {\n\n      /**\n       * Count of individual items in each buffer.\n       * The scroller has 2 buffers altogether so bufferSize of 20\n       * will result in 40 buffered DOM items in total.\n       * Changing after initialization not supported.\n       */\n      bufferSize: {\n        type: Number,\n        value: 20\n      },\n\n      /**\n       * The amount of initial scroll top. Needed in order for the\n       * user to be able to scroll backwards.\n       */\n      _initialScroll: {\n        value: 500000\n      },\n\n      /**\n       * The index/position mapped at _initialScroll point.\n       */\n      _initialIndex: {\n        value: 0\n      },\n\n      _buffers: Array,\n\n      _preventScrollEvent: Boolean,\n\n      _mayHaveMomentum: Boolean,\n\n      _initialized: Boolean,\n\n      active: {\n        type: Boolean,\n        observer: '_activated'\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n\n    this._buffers = Array.prototype.slice.call(this.root.querySelectorAll('.buffer'));\n\n    this.$.fullHeight.style.height = this._initialScroll * 2 + 'px';\n\n    var tpl = this.querySelector('template');\n    this._TemplateClass = templatize(tpl, this, {\n      forwardHostProp: function(prop, value) {\n        if (prop !== 'index') {\n          this._buffers.forEach(buffer => {\n            [].forEach.call(buffer.children, insertionPoint => {\n              insertionPoint._itemWrapper.instance[prop] = value;\n            });\n          });\n        }\n      }\n    });\n\n    // Firefox interprets elements with overflow:auto as focusable\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1069739\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n    if (isFirefox) {\n      this.$.scroller.tabIndex = -1;\n    }\n  }\n\n  _activated(active) {\n    if (active && !this._initialized) {\n      this._createPool();\n      this._initialized = true;\n    }\n  }\n\n  _finishInit() {\n    if (!this._initDone) {\n      // Once the first set of items start fading in, stamp the rest\n      this._buffers.forEach(buffer => {\n        [].forEach.call(buffer.children,\n          insertionPoint => this._ensureStampedInstance(insertionPoint._itemWrapper));\n      }, this);\n\n      if (!this._buffers[0].translateY) {\n        this._reset();\n      }\n\n      this._initDone = true;\n    }\n  }\n\n  _translateBuffer(up) {\n    var index = up ? 1 : 0;\n    this._buffers[index].translateY = this._buffers[(index ? 0 : 1)].translateY + this._bufferHeight * (index ? -1 : 1);\n    this._buffers[index].style.transform = 'translate3d(0, ' + this._buffers[index].translateY + 'px, 0)';\n    this._buffers[index].updated = false;\n    this._buffers.reverse();\n  }\n\n  _scroll() {\n    if (this._scrollDisabled) {\n      return;\n    }\n\n    var scrollTop = this.$.scroller.scrollTop;\n    if (scrollTop < this._bufferHeight || scrollTop > this._initialScroll * 2 - this._bufferHeight) {\n      // Scrolled near the end/beginning of the scrollable area -> reset.\n      this._initialIndex = ~~this.position;\n      this._reset();\n    }\n\n    // Check if we scrolled enough to translate the buffer positions.\n    var bufferOffset = this.root.querySelector('.buffer').offsetTop;\n    var upperThresholdReached = scrollTop > this._buffers[1].translateY + this.itemHeight + bufferOffset;\n    var lowerThresholdReached = scrollTop < this._buffers[0].translateY + this.itemHeight + bufferOffset;\n\n    if (upperThresholdReached || lowerThresholdReached) {\n      this._translateBuffer(lowerThresholdReached);\n      this._updateClones();\n    }\n\n    if (!this._preventScrollEvent) {\n      this.dispatchEvent(new CustomEvent('custom-scroll', {bubbles: false, composed: true}));\n      this._mayHaveMomentum = true;\n    }\n    this._preventScrollEvent = false;\n\n    this._debouncerScrollFinish = Debouncer.debounce(this._debouncerScrollFinish,\n      timeOut.after(200), () => {\n        var scrollerRect = this.$.scroller.getBoundingClientRect();\n        if (!this._isVisible(this._buffers[0], scrollerRect) && !this._isVisible(this._buffers[1], scrollerRect)) {\n          this.position = this.position;\n        }\n      });\n  }\n\n  /**\n   * Current scroller position as index. Can be a fractional number.\n   *\n   * @type {Number}\n   */\n  set position(index) {\n    this._preventScrollEvent = true;\n    if (index > this._firstIndex && index < this._firstIndex + this.bufferSize * 2) {\n      this.$.scroller.scrollTop = this.itemHeight * (index - this._firstIndex) + this._buffers[0].translateY;\n    } else {\n      this._initialIndex = ~~index;\n      this._reset();\n      this._scrollDisabled = true;\n      this.$.scroller.scrollTop += index % 1 * this.itemHeight;\n      this._scrollDisabled = false;\n    }\n\n    if (this._mayHaveMomentum) {\n      // Stop the possible iOS Safari momentum with -webkit-overflow-scrolling: auto;\n      this.$.scroller.classList.add('notouchscroll');\n      this._mayHaveMomentum = false;\n\n      setTimeout(() => {\n        // Restore -webkit-overflow-scrolling: touch; after a small delay.\n        this.$.scroller.classList.remove('notouchscroll');\n      }, 10);\n    }\n\n  }\n\n  /**\n   * @private\n   */\n  get position() {\n    return (this.$.scroller.scrollTop - this._buffers[0].translateY) / this.itemHeight + this._firstIndex;\n  }\n\n  get itemHeight() {\n    if (!this._itemHeightVal) {\n      if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n        this.updateStyles();\n      }\n\n      const itemHeight = window.ShadyCSS\n        ? window.ShadyCSS.getComputedStyleValue(this, '--vaadin-infinite-scroller-item-height')\n        : getComputedStyle(this).getPropertyValue('--vaadin-infinite-scroller-item-height');\n      // Use background-position temp inline style for unit conversion\n      const tmpStyleProp = 'background-position';\n      this.$.fullHeight.style.setProperty(tmpStyleProp, itemHeight);\n      const itemHeightPx = getComputedStyle(this.$.fullHeight).getPropertyValue(tmpStyleProp);\n      this.$.fullHeight.style.removeProperty(tmpStyleProp);\n      this._itemHeightVal = parseFloat(itemHeightPx);\n    }\n\n    return this._itemHeightVal;\n  }\n\n  get _bufferHeight() {\n    return this.itemHeight * this.bufferSize;\n  }\n\n  _reset() {\n    this._scrollDisabled = true;\n    this.$.scroller.scrollTop = this._initialScroll;\n    this._buffers[0].translateY = this._initialScroll - this._bufferHeight;\n    this._buffers[1].translateY = this._initialScroll;\n    this._buffers.forEach(buffer => {\n      buffer.style.transform = 'translate3d(0, ' + buffer.translateY + 'px, 0)';\n    });\n    this._buffers[0].updated = this._buffers[1].updated = false;\n    this._updateClones(true);\n\n    this._debouncerUpdateClones = Debouncer.debounce(\n      this._debouncerUpdateClones,\n      timeOut.after(200), () => {\n        this._buffers[0].updated = this._buffers[1].updated = false;\n        this._updateClones();\n      });\n\n    this._scrollDisabled = false;\n  }\n\n  _createPool() {\n    var container = this.getBoundingClientRect();\n    this._buffers.forEach(buffer => {\n      for (var i = 0; i < this.bufferSize; i++) {\n        const itemWrapper = document.createElement('div');\n        itemWrapper.style.height = this.itemHeight + 'px';\n        itemWrapper.instance = {};\n\n        const contentId = InfiniteScrollerElement._contentIndex = InfiniteScrollerElement._contentIndex + 1 || 0;\n        const slotName = 'vaadin-infinite-scroller-item-content-' + contentId;\n\n        const insertionPoint = document.createElement('slot');\n        insertionPoint.setAttribute('name', slotName);\n        insertionPoint._itemWrapper = itemWrapper;\n        buffer.appendChild(insertionPoint);\n\n        itemWrapper.setAttribute('slot', slotName);\n        this.appendChild(itemWrapper);\n\n        // This is needed by IE\n        flush();\n\n        setTimeout(() => {\n          // Only stamp the visible instances first\n          if (this._isVisible(itemWrapper, container)) {\n            this._ensureStampedInstance(itemWrapper);\n          }\n        }, 1); // Wait for first reset\n      }\n    }, this);\n\n    setTimeout(() => {\n      afterNextRender(this, this._finishInit.bind(this));\n    }, 1);\n  }\n\n  _ensureStampedInstance(itemWrapper) {\n    if (itemWrapper.firstElementChild) {\n      return;\n    }\n\n    var tmpInstance = itemWrapper.instance;\n\n    itemWrapper.instance = new this._TemplateClass({});\n    itemWrapper.appendChild(itemWrapper.instance.root);\n\n    Object.keys(tmpInstance).forEach(prop => {\n      itemWrapper.instance.set(prop, tmpInstance[prop]);\n    });\n  }\n\n  _updateClones(viewPortOnly) {\n    this._firstIndex = ~~((this._buffers[0].translateY - this._initialScroll) / this.itemHeight) + this._initialIndex;\n\n    var scrollerRect = viewPortOnly ? this.$.scroller.getBoundingClientRect() : undefined;\n    this._buffers.forEach((buffer, bufferIndex) => {\n      if (!buffer.updated) {\n        var firstIndex = this._firstIndex + this.bufferSize * bufferIndex;\n\n        [].forEach.call(buffer.children, (insertionPoint, index) => {\n          const itemWrapper = insertionPoint._itemWrapper;\n          if (!viewPortOnly || this._isVisible(itemWrapper, scrollerRect)) {\n            itemWrapper.instance.index = firstIndex + index;\n          }\n        });\n        buffer.updated = true;\n      }\n    }, this);\n  }\n\n  _isVisible(element, container) {\n    var rect = element.getBoundingClientRect();\n    return rect.bottom > container.top && rect.top < container.bottom;\n  }\n}\n\ncustomElements.define(InfiniteScrollerElement.is, InfiniteScrollerElement);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { GestureEventListeners } from '@polymer/polymer/lib/mixins/gesture-event-listeners.js';\nimport { DatePickerHelper } from './vaadin-date-picker-helper.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * @memberof Vaadin\n * @private\n */\nclass MonthCalendarElement extends ThemableMixin(GestureEventListeners(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      [part=\"weekdays\"],\n      #days {\n        display: flex;\n        flex-wrap: wrap;\n        flex-grow: 1;\n      }\n\n      #days-container,\n      #weekdays-container {\n        display: flex;\n      }\n\n      [part=\"week-numbers\"] {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        flex-shrink: 0;\n      }\n\n      [part=\"week-numbers\"][hidden],\n      [part=\"weekday\"][hidden] {\n        display: none;\n      }\n\n      [part=\"weekday\"],\n      [part=\"date\"] {\n        /* Would use calc(100% / 7) but it doesn't work nice on IE */\n        width: 14.285714286%;\n      }\n\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: 12.5%;\n        flex-shrink: 0;\n      }\n    </style>\n\n    <div part=\"month-header\" role=\"heading\">[[_getTitle(month, i18n.monthNames)]]</div>\n    <div id=\"monthGrid\" on-tap=\"_handleTap\" on-touchend=\"_preventDefault\" on-touchstart=\"_onMonthGridTouchStart\">\n      <div id=\"weekdays-container\">\n        <div hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\" part=\"weekday\"></div>\n        <div part=\"weekdays\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekDayNames(i18n.weekdays, i18n.weekdaysShort, showWeekNumbers, i18n.firstDayOfWeek)]]\">\n            <div part=\"weekday\" role=\"heading\" aria-label\\$=\"[[item.weekDay]]\">[[item.weekDayShort]]</div>\n          </template>\n        </div>\n      </div>\n      <div id=\"days-container\">\n        <div part=\"week-numbers\" hidden=\"[[!_showWeekSeparator(showWeekNumbers, i18n.firstDayOfWeek)]]\">\n          <template is=\"dom-repeat\" items=\"[[_getWeekNumbers(_days)]]\">\n            <div part=\"week-number\" role=\"heading\" aria-label\\$=\"[[i18n.week]] [[item]]\">[[item]]</div>\n          </template>\n        </div>\n        <div id=\"days\">\n          <template is=\"dom-repeat\" items=\"[[_days]]\">\n            <div part=\"date\" today\\$=\"[[_isToday(item)]]\" selected\\$=\"[[_dateEquals(item, selectedDate)]]\" focused\\$=\"[[_dateEquals(item, focusedDate)]]\" date=\"[[item]]\" disabled\\$=\"[[!_dateAllowed(item, minDate, maxDate)]]\" role\\$=\"[[_getRole(item)]]\" aria-label\\$=\"[[_getAriaLabel(item)]]\" aria-disabled\\$=\"[[_getAriaDisabled(item, minDate, maxDate)]]\">[[_getDate(item)]]</div>\n          </template>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-month-calendar';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * A `Date` object defining the month to be displayed. Only year and\n       * month properties are actually used.\n       */\n      month: {\n        type: Date,\n        value: new Date()\n      },\n\n      /**\n       * A `Date` object for the currently selected date.\n       */\n      selectedDate: {\n        type: Date,\n        notify: true\n      },\n\n      /**\n       * A `Date` object for the currently focused date.\n       */\n      focusedDate: Date,\n\n      showWeekNumbers: {\n        type: Boolean,\n        value: false\n      },\n\n      i18n: {\n        type: Object\n      },\n\n      /**\n       * Flag stating whether taps on the component should be ignored.\n       */\n      ignoreTaps: Boolean,\n\n      _notTapping: Boolean,\n\n      /**\n       * The earliest date that can be selected. All earlier dates will be disabled.\n       */\n      minDate: {\n        type: Date,\n        value: null\n      },\n\n      /**\n       * The latest date that can be selected. All later dates will be disabled.\n       */\n      maxDate: {\n        type: Date,\n        value: null\n      },\n\n      _days: {\n        type: Array,\n        computed: '_getDays(month, i18n.firstDayOfWeek, minDate, maxDate)'\n      },\n\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_isDisabled(month, minDate, maxDate)'\n      }\n    };\n  }\n\n  static get observers() {\n    return [\n      '_showWeekNumbersChanged(showWeekNumbers, i18n.firstDayOfWeek)'\n    ];\n  }\n\n  _dateEquals(date1, date2) {\n    return DatePickerHelper._dateEquals(date1, date2);\n  }\n\n  _dateAllowed(date, min, max) {\n    return DatePickerHelper._dateAllowed(date, min, max);\n  }\n\n  /* Returns true if all the dates in the month are out of the allowed range */\n  _isDisabled(month, minDate, maxDate) {\n    // First day of the month\n    var firstDate = new Date(0, 0);\n    firstDate.setFullYear(month.getFullYear());\n    firstDate.setMonth(month.getMonth());\n    firstDate.setDate(1);\n\n    // Last day of the month\n    var lastDate = new Date(0, 0);\n    lastDate.setFullYear(month.getFullYear());\n    lastDate.setMonth(month.getMonth() + 1);\n    lastDate.setDate(-1);\n\n    if ((minDate && maxDate)\n      && minDate.getMonth() === maxDate.getMonth()\n      && minDate.getMonth() === month.getMonth()\n      && maxDate.getDate() - minDate.getDate() >= 0) {\n      return false;\n    }\n\n    return !this._dateAllowed(firstDate, minDate, maxDate)\n      && !this._dateAllowed(lastDate, minDate, maxDate);\n  }\n\n  _getTitle(month, monthNames) {\n    if (month === undefined || monthNames === undefined) {\n      return;\n    }\n    return this.i18n.formatTitle(monthNames[month.getMonth()], month.getFullYear());\n  }\n\n  _onMonthGridTouchStart() {\n    this._notTapping = false;\n    setTimeout(() => this._notTapping = true, 300);\n  }\n\n  _dateAdd(date, delta) {\n    date.setDate(date.getDate() + delta);\n  }\n\n  _applyFirstDayOfWeek(weekDayNames, firstDayOfWeek) {\n    if (weekDayNames === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n\n    return weekDayNames.slice(firstDayOfWeek).concat(weekDayNames.slice(0, firstDayOfWeek));\n  }\n\n  _getWeekDayNames(weekDayNames, weekDayNamesShort, showWeekNumbers, firstDayOfWeek) {\n    if (weekDayNames === undefined || weekDayNamesShort === undefined ||\n      showWeekNumbers === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    weekDayNames = this._applyFirstDayOfWeek(weekDayNames, firstDayOfWeek);\n    weekDayNamesShort = this._applyFirstDayOfWeek(weekDayNamesShort, firstDayOfWeek);\n    weekDayNames = weekDayNames.map((day, index) => {\n      return {\n        weekDay: day,\n        weekDayShort: weekDayNamesShort[index]\n      };\n    });\n\n    return weekDayNames;\n  }\n\n  _getDate(date) {\n    return date ? date.getDate() : '';\n  }\n\n  _showWeekNumbersChanged(showWeekNumbers, firstDayOfWeek) {\n    if (showWeekNumbers && firstDayOfWeek === 1) {\n      this.setAttribute('week-numbers', '');\n    } else {\n      this.removeAttribute('week-numbers');\n    }\n  }\n\n  _showWeekSeparator(showWeekNumbers, firstDayOfWeek) {\n    // Currently only supported for locales that start the week on Monday.\n    return showWeekNumbers && firstDayOfWeek === 1;\n  }\n\n  _isToday(date) {\n    return this._dateEquals(new Date(), date);\n  }\n\n  _getDays(month, firstDayOfWeek) {\n    if (month === undefined || firstDayOfWeek === undefined) {\n      return;\n    }\n    // First day of the month (at midnight).\n    var date = new Date(0, 0);\n    date.setFullYear(month.getFullYear());\n    date.setMonth(month.getMonth());\n    date.setDate(1);\n\n    // Rewind to first day of the week.\n    while (date.getDay() !== firstDayOfWeek) {\n      this._dateAdd(date, -1);\n    }\n\n    var days = [];\n    var startMonth = date.getMonth();\n    var targetMonth = month.getMonth();\n    while (date.getMonth() === targetMonth || date.getMonth() === startMonth) {\n      days.push(date.getMonth() === targetMonth ? new Date(date.getTime()) : null);\n\n      // Advance to next day.\n      this._dateAdd(date, 1);\n    }\n    return days;\n  }\n\n  _getWeekNumber(date, days) {\n    if (date === undefined || days === undefined) {\n      return;\n    }\n\n    if (!date) {\n      // Get the first non-null date from the days array.\n      date = days.reduce((acc, d) => {\n        return !acc && d ? d : acc;\n      });\n    }\n\n    return DatePickerHelper._getISOWeekNumber(date);\n  }\n\n  _getWeekNumbers(dates) {\n    return dates\n      .map(date => this._getWeekNumber(date, dates))\n      .filter((week, index, arr) => arr.indexOf(week) === index);\n  }\n\n  _handleTap(e) {\n    if (!this.ignoreTaps && !this._notTapping && e.target.date && !e.target.hasAttribute('disabled')) {\n      this.selectedDate = e.target.date;\n      this.dispatchEvent(new CustomEvent('date-tap', {bubbles: true, composed: true}));\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _getRole(date) {\n    return date ? 'button' : 'presentation';\n  }\n\n  _getAriaLabel(date) {\n    if (!date) {\n      return '';\n    }\n\n    var ariaLabel = this._getDate(date) + ' ' +\n      this.i18n.monthNames[date.getMonth()] + ' ' +\n      date.getFullYear() + ', ' +\n      this.i18n.weekdays[date.getDay()];\n\n    if (this._isToday(date)) {\n      ariaLabel += ', ' + this.i18n.today;\n    }\n\n    return ariaLabel;\n  }\n\n  _getAriaDisabled(date, min, max) {\n    if (date === undefined || min === undefined || max === undefined) {\n      return;\n    }\n    return this._dateAllowed(date, min, max) ? 'false' : 'true';\n  }\n}\n\ncustomElements.define(MonthCalendarElement.is, MonthCalendarElement);\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-button/theme/lumo/vaadin-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker-overlay-content\" theme-for=\"vaadin-date-picker-overlay-content\">\n  <template>\n    <style>\n      :host {\n        position: relative;\n        background-color: transparent;\n        /* Background for the year scroller, placed here as we are using a mask image on the actual years part */\n        background-image: linear-gradient(var(--lumo-shade-5pct), var(--lumo-shade-5pct));\n        background-size: 57px 100%;\n        background-position: top right;\n        background-repeat: no-repeat;\n        cursor: default;\n      }\n\n      /* Month scroller */\n\n      [part=\"months\"] {\n        /* Month calendar height:\n              header height + margin-bottom\n            + weekdays height + margin-bottom\n            + date cell heights\n            + small margin between month calendars\n        */\n        --vaadin-infinite-scroller-item-height:\n          calc(\n              var(--lumo-font-size-l) + var(--lumo-space-m)\n            + var(--lumo-font-size-xs) + var(--lumo-space-s)\n            + var(--lumo-size-m) * 6\n            + var(--lumo-space-s)\n          );\n        --vaadin-infinite-scroller-buffer-offset: 20%;\n        -webkit-mask-image: linear-gradient(transparent, #000 10%, #000 85%, transparent);\n        mask-image: linear-gradient(transparent, #000 10%, #000 85%, transparent);\n        position: relative;\n        margin-right: 57px;\n      }\n\n      /* Year scroller */\n\n      [part=\"years\"] {\n        /* TODO get rid of fixed magic number */\n        --vaadin-infinite-scroller-buffer-width: 97px;\n        width: 57px;\n        height: auto;\n        top: 0;\n        bottom: 0;\n        font-size: var(--lumo-font-size-s);\n        box-shadow: inset 2px 0 4px 0 var(--lumo-shade-5pct);\n        -webkit-mask-image: linear-gradient(transparent, #000 35%, #000 65%, transparent);\n        mask-image: linear-gradient(transparent, #000 35%, #000 65%, transparent);\n      }\n\n      [part=\"year-number\"],\n      [part=\"year-separator\"] {\n        opacity: 0.5;\n        transition: 0.2s opacity;\n      }\n\n      [part=\"years\"]:hover [part=\"year-number\"],\n      [part=\"years\"]:hover [part=\"year-separator\"] {\n        opacity: 1;\n      }\n\n      /* TODO unsupported selector */\n      #scrollers {\n        position: static;\n        display: block;\n      }\n\n      /* TODO unsupported selector, should fix this in vaadin-date-picker that it adapts to the\n       * width of the year scroller */\n      #scrollers[desktop] [part=\"months\"] {\n        right: auto;\n      }\n\n      /* Year scroller position indicator */\n      [part=\"years\"]::before {\n        border: none;\n        width: 1em;\n        height: 1em;\n        background-color: var(--lumo-base-color);\n        background-image: linear-gradient(var(--lumo-tint-5pct), var(--lumo-tint-5pct));\n        transform: translate(-75%, -50%) rotate(45deg);\n        border-top-right-radius: calc(var(--lumo-border-radius) / 2);\n        box-shadow: 2px -2px 6px 0 var(--lumo-shade-5pct);\n        z-index: 1;\n      }\n\n      [part=\"year-number\"],\n      [part=\"year-separator\"] {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 50%;\n        transform: translateY(-50%);\n      }\n\n      [part=\"years\"] [part=\"year-separator\"]::after {\n        color: var(--lumo-disabled-text-color);\n        content: \"\";\n      }\n\n      /* Current year */\n\n      [part=\"years\"] [part=\"year-number\"][current] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      /* Toolbar (footer) */\n\n      [part=\"toolbar\"] {\n        padding: var(--lumo-space-s);\n        box-shadow: 0 -1px 0 0 var(--lumo-contrast-10pct);\n        border-bottom-left-radius: var(--lumo-border-radius);\n        margin-right: 57px;\n      }\n\n      @supports (mask-image: linear-gradient(#000, #000)) or (-webkit-mask-image: linear-gradient(#000, #000)) {\n        [part=\"toolbar\"] {\n          box-shadow: none;\n        }\n      }\n\n      /* Today and Cancel buttons */\n\n      /* TODO: Would be great if I could apply the \"tertiary\" theme from here instead of copying those styles */\n      [part=\"toolbar\"] [part\\$=\"button\"] {\n        background-color: transparent;\n        margin: 0;\n        min-width: 0;\n        padding: 0 0.75em;\n      }\n\n      /* Narrow viewport mode (fullscreen) */\n\n      :host([fullscreen]) [part=\"toolbar\"] {\n        order: -1;\n        background-color: var(--lumo-base-color);\n      }\n\n      :host([fullscreen]) [part=\"overlay-header\"] {\n        order: -2;\n        height: var(--lumo-size-m);\n        padding: var(--lumo-space-s);\n        position: absolute;\n        left: 0;\n        right: 0;\n        justify-content: center;\n      }\n\n      :host([fullscreen]) [part=\"toggle-button\"],\n      :host([fullscreen]) [part=\"clear-button\"],\n      [part=\"overlay-header\"] [part=\"label\"] {\n        display: none;\n      }\n\n      /* Very narrow screen (year scroller initially hidden) */\n\n      [part=\"years-toggle-button\"] {\n        position: relative;\n        right: auto;\n        display: flex;\n        align-items: center;\n        height: var(--lumo-size-s);\n        padding: 0 0.5em;\n        border-radius: var(--lumo-border-radius);\n        z-index: 3;\n        color: var(--lumo-primary-text-color);\n        font-weight: 500;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      :host([years-visible]) [part=\"years-toggle-button\"] {\n        background-color: var(--lumo-primary-color);\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      [part=\"years-toggle-button\"]::before {\n        content: none;\n      }\n\n      /* TODO magic number (same as used for iron-media-query in vaadin-date-picker-overlay-content) */\n      @media screen and (max-width: 374px) {\n        :host {\n          background-image: none;\n        }\n\n        [part=\"years\"] {\n          background-color: var(--lumo-shade-5pct);\n        }\n\n        [part=\"toolbar\"],\n        [part=\"months\"] {\n          margin-right: 0;\n        }\n\n        /* TODO make date-picker adapt to the width of the years part */\n        [part=\"years\"] {\n          --vaadin-infinite-scroller-buffer-width: 90px;\n          width: 50px;\n        }\n\n        :host([years-visible]) [part=\"months\"] {\n          padding-left: 50px;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/menu-overlay.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker-overlay\" theme-for=\"vaadin-date-picker-overlay\">\n  <template>\n    <style include=\"lumo-menu-overlay\">\n      [part=\"overlay\"] {\n        /*\n        Width:\n            date cell widths\n          + month calendar side padding\n          + year scroller width\n        */\n        width:\n          calc(\n              var(--lumo-size-m) * 7\n            + var(--lumo-space-xs) * 2\n            + 57px\n          );\n        height: 100%;\n        max-height: calc(var(--lumo-size-m) * 14);\n        overflow: hidden;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      [part=\"content\"] {\n        padding: 0;\n        height: 100%;\n        overflow: hidden;\n        -webkit-mask-image: none;\n        mask-image: none;\n      }\n\n      @media (max-width: 420px), (max-height: 420px) {\n        [part=\"overlay\"] {\n          width: 100vw;\n          height: 70vh;\n          max-height: 70vh;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport '@vaadin/vaadin-text-field/theme/lumo/vaadin-text-field.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-date-picker\" theme-for=\"vaadin-date-picker\">\n  <template>\n    <style include=\"lumo-field-button\">\n      :host {\n        outline: none;\n      }\n\n      [part=\"toggle-button\"]::before {\n        content: var(--lumo-icons-calendar);\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--lumo-icons-cross);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-date-picker-overlay-styles.js';\nimport './vaadin-date-picker-overlay-content-styles.js';\nimport './vaadin-month-calendar-styles.js';\nimport './vaadin-date-picker-styles.js';\nimport '../../src/vaadin-date-picker.js';\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-month-calendar\" theme-for=\"vaadin-month-calendar\">\n  <template>\n    <style>\n      :host {\n        -moz-user-select: none;\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -webkit-tap-highlight-color: transparent;\n        user-select: none;\n        font-size: var(--lumo-font-size-m);\n        color: var(--lumo-body-text-color);\n        text-align: center;\n        padding: 0 var(--lumo-space-xs);\n      }\n\n      /* Month header */\n\n      [part=\"month-header\"] {\n        color: var(--lumo-header-text-color);\n        font-size: var(--lumo-font-size-l);\n        line-height: 1;\n        font-weight: 500;\n        margin-bottom: var(--lumo-space-m);\n      }\n\n      /* Week days and numbers */\n\n      [part=\"weekdays\"],\n      [part=\"weekday\"],\n      [part=\"week-numbers\"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: 1;\n        color: var(--lumo-tertiary-text-color);\n      }\n\n      [part=\"weekdays\"] {\n        margin-bottom: var(--lumo-space-s);\n      }\n\n      /* TODO should have part=\"week-number\" for the cell in weekdays-container */\n      [part=\"weekday\"]:empty,\n      [part=\"week-numbers\"] {\n        width: var(--lumo-size-xs);\n      }\n\n      /* Date and week number cells */\n\n      [part=\"date\"],\n      [part=\"week-number\"] {\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        height: var(--lumo-size-m);\n        position: relative;\n      }\n\n      [part=\"date\"] {\n        transition: color 0.1s;\n      }\n\n      /* Today date */\n\n      [part=\"date\"][today] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      /* Focused date */\n\n      [part=\"date\"]::before {\n        content: \"\";\n        position: absolute;\n        z-index: -1;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        min-width: 2em;\n        min-height: 2em;\n        width: 80%;\n        height: 80%;\n        max-height: 100%;\n        max-width: 100%;\n        border-radius: var(--lumo-border-radius);\n      }\n\n      [part=\"date\"][focused]::before {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      :host(:not([focused])) [part=\"date\"][focused]::before {\n        animation: vaadin-date-picker-month-calendar-focus-date 1.4s infinite;\n      }\n\n      @keyframes vaadin-date-picker-month-calendar-focus-date {\n        50% {\n          box-shadow: 0 0 0 2px transparent;\n        }\n      }\n\n      /* TODO should not rely on the role attribute */\n      [part=\"date\"][role=\"button\"]:not([disabled]):not([selected]):hover::before {\n        background-color: var(--lumo-primary-color-10pct);\n      }\n\n      [part=\"date\"][selected] {\n        color: var(--lumo-primary-contrast-color);\n      }\n\n      [part=\"date\"][selected]::before {\n        background-color: var(--lumo-primary-color);\n      }\n\n      [part=\"date\"][disabled] {\n        color: var(--lumo-disabled-text-color);\n      }\n\n      @media (pointer: coarse) {\n        [part=\"date\"]:hover:not([selected])::before,\n        [part=\"date\"][focused]:not([selected])::before {\n          display: none;\n        }\n\n        [part=\"date\"][role=\"button\"]:not([disabled]):active::before {\n          display: block;\n        }\n\n        [part=\"date\"][selected]::before {\n          box-shadow: none;\n        }\n      }\n\n      /* Disabled */\n\n      :host([disabled]) * {\n        color: var(--lumo-disabled-text-color) !important;\n      }\n    </style>\n  </template>\n</dom-module><custom-style>\n  <style>\n    @keyframes vaadin-date-picker-month-calendar-focus-date {\n      50% {\n        box-shadow: 0 0 0 2px transparent;\n      }\n    }\n  </style>\n</custom-style>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './theme/lumo/vaadin-date-picker.js';\n","const DEV_MODE_CODE_REGEXP =\n  /\\/\\*\\*\\s+vaadin-dev-mode:start([\\s\\S]*)vaadin-dev-mode:end\\s+\\*\\*\\//i;\n\nfunction isMinified() {\n  function test() {\n    /** vaadin-dev-mode:start\n    return false;\n    vaadin-dev-mode:end **/\n    return true;\n  }\n  return uncommentAndRun(test);\n}\n\nfunction isDevelopmentMode() {\n  try {\n    return isForcedDevelopmentMode() || (isLocalhost() && !isMinified() && !isFlowProductionMode());\n  } catch (e) {\n    // Some error in this code, assume production so no further actions will be taken\n    return false;\n  }\n}\n\nfunction isForcedDevelopmentMode() {\n  return localStorage.getItem(\"vaadin.developmentmode.force\");\n}\n\nfunction isLocalhost() {\n  return ([\"localhost\",\"127.0.0.1\"].indexOf(window.location.hostname) >= 0);\n}\n\nfunction isFlowProductionMode() {\n  if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n    const productionModeApps = Object.keys(window.Vaadin.Flow.clients)\n    .map(key => window.Vaadin.Flow.clients[key])\n    .filter(client => client.productionMode);\n    if (productionModeApps.length > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction uncommentAndRun(callback, args) {\n  if (typeof callback !== 'function') {\n    return;\n  }\n\n  const match = DEV_MODE_CODE_REGEXP.exec(callback.toString());\n  if (match) {\n    try {\n      // requires CSP: script-src 'unsafe-eval'\n      callback = new Function(match[1]);\n    } catch (e) {\n      // eat the exception\n      console.log('vaadin-development-mode-detector: uncommentAndRun() failed', e)\n    }\n  }\n\n  return callback(args);\n}\n\n// A guard against polymer-modulizer removing the window.Vaadin\n// initialization above.\nwindow['Vaadin'] = window['Vaadin'] || {};\n\n/**\n * Inspects the source code of the given `callback` function for\n * specially-marked _commented_ code. If such commented code is found in the\n * callback source, uncomments and runs that code instead of the callback\n * itself. Otherwise runs the callback as is.\n *\n * The optional arguments are passed into the callback / uncommented code,\n * the result is returned.\n *\n * See the `isMinified()` function source code in this file for an example.\n *\n */\nexport const runIfDevelopmentMode = function(callback, args) {\n  if (window.Vaadin.developmentMode) {\n    return uncommentAndRun(callback, args);\n  }\n};\n\nif (window.Vaadin.developmentMode === undefined) {\n  window.Vaadin.developmentMode = isDevelopmentMode();\n}\n","import { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { usageStatistics } from '@vaadin/vaadin-usage-statistics/vaadin-usage-statistics.js';\nif (!window.Vaadin) {\n  window['Vaadin'] = {};\n}\n\n/**\n * Array of Vaadin custom element classes that have been finalized.\n */\nwindow['Vaadin'].registrations = window.Vaadin.registrations || [];\n\n// Use the hack to prevent polymer-modulizer from converting to exports\nwindow['Vaadin'].developmentModeCallback = window.Vaadin.developmentModeCallback || {};\nwindow['Vaadin'].developmentModeCallback['vaadin-usage-statistics'] = function() {\n  if (usageStatistics) {\n    usageStatistics();\n  }\n};\n\nlet statsJob;\n\n/**\n * @polymerMixin\n */\nexport const ElementMixin = superClass => class VaadinElementMixin extends superClass {\n  /** @protected */\n  static _finalizeClass() {\n    super._finalizeClass();\n\n    // Registers a class prototype for telemetry purposes.\n    if (this.is) {\n      window.Vaadin.registrations.push(this);\n\n      if (window.Vaadin.developmentModeCallback) {\n        statsJob = Debouncer.debounce(statsJob,\n          idlePeriod, () => {\n            window.Vaadin.developmentModeCallback['vaadin-usage-statistics']();\n          }\n        );\n        enqueueDebouncer(statsJob);\n      }\n    }\n  }\n  ready() {\n    super.ready();\n    if (document.doctype === null) {\n      console.warn(\n        'Vaadin components require the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.'\n      );\n    }\n  }\n};\n","import '../color.js';\nimport '../font-icons.js';\nimport '../sizing.js';\nimport '../style.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-field-button\">\n  <template>\n    <style>\n      [part\\$=\"button\"] {\n        flex: none;\n        width: 1em;\n        height: 1em;\n        line-height: 1;\n        font-size: var(--lumo-icon-size-m);\n        text-align: center;\n        color: var(--lumo-contrast-60pct);\n        transition: 0.2s color;\n        cursor: var(--lumo-clickable-cursor);\n      }\n\n      :host(:not([readonly])) [part\\$=\"button\"]:hover {\n        color: var(--lumo-contrast-90pct);\n      }\n\n      :host([disabled]) [part\\$=\"button\"],\n      :host([readonly]) [part\\$=\"button\"] {\n        color: var(--lumo-contrast-20pct);\n      }\n\n      [part\\$=\"button\"]::before {\n        font-family: \"lumo-icons\";\n        display: block;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '../color.js';\nimport '../spacing.js';\nimport '../style.js';\nimport '../typography.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-required-field\">\n  <template>\n    <style>\n      [part=\"label\"] {\n        align-self: flex-start;\n        color: var(--lumo-secondary-text-color);\n        font-weight: 500;\n        font-size: var(--lumo-font-size-s);\n        margin-left: calc(var(--lumo-border-radius-m) / 4);\n        transition: color 0.2s;\n        line-height: 1;\n        padding-bottom: 0.5em;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        position: relative;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      :host([has-label])::before {\n        margin-top: calc(var(--lumo-font-size-s) * 1.5);\n      }\n\n      :host([has-label]) {\n        padding-top: var(--lumo-space-m);\n      }\n\n      :host([required]) [part=\"label\"] {\n        padding-right: 1em;\n      }\n\n      [part=\"label\"]::after {\n        content: var(--lumo-required-field-indicator, \"\");\n        transition: opacity 0.2s;\n        opacity: 0;\n        color: var(--lumo-primary-text-color);\n        position: absolute;\n        right: 0;\n        width: 1em;\n        text-align: center;\n      }\n\n      :host([required]:not([has-value])) [part=\"label\"]::after {\n        opacity: 1;\n      }\n\n      :host([invalid]) [part=\"label\"]::after {\n        color: var(--lumo-error-text-color);\n      }\n\n      [part=\"error-message\"] {\n        margin-left: calc(var(--lumo-border-radius-m) / 4);\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n        color: var(--lumo-error-text-color);\n        will-change: max-height;\n        transition: 0.4s max-height;\n        max-height: 5em;\n      }\n\n      /* Margin that doesnt reserve space when theres no error message */\n      [part=\"error-message\"]:not(:empty)::before,\n      [part=\"error-message\"]:not(:empty)::after {\n        content: \"\";\n        display: block;\n        height: 0.4em;\n      }\n\n      :host(:not([invalid])) [part=\"error-message\"] {\n        max-height: 0;\n        overflow: hidden;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n\nimport { ControlStateMixin } from '@vaadin/vaadin-control-state-mixin/vaadin-control-state-mixin.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      .vaadin-text-field-container [part=\"input-field\"] {\n        flex-grow: 0;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea) {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"input-field\"] ::slotted(textarea) {\n        resize: none;\n      }\n\n      [part=\"value\"]::-ms-clear,\n      [part=\"input-field\"] ::slotted(input)::-ms-clear {\n        display: none;\n      }\n\n      [part=\"clear-button\"] {\n        cursor: default;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: \"\";\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n\nconst HOST_PROPS = {\n  default: ['list', 'autofocus', 'pattern', 'autocapitalize', 'autocorrect', 'maxlength',\n    'minlength', 'name', 'placeholder', 'autocomplete', 'title'],\n  accessible: ['disabled', 'readonly', 'required', 'invalid']\n};\n\nconst PROP_TYPE = {\n  DEFAULT: 'default',\n  ACCESSIBLE: 'accessible'\n};\n\n\n/**\n * @polymerMixin\n * @mixes Vaadin.ControlStateMixin\n */\nexport const TextFieldMixin = subclass => class VaadinTextFieldMixin extends ControlStateMixin(subclass) {\n  static get properties() {\n    return {\n      /**\n       * Whether the value of the control can be automatically completed by the browser.\n       * List of available options at:\n       * https://developer.mozilla.org/en/docs/Web/HTML/Element/input#attr-autocomplete\n       */\n      autocomplete: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari that is used to control whether\n       * autocorrection should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * on: Enable autocorrection.\n       * off: Disable autocorrection.\n       */\n      autocorrect: {\n        type: String\n      },\n\n      /**\n       * This is a property supported by Safari and Chrome that is used to control whether\n       * autocapitalization should be enabled when the user is entering/editing the text.\n       * Possible values are:\n       * characters: Characters capitalization.\n       * words: Words capitalization.\n       * sentences: Sentences capitalization.\n       * none: No capitalization.\n       */\n      autocapitalize: {\n        type: String\n      },\n\n      /**\n       * Specify that the value should be automatically selected when the field gains focus.\n       */\n      autoselect: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set to true to display the clear icon which clears the input.\n       */\n      clearButtonVisible: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Error to show when the input value is invalid.\n       */\n      errorMessage: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * Object with translated strings used for localization. Has\n       * the following structure and default values:\n       *\n       * ```\n       * {\n       *   // Translation of the clear icon button accessible label\n       *   clear: 'Clear'\n       * }\n       * ```\n       */\n      i18n: {\n        type: Object,\n        value: () => {\n          return {\n            clear: 'Clear'\n          };\n        }\n      },\n\n      /**\n       * String used for the label element.\n       */\n      label: {\n        type: String,\n        value: '',\n        observer: '_labelChanged'\n      },\n\n      /**\n       * Maximum number of characters (in Unicode code points) that the user can enter.\n       */\n      maxlength: {\n        type: Number\n      },\n\n      /**\n       * Minimum number of characters (in Unicode code points) that the user can enter.\n       */\n      minlength: {\n        type: Number\n      },\n\n      /**\n       * The name of the control, which is submitted with the form data.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * A hint to the user of what can be entered in the control.\n       */\n      placeholder: {\n        type: String\n      },\n\n      /**\n       * This attribute indicates that the user cannot modify the value of the control.\n       */\n      readonly: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Specifies that the user must fill in a value.\n       */\n      required: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n\n      /**\n       * The initial value of the control.\n       * It can be used for two-way data binding.\n       */\n      value: {\n        type: String,\n        value: '',\n        observer: '_valueChanged',\n        notify: true\n      },\n\n      /**\n       * This property is set to true when the control value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      /**\n       * Specifies that the text field has value.\n       */\n      hasValue: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When set to true, user is prevented from typing a value that\n       * conflicts with the given `pattern`.\n       */\n      preventInvalidInput: {\n        type: Boolean\n      },\n\n      _labelId: {\n        type: String\n      },\n\n      _errorId: {\n        type: String\n      }\n    };\n  }\n\n  static get observers() {\n    return ['_stateChanged(disabled, readonly, clearButtonVisible, hasValue)',\n      '_hostPropsChanged(' + HOST_PROPS.default.join(', ') + ')',\n      '_hostAccessiblePropsChanged(' + HOST_PROPS.accessible.join(', ') + ')',\n      '_getActiveErrorId(invalid, errorMessage, _errorId)',\n      '_getActiveLabelId(label, _labelId)'];\n  }\n\n  get focusElement() {\n    if (!this.shadowRoot) {\n      return;\n    }\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    if (slotted) {\n      return slotted;\n    }\n    return this.shadowRoot.querySelector('[part=\"value\"]');\n  }\n\n  /**\n   * @private\n   */\n  get inputElement() {\n    return this.focusElement;\n  }\n\n  get _slottedTagName() {\n    return 'input';\n  }\n\n  _onInput(e) {\n    if (this.__preventInput) {\n      e.stopImmediatePropagation();\n      this.__preventInput = false;\n      return;\n    }\n\n    if (this.preventInvalidInput) {\n      const input = this.inputElement;\n      if (input.value.length > 0 && !this.checkValidity()) {\n        input.value = this.value || '';\n        // add input-prevented attribute for 200ms\n        this.setAttribute('input-prevented', '');\n        this._inputDebouncer = Debouncer.debounce(\n          this._inputDebouncer,\n          timeOut.after(200), () => {\n            this.removeAttribute('input-prevented');\n          });\n        return;\n      }\n    }\n\n    if (!e.__fromClearButton) {\n      this.__userInput = true;\n    }\n    this.value = e.target.value;\n  }\n\n  // NOTE(yuriy): Workaround needed for IE11 and Edge for proper displaying\n  // of the clear button instead of setting display property for it depending on state.\n  _stateChanged(disabled, readonly, clearButtonVisible, hasValue) {\n    if (!disabled &&\n        !readonly &&\n        clearButtonVisible &&\n        hasValue\n    ) {\n      this.$.clearButton.removeAttribute('hidden');\n    } else {\n      this.$.clearButton.setAttribute('hidden', true);\n    }\n  }\n\n  _onChange(e) {\n    if (this._valueClearing) {\n      return;\n    }\n\n    // In the Shadow DOM, the `change` event is not leaked into the\n    // ancestor tree, so we must do this manually.\n    const changeEvent = new CustomEvent('change', {\n      detail: {\n        sourceEvent: e\n      },\n      bubbles: e.bubbles,\n      cancelable: e.cancelable,\n    });\n    this.dispatchEvent(changeEvent);\n  }\n\n  _valueChanged(newVal, oldVal) {\n    // setting initial value to empty string, skip validation\n    if (newVal === '' && oldVal === undefined) {\n      return;\n    }\n\n    if (newVal !== '' && newVal != null) {\n      this.hasValue = true;\n    } else {\n      this.hasValue = false;\n    }\n\n    if (this.__userInput) {\n      this.__userInput = false;\n      return;\n    } else if (newVal !== undefined) {\n      this.inputElement.value = newVal;\n    } else {\n      this.value = this.inputElement.value = '';\n    }\n\n    if (this.invalid) {\n      this.validate();\n    }\n  }\n\n  _labelChanged(label) {\n    if (label !== '' && label != null) {\n      this.setAttribute('has-label', '');\n    } else {\n      this.removeAttribute('has-label');\n    }\n  }\n\n  _onSlotChange() {\n    const slotted = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n\n    if (this.value) {\n      this.inputElement.value = this.value;\n      this.validate();\n    }\n\n    if (slotted && !this._slottedInput) {\n      this._validateSlottedValue(slotted);\n      this._addInputListeners(slotted);\n      this._addIEListeners(slotted);\n      this._slottedInput = slotted;\n    } else if (!slotted && this._slottedInput) {\n      this._removeInputListeners(this._slottedInput);\n      this._removeIEListeners(this._slottedInput);\n      this._slottedInput = undefined;\n    }\n\n    Object.keys(PROP_TYPE).map(key => PROP_TYPE[key]).forEach(type =>\n      this._propagateHostAttributes(HOST_PROPS[type].map(attr => this[attr]), type));\n  }\n\n  _hostPropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.DEFAULT);\n  }\n\n  _hostAccessiblePropsChanged(...attributesValues) {\n    this._propagateHostAttributes(attributesValues, PROP_TYPE.ACCESSIBLE);\n  }\n\n  _validateSlottedValue(slotted) {\n    if (slotted.value !== this.value) {\n      console.warn('Please define value on the vaadin-text-field component!');\n      slotted.value = '';\n    }\n  }\n\n  _propagateHostAttributes(attributesValues, type) {\n    const input = this.inputElement;\n    const attributeNames = HOST_PROPS[type];\n\n    if (type === 'accessible') {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n        this._setOrToggleAttribute(`aria-${attr}`, attributesValues[index], input);\n      });\n    } else {\n      attributeNames.forEach((attr, index) => {\n        this._setOrToggleAttribute(attr, attributesValues[index], input);\n      });\n    }\n  }\n\n  _setOrToggleAttribute(name, value, node) {\n    if (!name || !node) {\n      return;\n    }\n\n    if (value) {\n      node.setAttribute(name, (typeof value === 'boolean') ? '' : value);\n    } else {\n      node.removeAttribute(name);\n    }\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   * @returns {boolean}\n   */\n  checkValidity() {\n    if (this.required || this.pattern || this.maxlength || this.minlength) {\n      return this.inputElement.checkValidity();\n    } else {\n      return !this.invalid;\n    }\n  }\n\n  _addInputListeners(node) {\n    node.addEventListener('input', this._boundOnInput);\n    node.addEventListener('change', this._boundOnChange);\n    node.addEventListener('blur', this._boundOnBlur);\n    node.addEventListener('focus', this._boundOnFocus);\n  }\n\n  _removeInputListeners(node) {\n    node.removeEventListener('input', this._boundOnInput);\n    node.removeEventListener('change', this._boundOnChange);\n    node.removeEventListener('blur', this._boundOnBlur);\n    node.removeEventListener('focus', this._boundOnFocus);\n  }\n\n  ready() {\n    super.ready();\n\n    this._boundOnInput = this._onInput.bind(this);\n    this._boundOnChange = this._onChange.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n    this._boundOnFocus = this._onFocus.bind(this);\n\n    const defaultInput = this.shadowRoot.querySelector('[part=\"value\"]');\n    this._slottedInput = this.querySelector(`${this._slottedTagName}[slot=\"${this._slottedTagName}\"]`);\n    this._addInputListeners(defaultInput);\n    this._addIEListeners(defaultInput);\n    if (this._slottedInput) {\n      this._addIEListeners(this._slottedInput);\n      this._addInputListeners(this._slottedInput);\n    }\n\n    this.shadowRoot.querySelector('[name=\"input\"], [name=\"textarea\"]')\n      .addEventListener('slotchange', this._onSlotChange.bind(this));\n\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss)) {\n      this.updateStyles();\n    }\n\n    this.$.clearButton.addEventListener('mousedown', () => this._valueClearing = true);\n    this.$.clearButton.addEventListener('mouseleave', () => this._valueClearing = false);\n    this.$.clearButton.addEventListener('click', this._onClearButtonClick.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n\n    var uniqueId = TextFieldMixin._uniqueId = 1 + TextFieldMixin._uniqueId || 0;\n    this._errorId = `${this.constructor.is}-error-${uniqueId}`;\n    this._labelId = `${this.constructor.is}-label-${uniqueId}`;\n  }\n\n  /**\n   * Returns true if `value` is valid.\n   * `<iron-form>` uses this to check the validity or all its elements.\n   *\n   * @return {boolean} True if the value is valid.\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  clear() {\n    this.value = '';\n  }\n\n  _onBlur() {\n    this.validate();\n  }\n\n  _onFocus() {\n    if (this.autoselect) {\n      this.inputElement.select();\n      // iOS 9 workaround: https://stackoverflow.com/a/7436574\n      setTimeout(() => {\n        this.inputElement.setSelectionRange(0, 9999);\n      });\n    }\n  }\n\n  _onClearButtonClick(e) {\n    e.preventDefault();\n    // NOTE(yuriy): This line won't affect focus on the host. Cannot be properly tested.\n    this.inputElement.focus();\n    this.clear();\n    this._valueClearing = false;\n    if (navigator.userAgent.match(/Trident/)) {\n      // Disable IE input\" event prevention here, we want the input event from\n      // below to propagate normally.\n      this.__preventInput = false;\n    }\n    const inputEvent = new Event('input', {bubbles: true, composed: true});\n    inputEvent.__fromClearButton = true;\n    const changeEvent = new Event('change', {bubbles: !this._slottedInput});\n    changeEvent.__fromClearButton = true;\n    this.inputElement.dispatchEvent(inputEvent);\n    this.inputElement.dispatchEvent(changeEvent);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode === 27 && this.clearButtonVisible) {\n      this.clear();\n    }\n  }\n\n  _addIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      // IE11 dispatches `input` event in following cases:\n      // - focus or blur, when placeholder attribute is set\n      // - placeholder attribute value changed\n      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/101220/\n      this._shouldPreventInput = () => {\n        this.__preventInput = true;\n        requestAnimationFrame(() => {\n          this.__preventInput = false;\n        });\n      };\n      node.addEventListener('focusin', this._shouldPreventInput);\n      node.addEventListener('focusout', this._shouldPreventInput);\n      this._createPropertyObserver('placeholder', this._shouldPreventInput);\n    }\n  }\n\n  _removeIEListeners(node) {\n    /* istanbul ignore if */\n    if (navigator.userAgent.match(/Trident/)) {\n      node.removeEventListener('focusin', this._shouldPreventInput);\n      node.removeEventListener('focusout', this._shouldPreventInput);\n    }\n  }\n\n  _getActiveErrorId(invalid, errorMessage, errorId) {\n    this._setOrToggleAttribute('aria-describedby',\n      (errorMessage && invalid ? errorId : undefined),\n      this.inputElement);\n  }\n\n  _getActiveLabelId(label, labelId) {\n    this._setOrToggleAttribute('aria-labelledby',\n      (label ? labelId : undefined),\n      this.inputElement);\n  }\n\n  _getErrorMessageAriaHidden(invalid, errorMessage, errorId) {\n    return (!(errorMessage && invalid ? errorId : undefined)).toString();\n  }\n\n  /**\n   * @protected\n   */\n  attributeChangedCallback(prop, oldVal, newVal) {\n    super.attributeChangedCallback(prop, oldVal, newVal);\n    // Needed until Edge has CSS Custom Properties (present in Edge Preview)\n    /* istanbul ignore if */\n    if (!(window.ShadyCSS && window.ShadyCSS.nativeCss) &&\n      /^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)) {\n      this.updateStyles();\n    }\n\n    // Safari has an issue with repainting shadow root element styles when a host attribute changes.\n    // Need this workaround (toggle any inline css property on and off) until the issue gets fixed.\n    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    /* istanbul ignore if */\n    if (isSafari && this.root) {\n      const WEBKIT_PROPERTY = '-webkit-backface-visibility';\n      this.root.querySelectorAll('*').forEach(el => {\n        el.style[WEBKIT_PROPERTY] = 'visible';\n        el.style[WEBKIT_PROPERTY] = '';\n      });\n    }\n  }\n\n  /**\n   * Fired when the user commits a value change.\n   *\n   * @event change\n   */\n\n  /**\n   * Fired when the value is changed by the user: on every typing keystroke,\n   * and the value is cleared using the clear button.\n   *\n   * @event input\n   */\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { TextFieldMixin } from './vaadin-text-field-mixin.js';\nimport { ElementMixin } from '@vaadin/vaadin-element-mixin/vaadin-element-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\n/**\n * `<vaadin-text-field>` is a Web Component for text field control in forms.\n *\n * ```html\n * <vaadin-text-field label=\"First Name\">\n * </vaadin-text-field>\n * ```\n *\n * ### Prefixes and suffixes\n *\n * These are child elements of a `<vaadin-text-field>` that are displayed\n * inline with the input, before or after.\n * In order for an element to be considered as a prefix, it must have the slot\n * attribute set to `prefix` (and similarly for `suffix`).\n *\n * ```html\n * <vaadin-text-field label=\"Email address\">\n *   <div slot=\"prefix\">Sent to:</div>\n *   <div slot=\"suffix\">@vaadin.com</div>\n * </vaadin-text-area>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-text-field-default-width` | Set the default width of the input field | `12em`\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ----------------|----------------\n * `label` | The label element\n * `input-field` | The element that wraps prefix, value and suffix\n * `value` | The text value element inside the `input-field` element\n * `error-message` | The error message element\n *\n * The following state attributes are available for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `disabled` | Set to a disabled text field | :host\n * `has-value` | Set when the element has a value | :host\n * `has-label` | Set when the element has a label | :host\n * `invalid` | Set when the element is invalid | :host\n * `input-prevented` | Temporarily set when invalid input is prevented | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `readonly` | Set to a readonly text field | :host\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.TextFieldMixin\n * @mixes Vaadin.ThemableMixin\n * @demo demo/index.html\n */\nclass TextFieldElement extends ElementMixin(TextFieldMixin(ThemableMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style include=\"vaadin-text-field-shared-styles\">\n      /* polymer-cli linter breaks with empty line */\n    </style>\n\n    <div class=\"vaadin-text-field-container\">\n\n      <label part=\"label\" on-click=\"focus\" id=\"[[_labelId]]\">[[label]]</label>\n\n      <div part=\"input-field\">\n\n        <slot name=\"prefix\"></slot>\n\n        <slot name=\"input\">\n          <input part=\"value\">\n        </slot>\n\n        <div part=\"clear-button\" id=\"clearButton\" role=\"button\" aria-label\\$=\"[[i18n.clear]]\"></div>\n        <slot name=\"suffix\"></slot>\n\n      </div>\n\n      <div part=\"error-message\" id=\"[[_errorId]]\" aria-live=\"assertive\" aria-hidden\\$=\"[[_getErrorMessageAriaHidden(invalid, errorMessage, _errorId)]]\">[[errorMessage]]</div>\n\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-text-field';\n  }\n\n  static get version() {\n    return '2.4.4';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Identifies a list of pre-defined options to suggest to the user.\n       * The value must be the id of a <datalist> element in the same document.\n       */\n      list: {\n        type: String\n      },\n\n      /**\n       * A regular expression that the value is checked against.\n       * The pattern must match the entire value, not just some subset.\n       */\n      pattern: {\n        type: String\n      },\n\n      /**\n       * Message to show to the user when validation fails.\n       */\n      title: {\n        type: String\n      }\n    };\n  }\n}\n\ncustomElements.define(TextFieldElement.is, TextFieldElement);\n\nexport { TextFieldElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/required-field.js';\nimport '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/field-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n\nconst $_documentContainer = html`<dom-module id=\"lumo-text-field\" theme-for=\"vaadin-text-field\">\n  <template>\n    <style include=\"lumo-required-field lumo-field-button\">\n      :host {\n        --lumo-text-field-size: var(--lumo-size-m);\n        color: var(--lumo-body-text-color);\n        font-size: var(--lumo-font-size-m);\n        font-family: var(--lumo-font-family);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-tap-highlight-color: transparent;\n        padding: var(--lumo-space-xs) 0;\n      }\n\n      :host::before {\n        height: var(--lumo-text-field-size);\n        box-sizing: border-box;\n        display: inline-flex;\n        align-items: center;\n      }\n\n      :host([focused]:not([readonly])) [part=\"label\"] {\n        color: var(--lumo-primary-text-color);\n      }\n\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted(input),\n      [part=\"input-field\"] ::slotted(textarea),\n      /* Slotted by vaadin-select-text-field */\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        cursor: inherit;\n        min-height: var(--lumo-text-field-size);\n        padding: 0 0.25em;\n        --_lumo-text-field-overflow-mask-image: linear-gradient(to left, transparent, #000 1.25em);\n        -webkit-mask-image: var(--_lumo-text-field-overflow-mask-image);\n      }\n\n      [part=\"value\"]:focus,\n      [part=\"input-field\"] ::slotted(input):focus,\n      [part=\"input-field\"] ::slotted(textarea):focus {\n        -webkit-mask-image: none;\n        mask-image: none;\n      }\n\n      /*\n        TODO: CSS custom property in \\`mask-image\\` causes crash in Edge\n        see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/15415089/\n      */\n      @-moz-document url-prefix() {\n        [part=\"value\"],\n        [part=\"input-field\"] ::slotted(input),\n        [part=\"input-field\"] ::slotted(textarea),\n        [part=\"input-field\"] ::slotted([part=\"value\"]) {\n          mask-image: var(--_lumo-text-field-overflow-mask-image);\n        }\n      }\n\n      [part=\"value\"]::-webkit-input-placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.05s;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]:-ms-input-placeholder {\n        color: inherit;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]::-moz-placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.05s;\n        opacity: 0.5;\n      }\n\n      [part=\"value\"]::placeholder {\n        color: inherit;\n        transition: opacity 0.175s 0.1s;\n        opacity: 0.5;\n      }\n\n      [part=\"input-field\"] {\n        border-radius: var(--lumo-border-radius);\n        background-color: var(--lumo-contrast-10pct);\n        padding: 0 calc(0.375em + var(--lumo-border-radius) / 4 - 1px);\n        font-weight: 500;\n        line-height: 1;\n        position: relative;\n        cursor: text;\n        box-sizing: border-box;\n      }\n\n      /* Used for hover and activation effects */\n      [part=\"input-field\"]::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        background-color: var(--lumo-contrast-50pct);\n        opacity: 0;\n        transition: transform 0.15s, opacity 0.2s;\n        transform-origin: 100% 0;\n      }\n\n      /* Hover */\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"label\"] {\n        color: var(--lumo-body-text-color);\n      }\n\n      :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n        opacity: 0.1;\n      }\n\n      /* Touch device adjustment */\n      @media (pointer: coarse) {\n        :host(:hover:not([readonly]):not([focused])) [part=\"label\"] {\n          color: var(--lumo-secondary-text-color);\n        }\n\n        :host(:hover:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n          opacity: 0;\n        }\n\n        :host(:active:not([readonly]):not([focused])) [part=\"input-field\"]::after {\n          opacity: 0.2;\n        }\n      }\n\n      /* Trigger when not focusing using the keyboard */\n      :host([focused]:not([focus-ring]):not([readonly])) [part=\"input-field\"]::after {\n        transform: scaleX(0);\n        transition-duration: 0.15s, 1s;\n      }\n\n      /* Focus-ring */\n\n      :host([focus-ring]) [part=\"input-field\"] {\n        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      /* Read-only and disabled */\n      :host([readonly]) [part=\"value\"]::-webkit-input-placeholder,\n      :host([disabled]) [part=\"value\"]::-webkit-input-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]:-ms-input-placeholder,\n      :host([disabled]) [part=\"value\"]:-ms-input-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]::-moz-placeholder,\n      :host([disabled]) [part=\"value\"]::-moz-placeholder {\n        opacity: 0;\n      }\n\n      :host([readonly]) [part=\"value\"]::placeholder,\n      :host([disabled]) [part=\"value\"]::placeholder {\n        opacity: 0;\n      }\n\n      /* Read-only */\n\n      :host([readonly]) [part=\"input-field\"] {\n        color: var(--lumo-secondary-text-color);\n        background-color: transparent;\n        cursor: default;\n      }\n\n      :host([readonly]) [part=\"input-field\"]::after {\n        background-color: transparent;\n        opacity: 1;\n        border: 1px dashed var(--lumo-contrast-30pct);\n      }\n\n      /* Disabled style */\n\n      :host([disabled]) {\n        pointer-events: none;\n      }\n\n      :host([disabled]) [part=\"input-field\"] {\n        background-color: var(--lumo-contrast-5pct);\n      }\n\n      :host([disabled]) [part=\"label\"],\n      :host([disabled]) [part=\"value\"],\n      :host([disabled]) [part=\"input-field\"] ::slotted(*) {\n        color: var(--lumo-disabled-text-color);\n        -webkit-text-fill-color: var(--lumo-disabled-text-color);\n      }\n\n      /* Invalid style */\n\n      :host([invalid]) [part=\"input-field\"] {\n        background-color: var(--lumo-error-color-10pct);\n      }\n\n      :host([invalid]) [part=\"input-field\"]::after {\n        background-color: var(--lumo-error-color-50pct);\n      }\n\n      :host([invalid][focus-ring]) [part=\"input-field\"] {\n        box-shadow: 0 0 0 2px var(--lumo-error-color-50pct);\n      }\n\n      :host([input-prevented]) [part=\"input-field\"] {\n        color: var(--lumo-error-text-color);\n      }\n\n      /* Small theme */\n\n      :host([theme~=\"small\"]) {\n        font-size: var(--lumo-font-size-s);\n        --lumo-text-field-size: var(--lumo-size-s);\n      }\n\n      :host([theme~=\"small\"][has-label]) [part=\"label\"] {\n        font-size: var(--lumo-font-size-xs);\n      }\n\n      :host([theme~=\"small\"][has-label]) [part=\"error-message\"] {\n        font-size: var(--lumo-font-size-xxs);\n      }\n\n      /* Text align */\n\n      :host([theme~=\"align-center\"]) [part=\"value\"] {\n        text-align: center;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      :host([theme~=\"align-right\"]) [part=\"value\"] {\n        text-align: right;\n        --_lumo-text-field-overflow-mask-image: none;\n      }\n\n      @-moz-document url-prefix() {\n        /* Firefox is smart enough to align overflowing text to right */\n        :host([theme~=\"align-right\"]) [part=\"value\"] {\n          --_lumo-text-field-overflow-mask-image: linear-gradient(to right, transparent 0.25em, #000 1.5em);\n        }\n      }\n\n      /* Slotted content */\n\n      [part=\"input-field\"] ::slotted(:not([part]):not(iron-icon):not(input):not(textarea)) {\n        color: var(--lumo-secondary-text-color);\n        font-weight: 400;\n      }\n\n      /* Slotted icons */\n\n      [part=\"input-field\"] ::slotted(iron-icon) {\n        color: var(--lumo-contrast-60pct);\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n\n      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */\n      [part=\"input-field\"] ::slotted(iron-icon[icon^=\"vaadin:\"]) {\n        padding: 0.25em;\n        box-sizing: border-box !important;\n      }\n\n      [part=\"clear-button\"]::before {\n        content: var(--lumo-icons-cross);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import './vaadin-text-field-styles.js';\nimport '../../src/vaadin-text-field.js';\n","/* This file is autogenerated from src/vaadin-usage-statistics.tpl.html */\n/*\n\nThis script gathers usage statistics from the application running in development mode.\n\nStatistics gathering is automatically disabled and excluded from production builds.\n\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport { runIfDevelopmentMode } from '@vaadin/vaadin-development-mode-detector/vaadin-development-mode-detector.js';\n\nfunction maybeGatherAndSendStats() {\n  /** vaadin-dev-mode:start\n  (function () {\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar getPolymerVersion = function getPolymerVersion() {\n  return window.Polymer && window.Polymer.version;\n};\n\nvar StatisticsGatherer = function () {\n  function StatisticsGatherer(logger) {\n    classCallCheck(this, StatisticsGatherer);\n\n    this.now = new Date().getTime();\n    this.logger = logger;\n  }\n\n  createClass(StatisticsGatherer, [{\n    key: 'frameworkVersionDetectors',\n    value: function frameworkVersionDetectors() {\n      return {\n        'Flow': function Flow() {\n          if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {\n            var flowVersions = Object.keys(window.Vaadin.Flow.clients).map(function (key) {\n              return window.Vaadin.Flow.clients[key];\n            }).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().flow;\n            });\n            if (flowVersions.length > 0) {\n              return flowVersions[0];\n            }\n          }\n        },\n        'Vaadin Framework': function VaadinFramework() {\n          if (window.vaadin && window.vaadin.clients) {\n            var frameworkVersions = Object.values(window.vaadin.clients).filter(function (client) {\n              return client.getVersionInfo;\n            }).map(function (client) {\n              return client.getVersionInfo().vaadinVersion;\n            });\n            if (frameworkVersions.length > 0) {\n              return frameworkVersions[0];\n            }\n          }\n        },\n        'AngularJs': function AngularJs() {\n          if (window.angular && window.angular.version && window.angular.version) {\n            return window.angular.version.full;\n          }\n        },\n        'Angular': function Angular() {\n          if (window.ng) {\n            var tags = document.querySelectorAll(\"[ng-version]\");\n            if (tags.length > 0) {\n              return tags[0].getAttribute(\"ng-version\");\n            }\n            return \"Unknown\";\n          }\n        },\n        'Backbone.js': function BackboneJs() {\n          if (window.Backbone) {\n            return window.Backbone.VERSION;\n          }\n        },\n        'React': function React() {\n          var reactSelector = '[data-reactroot], [data-reactid]';\n          if (!!document.querySelector(reactSelector)) {\n            // React does not publish the version by default\n            return \"unknown\";\n          }\n        },\n        'Ember': function Ember() {\n          if (window.Em && window.Em.VERSION) {\n            return window.Em.VERSION;\n          } else if (window.Ember && window.Ember.VERSION) {\n            return window.Ember.VERSION;\n          }\n        },\n        'jQuery': function (_jQuery) {\n          function jQuery() {\n            return _jQuery.apply(this, arguments);\n          }\n\n          jQuery.toString = function () {\n            return _jQuery.toString();\n          };\n\n          return jQuery;\n        }(function () {\n          if (typeof jQuery === 'function' && jQuery.prototype.jquery !== undefined) {\n            return jQuery.prototype.jquery;\n          }\n        }),\n        'Polymer': function Polymer() {\n          var version = getPolymerVersion();\n          if (version) {\n            return version;\n          }\n        },\n        'LitElement': function LitElement() {\n          var version = window.litElementVersions && window.litElementVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'LitHtml': function LitHtml() {\n          var version = window.litHtmlVersions && window.litHtmlVersions[0];\n          if (version) {\n            return version;\n          }\n        },\n        'Vue.js': function VueJs() {\n          if (window.Vue) {\n            return window.Vue.version;\n          }\n        }\n      };\n    }\n  }, {\n    key: 'getUsedVaadinElements',\n    value: function getUsedVaadinElements(elements) {\n      var version = getPolymerVersion();\n      var elementClasses = void 0;\n      if (version && version.indexOf('2') === 0) {\n        // Polymer 2: components classes are stored in window.Vaadin\n        elementClasses = Object.keys(window.Vaadin).map(function (c) {\n          return window.Vaadin[c];\n        }).filter(function (c) {\n          return c.is;\n        });\n      } else {\n        // Polymer 3: components classes are stored in window.Vaadin.registrations\n        elementClasses = window.Vaadin.registrations || [];\n      }\n      elementClasses.forEach(function (klass) {\n        var version = klass.version ? klass.version : \"0.0.0\";\n        elements[klass.is] = { version: version };\n      });\n    }\n  }, {\n    key: 'getUsedVaadinThemes',\n    value: function getUsedVaadinThemes(themes) {\n      ['Lumo', 'Material'].forEach(function (themeName) {\n        var theme;\n        var version = getPolymerVersion();\n        if (version && version.indexOf('2') === 0) {\n          // Polymer 2: themes are stored in window.Vaadin\n          theme = window.Vaadin[themeName];\n        } else {\n          // Polymer 3: themes are stored in custom element registry\n          theme = customElements.get('vaadin-' + themeName.toLowerCase() + '-styles');\n        }\n        if (theme && theme.version) {\n          themes[themeName] = { version: theme.version };\n        }\n      });\n    }\n  }, {\n    key: 'getFrameworks',\n    value: function getFrameworks(frameworks) {\n      var detectors = this.frameworkVersionDetectors();\n      Object.keys(detectors).forEach(function (framework) {\n        var detector = detectors[framework];\n        try {\n          var version = detector();\n          if (version) {\n            frameworks[framework] = { \"version\": version };\n          }\n        } catch (e) {}\n      });\n    }\n  }, {\n    key: 'gather',\n    value: function gather(storage) {\n      var storedStats = storage.read();\n      var gatheredStats = {};\n      var types = [\"elements\", \"frameworks\", \"themes\"];\n\n      types.forEach(function (type) {\n        gatheredStats[type] = {};\n        if (!storedStats[type]) {\n          storedStats[type] = {};\n        }\n      });\n\n      var previousStats = JSON.stringify(storedStats);\n\n      this.getUsedVaadinElements(gatheredStats.elements);\n      this.getFrameworks(gatheredStats.frameworks);\n      this.getUsedVaadinThemes(gatheredStats.themes);\n\n      var now = this.now;\n      types.forEach(function (type) {\n        var keys = Object.keys(gatheredStats[type]);\n        keys.forEach(function (key) {\n          if (!storedStats[type][key] || _typeof(storedStats[type][key]) != _typeof({})) {\n            storedStats[type][key] = { \"firstUsed\": now };\n          }\n          // Discards any previously logged version numebr\n          storedStats[type][key].version = gatheredStats[type][key].version;\n          storedStats[type][key].lastUsed = now;\n        });\n      });\n\n      var newStats = JSON.stringify(storedStats);\n      storage.write(newStats);\n      if (newStats != previousStats && Object.keys(storedStats).length > 0) {\n        this.logger.debug(\"New stats: \" + newStats);\n      }\n    }\n  }]);\n  return StatisticsGatherer;\n}();\n\nvar StatisticsStorage = function () {\n  function StatisticsStorage(key) {\n    classCallCheck(this, StatisticsStorage);\n\n    this.key = key;\n  }\n\n  createClass(StatisticsStorage, [{\n    key: 'read',\n    value: function read() {\n      var localStorageStatsString = localStorage.getItem(this.key);\n      try {\n        return JSON.parse(localStorageStatsString ? localStorageStatsString : '{}');\n      } catch (e) {\n        return {};\n      }\n    }\n  }, {\n    key: 'write',\n    value: function write(data) {\n      localStorage.setItem(this.key, data);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      localStorage.removeItem(this.key);\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty() {\n      var storedStats = this.read();\n      var empty = true;\n      Object.keys(storedStats).forEach(function (key) {\n        if (Object.keys(storedStats[key]).length > 0) {\n          empty = false;\n        }\n      });\n\n      return empty;\n    }\n  }]);\n  return StatisticsStorage;\n}();\n\nvar StatisticsSender = function () {\n  function StatisticsSender(url, logger) {\n    classCallCheck(this, StatisticsSender);\n\n    this.url = url;\n    this.logger = logger;\n  }\n\n  createClass(StatisticsSender, [{\n    key: 'send',\n    value: function send(data, errorHandler) {\n      var logger = this.logger;\n\n      if (navigator.onLine === false) {\n        logger.debug(\"Offline, can't send\");\n        errorHandler();\n        return;\n      }\n      logger.debug(\"Sending data to \" + this.url);\n\n      var req = new XMLHttpRequest();\n      req.withCredentials = true;\n      req.addEventListener(\"load\", function () {\n        // Stats sent, nothing more to do\n        logger.debug(\"Response: \" + req.responseText);\n      });\n      req.addEventListener(\"error\", function () {\n        logger.debug(\"Send failed\");\n        errorHandler();\n      });\n      req.addEventListener(\"abort\", function () {\n        logger.debug(\"Send aborted\");\n        errorHandler();\n      });\n      req.open(\"POST\", this.url);\n      req.setRequestHeader(\"Content-Type\", \"application/json\");\n      req.send(data);\n    }\n  }]);\n  return StatisticsSender;\n}();\n\nvar StatisticsLogger = function () {\n  function StatisticsLogger(id) {\n    classCallCheck(this, StatisticsLogger);\n\n    this.id = id;\n  }\n\n  createClass(StatisticsLogger, [{\n    key: '_isDebug',\n    value: function _isDebug() {\n      return localStorage.getItem(\"vaadin.\" + this.id + \".debug\");\n    }\n  }, {\n    key: 'debug',\n    value: function debug(msg) {\n      if (this._isDebug()) {\n        console.info(this.id + \": \" + msg);\n      }\n    }\n  }]);\n  return StatisticsLogger;\n}();\n\nvar UsageStatistics = function () {\n  function UsageStatistics() {\n    classCallCheck(this, UsageStatistics);\n\n    this.now = new Date();\n    this.timeNow = this.now.getTime();\n    this.gatherDelay = 10; // Delay between loading this file and gathering stats\n    this.initialDelay = 24 * 60 * 60;\n\n    this.logger = new StatisticsLogger(\"statistics\");\n    this.storage = new StatisticsStorage(\"vaadin.statistics.basket\");\n    this.gatherer = new StatisticsGatherer(this.logger);\n    this.sender = new StatisticsSender(\"https://tools.vaadin.com/usage-stats/submit\", this.logger);\n  }\n\n  createClass(UsageStatistics, [{\n    key: 'maybeGatherAndSend',\n    value: function maybeGatherAndSend() {\n      var _this = this;\n\n      if (localStorage.getItem(UsageStatistics.optOutKey)) {\n        return;\n      }\n      this.gatherer.gather(this.storage);\n      setTimeout(function () {\n        _this.maybeSend();\n      }, this.gatherDelay * 1000);\n    }\n  }, {\n    key: 'lottery',\n    value: function lottery() {\n      return Math.random() <= 0.05;\n    }\n  }, {\n    key: 'currentMonth',\n    value: function currentMonth() {\n      return this.now.getYear() * 12 + this.now.getMonth();\n    }\n  }, {\n    key: 'maybeSend',\n    value: function maybeSend() {\n      var firstUse = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      var monthProcessed = Number(localStorage.getItem(UsageStatistics.monthProcessedKey));\n\n      if (!firstUse) {\n        // Use a grace period to avoid interfering with tests, incognito mode etc\n        firstUse = this.timeNow;\n        localStorage.setItem(UsageStatistics.firstUseKey, firstUse);\n      }\n\n      if (this.timeNow < firstUse + this.initialDelay * 1000) {\n        this.logger.debug(\"No statistics will be sent until the initial delay of \" + this.initialDelay + \"s has passed\");\n        return;\n      }\n      if (this.currentMonth() <= monthProcessed) {\n        this.logger.debug(\"This month has already been processed\");\n        return;\n      }\n      localStorage.setItem(UsageStatistics.monthProcessedKey, this.currentMonth());\n      // Use random sampling\n      if (this.lottery()) {\n        this.logger.debug(\"Congratulations, we have a winner!\");\n      } else {\n        this.logger.debug(\"Sorry, no stats from you this time\");\n        return;\n      }\n\n      this.send();\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      // Ensure we have the latest data\n      this.gatherer.gather(this.storage);\n\n      // Read, send and clean up\n      var data = this.storage.read();\n      data[\"firstUse\"] = Number(localStorage.getItem(UsageStatistics.firstUseKey));\n      data[\"usageStatisticsVersion\"] = UsageStatistics.version;\n      var info = 'This request contains usage statistics gathered from the application running in development mode. \\n\\nStatistics gathering is automatically disabled and excluded from production builds.\\n\\nFor details and to opt-out, see https://github.com/vaadin/vaadin-usage-statistics.\\n\\n\\n\\n';\n      var self = this;\n      this.sender.send(info + JSON.stringify(data), function () {\n        // Revert the 'month processed' flag\n        localStorage.setItem(UsageStatistics.monthProcessedKey, self.currentMonth() - 1);\n      });\n    }\n  }], [{\n    key: 'version',\n    get: function get$1() {\n      return '2.0.1';\n    }\n  }, {\n    key: 'firstUseKey',\n    get: function get$1() {\n      return 'vaadin.statistics.firstuse';\n    }\n  }, {\n    key: 'monthProcessedKey',\n    get: function get$1() {\n      return 'vaadin.statistics.monthProcessed';\n    }\n  }, {\n    key: 'optOutKey',\n    get: function get$1() {\n      return 'vaadin.statistics.optout';\n    }\n  }]);\n  return UsageStatistics;\n}();\n\ntry {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.usageStatsChecker = window.Vaadin.usageStatsChecker || new UsageStatistics();\n  window.Vaadin.usageStatsChecker.maybeGatherAndSend();\n} catch (e) {\n  // Intentionally ignored as this is not a problem in the app being developed\n}\n\n}());\n\n  vaadin-dev-mode:end **/\n}\n\nexport const usageStatistics = function() {\n  if (typeof runIfDevelopmentMode === 'function') {\n    return runIfDevelopmentMode(maybeGatherAndSendStats);\n  }\n};\n"],"sourceRoot":""}