{"version":3,"sources":["webpack:///./src/cards/ha-history_graph-card.js","webpack:///./src/common/const.ts","webpack:///./src/common/dom/dynamic_content_updater.ts","webpack:///./src/common/entity/attribute_class_names.ts","webpack:///./src/common/entity/can_toggle_domain.ts","webpack:///./src/common/entity/can_toggle_state.ts","webpack:///./src/common/entity/feature_class_names.ts","webpack:///./src/common/entity/state_card_type.ts","webpack:///./src/common/entity/state_more_info_type.ts","webpack:///./src/components/entity/state-info.js","webpack:///./src/components/ha-attributes.js","webpack:///./src/components/ha-camera-stream.ts","webpack:///./src/components/ha-climate-control.js","webpack:///./src/components/ha-color-picker.js","webpack:///./src/components/ha-labeled-slider.js","webpack:///./src/components/ha-paper-icon-button-arrow-prev.ts","webpack:///./src/components/ha-paper-slider.js","webpack:///./src/components/ha-vacuum-state.js","webpack:///./src/components/ha-water_heater-control.js","webpack:///./src/components/ha-water_heater-state.js","webpack:///./src/dialogs/ha-more-info-dialog.js","webpack:///./src/dialogs/more-info/controls/more-info-alarm_control_panel.js","webpack:///./src/dialogs/more-info/controls/more-info-automation.js","webpack:///./src/dialogs/more-info/controls/more-info-camera.ts","webpack:///./src/dialogs/more-info/controls/more-info-climate.js","webpack:///./src/dialogs/more-info/controls/more-info-configurator.js","webpack:///./src/dialogs/more-info/controls/more-info-content.ts","webpack:///./src/dialogs/more-info/controls/more-info-cover.js","webpack:///./src/dialogs/more-info/controls/more-info-default.js","webpack:///./src/dialogs/more-info/controls/more-info-fan.js","webpack:///./src/dialogs/more-info/controls/more-info-group.js","webpack:///./src/dialogs/more-info/controls/more-info-history_graph.js","webpack:///./src/dialogs/more-info/controls/more-info-input_datetime.js","webpack:///./src/dialogs/more-info/controls/more-info-light.js","webpack:///./src/dialogs/more-info/controls/more-info-lock.js","webpack:///./src/dialogs/more-info/controls/more-info-media_player.js","webpack:///./src/dialogs/more-info/controls/more-info-script.js","webpack:///./src/dialogs/more-info/controls/more-info-sun.js","webpack:///./src/dialogs/more-info/controls/more-info-updater.js","webpack:///./src/dialogs/more-info/controls/more-info-vacuum.js","webpack:///./src/dialogs/more-info/controls/more-info-water_heater.js","webpack:///./src/dialogs/more-info/controls/more-info-weather.js","webpack:///./src/dialogs/more-info/more-info-controls.js","webpack:///./src/dialogs/more-info/more-info-settings.js","webpack:///./src/mixins/dialog-mixin.js","webpack:///./src/state-summary/state-card-climate.js","webpack:///./src/state-summary/state-card-configurator.js","webpack:///./src/state-summary/state-card-content.js","webpack:///./src/state-summary/state-card-cover.js","webpack:///./src/state-summary/state-card-display.js","webpack:///./src/state-summary/state-card-input_number.js","webpack:///./src/state-summary/state-card-input_select.ts","webpack:///./src/state-summary/state-card-input_text.js","webpack:///./src/state-summary/state-card-lock.js","webpack:///./src/state-summary/state-card-media_player.js","webpack:///./src/state-summary/state-card-scene.js","webpack:///./src/state-summary/state-card-script.js","webpack:///./src/state-summary/state-card-timer.js","webpack:///./src/state-summary/state-card-toggle.js","webpack:///./src/state-summary/state-card-vacuum.js","webpack:///./src/state-summary/state-card-water_heater.js","webpack:///./src/state-summary/state-card-weblink.js","webpack:///./src/util/hass-attributes-util.js"],"names":["HaHistoryGraphCard","stateObj","cacheConfig","cacheKey","entity_id","refresh","attributes","hoursToShow","hours_to_show","Object","assign","computeStateName","inDialog","ev","mq","window","matchMedia","matches","stopPropagation","fire","entityId","html","hass","type","observer","Boolean","value","stateHistory","stateHistoryLoading","EventsMixin","PolymerElement","customElements","define","DEFAULT_DOMAIN_ICON","DEFAULT_PANEL","DOMAINS_WITH_CARD","DOMAINS_WITH_MORE_INFO","DOMAINS_HIDE_MORE_INFO","DOMAINS_MORE_INFO_NO_HISTORY","STATES_OFF","DOMAINS_TOGGLE","Set","UNIT_C","UNIT_F","DEFAULT_VIEW_ENTITY_ID","dynamicContentUpdater","root","newElementTag","rootEl","customEl","lastChild","tagName","removeChild","document","createElement","toLowerCase","setProperties","keys","forEach","key","parentNode","appendChild","attributeClassNames","map","attribute","filter","attr","join","canToggleDomain","domain","services","canToggleState","computeStateDomain","state","supportsFeature","featureClassNames","classNames","supported_features","feature","Number","stateCardType","includes","control","stateMoreInfoType","StateInfo","computeRTL","styleTemplate","stateBadgeTemplate","infoTemplate","rtl","reflectToAttribute","computed","HaAttributes","extraFilters","hassAttributeUtil","LOGIC_STATE_ATTRIBUTES","concat","split","filtersArray","indexOf","replace","Array","isArray","JSON","stringify","attribution","String","HaCameraStream","customElement","property","undefined","_attached","__DEMO__","_shouldRenderMJPEG","_elementResized","computeMJPEGStreamUrl","showControls","changedProps","stateObjChanged","has","attachedChanged","oldState","get","oldEntityId","curEntityId","_destroyPolyfill","_startHls","_forceMJPEG","config","components","CAMERA_SUPPORT_STREAM","shadowRoot","querySelector","Hls","hlsSupported","isSupported","videoEl","_videoEl","canPlayType","fetchStreamUrl","url","_renderHLSPolyfill","_renderHLSNative","console","error","src","Promise","resolve","addEventListener","play","hls","_hlsPolyfillInstance","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","fireEvent","destroy","css","LitElement","HaClimateControl","inFlux","$","target_temperature","classList","toggle","val","s","step","toString","parseFloat","toFixed","length","Math","round","newval","_round","max","last_changed","Date","now","temperatureStateInFlux","min","setTimeout","units","HaColorPicker","setupLayers","drawColorWheel","drawMarker","interactionLayer","onMouseDown","onTouchStart","clientX","clientY","svgPoint","createSVGPoint","x","y","cc","matrixTransform","getScreenCTM","inverse","convertToCanvasCoordinates","isInWheel","onMouseSelect","canvas","add","onMouseUp","remove","removeEventListener","requestAnimationFrame","processUserSelect","touch","changedTouches","target","marker","preventDefault","onTouchSelect","onTouchEnd","tapBecameScroll","onTap","passive","canvasXY","hs","getColor","onColorSelect","setMarkerOnColor","ignoreSegments","applySegmentFilter","applyColorToCanvas","colorSelectIsThrottled","clearTimeout","ensureFinalSelect","fireColorSelected","throttle","hsColor","h","dist","radius","theta","PI","markerdX","cos","markerdY","sin","translateString","setAttribute","tooltip","style","color","dX","dY","atan2","angle","getDistance","sqrt","hue","getAngle","relativeDistance","sat","hueSegments","angleStep","halfAngleStep","rest","saturationSegments","segmentSize","saturationStep","calculatedSat","floor","backgroundLayer","originX","width","originY","height","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","context","getContext","cX","cY","counterClockwise","wheelStyle","getComputedStyle","borderWidth","parseInt","getPropertyValue","borderColor","trim","wheelShadow","values","pop","borderRadius","wheelRadius","shadowRadius","drawCircle","startAngle","endAngle","beginPath","moveTo","arc","closePath","gradient","createRadialGradient","lightness","addColorStop","ratioStep","ratio","stop","prevLighness","fillStyle","fill","drawShadow","save","restore","drawBorder","lineWidth","strokeStyle","stroke","shadow","svgElement","markerradius","tooltipradius","TooltipOffsetY","TooltipOffsetX","createElementNS","desiredHsColor","HaLabeledSlider","caption","disabled","pin","extra","ignoreBarTouch","icon","notify","paperIconButtonClass","HaPaperIconButtonArrowPrev","direction","hassio","PaperSliderClass","HaPaperSlider","tpl","innerHTML","template","styleEl","content","STATES_INTERCEPTABLE","cleaning","action","service","docked","idle","off","paused","HaVacuumState","supportedFeatures","interceptable","localize","callService","_interceptable","LocalizeMixin","HaWaterHeaterControl","HaWaterHeaterState","target_temp_low","target_temp_high","unit_system","temperature","HaMoreInfoDialog","_dialogElement","_page","detail","page","states","moreInfoEntityId","newVal","oldVal","opened","_registryInfo","large","isComponentLoaded","user","is_admin","callWS","info","a","b","notifyResize","dataDomain","DialogMixin","MoreInfoAlarmControlPanel","_enteredCode","_codeFormat","_codeValid","_disarmVisible","_armVisible","_inputEnabled","_armedStates","props","code_format","format","code","getAttribute","data","then","MoreInfoAutomation","MoreInfoCamera","_cameraPrefs","preload_stream","_handleCheckboxChanged","_fetchCameraPrefs","fetchCameraPrefs","checkbox","currentTarget","updateCameraPrefs","checked","alert","message","MoreInfoClimate","awayToggleChecked","away_mode","auxToggleChecked","aux_heat","onToggleChecked","_debouncer","Debouncer","debounce","timeOut","after","target_temp_step","supportsTemperature","supportsTemperatureRange","_featureClassNames","classes","push","callServiceHelper","targetTempLow","targetTempHigh","humidity","fan_mode","operation_mode","swing_mode","mode","computeRTLDirection","MoreInfoConfigurator","el","fieldInput","name","configure_id","fields","isConfiguring","bind","isConfigurable","MoreInfoContent","position","display","_detachedChild","moreInfoType","custom_ui_more_info","toUpperCase","UpdatingElement","FEATURE_CLASS_NAMES","MoreInfoCover","CoverEntity","coverPositionSliderValue","current_position","coverTiltPositionSliderValue","current_tilt_position","entityObj","setCoverPosition","setCoverTiltPosition","MoreInfoDefault","MoreInfoFan","oscillationToggleChecked","oscillating","speed","MoreInfoGroup","entIds","i","groupDomainStateObj","groupDomain","baseStateObj","find","dom","groupedControlDetails","MoreInfoHistoryGraph","DatetimeInput","is_ready","monthFiller","month","dayFiller","day","year","changed","minuteFiller","serviceData","has_time","selectedMinute","minute","selectedHour","hour","timeStr","time","has_date","selectedDate","dateValInput","dateValState","date","getDateString","MoreInfoLight","brightnessSliderValue","brightness","ctSliderValue","color_temp","wvSliderValue","white_value","hs_color","colorPickerColor","effect","bri","isNaN","ct","wv","serviceChangeColor","MoreInfoLock","isLocked","enteredCode","MoreInfoMediaPlayer","HassMediaPlayerEntity","playerObj","isMuted","supportsVolumeButtons","isOff","hasMediaControl","isPlaying","supportsPause","isIdle","isPaused","supportsPlay","supportsTurnOn","supportsTurnOff","supportsSelectSource","sourceList","supportsSelectSoundMode","soundModeList","ttsLoaded","supportsPlayMedia","togglePower","previousTrack","mediaPlayPause","nextTrack","source","selectSource","soundMode","selectSoundMode","supportsVolumeMute","volumeMute","obj","volumeUp","handleVolumeWorker","volumeDown","force","pointerDown","volPercentage","volume","setVolume","keyCode","sendTTS","tts","serviceKeys","sort","ttsMessage","ttsInput","focus","MoreInfoScript","MoreInfoSun","next_rising","next_setting","risingDate","settingDate","formatTime","itemDate","language","MoreInfoUpdater","release_notes","MoreInfoVacuum","fan_speed","MoreInfoWaterHeater","MoreInfoWeather","cardinalDirections","weatherIcons","cloudy","fog","hail","lightning","partlycloudy","pouring","rainy","snowy","sunny","windy","toLocaleDateString","weekday","measure","lengthUnit","degree","degreenum","isFinite","bearing","cardinalDirection","windBearingToText","getUnit","condition","item","DOMAINS_NO_INFO","MoreInfoControls","_cacheConfig","dialogElement","canConfigure","_stateHistory","_stateHistoryLoading","MoreInfoSettings","computeDomain","_name","_entityId","updateEntityRegistryEntry","new_entity_id","registryInfo","dedupingMixin","superClass","withBackdrop","mixinBehaviors","PaperDialogBehavior","StateCardClimate","stateInfoTemplate","StateCardConfigurator","StateCardContent","stateCard","custom_ui_state_card","StateCardCover","entity","StateCardDisplay","computeStateDisplay","StateCardInputNumber","ResizeObserver","ro","entries","hiddenState","observe","input_number_card","sliderwidth","slider","offsetWidth","sliderstate","hidden","prevMode","maxlength","hiddenbox","hiddenslider","IronResizableBehavior","StateCardInputSelect","_selectedOptionChanged","options","option","selected","innerText","setInputSelectOption","StateCardInputText","pattern","StateCardLock","dataset","StateCardMediaPlayer","primaryTitle","StateCardScene","StateCardScript","StateCardTimer","startInterval","clearInterval","_updateRemaining","calculateRemaining","setInterval","timeRemaining","timerTimeRemaining","secondsToDuration","StateCardToggle","StateCardVacuum","StateCardWaterHeater","StateCardWeblink","open","DOMAIN_DEVICE_CLASS","binary_sensor","cover","sensor","UNKNOWN_TYPE","ADD_TYPE","TYPE_TO_TAG","string","json","array","entity_picture","friendly_name","description","emulated_hue","domains","emulated_hue_name","haaska_hidden","haaska_name","homebridge_hidden","homebridge_name","device_class","assumed_state","initial_state","unit_of_measurement"],"mappings":"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","file":"more-info-dialog.chunk.js","sourcesContent":["import \"@polymer/paper-card/paper-card\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/state-history-charts\";\nimport \"../data/ha-state-history-data\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaHistoryGraphCard extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-card:not([dialog]) .content {\n          padding: 0 16px 16px;\n        }\n        paper-card[dialog] {\n          padding-top: 16px;\n          background-color: transparent;\n        }\n        paper-card {\n          width: 100%;\n          /* prevent new stacking context, chart tooltip needs to overflow */\n          position: static;\n        }\n        .header {\n          @apply --paper-font-headline;\n          line-height: 40px;\n          color: var(--primary-text-color);\n          padding: 20px 16px 12px;\n          @apply --paper-font-common-nowrap;\n        }\n        paper-card[dialog] .header {\n          display: none;\n        }\n      </style>\n      <ha-state-history-data\n        hass=\"[[hass]]\"\n        filter-type=\"recent-entity\"\n        entity-id=\"[[computeHistoryEntities(stateObj)]]\"\n        data=\"{{stateHistory}}\"\n        is-loading=\"{{stateHistoryLoading}}\"\n        cache-config=\"[[cacheConfig]]\"\n      ></ha-state-history-data>\n      <paper-card\n        dialog$=\"[[inDialog]]\"\n        on-click=\"cardTapped\"\n        elevation=\"[[computeElevation(inDialog)]]\"\n      >\n        <div class=\"header\">[[computeTitle(stateObj)]]</div>\n        <div class=\"content\">\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[stateHistory]]\"\n            is-loading-data=\"[[stateHistoryLoading]]\"\n            up-to-now\n            no-single\n          >\n          </state-history-charts>\n        </div>\n      </paper-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjObserver\",\n      },\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      stateHistory: Object,\n      stateHistoryLoading: Boolean,\n      cacheConfig: {\n        type: Object,\n        value: {\n          refresh: 0,\n          cacheKey: null,\n          hoursToShow: 24,\n        },\n      },\n    };\n  }\n\n  stateObjObserver(stateObj) {\n    if (!stateObj) return;\n    if (\n      this.cacheConfig.cacheKey !== stateObj.entity_id ||\n      this.cacheConfig.refresh !== (stateObj.attributes.refresh || 0) ||\n      this.cacheConfig.hoursToShow !== (stateObj.attributes.hours_to_show || 24)\n    ) {\n      this.cacheConfig = Object.assign(\n        {},\n        {\n          refresh: stateObj.attributes.refresh || 0,\n          cacheKey: stateObj.entity_id,\n          hoursToShow: stateObj.attributes.hours_to_show || 24,\n        }\n      );\n    }\n  }\n\n  computeTitle(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  computeContentClass(inDialog) {\n    return inDialog ? \"\" : \"content\";\n  }\n\n  computeHistoryEntities(stateObj) {\n    return stateObj.attributes.entity_id;\n  }\n\n  computeElevation(inDialog) {\n    return inDialog ? 0 : 1;\n  }\n\n  cardTapped(ev) {\n    const mq = window.matchMedia(\"(min-width: 610px) and (min-height: 550px)\");\n    if (mq.matches) {\n      ev.stopPropagation();\n      this.fire(\"hass-more-info\", { entityId: this.stateObj.entity_id });\n    }\n  }\n}\ncustomElements.define(\"ha-history_graph-card\", HaHistoryGraphCard);\n","/** Constants to be used in the frontend. */\n\n// Constants should be alphabetically sorted by name.\n// Arrays with values should be alphabetically sorted if order doesn't matter.\n// Each constant should have a description what it is supposed to be used for.\n\n/** Icon to use when no icon specified for domain. */\nexport const DEFAULT_DOMAIN_ICON = \"hass:bookmark\";\n\n/** Panel to show when no panel is picked. */\nexport const DEFAULT_PANEL = \"lovelace\";\n\n/** Domains that have a state card. */\nexport const DOMAINS_WITH_CARD = [\n  \"climate\",\n  \"cover\",\n  \"configurator\",\n  \"input_select\",\n  \"input_number\",\n  \"input_text\",\n  \"lock\",\n  \"media_player\",\n  \"scene\",\n  \"script\",\n  \"timer\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weblink\",\n];\n\n/** Domains with separate more info dialog. */\nexport const DOMAINS_WITH_MORE_INFO = [\n  \"alarm_control_panel\",\n  \"automation\",\n  \"camera\",\n  \"climate\",\n  \"configurator\",\n  \"cover\",\n  \"fan\",\n  \"group\",\n  \"history_graph\",\n  \"input_datetime\",\n  \"light\",\n  \"lock\",\n  \"media_player\",\n  \"script\",\n  \"sun\",\n  \"updater\",\n  \"vacuum\",\n  \"water_heater\",\n  \"weather\",\n];\n\n/** Domains that show no more info dialog. */\nexport const DOMAINS_HIDE_MORE_INFO = [\n  \"input_number\",\n  \"input_select\",\n  \"input_text\",\n  \"scene\",\n  \"weblink\",\n];\n\n/** Domains that should have the history hidden in the more info dialog. */\nexport const DOMAINS_MORE_INFO_NO_HISTORY = [\n  \"camera\",\n  \"configurator\",\n  \"history_graph\",\n  \"scene\",\n];\n\n/** States that we consider \"off\". */\nexport const STATES_OFF = [\"closed\", \"locked\", \"off\"];\n\n/** Domains where we allow toggle in Lovelace. */\nexport const DOMAINS_TOGGLE = new Set([\n  \"fan\",\n  \"input_boolean\",\n  \"light\",\n  \"switch\",\n  \"group\",\n  \"automation\",\n]);\n\n/** Temperature units. */\nexport const UNIT_C = \"C\";\nexport const UNIT_F = \"F\";\n\n/** Entity ID of the default view. */\nexport const DEFAULT_VIEW_ENTITY_ID = \"group.default_view\";\n","/**\n * Update root's child element to be newElementTag replacing another existing child if any.\n * Copy attributes into the child element.\n */\nexport default function dynamicContentUpdater(root, newElementTag, attributes) {\n  const rootEl = root;\n  let customEl;\n\n  if (rootEl.lastChild && rootEl.lastChild.tagName === newElementTag) {\n    customEl = rootEl.lastChild;\n  } else {\n    if (rootEl.lastChild) {\n      rootEl.removeChild(rootEl.lastChild);\n    }\n    // Creating an element with upper case works fine in Chrome, but in FF it doesn't immediately\n    // become a defined Custom Element. Polymer does that in some later pass.\n    customEl = document.createElement(newElementTag.toLowerCase());\n  }\n\n  if (customEl.setProperties) {\n    customEl.setProperties(attributes);\n  } else {\n    // If custom element definition wasn't loaded yet - setProperties would be\n    // missing, but no harm in setting attributes one-by-one then.\n    Object.keys(attributes).forEach((key) => {\n      customEl[key] = attributes[key];\n    });\n  }\n\n  if (customEl.parentNode === null) {\n    rootEl.appendChild(customEl);\n  }\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\nexport default function attributeClassNames(\n  stateObj: HassEntity,\n  attributes: string[]\n): string {\n  if (!stateObj) {\n    return \"\";\n  }\n  return attributes\n    .map((attribute) =>\n      attribute in stateObj.attributes ? \"has-\" + attribute : \"\"\n    )\n    .filter((attr) => attr !== \"\")\n    .join(\" \");\n}\n","import { HomeAssistant } from \"../../types\";\n\nexport default function canToggleDomain(hass: HomeAssistant, domain: string) {\n  const services = hass.services[domain];\n  if (!services) {\n    return false;\n  }\n\n  if (domain === \"lock\") {\n    return \"lock\" in services;\n  }\n  if (domain === \"cover\") {\n    return \"open_cover\" in services;\n  }\n  return \"turn_on\" in services;\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport canToggleDomain from \"./can_toggle_domain\";\nimport computeStateDomain from \"./compute_state_domain\";\nimport { HomeAssistant } from \"../../types\";\nimport { supportsFeature } from \"./supports-feature\";\n\nexport default function canToggleState(\n  hass: HomeAssistant,\n  stateObj: HassEntity\n) {\n  const domain = computeStateDomain(stateObj);\n  if (domain === \"group\") {\n    return stateObj.state === \"on\" || stateObj.state === \"off\";\n  }\n  if (domain === \"climate\") {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  return canToggleDomain(hass, domain);\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { supportsFeature } from \"./supports-feature\";\n\n// Expects classNames to be an object mapping feature-bit -> className\nexport default function featureClassNames(\n  stateObj: HassEntity,\n  classNames: { [feature: number]: string }\n) {\n  if (!stateObj || !stateObj.attributes.supported_features) {\n    return \"\";\n  }\n\n  return Object.keys(classNames)\n    .map((feature) =>\n      supportsFeature(stateObj, Number(feature)) ? classNames[feature] : \"\"\n    )\n    .filter((attr) => attr !== \"\")\n    .join(\" \");\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport canToggleState from \"./can_toggle_state\";\nimport computeStateDomain from \"./compute_state_domain\";\nimport { DOMAINS_WITH_CARD } from \"../const\";\nimport { HomeAssistant } from \"../../types\";\n\nexport default function stateCardType(\n  hass: HomeAssistant,\n  stateObj: HassEntity\n) {\n  if (stateObj.state === \"unavailable\") {\n    return \"display\";\n  }\n\n  const domain = computeStateDomain(stateObj);\n\n  if (DOMAINS_WITH_CARD.includes(domain)) {\n    return domain;\n  }\n  if (\n    canToggleState(hass, stateObj) &&\n    stateObj.attributes.control !== \"hidden\"\n  ) {\n    return \"toggle\";\n  }\n  return \"display\";\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport computeStateDomain from \"./compute_state_domain\";\nimport { DOMAINS_HIDE_MORE_INFO, DOMAINS_WITH_MORE_INFO } from \"../const\";\n\nexport default function stateMoreInfoType(stateObj: HassEntity) {\n  const domain = computeStateDomain(stateObj);\n\n  if (DOMAINS_WITH_MORE_INFO.includes(domain)) {\n    return domain;\n  }\n  if (DOMAINS_HIDE_MORE_INFO.includes(domain)) {\n    return \"hidden\";\n  }\n  return \"default\";\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../ha-relative-time\";\nimport \"./state-badge\";\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nclass StateInfo extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate} ${this.stateBadgeTemplate} ${this.infoTemplate}\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          min-width: 120px;\n          white-space: nowrap;\n        }\n\n        state-badge {\n          float: left;\n        }\n\n        :host([rtl]) state-badge {\n          float: right;\n        }\n\n        .info {\n          margin-left: 56px;\n        }\n\n        :host([rtl]) .info {\n          margin-right: 56px;\n          margin-left: 0;\n          text-align: right;\n        }\n\n        .name {\n          @apply --paper-font-common-nowrap;\n          color: var(--primary-text-color);\n          line-height: 40px;\n        }\n\n        .name[in-dialog],\n        :host([secondary-line]) .name {\n          line-height: 20px;\n        }\n\n        .time-ago,\n        .extra-info,\n        .extra-info > * {\n          @apply --paper-font-common-nowrap;\n          color: var(--secondary-text-color);\n        }\n      </style>\n    `;\n  }\n\n  static get stateBadgeTemplate() {\n    return html`\n      <state-badge state-obj=\"[[stateObj]]\"></state-badge>\n    `;\n  }\n\n  static get infoTemplate() {\n    return html`\n      <div class=\"info\">\n        <div class=\"name\" in-dialog$=\"[[inDialog]]\">\n          [[computeStateName(stateObj)]]\n        </div>\n\n        <template is=\"dom-if\" if=\"[[inDialog]]\">\n          <div class=\"time-ago\">\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime=\"[[stateObj.last_changed]]\"\n            ></ha-relative-time>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!inDialog]]\">\n          <div class=\"extra-info\"><slot> </slot></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: () => false,\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"computeRTL(hass)\",\n      },\n    };\n  }\n\n  computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"state-info\", StateInfo);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport hassAttributeUtil from \"../util/hass-attributes-util\";\n\nclass HaAttributes extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .data-entry .value {\n          max-width: 200px;\n        }\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[computeDisplayAttributes(stateObj, filtersArray)]]\"\n          as=\"attribute\"\n        >\n          <div class=\"data-entry layout justified horizontal\">\n            <div class=\"key\">[[formatAttribute(attribute)]]</div>\n            <div class=\"value\">\n              [[formatAttributeValue(stateObj, attribute)]]\n            </div>\n          </div>\n        </template>\n        <div class=\"attribution\" hidden$=\"[[!computeAttribution(stateObj)]]\">\n          [[computeAttribution(stateObj)]]\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n      extraFilters: {\n        type: String,\n        value: \"\",\n      },\n      filtersArray: {\n        type: Array,\n        computed: \"computeFiltersArray(extraFilters)\",\n      },\n    };\n  }\n\n  computeFiltersArray(extraFilters) {\n    return Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).concat(\n      extraFilters ? extraFilters.split(\",\") : []\n    );\n  }\n\n  computeDisplayAttributes(stateObj, filtersArray) {\n    if (!stateObj) {\n      return [];\n    }\n    return Object.keys(stateObj.attributes).filter(function(key) {\n      return filtersArray.indexOf(key) === -1;\n    });\n  }\n\n  formatAttribute(attribute) {\n    return attribute.replace(/_/g, \" \");\n  }\n\n  formatAttributeValue(stateObj, attribute) {\n    var value = stateObj.attributes[attribute];\n    if (value === null) return \"-\";\n    if (Array.isArray(value)) {\n      return value.join(\", \");\n    }\n    return value instanceof Object ? JSON.stringify(value, null, 2) : value;\n  }\n\n  computeAttribution(stateObj) {\n    return stateObj.attributes.attribution;\n  }\n}\n\ncustomElements.define(\"ha-attributes\", HaAttributes);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  customElement,\n} from \"lit-element\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { HomeAssistant, CameraEntity } from \"../types\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  fetchStreamUrl,\n  computeMJPEGStreamUrl,\n} from \"../data/camera\";\nimport { supportsFeature } from \"../common/entity/supports-feature\";\n\ntype HLSModule = typeof import(\"hls.js\");\n\n@customElement(\"ha-camera-stream\")\nclass HaCameraStream extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property({ type: Boolean }) public showControls = false;\n  @property() private _attached = false;\n  // We keep track if we should force MJPEG with a string\n  // that way it automatically resets if we change entity.\n  @property() private _forceMJPEG: string | undefined = undefined;\n  private _hlsPolyfillInstance?: Hls;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._attached = true;\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this._attached = false;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this.stateObj || !this._attached) {\n      return html``;\n    }\n\n    return html`\n      ${__DEMO__ || this._shouldRenderMJPEG\n        ? html`\n            <img\n              @load=${this._elementResized}\n              .src=${__DEMO__\n                ? `/api/camera_proxy_stream/${this.stateObj.entity_id}`\n                : computeMJPEGStreamUrl(this.stateObj)}\n              .alt=${computeStateName(this.stateObj)}\n            />\n          `\n        : html`\n            <video\n              autoplay\n              muted\n              playsinline\n              ?controls=${this.showControls}\n              @loadeddata=${this._elementResized}\n            ></video>\n          `}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    const stateObjChanged = changedProps.has(\"stateObj\");\n    const attachedChanged = changedProps.has(\"_attached\");\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    if (\n      (!stateObjChanged && !attachedChanged) ||\n      (stateObjChanged && oldEntityId === curEntityId)\n    ) {\n      return;\n    }\n\n    // If we are no longer attached, destroy polyfill.\n    if (attachedChanged && !this._attached) {\n      this._destroyPolyfill();\n      return;\n    }\n\n    // Nothing to do if we are render MJPEG.\n    if (this._shouldRenderMJPEG) {\n      return;\n    }\n\n    // Tear down existing polyfill, if available\n    this._destroyPolyfill();\n\n    if (curEntityId) {\n      this._startHls();\n    }\n  }\n\n  private get _shouldRenderMJPEG() {\n    return (\n      this._forceMJPEG === this.stateObj!.entity_id ||\n      !this.hass!.config.components.includes(\"stream\") ||\n      !supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    );\n  }\n\n  private get _videoEl(): HTMLVideoElement {\n    return this.shadowRoot!.querySelector(\"video\")!;\n  }\n\n  private async _startHls(): Promise<void> {\n    // tslint:disable-next-line\n    const Hls = ((await import(/* webpackChunkName: \"hls.js\" */ \"hls.js\")) as any)\n      .default as HLSModule;\n    let hlsSupported = Hls.isSupported();\n    const videoEl = this._videoEl;\n\n    if (!hlsSupported) {\n      hlsSupported =\n        videoEl.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n    }\n\n    if (!hlsSupported) {\n      this._forceMJPEG = this.stateObj!.entity_id;\n      return;\n    }\n\n    try {\n      const { url } = await fetchStreamUrl(\n        this.hass!,\n        this.stateObj!.entity_id\n      );\n\n      if (Hls.isSupported()) {\n        this._renderHLSPolyfill(videoEl, Hls, url);\n      } else {\n        this._renderHLSNative(videoEl, url);\n      }\n      return;\n    } catch (err) {\n      // Fails if we were unable to get a stream\n      // tslint:disable-next-line\n      console.error(err);\n      this._forceMJPEG = this.stateObj!.entity_id;\n    }\n  }\n\n  private async _renderHLSNative(videoEl: HTMLVideoElement, url: string) {\n    videoEl.src = url;\n    await new Promise((resolve) =>\n      videoEl.addEventListener(\"loadedmetadata\", resolve)\n    );\n    videoEl.play();\n  }\n\n  private async _renderHLSPolyfill(\n    videoEl: HTMLVideoElement,\n    // tslint:disable-next-line\n    Hls: HLSModule,\n    url: string\n  ) {\n    const hls = new Hls();\n    this._hlsPolyfillInstance = hls;\n    hls.attachMedia(videoEl);\n    hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n      hls.loadSource(url);\n    });\n  }\n\n  private _elementResized() {\n    fireEvent(this, \"iron-resize\");\n  }\n\n  private _destroyPolyfill(): void {\n    if (this._hlsPolyfillInstance) {\n      this._hlsPolyfillInstance.destroy();\n      this._hlsPolyfillInstance = undefined;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host,\n      img,\n      video {\n        display: block;\n      }\n\n      img,\n      video {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-camera-stream\": HaCameraStream;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaClimateControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n          direction: ltr;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  _round(val) {\n    // round value to precision derived from step\n    // insired by https://github.com/soundar24/roundSlider/blob/master/src/roundslider.js\n    const s = this.step.toString().split(\".\");\n    return s[1] ? parseFloat(val.toFixed(s[1].length)) : Math.round(val);\n  }\n\n  incrementValue() {\n    const newval = this._round(this.value + this.step);\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this._round(this.value - this.step);\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-climate-control\", HaClimateControl);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/**\n * Color-picker custom element\n *\n * @appliesMixin EventsMixin\n */\nclass HaColorPicker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          user-select: none;\n          -webkit-user-select: none;\n        }\n\n        #canvas {\n          position: relative;\n          width: 100%;\n          max-width: 330px;\n        }\n        #canvas > * {\n          display: block;\n        }\n        #interactionLayer {\n          color: white;\n          position: absolute;\n          cursor: crosshair;\n          width: 100%;\n          height: 100%;\n          overflow: visible;\n        }\n        #backgroundLayer {\n          width: 100%;\n          overflow: visible;\n          --wheel-bordercolor: var(--ha-color-picker-wheel-bordercolor, white);\n          --wheel-borderwidth: var(--ha-color-picker-wheel-borderwidth, 3);\n          --wheel-shadow: var(\n            --ha-color-picker-wheel-shadow,\n            rgb(15, 15, 15) 10px 5px 5px 0px\n          );\n        }\n\n        #marker {\n          fill: currentColor;\n          stroke: var(--ha-color-picker-marker-bordercolor, white);\n          stroke-width: var(--ha-color-picker-marker-borderwidth, 3);\n          filter: url(#marker-shadow);\n        }\n        .dragging #marker {\n        }\n\n        #colorTooltip {\n          display: none;\n          fill: currentColor;\n          stroke: var(--ha-color-picker-tooltip-bordercolor, white);\n          stroke-width: var(--ha-color-picker-tooltip-borderwidth, 3);\n        }\n\n        .touch.dragging #colorTooltip {\n          display: inherit;\n        }\n      </style>\n      <div id=\"canvas\">\n        <svg id=\"interactionLayer\">\n          <defs>\n            <filter\n              id=\"marker-shadow\"\n              x=\"-50%\"\n              y=\"-50%\"\n              width=\"200%\"\n              height=\"200%\"\n              filterUnits=\"objectBoundingBox\"\n            >\n              <feOffset\n                result=\"offOut\"\n                in=\"SourceAlpha\"\n                dx=\"2\"\n                dy=\"2\"\n              ></feOffset>\n              <feGaussianBlur\n                result=\"blurOut\"\n                in=\"offOut\"\n                stdDeviation=\"2\"\n              ></feGaussianBlur>\n              <feComponentTransfer in=\"blurOut\" result=\"alphaOut\">\n                <feFuncA type=\"linear\" slope=\"0.3\"></feFuncA>\n              </feComponentTransfer>\n              <feBlend\n                in=\"SourceGraphic\"\n                in2=\"alphaOut\"\n                mode=\"normal\"\n              ></feBlend>\n            </filter>\n          </defs>\n        </svg>\n        <canvas id=\"backgroundLayer\"></canvas>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hsColor: {\n        type: Object,\n      },\n\n      // use these properties to update the state via attributes\n      desiredHsColor: {\n        type: Object,\n        observer: \"applyHsColor\",\n      },\n\n      // width, height and radius apply to the coordinates of\n      // of the canvas.\n      // border width are relative to these numbers\n      // the onscreen displayed size should be controlled with css\n      // and should be the same or smaller\n      width: {\n        type: Number,\n        value: 500,\n      },\n\n      height: {\n        type: Number,\n        value: 500,\n      },\n\n      radius: {\n        type: Number,\n        value: 225,\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // other than 0 gives 'pie-pieces'\n      hueSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // the amount segments for the hue\n      // 0 = continuous gradient\n      // 1 = only fully saturated\n      // > 1 = segments from white to fully saturated\n      saturationSegments: {\n        type: Number,\n        value: 0,\n        observer: \"segmentationChange\",\n      },\n\n      // set to true to make the segments purely esthetical\n      // this allows selection off all collors, also\n      // interpolated between the segments\n      ignoreSegments: {\n        type: Boolean,\n        value: false,\n      },\n\n      // throttle te amount of 'colorselected' events fired\n      // value is timeout in milliseconds\n      throttle: {\n        type: Number,\n        value: 500,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.setupLayers();\n    this.drawColorWheel();\n    this.drawMarker();\n\n    this.interactionLayer.addEventListener(\"mousedown\", (ev) =>\n      this.onMouseDown(ev)\n    );\n    this.interactionLayer.addEventListener(\"touchstart\", (ev) =>\n      this.onTouchStart(ev)\n    );\n  }\n\n  // converts browser coordinates to canvas canvas coordinates\n  // origin is wheel center\n  // returns {x: X, y: Y} object\n  convertToCanvasCoordinates(clientX, clientY) {\n    var svgPoint = this.interactionLayer.createSVGPoint();\n    svgPoint.x = clientX;\n    svgPoint.y = clientY;\n    var cc = svgPoint.matrixTransform(\n      this.interactionLayer.getScreenCTM().inverse()\n    );\n    return { x: cc.x, y: cc.y };\n  }\n\n  // Mouse events\n\n  onMouseDown(ev) {\n    const cc = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    // a mousedown in wheel is always a color select action\n    this.onMouseSelect(ev);\n    // allow dragging\n    this.canvas.classList.add(\"mouse\", \"dragging\");\n    this.addEventListener(\"mousemove\", this.onMouseSelect);\n    this.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  onMouseUp() {\n    this.canvas.classList.remove(\"mouse\", \"dragging\");\n    this.removeEventListener(\"mousemove\", this.onMouseSelect);\n  }\n\n  onMouseSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev));\n  }\n\n  // Touch events\n\n  onTouchStart(ev) {\n    var touch = ev.changedTouches[0];\n    const cc = this.convertToCanvasCoordinates(touch.clientX, touch.clientY);\n    // return if we're not on the wheel\n    if (!this.isInWheel(cc.x, cc.y)) {\n      return;\n    }\n    if (ev.target === this.marker) {\n      // drag marker\n      ev.preventDefault();\n      this.canvas.classList.add(\"touch\", \"dragging\");\n      this.addEventListener(\"touchmove\", this.onTouchSelect);\n      this.addEventListener(\"touchend\", this.onTouchEnd);\n      return;\n    }\n    // don't fire color selection immediately,\n    // wait for touchend and invalidate when we scroll\n    this.tapBecameScroll = false;\n    this.addEventListener(\"touchend\", this.onTap);\n    this.addEventListener(\n      \"touchmove\",\n      () => {\n        this.tapBecameScroll = true;\n      },\n      { passive: true }\n    );\n  }\n\n  onTap(ev) {\n    if (this.tapBecameScroll) {\n      return;\n    }\n    ev.preventDefault();\n    this.onTouchSelect(ev);\n  }\n\n  onTouchEnd() {\n    this.canvas.classList.remove(\"touch\", \"dragging\");\n    this.removeEventListener(\"touchmove\", this.onTouchSelect);\n  }\n\n  onTouchSelect(ev) {\n    requestAnimationFrame(() => this.processUserSelect(ev.changedTouches[0]));\n  }\n\n  /*\n   * General event/selection handling\n   */\n\n  // Process user input to color\n  processUserSelect(ev) {\n    var canvasXY = this.convertToCanvasCoordinates(ev.clientX, ev.clientY);\n    var hs = this.getColor(canvasXY.x, canvasXY.y);\n    this.onColorSelect(hs);\n  }\n\n  // apply color to marker position and canvas\n  onColorSelect(hs) {\n    this.setMarkerOnColor(hs); // marker always follows mounse 'raw' hs value (= mouse position)\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n    // throttling is applied to updating the exposed colors (properties)\n    // and firing of events\n    if (this.colorSelectIsThrottled) {\n      // make sure we apply the last selected color\n      // eventually after throttle limit has passed\n      clearTimeout(this.ensureFinalSelect);\n      this.ensureFinalSelect = setTimeout(() => {\n        this.fireColorSelected(hs); // do it for the final time\n      }, this.throttle);\n      return;\n    }\n    this.fireColorSelected(hs); // do it\n    this.colorSelectIsThrottled = true;\n    setTimeout(() => {\n      this.colorSelectIsThrottled = false;\n    }, this.throttle);\n  }\n\n  // set color values and fire colorselected event\n  fireColorSelected(hs) {\n    this.hsColor = hs;\n    this.fire(\"colorselected\", { hs: { h: hs.h, s: hs.s } });\n  }\n\n  /*\n   * Interface updating\n   */\n\n  // set marker position to the given color\n  setMarkerOnColor(hs) {\n    var dist = hs.s * this.radius;\n    var theta = ((hs.h - 180) / 180) * Math.PI;\n    var markerdX = -dist * Math.cos(theta);\n    var markerdY = -dist * Math.sin(theta);\n    var translateString = `translate(${markerdX},${markerdY})`;\n    this.marker.setAttribute(\"transform\", translateString);\n    this.tooltip.setAttribute(\"transform\", translateString);\n  }\n\n  // apply given color to interface elements\n  applyColorToCanvas(hs) {\n    // we're not really converting hs to hsl here, but we keep it cheap\n    // setting the color on the interactionLayer, the svg elements can inherit\n    this.interactionLayer.style.color = `hsl(${hs.h}, 100%, ${100 -\n      hs.s * 50}%)`;\n  }\n\n  applyHsColor(hs) {\n    // do nothing is we already have the same color\n    if (this.hsColor && this.hsColor.h === hs.h && this.hsColor.s === hs.s) {\n      return;\n    }\n    this.setMarkerOnColor(hs); // marker is always set on 'raw' hs position\n    if (!this.ignoreSegments) {\n      // apply segments if needed\n      hs = this.applySegmentFilter(hs);\n    }\n    this.hsColor = hs;\n    // always apply the new color to the interface / canvas\n    this.applyColorToCanvas(hs);\n  }\n\n  /*\n   * input processing helpers\n   */\n\n  // get angle (degrees)\n  getAngle(dX, dY) {\n    var theta = Math.atan2(-dY, -dX); // radians from the left edge, clockwise = positive\n    var angle = (theta / Math.PI) * 180 + 180; // degrees, clockwise from right\n    return angle;\n  }\n\n  // returns true when coordinates are in the colorwheel\n  isInWheel(x, y) {\n    return this.getDistance(x, y) <= 1;\n  }\n\n  // returns distance from wheel center, 0 = center, 1 = edge, >1 = outside\n  getDistance(dX, dY) {\n    return Math.sqrt(dX * dX + dY * dY) / this.radius;\n  }\n\n  /*\n   * Getting colors\n   */\n\n  getColor(x, y) {\n    var hue = this.getAngle(x, y); // degrees, clockwise from right\n    var relativeDistance = this.getDistance(x, y); // edge of radius = 1\n    var sat = Math.min(relativeDistance, 1); // Distance from center\n    return { h: hue, s: sat };\n  }\n\n  applySegmentFilter(hs) {\n    // apply hue segment steps\n    if (this.hueSegments) {\n      const angleStep = 360 / this.hueSegments;\n      const halfAngleStep = angleStep / 2;\n      hs.h -= halfAngleStep; // take the 'centered segemnts' into account\n      if (hs.h < 0) {\n        hs.h += 360;\n      } // don't end up below 0\n      const rest = hs.h % angleStep;\n      hs.h -= rest - angleStep;\n    }\n\n    // apply saturation segment steps\n    if (this.saturationSegments) {\n      if (this.saturationSegments === 1) {\n        hs.s = 1;\n      } else {\n        var segmentSize = 1 / this.saturationSegments;\n        var saturationStep = 1 / (this.saturationSegments - 1);\n        var calculatedSat = Math.floor(hs.s / segmentSize) * saturationStep;\n        hs.s = Math.min(calculatedSat, 1);\n      }\n    }\n    return hs;\n  }\n\n  /*\n   * Drawing related stuff\n   */\n\n  setupLayers() {\n    this.canvas = this.$.canvas;\n    this.backgroundLayer = this.$.backgroundLayer;\n    this.interactionLayer = this.$.interactionLayer;\n\n    // coordinate origin position (center of the wheel)\n    this.originX = this.width / 2;\n    this.originY = this.originX;\n\n    // synchronise width/height coordinates\n    this.backgroundLayer.width = this.width;\n    this.backgroundLayer.height = this.height;\n    this.interactionLayer.setAttribute(\n      \"viewBox\",\n      `${-this.originX} ${-this.originY} ${this.width} ${this.height}`\n    );\n  }\n\n  drawColorWheel() {\n    /*\n     *  Setting up all paremeters\n     */\n    let shadowColor;\n    let shadowOffsetX;\n    let shadowOffsetY;\n    let shadowBlur;\n    const context = this.backgroundLayer.getContext(\"2d\");\n    // postioning and sizing\n    const cX = this.originX;\n    const cY = this.originY;\n    const radius = this.radius;\n    const counterClockwise = false;\n    // styling of the wheel\n    const wheelStyle = window.getComputedStyle(this.backgroundLayer, null);\n    const borderWidth = parseInt(\n      wheelStyle.getPropertyValue(\"--wheel-borderwidth\"),\n      10\n    );\n    const borderColor = wheelStyle\n      .getPropertyValue(\"--wheel-bordercolor\")\n      .trim();\n    const wheelShadow = wheelStyle.getPropertyValue(\"--wheel-shadow\").trim();\n    // extract shadow properties from  CCS variable\n    // the shadow should be defined as: \"10px 5px 5px 0px COLOR\"\n    if (wheelShadow !== \"none\") {\n      const values = wheelShadow.split(\"px \");\n      shadowColor = values.pop();\n      shadowOffsetX = parseInt(values[0], 10);\n      shadowOffsetY = parseInt(values[1], 10);\n      shadowBlur = parseInt(values[2], 10) || 0;\n    }\n    const borderRadius = radius + borderWidth / 2;\n    const wheelRadius = radius;\n    const shadowRadius = radius + borderWidth;\n\n    /*\n     *  Drawing functions\n     */\n    function drawCircle(hueSegments, saturationSegments) {\n      hueSegments = hueSegments || 360; // reset 0 segments to 360\n      const angleStep = 360 / hueSegments;\n      const halfAngleStep = angleStep / 2; // center segments on color\n      for (var angle = 0; angle <= 360; angle += angleStep) {\n        var startAngle = (angle - halfAngleStep) * (Math.PI / 180);\n        var endAngle = (angle + halfAngleStep + 1) * (Math.PI / 180);\n        context.beginPath();\n        context.moveTo(cX, cY);\n        context.arc(\n          cX,\n          cY,\n          wheelRadius,\n          startAngle,\n          endAngle,\n          counterClockwise\n        );\n        context.closePath();\n        // gradient\n        var gradient = context.createRadialGradient(\n          cX,\n          cY,\n          0,\n          cX,\n          cY,\n          wheelRadius\n        );\n        let lightness = 100;\n        // first gradient stop\n        gradient.addColorStop(0, `hsl(${angle}, 100%, ${lightness}%)`);\n        // segment gradient stops\n        if (saturationSegments > 0) {\n          const ratioStep = 1 / saturationSegments;\n          let ratio = 0;\n          for (var stop = 1; stop < saturationSegments; stop += 1) {\n            var prevLighness = lightness;\n            ratio = stop * ratioStep;\n            lightness = 100 - 50 * ratio;\n            gradient.addColorStop(\n              ratio,\n              `hsl(${angle}, 100%, ${prevLighness}%)`\n            );\n            gradient.addColorStop(ratio, `hsl(${angle}, 100%, ${lightness}%)`);\n          }\n          gradient.addColorStop(ratio, `hsl(${angle}, 100%, 50%)`);\n        }\n        // last gradient stop\n        gradient.addColorStop(1, `hsl(${angle}, 100%, 50%)`);\n\n        context.fillStyle = gradient;\n        context.fill();\n      }\n    }\n\n    function drawShadow() {\n      context.save();\n      context.beginPath();\n      context.arc(cX, cY, shadowRadius, 0, 2 * Math.PI, false);\n      context.shadowColor = shadowColor;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n      context.shadowBlur = shadowBlur;\n      context.fillStyle = \"white\";\n      context.fill();\n      context.restore();\n    }\n\n    function drawBorder() {\n      context.beginPath();\n      context.arc(cX, cY, borderRadius, 0, 2 * Math.PI, false);\n      context.lineWidth = borderWidth;\n      context.strokeStyle = borderColor;\n      context.stroke();\n    }\n\n    /*\n     *   Call the drawing functions\n     *   draws the shadow, wheel and border\n     */\n    if (wheelStyle.shadow !== \"none\") {\n      drawShadow();\n    }\n    drawCircle(this.hueSegments, this.saturationSegments);\n    if (borderWidth > 0) {\n      drawBorder();\n    }\n  }\n\n  /*\n   *   Draw the (draggable) marker and tooltip\n   *   on the interactionLayer)\n   */\n\n  drawMarker() {\n    const svgElement = this.interactionLayer;\n    const markerradius = this.radius * 0.08;\n    const tooltipradius = this.radius * 0.15;\n    const TooltipOffsetY = -(tooltipradius * 3);\n    const TooltipOffsetX = 0;\n\n    svgElement.marker = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.marker.setAttribute(\"id\", \"marker\");\n    svgElement.marker.setAttribute(\"r\", markerradius);\n    this.marker = svgElement.marker;\n    svgElement.appendChild(svgElement.marker);\n\n    svgElement.tooltip = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    svgElement.tooltip.setAttribute(\"id\", \"colorTooltip\");\n    svgElement.tooltip.setAttribute(\"r\", tooltipradius);\n    svgElement.tooltip.setAttribute(\"cx\", TooltipOffsetX);\n    svgElement.tooltip.setAttribute(\"cy\", TooltipOffsetY);\n    this.tooltip = svgElement.tooltip;\n    svgElement.appendChild(svgElement.tooltip);\n  }\n\n  segmentationChange() {\n    if (this.backgroundLayer) {\n      this.drawColorWheel();\n    }\n  }\n}\ncustomElements.define(\"ha-color-picker\", HaColorPicker);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-paper-slider\";\nimport \"./ha-icon\";\n\nclass HaLabeledSlider extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n\n        .title {\n          margin-bottom: 16px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        ha-icon {\n          float: left;\n          margin-top: 4px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        ha-paper-slider {\n          background-image: var(--ha-slider-background);\n        }\n      </style>\n\n      <div class=\"title\">[[caption]]</div>\n      <div class=\"extra-container\"><slot name=\"extra\"></slot></div>\n      <div class=\"slider-container\">\n        <ha-icon icon=\"[[icon]]\" hidden$=\"[[!icon]]\"></ha-icon>\n        <ha-paper-slider\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          step=\"[[step]]\"\n          pin=\"[[pin]]\"\n          disabled=\"[[disabled]]\"\n          disabled=\"[[disabled]]\"\n          value=\"{{value}}\"\n        ></ha-paper-slider>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      caption: String,\n      disabled: Boolean,\n      min: Number,\n      max: Number,\n      pin: Boolean,\n      step: Number,\n\n      extra: {\n        type: Boolean,\n        value: false,\n      },\n      ignoreBarTouch: {\n        type: Boolean,\n        value: true,\n      },\n      icon: {\n        type: String,\n        value: \"\",\n      },\n      value: {\n        type: Number,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"ha-labeled-slider\", HaLabeledSlider);\n","import { Constructor } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { PaperIconButtonElement } from \"@polymer/paper-icon-button/paper-icon-button\";\n\nconst paperIconButtonClass = customElements.get(\n  \"paper-icon-button\"\n) as Constructor<PaperIconButtonElement>;\n\nexport class HaPaperIconButtonArrowPrev extends paperIconButtonClass {\n  public hassio?: boolean;\n\n  public connectedCallback() {\n    this.icon =\n      window.getComputedStyle(this).direction === \"ltr\"\n        ? this.hassio\n          ? \"hassio:arrow-left\"\n          : \"hass:arrow-left\"\n        : this.hassio\n        ? \"hassio:arrow-right\"\n        : \"hass:arrow-right\";\n\n    // calling super after setting icon to have it consistently show the icon (otherwise not always shown)\n    super.connectedCallback();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-icon-button-arrow-prev\": HaPaperIconButtonArrowPrev;\n  }\n}\n\ncustomElements.define(\n  \"ha-paper-icon-button-arrow-prev\",\n  HaPaperIconButtonArrowPrev\n);\n","import \"@polymer/paper-slider/paper-slider\";\n\n/**\n * @polymer\n * @customElement\n * @appliesMixin paper-slider\n */\nconst PaperSliderClass = customElements.get(\"paper-slider\");\n\nclass HaPaperSlider extends PaperSliderClass {\n  static get template() {\n    const tpl = document.createElement(\"template\");\n    tpl.innerHTML = PaperSliderClass.template.innerHTML;\n    const styleEl = document.createElement(\"style\");\n    styleEl.innerHTML = `\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n\n      :host([dir=\"rtl\"]) .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        }\n    `;\n    tpl.content.appendChild(styleEl);\n    return tpl;\n  }\n}\ncustomElements.define(\"ha-paper-slider\", HaPaperSlider);\n","import \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\nconst STATES_INTERCEPTABLE = {\n  cleaning: {\n    action: \"return_to_base\",\n    service: \"return_to_base\",\n  },\n  docked: {\n    action: \"start_cleaning\",\n    service: \"start\",\n  },\n  idle: {\n    action: \"start_cleaning\",\n    service: \"start\",\n  },\n  off: {\n    action: \"turn_on\",\n    service: \"turn_on\",\n  },\n  on: {\n    action: \"turn_off\",\n    service: \"turn_off\",\n  },\n  paused: {\n    action: \"resume_cleaning\",\n    service: \"start\",\n  },\n};\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaVacuumState extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n        mwc-button[disabled] {\n          background-color: transparent;\n          color: var(--secondary-text-color);\n        }\n      </style>\n\n      <mwc-button on-click=\"_callService\" disabled=\"[[!_interceptable]]\"\n        >[[_computeLabel(stateObj.state, _interceptable)]]</mwc-button\n      >\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      _interceptable: {\n        type: Boolean,\n        computed:\n          \"_computeInterceptable(stateObj.state, stateObj.attributes.supported_features)\",\n      },\n    };\n  }\n\n  _computeInterceptable(state, supportedFeatures) {\n    return state in STATES_INTERCEPTABLE && supportedFeatures !== 0;\n  }\n\n  _computeLabel(state, interceptable) {\n    return interceptable\n      ? this.localize(\n          `ui.card.vacuum.actions.${STATES_INTERCEPTABLE[state].action}`\n        )\n      : this.localize(`state.vacuum.${state}`);\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const stateObj = this.stateObj;\n    const service = STATES_INTERCEPTABLE[stateObj.state].service;\n    this.hass.callService(\"vacuum\", service, { entity_id: stateObj.entity_id });\n  }\n}\ncustomElements.define(\"ha-vacuum-state\", HaVacuumState);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaWaterHeaterControl extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        /* local DOM styles go here */\n        :host {\n          @apply --layout-flex;\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n        }\n        .in-flux#target_temperature {\n          color: var(--google-red-500);\n        }\n        #target_temperature {\n          @apply --layout-self-center;\n          font-size: 200%;\n        }\n        .control-buttons {\n          font-size: 200%;\n          text-align: right;\n        }\n        paper-icon-button {\n          height: 48px;\n          width: 48px;\n        }\n      </style>\n\n      <!-- local DOM goes here -->\n      <div id=\"target_temperature\">[[value]] [[units]]</div>\n      <div class=\"control-buttons\">\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-up\"\n            on-click=\"incrementValue\"\n          ></paper-icon-button>\n        </div>\n        <div>\n          <paper-icon-button\n            icon=\"hass:chevron-down\"\n            on-click=\"decrementValue\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      value: {\n        type: Number,\n        observer: \"valueChanged\",\n      },\n      units: {\n        type: String,\n      },\n      min: {\n        type: Number,\n      },\n      max: {\n        type: Number,\n      },\n      step: {\n        type: Number,\n        value: 1,\n      },\n    };\n  }\n\n  temperatureStateInFlux(inFlux) {\n    this.$.target_temperature.classList.toggle(\"in-flux\", inFlux);\n  }\n\n  incrementValue() {\n    const newval = this.value + this.step;\n    if (this.value < this.max) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval <= this.max) {\n      // If no initial target_temp\n      // this forces control to start\n      // from the min configured instead of 0\n      if (newval <= this.min) {\n        this.value = this.min;\n      } else {\n        this.value = newval;\n      }\n    } else {\n      this.value = this.max;\n    }\n  }\n\n  decrementValue() {\n    const newval = this.value - this.step;\n    if (this.value > this.min) {\n      this.last_changed = Date.now();\n      this.temperatureStateInFlux(true);\n    }\n    if (newval >= this.min) {\n      this.value = newval;\n    } else {\n      this.value = this.min;\n    }\n  }\n\n  valueChanged() {\n    // when the last_changed timestamp is changed,\n    // trigger a potential event fire in\n    // the future, as long as last changed is far enough in the\n    // past.\n    if (this.last_changed) {\n      window.setTimeout(() => {\n        const now = Date.now();\n        if (now - this.last_changed >= 2000) {\n          this.fire(\"change\");\n          this.temperatureStateInFlux(false);\n          this.last_changed = null;\n        }\n      }, 2010);\n    }\n  }\n}\n\ncustomElements.define(\"ha-water_heater-control\", HaWaterHeaterControl);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaWaterHeaterState extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          white-space: nowrap;\n        }\n\n        .target {\n          color: var(--primary-text-color);\n        }\n\n        .current {\n          color: var(--secondary-text-color);\n        }\n\n        .state-label {\n          font-weight: bold;\n          text-transform: capitalize;\n        }\n      </style>\n\n      <div class=\"target\">\n        <span class=\"state-label\"> [[_localizeState(stateObj.state)]] </span>\n        [[computeTarget(hass, stateObj)]]\n      </div>\n\n      <template is=\"dom-if\" if=\"[[currentStatus]]\">\n        <div class=\"current\">\n          [[localize('ui.card.water_heater.currently')]]: [[currentStatus]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  computeTarget(hass, stateObj) {\n    if (!hass || !stateObj) return null;\n    // We're using \"!= null\" on purpose so that we match both null and undefined.\n    if (\n      stateObj.attributes.target_temp_low != null &&\n      stateObj.attributes.target_temp_high != null\n    ) {\n      return `${stateObj.attributes.target_temp_low} - ${\n        stateObj.attributes.target_temp_high\n      } ${hass.config.unit_system.temperature}`;\n    }\n    if (stateObj.attributes.temperature != null) {\n      return `${stateObj.attributes.temperature} ${\n        hass.config.unit_system.temperature\n      }`;\n    }\n\n    return \"\";\n  }\n\n  _localizeState(state) {\n    return this.localize(`state.water_heater.${state}`) || state;\n  }\n}\ncustomElements.define(\"ha-water_heater-state\", HaWaterHeaterState);\n","import \"@polymer/paper-dialog-behavior/paper-dialog-shared-styles\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../resources/ha-style\";\n\nimport \"./more-info/more-info-controls\";\nimport \"./more-info/more-info-settings\";\n\nimport computeStateDomain from \"../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../common/config/is_component_loaded\";\n\nimport DialogMixin from \"../mixins/dialog-mixin\";\n\n/*\n * @appliesMixin DialogMixin\n */\nclass HaMoreInfoDialog extends DialogMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog paper-dialog-shared-styles\">\n        :host {\n          font-size: 14px;\n          width: 365px;\n          border-radius: 2px;\n        }\n\n        more-info-controls,\n        more-info-settings {\n          --more-info-header-background: var(--secondary-background-color);\n          --more-info-header-color: var(--primary-text-color);\n          --ha-more-info-app-toolbar-title: {\n            /* Design guideline states 24px, changed to 16 to align with state info */\n            margin-left: 16px;\n            line-height: 1.3em;\n            max-height: 2.6em;\n            overflow: hidden;\n            /* webkit and blink still support simple multiline text-overflow */\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            text-overflow: ellipsis;\n          }\n        }\n\n        /* overrule the ha-style-dialog max-height on small screens */\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          more-info-controls,\n          more-info-settings {\n            --more-info-header-background: var(--primary-color);\n            --more-info-header-color: var(--text-primary-color);\n          }\n          :host {\n            width: 100% !important;\n            border-radius: 0px;\n            position: fixed !important;\n            margin: 0;\n          }\n          :host::before {\n            content: \"\";\n            position: fixed;\n            z-index: -1;\n            top: 0px;\n            left: 0px;\n            right: 0px;\n            bottom: 0px;\n            background-color: inherit;\n          }\n        }\n\n        :host([data-domain=\"camera\"]) {\n          width: auto;\n        }\n\n        :host([data-domain=\"history_graph\"]),\n        :host([large]) {\n          width: 90%;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[!_page]]\">\n        <more-info-controls\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          dialog-element=\"[[_dialogElement]]\"\n          can-configure=\"[[_registryInfo]]\"\n          large=\"{{large}}\"\n        ></more-info-controls>\n      </template>\n      <template is=\"dom-if\" if='[[_equals(_page, \"settings\")]]'>\n        <more-info-settings\n          class=\"no-padding\"\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n          registry-info=\"{{_registryInfo}}\"\n        ></more-info-settings>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        computed: \"_computeStateObj(hass)\",\n        observer: \"_stateObjChanged\",\n      },\n\n      large: {\n        type: Boolean,\n        reflectToAttribute: true,\n        observer: \"_largeChanged\",\n      },\n\n      _dialogElement: Object,\n      _registryInfo: Object,\n\n      _page: {\n        type: String,\n        value: null,\n      },\n\n      dataDomain: {\n        computed: \"_computeDomain(stateObj)\",\n        reflectToAttribute: true,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"_dialogOpenChanged(opened)\"];\n  }\n\n  ready() {\n    super.ready();\n    this._dialogElement = this;\n    this.addEventListener(\"more-info-page\", (ev) => {\n      this._page = ev.detail.page;\n    });\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateObj(hass) {\n    return hass.states[hass.moreInfoEntityId] || null;\n  }\n\n  async _stateObjChanged(newVal, oldVal) {\n    if (!newVal) {\n      this.setProperties({\n        opened: false,\n        _page: null,\n        _registryInfo: null,\n        large: false,\n      });\n      return;\n    }\n\n    requestAnimationFrame(() =>\n      requestAnimationFrame(() => {\n        // allow dialog to render content before showing it so it will be\n        // positioned correctly.\n        this.opened = true;\n      })\n    );\n\n    if (\n      !isComponentLoaded(this.hass, \"config\") ||\n      (oldVal && oldVal.entity_id === newVal.entity_id)\n    ) {\n      return;\n    }\n\n    if (this.hass.user.is_admin) {\n      try {\n        const info = await this.hass.callWS({\n          type: \"config/entity_registry/get\",\n          entity_id: newVal.entity_id,\n        });\n        this._registryInfo = info;\n      } catch (err) {\n        this._registryInfo = null;\n      }\n    }\n  }\n\n  _dialogOpenChanged(newVal) {\n    if (!newVal && this.stateObj) {\n      this.fire(\"hass-more-info\", { entityId: null });\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _largeChanged() {\n    this.notifyResize();\n  }\n}\ncustomElements.define(\"ha-more-info-dialog\", HaMoreInfoDialog);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAlarmControlPanel extends LocalizeMixin(\n  EventsMixin(PolymerElement)\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        paper-input {\n          margin: auto;\n          max-width: 200px;\n        }\n        .pad {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 24px;\n        }\n        .pad div {\n          display: flex;\n          flex-direction: column;\n        }\n        .pad mwc-button {\n          width: 80px;\n        }\n        .actions mwc-button {\n          min-width: 160px;\n          margin-bottom: 16px;\n        }\n        mwc-button.disarm {\n          color: var(--google-red-500);\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[_codeFormat]]\">\n        <paper-input\n          label=\"[[localize('ui.card.alarm_control_panel.code')]]\"\n          value=\"{{_enteredCode}}\"\n          type=\"password\"\n          disabled=\"[[!_inputEnabled]]\"\n        ></paper-input>\n\n        <template is=\"dom-if\" if=\"[[_isNumber(_codeFormat)]]\">\n          <div class=\"pad\">\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"1\"\n                raised\n                >1</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"4\"\n                raised\n                >4</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"7\"\n                raised\n                >7</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"2\"\n                raised\n                >2</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"5\"\n                raised\n                >5</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"8\"\n                raised\n                >8</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"0\"\n                raised\n                >0</mwc-button\n              >\n            </div>\n            <div>\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"3\"\n                raised\n                >3</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"6\"\n                raised\n                >6</mwc-button\n              >\n              <mwc-button\n                on-click=\"_digitClicked\"\n                disabled=\"[[!_inputEnabled]]\"\n                data-digit=\"9\"\n                raised\n                >9</mwc-button\n              >\n              <mwc-button\n                on-click=\"_clearEnteredCode\"\n                disabled=\"[[!_inputEnabled]]\"\n                raised\n              >\n                [[localize('ui.card.alarm_control_panel.clear_code')]]\n              </mwc-button>\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <div class=\"layout horizontal center-justified actions\">\n        <template is=\"dom-if\" if=\"[[_disarmVisible]]\">\n          <mwc-button\n            raised\n            class=\"disarm\"\n            on-click=\"_callService\"\n            data-service=\"alarm_disarm\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.disarm')]]\n          </mwc-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_armVisible]]\">\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_home\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_home')]]\n          </mwc-button>\n          <mwc-button\n            raised\n            on-click=\"_callService\"\n            data-service=\"alarm_arm_away\"\n            disabled=\"[[!_codeValid]]\"\n          >\n            [[localize('ui.card.alarm_control_panel.arm_away')]]\n          </mwc-button>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n      _enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      _codeFormat: {\n        type: String,\n        value: \"\",\n      },\n      _codeValid: {\n        type: Boolean,\n        computed: \"_validateCode(_enteredCode, _codeFormat)\",\n      },\n      _disarmVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _armVisible: {\n        type: Boolean,\n        value: false,\n      },\n      _inputEnabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._armedStates = [\n      \"armed_home\",\n      \"armed_away\",\n      \"armed_night\",\n      \"armed_custom_bypass\",\n    ];\n  }\n\n  _stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      const state = newVal.state;\n      const props = {\n        _codeFormat: newVal.attributes.code_format,\n        _armVisible: state === \"disarmed\",\n        _disarmVisible:\n          this._armedStates.includes(state) ||\n          state === \"pending\" ||\n          state === \"triggered\" ||\n          state === \"arming\",\n      };\n      props._inputEnabled = props._disarmVisible || props._armVisible;\n      this.setProperties(props);\n    }\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  _isNumber(format) {\n    return format === \"Number\";\n  }\n\n  _validateCode(code, format) {\n    return !format || code.length > 0;\n  }\n\n  _digitClicked(ev) {\n    this._enteredCode += ev.target.getAttribute(\"data-digit\");\n  }\n\n  _clearEnteredCode() {\n    this._enteredCode = \"\";\n  }\n\n  _callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this._enteredCode,\n    };\n    this.hass.callService(\"alarm_control_panel\", service, data).then(() => {\n      this._enteredCode = \"\";\n    });\n  }\n}\ncustomElements.define(\n  \"more-info-alarm_control_panel\",\n  MoreInfoAlarmControlPanel\n);\n","import \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoAutomation extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          justify-content: space-between;\n        }\n        .actions {\n          margin: 36px 0 8px 0;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <div>[[localize('ui.card.automation.last_triggered')]]:</div>\n        <ha-relative-time\n          hass=\"[[hass]]\"\n          datetime=\"[[stateObj.attributes.last_triggered]]\"\n        ></ha-relative-time>\n      </div>\n\n      <div class=\"actions\">\n        <mwc-button on-click=\"handleTriggerTapped\">\n          [[localize('ui.card.automation.trigger')]]\n        </mwc-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  handleTriggerTapped() {\n    this.hass.callService(\"automation\", \"trigger\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-automation\", MoreInfoAutomation);\n","import {\n  property,\n  PropertyValues,\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n} from \"lit-element\";\n\nimport { HomeAssistant, CameraEntity } from \"../../../types\";\nimport {\n  CAMERA_SUPPORT_STREAM,\n  CameraPreferences,\n  fetchCameraPrefs,\n  updateCameraPrefs,\n} from \"../../../data/camera\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\nimport \"../../../components/ha-camera-stream\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n// Not duplicate import, it's for typing\n// tslint:disable-next-line\nimport { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\n\nclass MoreInfoCamera extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public stateObj?: CameraEntity;\n  @property() private _cameraPrefs?: CameraPreferences;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass || !this.stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-camera-stream\n        .hass=\"${this.hass}\"\n        .stateObj=\"${this.stateObj}\"\n        showcontrols\n      ></ha-camera-stream>\n      ${this._cameraPrefs\n        ? html`\n            <paper-checkbox\n              .checked=${this._cameraPrefs.preload_stream}\n              @change=${this._handleCheckboxChanged}\n            >\n              Preload stream\n            </paper-checkbox>\n          `\n        : undefined}\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\")) {\n      return;\n    }\n\n    const oldState = changedProps.get(\"stateObj\") as this[\"stateObj\"];\n    const oldEntityId = oldState ? oldState.entity_id : undefined;\n    const curEntityId = this.stateObj ? this.stateObj.entity_id : undefined;\n\n    // Same entity, ignore.\n    if (curEntityId === oldEntityId) {\n      return;\n    }\n\n    if (\n      curEntityId &&\n      this.hass!.config.components.includes(\"stream\") &&\n      supportsFeature(this.stateObj!, CAMERA_SUPPORT_STREAM)\n    ) {\n      // Fetch in background while we set up the video.\n      this._fetchCameraPrefs();\n    }\n  }\n\n  private async _fetchCameraPrefs() {\n    this._cameraPrefs = await fetchCameraPrefs(\n      this.hass!,\n      this.stateObj!.entity_id\n    );\n  }\n\n  private async _handleCheckboxChanged(ev) {\n    const checkbox = ev.currentTarget as PaperCheckboxElement;\n    try {\n      this._cameraPrefs = await updateCameraPrefs(\n        this.hass!,\n        this.stateObj!.entity_id,\n        {\n          preload_stream: checkbox.checked!,\n        }\n      );\n    } catch (err) {\n      alert(err.message);\n      checkbox.checked = !checkbox.checked;\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-checkbox {\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: var(--secondary-background-color);\n        padding: 5px;\n        border-bottom-left-radius: 6px;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"more-info-camera\", MoreInfoCamera);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-climate-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoClimate extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-on,\n        .container-away_mode,\n        .container-aux_heat,\n        .container-temperature,\n        .container-humidity,\n        .container-operation_list,\n        .container-fan_list,\n        .container-swing_list {\n          display: none;\n        }\n\n        .has-on .container-on,\n        .has-away_mode .container-away_mode,\n        .has-aux_heat .container-aux_heat,\n        .has-target_temperature .container-temperature,\n        .has-target_temperature_low .container-temperature,\n        .has-target_temperature_high .container-temperature,\n        .has-target_humidity .container-humidity,\n        .has-operation_mode .container-operation_list,\n        .has-fan_mode .container-fan_list,\n        .has-swing_list .container-swing_list,\n        .has-swing_mode .container-swing_list {\n          display: block;\n          margin-bottom: 5px;\n        }\n\n        .container-operation_list iron-icon,\n        .container-fan_list iron-icon,\n        .container-swing_list iron-icon {\n          margin: 22px 16px 0 0;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        .container-humidity .single-row {\n            display: flex;\n            height: 50px;\n        }\n\n        .target-humidity {\n          width: 90px;\n          font-size: 200%;\n          margin: auto;\n          direction: ltr;\n        }\n\n        ha-climate-control.range-control-left,\n        ha-climate-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-climate-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-climate-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .humidity {\n          --paper-slider-active-color: var(--paper-blue-400);\n          --paper-slider-secondary-color: var(--paper-blue-400);\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[supportsOn(stateObj)]]\">\n          <div class=\"container-on\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.on_off')]]</div>\n              <paper-toggle-button\n                checked=\"[[onToggleChecked]]\"\n                on-change=\"onToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.climate.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-climate-control>\n            </template>\n            <template is=\"dom-if\" if=\"[[supportsTemperatureRange(stateObj)]]\">\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_low]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.target_temp_high]]\"\n                class=\"range-control-left\"\n                on-change=\"targetTemperatureLowChanged\"\n              >\n              </ha-climate-control>\n              <ha-climate-control\n                value=\"[[stateObj.attributes.target_temp_high]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.target_temp_low]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                class=\"range-control-right\"\n                on-change=\"targetTemperatureHighChanged\"\n              >\n              </ha-climate-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsHumidity(stateObj)]]\">\n          <div class=\"container-humidity\">\n            <div>[[localize('ui.card.climate.target_humidity')]]</div>\n            <div class=\"single-row\">\n              <div class=\"target-humidity\">\n                [[stateObj.attributes.humidity]] %\n              </div>\n              <ha-paper-slider\n                class=\"humidity\"\n                min=\"[[stateObj.attributes.min_humidity]]\"\n                max=\"[[stateObj.attributes.max_humidity]]\"\n                secondary-progress=\"[[stateObj.attributes.max_humidity]]\"\n                step=\"1\"\n                pin=\"\"\n                value=\"[[stateObj.attributes.humidity]]\"\n                on-change=\"targetHumiditySliderChanged\"\n                ignore-bar-touch=\"\"\n                dir=\"[[rtl]]\"\n              >\n              </ha-paper-slider>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.climate.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsFanMode(stateObj)]]\">\n          <div class=\"container-fan_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.fan_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.fan_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleFanmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.fan_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\"\n                    >[[_localizeFanMode(localize, item)]]\n                  </paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsSwingMode(stateObj)]]\">\n          <div class=\"container-swing_list\">\n            <ha-paper-dropdown-menu\n              label-float=\"\"\n              dynamic-align=\"\"\n              label=\"[[localize('ui.card.climate.swing_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                selected=\"[[stateObj.attributes.swing_mode]]\"\n                attr-for-selected=\"item-name\"\n                on-selected-changed=\"handleSwingmodeChanged\"\n              >\n                <template\n                  is=\"dom-repeat\"\n                  items=\"[[stateObj.attributes.swing_list]]\"\n                >\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.away_mode')]]</div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAuxHeat(stateObj)]]\">\n          <div class=\"container-aux_heat\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">[[localize('ui.card.climate.aux_heat')]]</div>\n              <paper-toggle-button\n                checked=\"[[auxToggleChecked]]\"\n                on-change=\"auxToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n      auxToggleChecked: Boolean,\n      onToggleChecked: Boolean,\n\n      rtl: {\n        type: String,\n        value: \"ltr\",\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n        auxToggleChecked: newVal.attributes.aux_heat === \"on\",\n        onToggleChecked: newVal.state !== \"off\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return (\n      this.supportsTemperature(stateObj) ||\n      this.supportsTemperatureRange(stateObj)\n    );\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsTemperatureRange(stateObj) {\n    return (\n      supportsFeature(stateObj, 6) &&\n      (typeof stateObj.attributes.target_temp_low === \"number\" ||\n        typeof stateObj.attributes.target_temp_high === \"number\")\n    );\n  }\n\n  supportsHumidity(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsFanMode(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsSwingMode(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsAuxHeat(stateObj) {\n    return supportsFeature(stateObj, 2048);\n  }\n\n  supportsOn(stateObj) {\n    return supportsFeature(stateObj, 4096);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-target_temperature_high\",\n      4: \"has-target_temperature_low\",\n      8: \"has-target_humidity\",\n      16: \"has-target_humidity_high\",\n      32: \"has-target_humidity_low\",\n      64: \"has-fan_mode\",\n      128: \"has-operation_mode\",\n      256: \"has-hold_mode\",\n      512: \"has-swing_mode\",\n      1024: \"has-away_mode\",\n      2048: \"has-aux_heat\",\n      4096: \"has-on\",\n    };\n\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_temperature\",\n        \"current_humidity\",\n      ]),\n      featureClassNames(stateObj, _featureClassNames),\n    ];\n\n    classes.push(\"more-info-climate\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  targetTemperatureLowChanged(ev) {\n    const targetTempLow = ev.currentTarget.value;\n    if (targetTempLow === this.stateObj.attributes.target_temp_low) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: targetTempLow,\n      target_temp_high: this.stateObj.attributes.target_temp_high,\n    });\n  }\n\n  targetTemperatureHighChanged(ev) {\n    const targetTempHigh = ev.currentTarget.value;\n    if (targetTempHigh === this.stateObj.attributes.target_temp_high) return;\n    this.callServiceHelper(\"set_temperature\", {\n      target_temp_low: this.stateObj.attributes.target_temp_low,\n      target_temp_high: targetTempHigh,\n    });\n  }\n\n  targetHumiditySliderChanged(ev) {\n    const humidity = ev.target.value;\n    if (humidity === this.stateObj.attributes.humidity) return;\n    this.callServiceHelper(\"set_humidity\", { humidity: humidity });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  auxToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.aux_heat === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_aux_heat\", { aux_heat: newVal });\n  }\n\n  onToggleChanged(ev) {\n    const oldVal = this.stateObj.state !== \"off\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(newVal ? \"turn_on\" : \"turn_off\", {});\n  }\n\n  handleFanmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.fan_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_fan_mode\", { fan_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  handleSwingmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.swing_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_swing_mode\", { swing_mode: newVal });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"climate\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.climate.${mode}`) || mode;\n  }\n\n  _localizeFanMode(localize, mode) {\n    return localize(`state_attributes.climate.fan_mode.${mode}`) || mode;\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-climate\", MoreInfoClimate);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-input/iron-input\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-markdown\";\n\nclass MoreInfoConfigurator extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        p {\n          margin: 8px 0;\n        }\n\n        a {\n          color: var(--primary-color);\n        }\n\n        p > img {\n          max-width: 100%;\n        }\n\n        p.center {\n          text-align: center;\n        }\n\n        p.error {\n          color: #c62828;\n        }\n\n        p.submit {\n          text-align: center;\n          height: 41px;\n        }\n\n        paper-spinner {\n          width: 14px;\n          height: 14px;\n          margin-right: 20px;\n        }\n\n        [hidden] {\n          display: none;\n        }\n      </style>\n\n      <div class=\"layout vertical\">\n        <template is=\"dom-if\" if=\"[[isConfigurable]]\">\n          <ha-markdown\n            content=\"[[stateObj.attributes.description]]\"\n          ></ha-markdown>\n\n          <p class=\"error\" hidden$=\"[[!stateObj.attributes.errors]]\">\n            [[stateObj.attributes.errors]]\n          </p>\n\n          <template is=\"dom-repeat\" items=\"[[stateObj.attributes.fields]]\">\n            <paper-input\n              label=\"[[item.name]]\"\n              name=\"[[item.id]]\"\n              type=\"[[item.type]]\"\n              on-change=\"fieldChanged\"\n            ></paper-input>\n          </template>\n\n          <p class=\"submit\" hidden$=\"[[!stateObj.attributes.submit_caption]]\">\n            <mwc-button\n              raised=\"\"\n              disabled=\"[[isConfiguring]]\"\n              on-click=\"submitClicked\"\n            >\n              <paper-spinner\n                active=\"[[isConfiguring]]\"\n                hidden=\"[[!isConfiguring]]\"\n                alt=\"Configuring\"\n              ></paper-spinner>\n              [[stateObj.attributes.submit_caption]]\n            </mwc-button>\n          </p>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n\n      action: {\n        type: String,\n        value: \"display\",\n      },\n\n      isConfigurable: {\n        type: Boolean,\n        computed: \"computeIsConfigurable(stateObj)\",\n      },\n\n      isConfiguring: {\n        type: Boolean,\n        value: false,\n      },\n\n      fieldInput: {\n        type: Object,\n        value: function() {\n          return {};\n        },\n      },\n    };\n  }\n\n  computeIsConfigurable(stateObj) {\n    return stateObj.state === \"configure\";\n  }\n\n  fieldChanged(ev) {\n    var el = ev.target;\n    this.fieldInput[el.name] = el.value;\n  }\n\n  submitClicked() {\n    var data = {\n      configure_id: this.stateObj.attributes.configure_id,\n      fields: this.fieldInput,\n    };\n\n    this.isConfiguring = true;\n\n    this.hass.callService(\"configurator\", \"configure\", data).then(\n      function() {\n        this.isConfiguring = false;\n      }.bind(this),\n      function() {\n        this.isConfiguring = false;\n      }.bind(this)\n    );\n  }\n}\n\ncustomElements.define(\"more-info-configurator\", MoreInfoConfigurator);\n","import {\n  PropertyDeclarations,\n  PropertyValues,\n  UpdatingElement,\n} from \"lit-element\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nimport \"./more-info-alarm_control_panel\";\nimport \"./more-info-automation\";\nimport \"./more-info-camera\";\nimport \"./more-info-climate\";\nimport \"./more-info-configurator\";\nimport \"./more-info-cover\";\nimport \"./more-info-default\";\nimport \"./more-info-fan\";\nimport \"./more-info-group\";\nimport \"./more-info-history_graph\";\nimport \"./more-info-input_datetime\";\nimport \"./more-info-light\";\nimport \"./more-info-lock\";\nimport \"./more-info-media_player\";\nimport \"./more-info-script\";\nimport \"./more-info-sun\";\nimport \"./more-info-updater\";\nimport \"./more-info-vacuum\";\nimport \"./more-info-water_heater\";\nimport \"./more-info-weather\";\n\nimport stateMoreInfoType from \"../../../common/entity/state_more_info_type\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\nimport { HomeAssistant } from \"../../../types\";\n\nclass MoreInfoContent extends UpdatingElement {\n  public hass?: HomeAssistant;\n  public stateObj?: HassEntity;\n  private _detachedChild?: ChildNode;\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      stateObj: {},\n    };\n  }\n\n  protected firstUpdated(): void {\n    this.style.position = \"relative\";\n    this.style.display = \"block\";\n  }\n\n  // This is not a lit element, but an updating element, so we implement update\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n    const stateObj = this.stateObj;\n    const hass = this.hass;\n\n    if (!stateObj || !hass) {\n      if (this.lastChild) {\n        this._detachedChild = this.lastChild;\n        // Detach child to prevent it from doing work.\n        this.removeChild(this.lastChild);\n      }\n      return;\n    }\n\n    if (this._detachedChild) {\n      this.appendChild(this._detachedChild);\n      this._detachedChild = undefined;\n    }\n\n    const moreInfoType =\n      stateObj.attributes && \"custom_ui_more_info\" in stateObj.attributes\n        ? stateObj.attributes.custom_ui_more_info\n        : \"more-info-\" + stateMoreInfoType(stateObj);\n\n    dynamicContentUpdater(this, moreInfoType.toUpperCase(), {\n      hass,\n      stateObj,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-content\", MoreInfoContent);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-cover-tilt-controls\";\nimport \"../../../components/ha-labeled-slider\";\nimport CoverEntity from \"../../../util/cover-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  128: \"has-set_tilt_position\",\n};\nclass MoreInfoCover extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .current_position,\n        .tilt {\n          max-height: 0px;\n          overflow: hidden;\n        }\n\n        .has-current_position .current_position,\n        .has-set_tilt_position .tilt,\n        .has-current_tilt_position .tilt {\n          max-height: 208px;\n        }\n\n        [invisible] {\n          visibility: hidden !important;\n        }\n      </style>\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"current_position\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.position')]]\"\n            pin=\"\"\n            value=\"{{coverPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetPosition]]\"\n            on-change=\"coverPositionSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"tilt\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.cover.tilt_position')]]\"\n            pin=\"\"\n            extra=\"\"\n            value=\"{{coverTiltPositionSliderValue}}\"\n            disabled=\"[[!entityObj.supportsSetTiltPosition]]\"\n            on-change=\"coverTiltPositionSliderChanged\"\n          >\n            <ha-cover-tilt-controls\n              slot=\"extra\"\n              hidden$=\"[[entityObj.isTiltOnly]]\"\n              hass=\"[[hass]]\"\n              state-obj=\"[[stateObj]]\"\n            ></ha-cover-tilt-controls>\n          </ha-labeled-slider>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      entityObj: {\n        type: Object,\n        computed: \"computeEntityObj(hass, stateObj)\",\n      },\n      coverPositionSliderValue: Number,\n      coverTiltPositionSliderValue: Number,\n    };\n  }\n\n  computeEntityObj(hass, stateObj) {\n    return new CoverEntity(hass, stateObj);\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        coverPositionSliderValue: newVal.attributes.current_position,\n        coverTiltPositionSliderValue: newVal.attributes.current_tilt_position,\n      });\n    }\n  }\n\n  computeClassNames(stateObj) {\n    var classes = [\n      attributeClassNames(stateObj, [\n        \"current_position\",\n        \"current_tilt_position\",\n      ]),\n      featureClassNames(stateObj, FEATURE_CLASS_NAMES),\n    ];\n    return classes.join(\" \");\n  }\n\n  coverPositionSliderChanged(ev) {\n    this.entityObj.setCoverPosition(ev.target.value);\n  }\n\n  coverTiltPositionSliderChanged(ev) {\n    this.entityObj.setCoverTiltPosition(ev.target.value);\n  }\n}\n\ncustomElements.define(\"more-info-cover\", MoreInfoCover);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoDefault extends PolymerElement {\n  static get template() {\n    return html`\n      <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-default\", MoreInfoDefault);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoFan extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .container-speed_list,\n        .container-direction,\n        .container-oscillating {\n          display: none;\n        }\n\n        .has-speed_list .container-speed_list,\n        .has-direction .container-direction,\n        .has-oscillating .container-oscillating {\n          display: block;\n        }\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-speed_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.fan.speed')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.speed]]\"\n              on-selected-changed=\"speedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <div class=\"container-oscillating\">\n          <div class=\"center horizontal layout single-row\">\n            <div class=\"flex\">[[localize('ui.card.fan.oscillate')]]</div>\n            <paper-toggle-button\n              checked=\"[[oscillationToggleChecked]]\"\n              on-change=\"oscillationToggleChanged\"\n            >\n            </paper-toggle-button>\n          </div>\n        </div>\n\n        <div class=\"container-direction\">\n          <div class=\"direction\">\n            <div>[[localize('ui.card.fan.direction')]]</div>\n            <paper-icon-button\n              icon=\"hass:rotate-left\"\n              on-click=\"onDirectionLeft\"\n              title=\"Left\"\n              disabled=\"[[computeIsRotatingLeft(stateObj)]]\"\n            ></paper-icon-button>\n            <paper-icon-button\n              icon=\"hass:rotate-right\"\n              on-click=\"onDirectionRight\"\n              title=\"Right\"\n              disabled=\"[[computeIsRotatingRight(stateObj)]]\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"speed,speed_list,oscillating,direction\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      oscillationToggleChecked: {\n        type: Boolean,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        oscillationToggleChecked: newVal.attributes.oscillating,\n      });\n    }\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-fan \" +\n      attributeClassNames(stateObj, [\"oscillating\", \"speed_list\", \"direction\"])\n    );\n  }\n\n  speedChanged(ev) {\n    var oldVal = this.stateObj.attributes.speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      speed: newVal,\n    });\n  }\n\n  oscillationToggleChanged(ev) {\n    var oldVal = this.stateObj.attributes.oscillating;\n    var newVal = ev.target.checked;\n\n    if (oldVal === newVal) return;\n\n    this.hass.callService(\"fan\", \"oscillate\", {\n      entity_id: this.stateObj.entity_id,\n      oscillating: newVal,\n    });\n  }\n\n  onDirectionLeft() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"reverse\",\n    });\n  }\n\n  onDirectionRight() {\n    this.hass.callService(\"fan\", \"set_direction\", {\n      entity_id: this.stateObj.entity_id,\n      direction: \"forward\",\n    });\n  }\n\n  computeIsRotatingLeft(stateObj) {\n    return stateObj.attributes.direction === \"reverse\";\n  }\n\n  computeIsRotatingRight(stateObj) {\n    return stateObj.attributes.direction === \"forward\";\n  }\n}\n\ncustomElements.define(\"more-info-fan\", MoreInfoFan);\n","import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../state-summary/state-card-content\";\n\nimport computeStateDomain from \"../../../common/entity/compute_state_domain\";\nimport dynamicContentUpdater from \"../../../common/dom/dynamic_content_updater\";\n\nclass MoreInfoGroup extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .child-card {\n          margin-bottom: 8px;\n        }\n\n        .child-card:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n\n      <div id=\"groupedControlDetails\"></div>\n      <template is=\"dom-repeat\" items=\"[[states]]\" as=\"state\">\n        <div class=\"child-card\">\n          <state-card-content\n            state-obj=\"[[state]]\"\n            hass=\"[[hass]]\"\n          ></state-card-content>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n\n      states: {\n        type: Array,\n        computed: \"computeStates(stateObj, hass)\",\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"statesChanged(stateObj, states)\"];\n  }\n\n  computeStates(stateObj, hass) {\n    var states = [];\n    var entIds = stateObj.attributes.entity_id || [];\n\n    for (var i = 0; i < entIds.length; i++) {\n      var state = hass.states[entIds[i]];\n\n      if (state) {\n        states.push(state);\n      }\n    }\n\n    return states;\n  }\n\n  statesChanged(stateObj, states) {\n    let groupDomainStateObj = false;\n    let groupDomain = false;\n\n    if (states && states.length > 0) {\n      const baseStateObj = states.find((s) => s.state === \"on\") || states[0];\n      groupDomain = computeStateDomain(baseStateObj);\n\n      // Groups need to be filtered out or we'll show content of\n      // first child above the children of the current group\n      if (groupDomain !== \"group\") {\n        groupDomainStateObj = Object.assign({}, baseStateObj, {\n          entity_id: stateObj.entity_id,\n          attributes: Object.assign({}, baseStateObj.attributes),\n        });\n\n        for (let i = 0; i < states.length; i++) {\n          if (groupDomain !== computeStateDomain(states[i])) {\n            groupDomainStateObj = false;\n            break;\n          }\n        }\n      }\n    }\n\n    if (!groupDomainStateObj) {\n      const el = dom(this.$.groupedControlDetails);\n      if (el.lastChild) {\n        el.removeChild(el.lastChild);\n      }\n    } else {\n      dynamicContentUpdater(\n        this.$.groupedControlDetails,\n        \"MORE-INFO-\" + groupDomain.toUpperCase(),\n        { stateObj: groupDomainStateObj, hass: this.hass }\n      );\n    }\n  }\n}\n\ncustomElements.define(\"more-info-group\", MoreInfoGroup);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../cards/ha-history_graph-card\";\nimport \"../../../components/ha-attributes\";\n\nclass MoreInfoHistoryGraph extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          margin-bottom: 6px;\n        }\n      </style>\n      <ha-history_graph-card\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"\"\n      >\n        <ha-attributes state-obj=\"[[stateObj]]\"></ha-attributes>\n      </ha-history_graph-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n}\ncustomElements.define(\"more-info-history_graph\", MoreInfoHistoryGraph);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"@vaadin/vaadin-date-picker/vaadin-date-picker\";\n\nimport \"../../../components/ha-relative-time\";\nimport \"../../../components/paper-time-input\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\n\nclass DatetimeInput extends PolymerElement {\n  static get template() {\n    return html`\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <template is=\"dom-if\" if=\"[[doesHaveDate(stateObj)]]\" restamp=\"\">\n          <div>\n            <vaadin-date-picker\n              id=\"dateInput\"\n              on-value-changed=\"dateTimeChanged\"\n              label=\"Date\"\n              value=\"{{selectedDate}}\"\n            ></vaadin-date-picker>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[doesHaveTime(stateObj)]]\" restamp=\"\">\n          <div>\n            <paper-time-input\n              hour=\"{{selectedHour}}\"\n              min=\"{{selectedMinute}}\"\n              format=\"24\"\n            ></paper-time-input>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.is_ready = false;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      selectedDate: {\n        type: String,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedHour: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n\n      selectedMinute: {\n        type: Number,\n        observer: \"dateTimeChanged\",\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.is_ready = true;\n  }\n\n  /* Convert the date in the stateObj into a string useable by vaadin-date-picker */\n  getDateString(stateObj) {\n    if (stateObj.state === \"unknown\") {\n      return \"\";\n    }\n    var monthFiller;\n    if (stateObj.attributes.month < 10) {\n      monthFiller = \"0\";\n    } else {\n      monthFiller = \"\";\n    }\n\n    var dayFiller;\n    if (stateObj.attributes.day < 10) {\n      dayFiller = \"0\";\n    } else {\n      dayFiller = \"\";\n    }\n\n    return (\n      stateObj.attributes.year +\n      \"-\" +\n      monthFiller +\n      stateObj.attributes.month +\n      \"-\" +\n      dayFiller +\n      stateObj.attributes.day\n    );\n  }\n\n  /* Should fire when any value was changed *by the user*, not b/c of setting\n   * initial values. */\n  dateTimeChanged() {\n    // Check if the change is really coming from the user\n    if (!this.is_ready) {\n      return;\n    }\n\n    let changed = false;\n    let minuteFiller;\n\n    const serviceData = {\n      entity_id: this.stateObj.entity_id,\n    };\n\n    if (this.stateObj.attributes.has_time) {\n      changed |=\n        parseInt(this.selectedMinute) !== this.stateObj.attributes.minute;\n      changed |= parseInt(this.selectedHour) !== this.stateObj.attributes.hour;\n      if (this.selectedMinute < 10) {\n        minuteFiller = \"0\";\n      } else {\n        minuteFiller = \"\";\n      }\n      var timeStr =\n        this.selectedHour + \":\" + minuteFiller + this.selectedMinute;\n      serviceData.time = timeStr;\n    }\n\n    if (this.stateObj.attributes.has_date) {\n      if (this.selectedDate.length === 0) {\n        return; // Date was not set\n      }\n\n      const dateValInput = new Date(this.selectedDate);\n      const dateValState = new Date(\n        this.stateObj.attributes.year,\n        this.stateObj.attributes.month - 1,\n        this.stateObj.attributes.day\n      );\n\n      changed |= dateValState !== dateValInput;\n\n      serviceData.date = this.selectedDate;\n    }\n\n    if (changed) {\n      this.hass.callService(\"input_datetime\", \"set_datetime\", serviceData);\n    }\n  }\n\n  stateObjChanged(newVal) {\n    // Set to non-ready s.t. dateTimeChanged does not fire\n    this.is_ready = false;\n\n    if (newVal.attributes.has_time) {\n      this.selectedHour = newVal.attributes.hour;\n      this.selectedMinute = newVal.attributes.minute;\n    }\n\n    if (newVal.attributes.has_date) {\n      this.selectedDate = this.getDateString(newVal);\n    }\n\n    this.is_ready = true;\n  }\n\n  doesHaveDate(stateObj) {\n    return stateObj.attributes.has_date;\n  }\n\n  doesHaveTime(stateObj) {\n    return stateObj.attributes.has_time;\n  }\n\n  computeClassNames(stateObj) {\n    return (\n      \"more-info-input_datetime \" +\n      attributeClassNames(stateObj, [\"has_time\", \"has_date\"])\n    );\n  }\n}\n\ncustomElements.define(\"more-info-input_datetime\", DatetimeInput);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-color-picker\";\nimport \"../../../components/ha-labeled-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nconst FEATURE_CLASS_NAMES = {\n  1: \"has-brightness\",\n  2: \"has-color_temp\",\n  4: \"has-effect_list\",\n  16: \"has-color\",\n  128: \"has-white_value\",\n};\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoLight extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        .effect_list,\n        .brightness,\n        .color_temp,\n        .white_value {\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .color_temp {\n          --ha-slider-background: -webkit-linear-gradient(\n            right,\n            rgb(255, 160, 0) 0%,\n            white 50%,\n            rgb(166, 209, 255) 100%\n          );\n          /* The color temp minimum value shouldn't be rendered differently. It's not \"off\". */\n          --paper-slider-knob-start-border-color: var(--primary-color);\n        }\n\n        .segmentationContainer {\n          position: relative;\n          width: 100%;\n        }\n\n        ha-color-picker {\n          display: block;\n          width: 100%;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          padding: 0px;\n          max-height: 0px;\n          width: 23px;\n          height: 23px;\n          opacity: var(--dark-secondary-opacity);\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-color.is-on .segmentationContainer .segmentationButton {\n          position: absolute;\n          top: 11%;\n          transform: translate(0%, 0%);\n          width: 23px;\n          height: 23px;\n          padding: 0px;\n          opacity: var(--dark-secondary-opacity);\n        }\n\n        .has-effect_list.is-on .effect_list,\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          max-height: 84px;\n        }\n\n        .has-brightness .has-color_temp.is-on,\n        .has-white_value.is-on {\n          margin-top: -16px;\n        }\n\n        .has-brightness .brightness,\n        .has-color_temp.is-on .color_temp,\n        .has-white_value.is-on .white_value {\n          padding-top: 16px;\n        }\n\n        .has-color.is-on .segmentationButton {\n          max-height: 100px;\n          overflow: visible;\n        }\n\n        .has-color.is-on ha-color-picker {\n          max-height: 500px;\n          overflow: visible;\n          --ha-color-picker-wheel-borderwidth: 5;\n          --ha-color-picker-wheel-bordercolor: white;\n          --ha-color-picker-wheel-shadow: none;\n          --ha-color-picker-marker-borderwidth: 2;\n          --ha-color-picker-marker-bordercolor: white;\n        }\n\n        .is-unavailable .control {\n          max-height: 0px;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"control brightness\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.brightness')]]\"\n            icon=\"hass:brightness-5\"\n            min=\"1\"\n            max=\"255\"\n            value=\"{{brightnessSliderValue}}\"\n            on-change=\"brightnessSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control color_temp\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.color_temperature')]]\"\n            icon=\"hass:thermometer\"\n            min=\"[[stateObj.attributes.min_mireds]]\"\n            max=\"[[stateObj.attributes.max_mireds]]\"\n            value=\"{{ctSliderValue}}\"\n            on-change=\"ctSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n\n        <div class=\"control white_value\">\n          <ha-labeled-slider\n            caption=\"[[localize('ui.card.light.white_value')]]\"\n            icon=\"hass:file-word-box\"\n            max=\"255\"\n            value=\"{{wvSliderValue}}\"\n            on-change=\"wvSliderChanged\"\n          ></ha-labeled-slider>\n        </div>\n        <div class=\"segmentationContainer\">\n          <ha-color-picker\n            class=\"control color\"\n            on-colorselected=\"colorPicked\"\n            desired-hs-color=\"{{colorPickerColor}}\"\n            throttle=\"500\"\n            hue-segments=\"{{hueSegments}}\"\n            saturation-segments=\"{{saturationSegments}}\"\n          >\n          </ha-color-picker>\n          <paper-icon-button\n            icon=\"mdi:palette\"\n            on-click=\"segmentClick\"\n            class=\"control segmentationButton\"\n          ></paper-icon-button>\n        </div>\n\n        <div class=\"control effect_list\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"[[localize('ui.card.light.effect')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.effect]]\"\n              on-selected-changed=\"effectChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.effect_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n\n        <ha-attributes\n          state-obj=\"[[stateObj]]\"\n          extra-filters=\"brightness,color_temp,white_value,effect_list,effect,hs_color,rgb_color,xy_color,min_mireds,max_mireds\"\n        ></ha-attributes>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      brightnessSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      ctSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      wvSliderValue: {\n        type: Number,\n        value: 0,\n      },\n\n      hueSegments: {\n        type: Number,\n        value: 24,\n      },\n\n      saturationSegments: {\n        type: Number,\n        value: 8,\n      },\n\n      colorPickerColor: {\n        type: Object,\n      },\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    const props = {\n      brightnessSliderValue: 0,\n    };\n\n    if (newVal && newVal.state === \"on\") {\n      props.brightnessSliderValue = newVal.attributes.brightness;\n      props.ctSliderValue = newVal.attributes.color_temp;\n      props.wvSliderValue = newVal.attributes.white_value;\n      if (newVal.attributes.hs_color) {\n        props.colorPickerColor = {\n          h: newVal.attributes.hs_color[0],\n          s: newVal.attributes.hs_color[1] / 100,\n        };\n      }\n    }\n\n    this.setProperties(props);\n\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    const classes = [featureClassNames(stateObj, FEATURE_CLASS_NAMES)];\n    if (stateObj && stateObj.state === \"on\") {\n      classes.push(\"is-on\");\n    }\n    if (stateObj && stateObj.state === \"unavailable\") {\n      classes.push(\"is-unavailable\");\n    }\n    return classes.join(\" \");\n  }\n\n  effectChanged(ev) {\n    var oldVal = this.stateObj.attributes.effect;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      effect: newVal,\n    });\n  }\n\n  brightnessSliderChanged(ev) {\n    var bri = parseInt(ev.target.value, 10);\n\n    if (isNaN(bri)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      brightness: bri,\n    });\n  }\n\n  ctSliderChanged(ev) {\n    var ct = parseInt(ev.target.value, 10);\n\n    if (isNaN(ct)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      color_temp: ct,\n    });\n  }\n\n  wvSliderChanged(ev) {\n    var wv = parseInt(ev.target.value, 10);\n\n    if (isNaN(wv)) return;\n\n    this.hass.callService(\"light\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n      white_value: wv,\n    });\n  }\n\n  segmentClick() {\n    if (this.hueSegments === 24 && this.saturationSegments === 8) {\n      this.setProperties({ hueSegments: 0, saturationSegments: 0 });\n    } else {\n      this.setProperties({ hueSegments: 24, saturationSegments: 8 });\n    }\n  }\n\n  serviceChangeColor(hass, entityId, color) {\n    hass.callService(\"light\", \"turn_on\", {\n      entity_id: entityId,\n      hs_color: [color.h, color.s * 100],\n    });\n  }\n\n  /**\n   * Called when a new color has been picked.\n   * should be throttled with the 'throttle=' attribute of the color picker\n   */\n  colorPicked(ev) {\n    this.serviceChangeColor(this.hass, this.stateObj.entity_id, ev.detail.hs);\n  }\n}\n\ncustomElements.define(\"more-info-light\", MoreInfoLight);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoLock extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-input {\n          display: inline-block;\n        }\n      </style>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.code_format]]\">\n        <paper-input\n          label=\"[[localize('ui.card.lock.code')]]\"\n          value=\"{{enteredCode}}\"\n          pattern=\"[[stateObj.attributes.code_format]]\"\n          type=\"password\"\n        ></paper-input>\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"unlock\"\n          hidden$=\"[[!isLocked]]\"\n          >[[localize('ui.card.lock.unlock')]]</mwc-button\n        >\n        <mwc-button\n          on-click=\"callService\"\n          data-service=\"lock\"\n          hidden$=\"[[isLocked]]\"\n          >[[localize('ui.card.lock.lock')]]</mwc-button\n        >\n      </template>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"code_format\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      enteredCode: {\n        type: String,\n        value: \"\",\n      },\n      isLocked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal) {\n    if (newVal) {\n      this.isLocked = newVal.state === \"locked\";\n    }\n  }\n\n  callService(ev) {\n    const service = ev.target.getAttribute(\"data-service\");\n    const data = {\n      entity_id: this.stateObj.entity_id,\n      code: this.enteredCode,\n    };\n    this.hass.callService(\"lock\", service, data);\n  }\n}\n\ncustomElements.define(\"more-info-lock\", MoreInfoLock);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport HassMediaPlayerEntity from \"../../../util/hass-media-player-model\";\n\nimport attributeClassNames from \"../../../common/entity/attribute_class_names\";\nimport isComponentLoaded from \"../../../common/config/is_component_loaded\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport { computeRTLDirection } from \"../../../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass MoreInfoMediaPlayer extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .media-state {\n          text-transform: capitalize;\n        }\n\n        paper-icon-button[highlight] {\n          color: var(--accent-color);\n        }\n\n        .volume {\n          margin-bottom: 8px;\n\n          max-height: 0px;\n          overflow: hidden;\n          transition: max-height 0.5s ease-in;\n        }\n\n        .has-volume_level .volume {\n          max-height: 40px;\n        }\n\n        iron-icon.source-input {\n          padding: 7px;\n          margin-top: 15px;\n        }\n\n        ha-paper-dropdown-menu.source-input {\n          margin-left: 10px;\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"layout horizontal\">\n          <div class=\"flex\">\n            <paper-icon-button\n              icon=\"hass:power\"\n              highlight$=\"[[playerObj.isOff]]\"\n              on-click=\"handleTogglePower\"\n              hidden$=\"[[computeHidePowerButton(playerObj)]]\"\n            ></paper-icon-button>\n          </div>\n          <div>\n            <template\n              is=\"dom-if\"\n              if=\"[[computeShowPlaybackControls(playerObj)]]\"\n            >\n              <paper-icon-button\n                icon=\"hass:skip-previous\"\n                on-click=\"handlePrevious\"\n                hidden$=\"[[!playerObj.supportsPreviousTrack]]\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"[[computePlaybackControlIcon(playerObj)]]\"\n                on-click=\"handlePlaybackControl\"\n                hidden$=\"[[!computePlaybackControlIcon(playerObj)]]\"\n                highlight=\"\"\n              ></paper-icon-button>\n              <paper-icon-button\n                icon=\"hass:skip-next\"\n                on-click=\"handleNext\"\n                hidden$=\"[[!playerObj.supportsNextTrack]]\"\n              ></paper-icon-button>\n            </template>\n          </div>\n        </div>\n        <!-- VOLUME -->\n        <div\n          class=\"volume_buttons center horizontal layout\"\n          hidden$=\"[[computeHideVolumeButtons(playerObj)]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            icon=\"hass:volume-off\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeDown\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeDown\"\n            on-touchstart=\"handleVolumeDown\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-medium\"\n          ></paper-icon-button>\n          <paper-icon-button\n            id=\"volumeUp\"\n            disabled$=\"[[playerObj.isMuted]]\"\n            on-mousedown=\"handleVolumeUp\"\n            on-touchstart=\"handleVolumeUp\"\n            on-touchend=\"handleVolumeTouchEnd\"\n            icon=\"hass:volume-high\"\n          ></paper-icon-button>\n        </div>\n        <div\n          class=\"volume center horizontal layout\"\n          hidden$=\"[[!playerObj.supportsVolumeSet]]\"\n        >\n          <paper-icon-button\n            on-click=\"handleVolumeTap\"\n            hidden$=\"[[playerObj.supportsVolumeButtons]]\"\n            icon=\"[[computeMuteVolumeIcon(playerObj)]]\"\n          ></paper-icon-button>\n          <ha-paper-slider\n            disabled$=\"[[playerObj.isMuted]]\"\n            min=\"0\"\n            max=\"100\"\n            value=\"[[playerObj.volumeSliderValue]]\"\n            on-change=\"volumeSliderChanged\"\n            class=\"flex\"\n            ignore-bar-touch=\"\"\n            dir=\"{{rtl}}\"\n          >\n          </ha-paper-slider>\n        </div>\n        <!-- SOURCE PICKER -->\n        <div\n          class=\"controls layout horizontal justified\"\n          hidden$=\"[[computeHideSelectSource(playerObj)]]\"\n        >\n          <iron-icon class=\"source-input\" icon=\"hass:login-variant\"></iron-icon>\n          <ha-paper-dropdown-menu\n            class=\"flex source-input\"\n            dynamic-align=\"\"\n            label-float=\"\"\n            label=\"[[localize('ui.card.media_player.source')]]\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              attr-for-selected=\"item-name\"\n              selected=\"[[playerObj.source]]\"\n              on-selected-changed=\"handleSourceChanged\"\n            >\n              <template is=\"dom-repeat\" items=\"[[playerObj.sourceList]]\">\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n        </div>\n        <!-- SOUND MODE PICKER -->\n        <template is=\"dom-if\" if=\"[[!computeHideSelectSoundMode(playerObj)]]\">\n          <div class=\"controls layout horizontal justified\">\n            <iron-icon class=\"source-input\" icon=\"hass:music-note\"></iron-icon>\n            <ha-paper-dropdown-menu\n              class=\"flex source-input\"\n              dynamic-align\n              label-float\n              label=\"[[localize('ui.card.media_player.sound_mode')]]\"\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                attr-for-selected=\"item-name\"\n                selected=\"[[playerObj.soundMode]]\"\n                on-selected-changed=\"handleSoundModeChanged\"\n              >\n                <template is=\"dom-repeat\" items=\"[[playerObj.soundModeList]]\">\n                  <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n                </template>\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </template>\n        <!-- TTS -->\n        <div\n          hidden$=\"[[computeHideTTS(ttsLoaded, playerObj)]]\"\n          class=\"layout horizontal end\"\n        >\n          <paper-input\n            id=\"ttsInput\"\n            label=\"[[localize('ui.card.media_player.text_to_speak')]]\"\n            class=\"flex\"\n            value=\"{{ttsMessage}}\"\n            on-keydown=\"ttsCheckForEnter\"\n          ></paper-input>\n          <paper-icon-button\n            icon=\"hass:send\"\n            on-click=\"sendTTS\"\n          ></paper-icon-button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n        observer: \"playerObjChanged\",\n      },\n\n      ttsLoaded: {\n        type: Boolean,\n        computed: \"computeTTSLoaded(hass)\",\n      },\n\n      ttsMessage: {\n        type: String,\n        value: \"\",\n      },\n\n      rtl: {\n        type: String,\n        computed: \"_computeRTLDirection(hass)\",\n      },\n    };\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  playerObjChanged(newVal, oldVal) {\n    if (oldVal) {\n      setTimeout(() => {\n        this.fire(\"iron-resize\");\n      }, 500);\n    }\n  }\n\n  computeClassNames(stateObj) {\n    return attributeClassNames(stateObj, [\"volume_level\"]);\n  }\n\n  computeMuteVolumeIcon(playerObj) {\n    return playerObj.isMuted ? \"hass:volume-off\" : \"hass:volume-high\";\n  }\n\n  computeHideVolumeButtons(playerObj) {\n    return !playerObj.supportsVolumeButtons || playerObj.isOff;\n  }\n\n  computeShowPlaybackControls(playerObj) {\n    return !playerObj.isOff && playerObj.hasMediaControl;\n  }\n\n  computePlaybackControlIcon(playerObj) {\n    if (playerObj.isPlaying) {\n      return playerObj.supportsPause ? \"hass:pause\" : \"hass:stop\";\n    }\n    if (playerObj.hasMediaControl || playerObj.isOff || playerObj.isIdle) {\n      if (\n        playerObj.hasMediaControl &&\n        playerObj.supportsPause &&\n        !playerObj.isPaused\n      ) {\n        return \"hass:play-pause\";\n      }\n      return playerObj.supportsPlay ? \"hass:play\" : null;\n    }\n    return \"\";\n  }\n\n  computeHidePowerButton(playerObj) {\n    return playerObj.isOff\n      ? !playerObj.supportsTurnOn\n      : !playerObj.supportsTurnOff;\n  }\n\n  computeHideSelectSource(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSource ||\n      !playerObj.sourceList\n    );\n  }\n\n  computeHideSelectSoundMode(playerObj) {\n    return (\n      playerObj.isOff ||\n      !playerObj.supportsSelectSoundMode ||\n      !playerObj.soundModeList\n    );\n  }\n\n  computeHideTTS(ttsLoaded, playerObj) {\n    return !ttsLoaded || !playerObj.supportsPlayMedia;\n  }\n\n  computeTTSLoaded(hass) {\n    return isComponentLoaded(hass, \"tts\");\n  }\n\n  handleTogglePower() {\n    this.playerObj.togglePower();\n  }\n\n  handlePrevious() {\n    this.playerObj.previousTrack();\n  }\n\n  handlePlaybackControl() {\n    this.playerObj.mediaPlayPause();\n  }\n\n  handleNext() {\n    this.playerObj.nextTrack();\n  }\n\n  handleSourceChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.source;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSource(newVal);\n  }\n\n  handleSoundModeChanged(ev) {\n    if (!this.playerObj) return;\n\n    var oldVal = this.playerObj.soundMode;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.playerObj.selectSoundMode(newVal);\n  }\n\n  handleVolumeTap() {\n    if (!this.playerObj.supportsVolumeMute) {\n      return;\n    }\n    this.playerObj.volumeMute(!this.playerObj.isMuted);\n  }\n\n  handleVolumeTouchEnd(ev) {\n    /* when touch ends, we must prevent this from\n     * becoming a mousedown, up, click by emulation */\n    ev.preventDefault();\n  }\n\n  handleVolumeUp() {\n    const obj = this.$.volumeUp;\n    this.handleVolumeWorker(\"volume_up\", obj, true);\n  }\n\n  handleVolumeDown() {\n    const obj = this.$.volumeDown;\n    this.handleVolumeWorker(\"volume_down\", obj, true);\n  }\n\n  handleVolumeWorker(service, obj, force) {\n    if (force || (obj !== undefined && obj.pointerDown)) {\n      this.playerObj.callService(service);\n      setTimeout(() => this.handleVolumeWorker(service, obj, false), 500);\n    }\n  }\n\n  volumeSliderChanged(ev) {\n    const volPercentage = parseFloat(ev.target.value);\n    const volume = volPercentage > 0 ? volPercentage / 100 : 0;\n    this.playerObj.setVolume(volume);\n  }\n\n  ttsCheckForEnter(ev) {\n    if (ev.keyCode === 13) this.sendTTS();\n  }\n\n  sendTTS() {\n    const services = this.hass.services.tts;\n    const serviceKeys = Object.keys(services).sort();\n    let service;\n    let i;\n\n    for (i = 0; i < serviceKeys.length; i++) {\n      if (serviceKeys[i].indexOf(\"_say\") !== -1) {\n        service = serviceKeys[i];\n        break;\n      }\n    }\n\n    if (!service) {\n      return;\n    }\n\n    this.hass.callService(\"tts\", service, {\n      entity_id: this.stateObj.entity_id,\n      message: this.ttsMessage,\n    });\n    this.ttsMessage = \"\";\n    this.$.ttsInput.focus();\n  }\n\n  _computeRTLDirection(hass) {\n    return computeRTLDirection(hass);\n  }\n}\n\ncustomElements.define(\"more-info-media_player\", MoreInfoMediaPlayer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoScript extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <div class=\"layout vertical\">\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            [[localize('ui.dialogs.more_info_control.script.last_action')]]\n          </div>\n          <div class=\"value\">[[stateObj.attributes.last_action]]</div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n}\n\ncustomElements.define(\"more-info-script\", MoreInfoScript);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-relative-time\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport formatTime from \"../../../common/datetime/format_time\";\n\nclass MoreInfoSun extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <template\n        is=\"dom-repeat\"\n        items=\"[[computeOrder(risingDate, settingDate)]]\"\n      >\n        <div class=\"data-entry layout justified horizontal\">\n          <div class=\"key\">\n            <span>[[itemCaption(item)]]</span>\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime-obj=\"[[itemDate(item)]]\"\n            ></ha-relative-time>\n          </div>\n          <div class=\"value\">[[itemValue(item)]]</div>\n        </div>\n      </template>\n      <div class=\"data-entry layout justified horizontal\">\n        <div class=\"key\">\n          [[localize('ui.dialogs.more_info_control.sun.elevation')]]\n        </div>\n        <div class=\"value\">[[stateObj.attributes.elevation]]</div>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      risingDate: {\n        type: Object,\n        computed: \"computeRising(stateObj)\",\n      },\n\n      settingDate: {\n        type: Object,\n        computed: \"computeSetting(stateObj)\",\n      },\n    };\n  }\n\n  computeRising(stateObj) {\n    return new Date(stateObj.attributes.next_rising);\n  }\n\n  computeSetting(stateObj) {\n    return new Date(stateObj.attributes.next_setting);\n  }\n\n  computeOrder(risingDate, settingDate) {\n    return risingDate > settingDate ? [\"set\", \"ris\"] : [\"ris\", \"set\"];\n  }\n\n  itemCaption(type) {\n    if (type === \"ris\") {\n      return this.localize(\"ui.dialogs.more_info_control.sun.rising\");\n    }\n    return this.localize(\"ui.dialogs.more_info_control.sun.setting\");\n  }\n\n  itemDate(type) {\n    return type === \"ris\" ? this.risingDate : this.settingDate;\n  }\n\n  itemValue(type) {\n    return formatTime(this.itemDate(type), this.hass.language);\n  }\n}\n\ncustomElements.define(\"more-info-sun\", MoreInfoSun);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\nclass MoreInfoUpdater extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .link {\n          color: #03a9f4;\n        }\n      </style>\n\n      <div>\n        <a\n          class=\"link\"\n          href=\"https://www.home-assistant.io/docs/installation/updating/\"\n          target=\"_blank\"\n          >[[localize('ui.dialogs.more_info_control.updater.title')]]</a\n        >\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  computeReleaseNotes(stateObj) {\n    return (\n      stateObj.attributes.release_notes ||\n      \"https://www.home-assistant.io/docs/installation/updating/\"\n    );\n  }\n}\n\ncustomElements.define(\"more-info-updater\", MoreInfoUpdater);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/ha-paper-dropdown-menu\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nclass MoreInfoVacuum extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        .status-subtitle {\n          color: var(--secondary-text-color);\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        <div hidden$=\"[[!supportsStatus(stateObj)]]\">\n          <span class=\"status-subtitle\">Status: </span\n          ><span><strong>[[stateObj.attributes.status]]</strong></span>\n        </div>\n        <div hidden$=\"[[!supportsBattery(stateObj)]]\">\n          <span\n            ><iron-icon icon=\"[[stateObj.attributes.battery_icon]]\"></iron-icon>\n            [[stateObj.attributes.battery_level]] %</span\n          >\n        </div>\n      </div>\n      <div hidden$=\"[[!supportsCommandBar(stateObj)]]\">\n        <p></p>\n        <div class=\"status-subtitle\">Vacuum cleaner commands:</div>\n        <div class=\"horizontal justified layout\">\n          <template is=\"dom-if\" if=\"[[supportsStart(stateObj)]]\">\n            <div>\n              <paper-icon-button\n                icon=\"hass:play\"\n                on-click=\"onStart\"\n                title=\"Start\"\n              ></paper-icon-button>\n            </div>\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:pause\"\n                on-click=\"onPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!supportsStart(stateObj)]]\">\n            <div hidden$=\"[[!supportsPause(stateObj)]]\">\n              <paper-icon-button\n                icon=\"hass:play-pause\"\n                on-click=\"onPlayPause\"\n                title=\"Pause\"\n              ></paper-icon-button>\n            </div>\n          </template>\n\n          <div hidden$=\"[[!supportsStop(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:stop\"\n              on-click=\"onStop\"\n              title=\"Stop\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsCleanSpot(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:broom\"\n              on-click=\"onCleanSpot\"\n              title=\"Clean spot\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsLocate(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:map-marker\"\n              on-click=\"onLocate\"\n              title=\"Locate\"\n            ></paper-icon-button>\n          </div>\n          <div hidden$=\"[[!supportsReturnHome(stateObj)]]\">\n            <paper-icon-button\n              icon=\"hass:home-map-marker\"\n              on-click=\"onReturnHome\"\n              title=\"Return home\"\n            ></paper-icon-button>\n          </div>\n        </div>\n      </div>\n\n      <div hidden$=\"[[!supportsFanSpeed(stateObj)]]\">\n        <div class=\"horizontal justified layout\">\n          <ha-paper-dropdown-menu\n            label-float=\"\"\n            dynamic-align=\"\"\n            label=\"Fan speed\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"[[stateObj.attributes.fan_speed]]\"\n              on-selected-changed=\"fanSpeedChanged\"\n              attr-for-selected=\"item-name\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[stateObj.attributes.fan_speed_list]]\"\n              >\n                <paper-item item-name$=\"[[item]]\">[[item]]</paper-item>\n              </template>\n            </paper-listbox>\n          </ha-paper-dropdown-menu>\n          <div\n            style=\"justify-content: center; align-self: center; padding-top: 1.3em\"\n          >\n            <span\n              ><iron-icon icon=\"hass:fan\"></iron-icon>\n              [[stateObj.attributes.fan_speed]]</span\n            >\n          </div>\n        </div>\n        <p></p>\n      </div>\n      <ha-attributes\n        state-obj=\"[[stateObj]]\"\n        extra-filters=\"fan_speed,fan_speed_list,status,battery_level,battery_icon\"\n      ></ha-attributes>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n\n      stateObj: {\n        type: Object,\n      },\n    };\n  }\n\n  supportsPause(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  supportsStop(stateObj) {\n    return supportsFeature(stateObj, 8);\n  }\n\n  supportsReturnHome(stateObj) {\n    return supportsFeature(stateObj, 16);\n  }\n\n  supportsFanSpeed(stateObj) {\n    return supportsFeature(stateObj, 32);\n  }\n\n  supportsBattery(stateObj) {\n    return supportsFeature(stateObj, 64);\n  }\n\n  supportsStatus(stateObj) {\n    return supportsFeature(stateObj, 128);\n  }\n\n  supportsLocate(stateObj) {\n    return supportsFeature(stateObj, 512);\n  }\n\n  supportsCleanSpot(stateObj) {\n    return supportsFeature(stateObj, 1024);\n  }\n\n  supportsStart(stateObj) {\n    return supportsFeature(stateObj, 8192);\n  }\n\n  supportsCommandBar(stateObj) {\n    return (\n      supportsFeature(stateObj, 4) |\n      supportsFeature(stateObj, 8) |\n      supportsFeature(stateObj, 16) |\n      supportsFeature(stateObj, 512) |\n      supportsFeature(stateObj, 1024) |\n      supportsFeature(stateObj, 8192)\n    );\n  }\n\n  fanSpeedChanged(ev) {\n    var oldVal = this.stateObj.attributes.fan_speed;\n    var newVal = ev.detail.value;\n\n    if (!newVal || oldVal === newVal) return;\n\n    this.hass.callService(\"vacuum\", \"set_fan_speed\", {\n      entity_id: this.stateObj.entity_id,\n      fan_speed: newVal,\n    });\n  }\n\n  onStop() {\n    this.hass.callService(\"vacuum\", \"stop\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPlayPause() {\n    this.hass.callService(\"vacuum\", \"start_pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onPause() {\n    this.hass.callService(\"vacuum\", \"pause\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onStart() {\n    this.hass.callService(\"vacuum\", \"start\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onLocate() {\n    this.hass.callService(\"vacuum\", \"locate\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onCleanSpot() {\n    this.hass.callService(\"vacuum\", \"clean_spot\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  onReturnHome() {\n    this.hass.callService(\"vacuum\", \"return_to_base\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\n\ncustomElements.define(\"more-info-vacuum\", MoreInfoVacuum);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-toggle-button/paper-toggle-button\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-water_heater-control\";\nimport \"../../../components/ha-paper-slider\";\nimport \"../../../components/ha-paper-dropdown-menu\";\n\nimport featureClassNames from \"../../../common/entity/feature_class_names\";\nimport { supportsFeature } from \"../../../common/entity/supports-feature\";\n\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWaterHeater extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex\"></style>\n      <style>\n        :host {\n          color: var(--primary-text-color);\n        }\n\n        .container-away_mode,\n        .container-temperature,\n        .container-operation_list,\n\n        .has-away_mode .container-away_mode,\n        .has-target_temperature .container-temperature,\n        .has-operation_mode .container-operation_list,\n\n        .container-operation_list iron-icon,\n\n        ha-paper-dropdown-menu {\n          width: 100%;\n        }\n\n        paper-item {\n          cursor: pointer;\n        }\n\n        ha-paper-slider {\n          width: 100%;\n        }\n\n        ha-water_heater-control.range-control-left,\n        ha-water_heater-control.range-control-right {\n          float: left;\n          width: 46%;\n        }\n        ha-water_heater-control.range-control-left {\n          margin-right: 4%;\n        }\n        ha-water_heater-control.range-control-right {\n          margin-left: 4%;\n        }\n\n        .single-row {\n          padding: 8px 0;\n        }\n        }\n      </style>\n\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        <div class=\"container-temperature\">\n          <div class$=\"[[stateObj.attributes.operation_mode]]\">\n            <div hidden$=\"[[!supportsTemperatureControls(stateObj)]]\">\n              [[localize('ui.card.water_heater.target_temperature')]]\n            </div>\n            <template is=\"dom-if\" if=\"[[supportsTemperature(stateObj)]]\">\n              <ha-water_heater-control\n                value=\"[[stateObj.attributes.temperature]]\"\n                units=\"[[hass.config.unit_system.temperature]]\"\n                step=\"[[computeTemperatureStepSize(hass, stateObj)]]\"\n                min=\"[[stateObj.attributes.min_temp]]\"\n                max=\"[[stateObj.attributes.max_temp]]\"\n                on-change=\"targetTemperatureChanged\"\n              >\n              </ha-water_heater-control>\n            </template>\n          </div>\n        </div>\n\n        <template is=\"dom-if\" if=\"[[supportsOperationMode(stateObj)]]\">\n          <div class=\"container-operation_list\">\n            <div class=\"controls\">\n              <ha-paper-dropdown-menu\n                label-float=\"\"\n                dynamic-align=\"\"\n                label=\"[[localize('ui.card.water_heater.operation')]]\"\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  selected=\"[[stateObj.attributes.operation_mode]]\"\n                  attr-for-selected=\"item-name\"\n                  on-selected-changed=\"handleOperationmodeChanged\"\n                >\n                  <template\n                    is=\"dom-repeat\"\n                    items=\"[[stateObj.attributes.operation_list]]\"\n                  >\n                    <paper-item item-name$=\"[[item]]\"\n                      >[[_localizeOperationMode(localize, item)]]</paper-item\n                    >\n                  </template>\n                </paper-listbox>\n              </ha-paper-dropdown-menu>\n            </div>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[supportsAwayMode(stateObj)]]\">\n          <div class=\"container-away_mode\">\n            <div class=\"center horizontal layout single-row\">\n              <div class=\"flex\">\n                [[localize('ui.card.water_heater.away_mode')]]\n              </div>\n              <paper-toggle-button\n                checked=\"[[awayToggleChecked]]\"\n                on-change=\"awayToggleChanged\"\n              >\n              </paper-toggle-button>\n            </div>\n          </div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n\n      awayToggleChecked: Boolean,\n    };\n  }\n\n  stateObjChanged(newVal, oldVal) {\n    if (newVal) {\n      this.setProperties({\n        awayToggleChecked: newVal.attributes.away_mode === \"on\",\n      });\n    }\n\n    if (oldVal) {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => {\n          this.fire(\"iron-resize\");\n        }\n      );\n    }\n  }\n\n  computeTemperatureStepSize(hass, stateObj) {\n    if (stateObj.attributes.target_temp_step) {\n      return stateObj.attributes.target_temp_step;\n    }\n    if (hass.config.unit_system.temperature.indexOf(\"F\") !== -1) {\n      return 1;\n    }\n    return 0.5;\n  }\n\n  supportsTemperatureControls(stateObj) {\n    return this.supportsTemperature(stateObj);\n  }\n\n  supportsTemperature(stateObj) {\n    return (\n      supportsFeature(stateObj, 1) &&\n      typeof stateObj.attributes.temperature === \"number\"\n    );\n  }\n\n  supportsOperationMode(stateObj) {\n    return supportsFeature(stateObj, 2);\n  }\n\n  supportsAwayMode(stateObj) {\n    return supportsFeature(stateObj, 4);\n  }\n\n  computeClassNames(stateObj) {\n    const _featureClassNames = {\n      1: \"has-target_temperature\",\n      2: \"has-operation_mode\",\n      4: \"has-away_mode\",\n    };\n\n    var classes = [featureClassNames(stateObj, _featureClassNames)];\n\n    classes.push(\"more-info-water_heater\");\n\n    return classes.join(\" \");\n  }\n\n  targetTemperatureChanged(ev) {\n    const temperature = ev.target.value;\n    if (temperature === this.stateObj.attributes.temperature) return;\n    this.callServiceHelper(\"set_temperature\", { temperature: temperature });\n  }\n\n  awayToggleChanged(ev) {\n    const oldVal = this.stateObj.attributes.away_mode === \"on\";\n    const newVal = ev.target.checked;\n    if (oldVal === newVal) return;\n    this.callServiceHelper(\"set_away_mode\", { away_mode: newVal });\n  }\n\n  handleOperationmodeChanged(ev) {\n    const oldVal = this.stateObj.attributes.operation_mode;\n    const newVal = ev.detail.value;\n    if (!newVal || oldVal === newVal) return;\n    this.callServiceHelper(\"set_operation_mode\", {\n      operation_mode: newVal,\n    });\n  }\n\n  callServiceHelper(service, data) {\n    // We call stateChanged after a successful call to re-sync the inputs\n    // with the state. It will be out of sync if our service call did not\n    // result in the entity to be turned on. Since the state is not changing,\n    // the resync is not called automatic.\n    /* eslint-disable no-param-reassign */\n    data.entity_id = this.stateObj.entity_id;\n    /* eslint-enable no-param-reassign */\n    this.hass.callService(\"water_heater\", service, data).then(() => {\n      this.stateObjChanged(this.stateObj);\n    });\n  }\n\n  _localizeOperationMode(localize, mode) {\n    return localize(`state.water_heater.${mode}`) || mode;\n  }\n}\n\ncustomElements.define(\"more-info-water_heater\", MoreInfoWaterHeater);\n","import \"@polymer/iron-icon/iron-icon\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoWeather extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        iron-icon {\n          color: var(--paper-item-icon-color);\n        }\n        .section {\n          margin: 16px 0 8px 0;\n          font-size: 1.2em;\n        }\n\n        .flex {\n          display: flex;\n          height: 32px;\n          align-items: center;\n        }\n\n        .main {\n          flex: 1;\n          margin-left: 24px;\n        }\n\n        .temp,\n        .templow {\n          min-width: 48px;\n          text-align: right;\n        }\n\n        .templow {\n          margin: 0 16px;\n          color: var(--secondary-text-color);\n        }\n\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: center;\n        }\n      </style>\n\n      <div class=\"flex\">\n        <iron-icon icon=\"hass:thermometer\"></iron-icon>\n        <div class=\"main\">\n          [[localize('ui.card.weather.attributes.temperature')]]\n        </div>\n        <div>\n          [[stateObj.attributes.temperature]] [[getUnit('temperature')]]\n        </div>\n      </div>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.pressure)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:gauge\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.air_pressure')]]\n          </div>\n          <div>\n            [[stateObj.attributes.pressure]] [[getUnit('air_pressure')]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.humidity)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:water-percent\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.humidity')]]\n          </div>\n          <div>[[stateObj.attributes.humidity]] %</div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.wind_speed)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:weather-windy\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.wind_speed')]]\n          </div>\n          <div>\n            [[getWind(stateObj.attributes.wind_speed,\n            stateObj.attributes.wind_bearing, localize)]]\n          </div>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[_showValue(stateObj.attributes.visibility)]]\">\n        <div class=\"flex\">\n          <iron-icon icon=\"hass:eye\"></iron-icon>\n          <div class=\"main\">\n            [[localize('ui.card.weather.attributes.visibility')]]\n          </div>\n          <div>[[stateObj.attributes.visibility]] [[getUnit('length')]]</div>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.forecast]]\">\n        <div class=\"section\">[[localize('ui.card.weather.forecast')]]:</div>\n        <template is=\"dom-repeat\" items=\"[[stateObj.attributes.forecast]]\">\n          <div class=\"flex\">\n            <template is=\"dom-if\" if=\"[[_showValue(item.condition)]]\">\n              <iron-icon icon=\"[[getWeatherIcon(item.condition)]]\"></iron-icon>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDateTime(item.datetime)]]</div>\n            </template>\n            <template is=\"dom-if\" if=\"[[_showValue(item.templow)]]\">\n              <div class=\"main\">[[computeDate(item.datetime)]]</div>\n              <div class=\"templow\">\n                [[item.templow]] [[getUnit('temperature')]]\n              </div>\n            </template>\n            <div class=\"temp\">\n              [[item.temperature]] [[getUnit('temperature')]]\n            </div>\n          </div>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"stateObj.attributes.attribution\">\n        <div class=\"attribution\">[[stateObj.attributes.attribution]]</div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this.cardinalDirections = [\n      \"N\",\n      \"NNE\",\n      \"NE\",\n      \"ENE\",\n      \"E\",\n      \"ESE\",\n      \"SE\",\n      \"SSE\",\n      \"S\",\n      \"SSW\",\n      \"SW\",\n      \"WSW\",\n      \"W\",\n      \"WNW\",\n      \"NW\",\n      \"NNW\",\n      \"N\",\n    ];\n    this.weatherIcons = {\n      \"clear-night\": \"hass:weather-night\",\n      cloudy: \"hass:weather-cloudy\",\n      fog: \"hass:weather-fog\",\n      hail: \"hass:weather-hail\",\n      lightning: \"hass:weather-lightning\",\n      \"lightning-rainy\": \"hass:weather-lightning-rainy\",\n      partlycloudy: \"hass:weather-partlycloudy\",\n      pouring: \"hass:weather-pouring\",\n      rainy: \"hass:weather-rainy\",\n      snowy: \"hass:weather-snowy\",\n      \"snowy-rainy\": \"hass:weather-snowy-rainy\",\n      sunny: \"hass:weather-sunny\",\n      windy: \"hass:weather-windy\",\n      \"windy-variant\": \"hass:weather-windy-variant\",\n    };\n  }\n\n  computeDate(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  }\n\n  computeDateTime(data) {\n    const date = new Date(data);\n    return date.toLocaleDateString(this.hass.language, {\n      weekday: \"long\",\n      hour: \"numeric\",\n    });\n  }\n\n  getUnit(measure) {\n    const lengthUnit = this.hass.config.unit_system.length || \"\";\n    switch (measure) {\n      case \"air_pressure\":\n        return lengthUnit === \"km\" ? \"hPa\" : \"inHg\";\n      case \"length\":\n        return lengthUnit;\n      case \"precipitation\":\n        return lengthUnit === \"km\" ? \"mm\" : \"in\";\n      default:\n        return this.hass.config.unit_system[measure] || \"\";\n    }\n  }\n\n  windBearingToText(degree) {\n    const degreenum = parseInt(degree);\n    if (isFinite(degreenum)) {\n      return this.cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n    }\n    return degree;\n  }\n\n  getWind(speed, bearing, localize) {\n    if (bearing != null) {\n      const cardinalDirection = this.windBearingToText(bearing);\n      return `${speed} ${this.getUnit(\"length\")}/h (${localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection})`;\n    }\n    return `${speed} ${this.getUnit(\"length\")}/h`;\n  }\n\n  getWeatherIcon(condition) {\n    return this.weatherIcons[condition];\n  }\n\n  _showValue(item) {\n    return typeof item !== \"undefined\" && item !== null;\n  }\n}\n\ncustomElements.define(\"more-info-weather\", MoreInfoWeather);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/state-history-charts\";\nimport \"../../data/ha-state-history-data\";\nimport \"../../resources/ha-style\";\nimport \"../../state-summary/state-card-content\";\n\nimport \"./controls/more-info-content\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeStateDomain from \"../../common/entity/compute_state_domain\";\nimport isComponentLoaded from \"../../common/config/is_component_loaded\";\nimport { DOMAINS_MORE_INFO_NO_HISTORY } from \"../../common/const\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\n\nconst DOMAINS_NO_INFO = [\"camera\", \"configurator\", \"history_graph\"];\n/*\n * @appliesMixin EventsMixin\n */\nclass MoreInfoControls extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog\">\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        state-card-content {\n          display: block;\n          padding: 16px;\n        }\n\n        state-history-charts {\n          max-width: 100%;\n          margin-bottom: 16px;\n        }\n\n        @media all and (min-width: 451px) and (min-height: 501px) {\n          .main-title {\n            pointer-events: auto;\n            cursor: default;\n          }\n        }\n\n        paper-dialog-scrollable {\n          padding-bottom: 16px;\n        }\n\n        :host([domain=\"camera\"]) paper-dialog-scrollable {\n          margin: 0 -24px -21px;\n        }\n\n        :host([rtl]) app-toolbar {\n          direction: rtl;\n          text-align: right;\n        }\n      </style>\n\n      <app-toolbar>\n        <paper-icon-button\n          icon=\"hass:close\"\n          dialog-dismiss=\"\"\n        ></paper-icon-button>\n        <div class=\"main-title\" main-title=\"\" on-click=\"enlarge\">\n          [[_computeStateName(stateObj)]]\n        </div>\n        <template is=\"dom-if\" if=\"[[canConfigure]]\">\n          <paper-icon-button\n            icon=\"hass:settings\"\n            on-click=\"_gotoSettings\"\n          ></paper-icon-button>\n        </template>\n      </app-toolbar>\n\n      <template is=\"dom-if\" if=\"[[_computeShowStateInfo(stateObj)]]\" restamp=\"\">\n        <state-card-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n          in-dialog=\"\"\n        ></state-card-content>\n      </template>\n      <paper-dialog-scrollable dialog-element=\"[[dialogElement]]\">\n        <template\n          is=\"dom-if\"\n          if=\"[[_computeShowHistoryComponent(hass, stateObj)]]\"\n          restamp=\"\"\n        >\n          <ha-state-history-data\n            hass=\"[[hass]]\"\n            filter-type=\"recent-entity\"\n            entity-id=\"[[stateObj.entity_id]]\"\n            data=\"{{_stateHistory}}\"\n            is-loading=\"{{_stateHistoryLoading}}\"\n            cache-config=\"[[_cacheConfig]]\"\n          ></ha-state-history-data>\n          <state-history-charts\n            hass=\"[[hass]]\"\n            history-data=\"[[_stateHistory]]\"\n            is-loading-data=\"[[_stateHistoryLoading]]\"\n            up-to-now\n          ></state-history-charts>\n        </template>\n        <more-info-content\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n        ></more-info-content>\n      </paper-dialog-scrollable>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n\n      dialogElement: Object,\n      canConfigure: Boolean,\n\n      domain: {\n        type: String,\n        reflectToAttribute: true,\n        computed: \"_computeDomain(stateObj)\",\n      },\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n\n      large: {\n        type: Boolean,\n        value: false,\n        notify: true,\n      },\n\n      _cacheConfig: {\n        type: Object,\n        value: {\n          refresh: 60,\n          cacheKey: null,\n          hoursToShow: 24,\n        },\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  enlarge() {\n    this.large = !this.large;\n  }\n\n  _computeShowStateInfo(stateObj) {\n    return !stateObj || !DOMAINS_NO_INFO.includes(computeStateDomain(stateObj));\n  }\n\n  _computeShowHistoryComponent(hass, stateObj) {\n    return (\n      hass &&\n      stateObj &&\n      isComponentLoaded(hass, \"history\") &&\n      !DOMAINS_MORE_INFO_NO_HISTORY.includes(computeStateDomain(stateObj))\n    );\n  }\n\n  _computeDomain(stateObj) {\n    return stateObj ? computeStateDomain(stateObj) : \"\";\n  }\n\n  _computeStateName(stateObj) {\n    return stateObj ? computeStateName(stateObj) : \"\";\n  }\n\n  _stateObjChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n\n    if (this._cacheConfig.cacheKey !== `more_info.${newVal.entity_id}`) {\n      this._cacheConfig = Object.assign({}, this._cacheConfig, {\n        cacheKey: `more_info.${newVal.entity_id}`,\n      });\n    }\n  }\n\n  _gotoSettings() {\n    this.fire(\"more-info-page\", { page: \"settings\" });\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"more-info-controls\", MoreInfoControls);\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@material/mwc-button\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nimport computeStateName from \"../../common/entity/compute_state_name\";\nimport computeDomain from \"../../common/entity/compute_domain\";\nimport { updateEntityRegistryEntry } from \"../../data/entity_registry\";\n\nimport \"../../components/ha-paper-icon-button-arrow-prev\";\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass MoreInfoSettings extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        app-toolbar {\n          color: var(--more-info-header-color);\n          background-color: var(--more-info-header-background);\n\n          /* to fit save button */\n          padding-right: 0;\n        }\n\n        app-toolbar [main-title] {\n          @apply --ha-more-info-app-toolbar-title;\n        }\n\n        app-toolbar mwc-button {\n          font-size: 0.8em;\n          margin: 0;\n        }\n\n        .form {\n          padding: 0 24px 24px;\n        }\n      </style>\n\n      <app-toolbar>\n        <ha-paper-icon-button-arrow-prev\n          on-click=\"_backTapped\"\n        ></ha-paper-icon-button-arrow-prev>\n        <div main-title=\"\">[[_computeStateName(stateObj)]]</div>\n        <mwc-button on-click=\"_save\" disabled=\"[[_computeInvalid(_entityId)]]\"\n          >[[localize('ui.dialogs.more_info_settings.save')]]</mwc-button\n        >\n      </app-toolbar>\n\n      <div class=\"form\">\n        <paper-input\n          value=\"{{_name}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.name')]]\"\n        ></paper-input>\n        <paper-input\n          value=\"{{_entityId}}\"\n          label=\"[[localize('ui.dialogs.more_info_settings.entity_id')]]\"\n          error-message=\"Domain needs to stay the same\"\n          invalid=\"[[_computeInvalid(_entityId)]]\"\n        ></paper-input>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n\n      registryInfo: {\n        type: Object,\n        observer: \"_registryInfoChanged\",\n        notify: true,\n      },\n\n      _name: String,\n      _entityId: String,\n    };\n  }\n\n  _computeStateName(stateObj) {\n    if (!stateObj) return \"\";\n    return computeStateName(stateObj);\n  }\n\n  _computeInvalid(entityId) {\n    return computeDomain(this.stateObj.entity_id) !== computeDomain(entityId);\n  }\n\n  _registryInfoChanged(newVal) {\n    if (newVal) {\n      this.setProperties({\n        _name: newVal.name,\n        _entityId: newVal.entity_id,\n      });\n    } else {\n      this.setProperties({\n        _name: \"\",\n        _entityId: \"\",\n      });\n    }\n  }\n\n  _backTapped() {\n    this.fire(\"more-info-page\", { page: null });\n  }\n\n  async _save() {\n    try {\n      const info = await updateEntityRegistryEntry(\n        this.hass,\n        this.stateObj.entity_id,\n        {\n          name: this._name,\n          new_entity_id: this._entityId,\n        }\n      );\n\n      this.registryInfo = info;\n\n      // Keep the more info dialog open at the new entity.\n      if (this.stateObj.entity_id !== this._entityId) {\n        this.fire(\"hass-more-info\", { entityId: this._entityId });\n      }\n    } catch (err) {\n      alert(`save failed: ${err.message}`);\n    }\n  }\n}\ncustomElements.define(\"more-info-settings\", MoreInfoSettings);\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\nimport { PaperDialogBehavior } from \"@polymer/paper-dialog-behavior/paper-dialog-behavior\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { EventsMixin } from \"./events-mixin\";\n/**\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin PaperDialogBehavior\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends mixinBehaviors(\n      [EventsMixin, PaperDialogBehavior],\n      superClass\n    ) {\n      static get properties() {\n        return {\n          withBackdrop: {\n            type: Boolean,\n            value: true,\n          },\n        };\n      }\n    }\n);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-climate-state\";\n\nclass StateCardClimate extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        ha-climate-state {\n          margin-left: 16px;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-climate-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n        ></ha-climate-state>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-climate\", StateCardClimate);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardConfigurator extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <mwc-button hidden$=\"[[inDialog]]\"\n          >[[_localizeState(stateObj.state)]]</mwc-button\n        >\n      </div>\n\n      <!-- pre load the image so the dialog is rendered the proper size -->\n      <template is=\"dom-if\" if=\"[[stateObj.attributes.description_image]]\">\n        <img hidden=\"\" src=\"[[stateObj.attributes.description_image]]\" />\n      </template>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  _localizeState(state) {\n    return this.localize(`state.configurator.${state}`);\n  }\n}\ncustomElements.define(\"state-card-configurator\", StateCardConfigurator);\n","import { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./state-card-climate\";\nimport \"./state-card-configurator\";\nimport \"./state-card-cover\";\nimport \"./state-card-display\";\nimport \"./state-card-input_number\";\nimport \"./state-card-input_select\";\nimport \"./state-card-input_text\";\nimport \"./state-card-lock\";\nimport \"./state-card-media_player\";\nimport \"./state-card-scene\";\nimport \"./state-card-script\";\nimport \"./state-card-timer\";\nimport \"./state-card-toggle\";\nimport \"./state-card-vacuum\";\nimport \"./state-card-water_heater\";\nimport \"./state-card-weblink\";\n\nimport stateCardType from \"../common/entity/state_card_type\";\nimport dynamicContentUpdater from \"../common/dom/dynamic_content_updater\";\n\nclass StateCardContent extends PolymerElement {\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\"inputChanged(hass, inDialog, stateObj)\"];\n  }\n\n  inputChanged(hass, inDialog, stateObj) {\n    let stateCard;\n    if (!stateObj || !hass) return;\n    if (stateObj.attributes && \"custom_ui_state_card\" in stateObj.attributes) {\n      stateCard = stateObj.attributes.custom_ui_state_card;\n    } else {\n      stateCard = \"state-card-\" + stateCardType(hass, stateObj);\n    }\n    dynamicContentUpdater(this, stateCard.toUpperCase(), {\n      hass: hass,\n      stateObj: stateObj,\n      inDialog: inDialog,\n    });\n  }\n}\ncustomElements.define(\"state-card-content\", StateCardContent);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-cover-controls\";\nimport \"../components/ha-cover-tilt-controls\";\nimport CoverEntity from \"../util/cover-model\";\n\nclass StateCardCover extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          line-height: 1.5;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <div class=\"horizontal layout\">\n          <ha-cover-controls\n            hidden$=\"[[entityObj.isTiltOnly]]\"\n            hass=\"[[hass]]\"\n            state-obj=\"[[stateObj]]\"\n          ></ha-cover-controls>\n          <ha-cover-tilt-controls\n            hidden$=\"[[!entityObj.isTiltOnly]]\"\n            hass=\"[[hass]]\"\n            state-obj=\"[[stateObj]]\"\n          ></ha-cover-tilt-controls>\n        </div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      entityObj: {\n        type: Object,\n        computed: \"computeEntityObj(hass, stateObj)\",\n      },\n    };\n  }\n\n  computeEntityObj(hass, stateObj) {\n    var entity = new CoverEntity(hass, stateObj);\n    return entity;\n  }\n}\ncustomElements.define(\"state-card-cover\", StateCardCover);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\nimport computeStateDisplay from \"../common/entity/compute_state_display\";\nimport attributeClassNames from \"../common/entity/attribute_class_names\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardDisplay extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --layout-horizontal;\n          @apply --layout-justified;\n          @apply --layout-baseline;\n        }\n\n        :host([rtl]) {\n          direction: rtl;\n          text-align: right;\n        }\n\n        state-info {\n          flex: 1 1 auto;\n          min-width: 0;\n        }\n        .state {\n          @apply --paper-font-body1;\n          color: var(--primary-text-color);\n          margin-left: 16px;\n          text-align: right;\n          max-width: 40%;\n          flex: 0 0 auto;\n        }\n        :host([rtl]) .state {\n          margin-right: 16px;\n          margin-left: 0;\n          text-align: left;\n        }\n\n        .state.has-unit_of_measurement {\n          white-space: nowrap;\n        }\n      </style>\n\n      ${this.stateInfoTemplate}\n      <div class$=\"[[computeClassNames(stateObj)]]\">\n        [[computeStateDisplay(localize, stateObj, language)]]\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  computeStateDisplay(localize, stateObj, language) {\n    return computeStateDisplay(localize, stateObj, language);\n  }\n\n  computeClassNames(stateObj) {\n    const classes = [\n      \"state\",\n      attributeClassNames(stateObj, [\"unit_of_measurement\"]),\n    ];\n    return classes.join(\" \");\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\ncustomElements.define(\"state-card-display\", StateCardDisplay);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { IronResizableBehavior } from \"@polymer/iron-resizable-behavior/iron-resizable-behavior\";\nimport \"@polymer/paper-input/paper-input\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-slider\";\n\nclass StateCardInputNumber extends mixinBehaviors(\n  [IronResizableBehavior],\n  PolymerElement\n) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        ha-slider {\n          margin-left: auto;\n        }\n        .state {\n          @apply --paper-font-body1;\n          color: var(--primary-text-color);\n\n          text-align: right;\n          line-height: 40px;\n        }\n        .sliderstate {\n          min-width: 45px;\n        }\n        ha-slider[hidden] {\n          display: none !important;\n        }\n        paper-input {\n          text-align: right;\n          margin-left: auto;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\" id=\"input_number_card\">\n        ${this.stateInfoTemplate}\n        <ha-slider\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          value=\"{{value}}\"\n          step=\"[[step]]\"\n          hidden=\"[[hiddenslider]]\"\n          pin=\"\"\n          on-change=\"selectedValueChanged\"\n          on-click=\"stopPropagation\"\n          id=\"slider\"\n          ignore-bar-touch=\"\"\n        >\n        </ha-slider>\n        <paper-input\n          no-label-float=\"\"\n          auto-validate=\"\"\n          pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n          step=\"[[step]]\"\n          min=\"[[min]]\"\n          max=\"[[max]]\"\n          value=\"{{value}}\"\n          type=\"number\"\n          on-change=\"selectedValueChanged\"\n          on-click=\"stopPropagation\"\n          hidden=\"[[hiddenbox]]\"\n        >\n        </paper-input>\n        <div class=\"state\" hidden=\"[[hiddenbox]]\">\n          [[stateObj.attributes.unit_of_measurement]]\n        </div>\n        <div\n          id=\"sliderstate\"\n          class=\"state sliderstate\"\n          hidden=\"[[hiddenslider]]\"\n        >\n          [[value]] [[stateObj.attributes.unit_of_measurement]]\n        </div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  ready() {\n    super.ready();\n    if (typeof ResizeObserver === \"function\") {\n      const ro = new ResizeObserver((entries) => {\n        entries.forEach(() => {\n          this.hiddenState();\n        });\n      });\n      ro.observe(this.$.input_number_card);\n    } else {\n      this.addEventListener(\"iron-resize\", this.hiddenState);\n    }\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      hiddenbox: {\n        type: Boolean,\n        value: true,\n      },\n      hiddenslider: {\n        type: Boolean,\n        value: true,\n      },\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      stateObj: {\n        type: Object,\n        observer: \"stateObjectChanged\",\n      },\n      min: {\n        type: Number,\n        value: 0,\n      },\n      max: {\n        type: Number,\n        value: 100,\n      },\n      maxlength: {\n        type: Number,\n        value: 3,\n      },\n      step: Number,\n      value: Number,\n      mode: String,\n    };\n  }\n\n  hiddenState() {\n    if (this.mode !== \"slider\") return;\n    const sliderwidth = this.$.slider.offsetWidth;\n    if (sliderwidth < 100) {\n      this.$.sliderstate.hidden = true;\n    } else if (sliderwidth >= 145) {\n      this.$.sliderstate.hidden = false;\n    }\n  }\n\n  stateObjectChanged(newVal) {\n    const prevMode = this.mode;\n    this.setProperties({\n      min: Number(newVal.attributes.min),\n      max: Number(newVal.attributes.max),\n      step: Number(newVal.attributes.step),\n      value: Number(newVal.state),\n      mode: String(newVal.attributes.mode),\n      maxlength: String(newVal.attributes.max).length,\n      hiddenbox: newVal.attributes.mode !== \"box\",\n      hiddenslider: newVal.attributes.mode !== \"slider\",\n    });\n    if (this.mode === \"slider\" && prevMode !== \"slider\") {\n      this.hiddenState();\n    }\n  }\n\n  selectedValueChanged() {\n    if (this.value === Number(this.stateObj.state)) {\n      return;\n    }\n    this.hass.callService(\"input_number\", \"set_value\", {\n      value: this.value,\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\n\ncustomElements.define(\"state-card-input_number\", StateCardInputNumber);\n","import {\n  LitElement,\n  customElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-item/paper-item\";\n// tslint:disable-next-line: no-duplicate-imports\nimport { PaperItemElement } from \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\n\nimport \"../components/entity/state-badge\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\nimport { HomeAssistant, InputSelectEntity } from \"../types\";\nimport { setInputSelectOption } from \"../data/input-select\";\nimport { PolymerIronSelectEvent } from \"../polymer-types\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\n\n@customElement(\"state-card-input_select\")\nclass StateCardInputSelect extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public stateObj!: InputSelectEntity;\n\n  protected render(): TemplateResult | void {\n    return html`\n      <state-badge .stateObj=${this.stateObj}></state-badge>\n      <paper-dropdown-menu-light\n        .label=${computeStateName(this.stateObj)}\n        .value=\"${this.stateObj.state}\"\n        @iron-select=${this._selectedOptionChanged}\n        @click=${stopPropagation}\n      >\n        <paper-listbox slot=\"dropdown-content\">\n          ${this.stateObj.attributes.options.map(\n            (option) => html`\n              <paper-item>${option}</paper-item>\n            `\n          )}\n        </paper-listbox>\n      </paper-dropdown-menu-light>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    // Update selected after rendering the items or else it won't work in Firefox\n    this.shadowRoot!.querySelector(\n      \"paper-listbox\"\n    )!.selected = this.stateObj.attributes.options.indexOf(this.stateObj.state);\n  }\n\n  private async _selectedOptionChanged(\n    ev: PolymerIronSelectEvent<PaperItemElement>\n  ) {\n    const option = ev.detail.item.innerText.trim();\n    if (option === this.stateObj.state) {\n      return;\n    }\n    await setInputSelectOption(this.hass, this.stateObj.entity_id, option);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n      }\n\n      state-badge {\n        float: left;\n        margin-top: 10px;\n      }\n\n      paper-dropdown-menu-light {\n        display: block;\n        margin-left: 53px;\n      }\n\n      paper-item {\n        cursor: pointer;\n        min-width: 200px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-card-input_select\": StateCardInputSelect;\n  }\n}\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nclass StateCardInputText extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        paper-input {\n          margin-left: 16px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <paper-input\n          no-label-float=\"\"\n          minlength=\"[[stateObj.attributes.min]]\"\n          maxlength=\"[[stateObj.attributes.max]]\"\n          value=\"{{value}}\"\n          auto-validate=\"[[stateObj.attributes.pattern]]\"\n          pattern=\"[[stateObj.attributes.pattern]]\"\n          type=\"[[stateObj.attributes.mode]]\"\n          on-change=\"selectedValueChanged\"\n          on-click=\"stopPropagation\"\n          placeholder=\"(empty value)\"\n        >\n        </paper-input>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n\n      stateObj: {\n        type: Object,\n        observer: \"stateObjectChanged\",\n      },\n\n      pattern: String,\n      value: String,\n    };\n  }\n\n  stateObjectChanged(newVal) {\n    this.value = newVal.state;\n  }\n\n  selectedValueChanged() {\n    if (this.value === this.stateObj.state) {\n      return;\n    }\n    this.hass.callService(\"input_text\", \"set_value\", {\n      value: this.value,\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n\n  stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\n\ncustomElements.define(\"state-card-input_text\", StateCardInputText);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardLock extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <mwc-button\n          on-click=\"_callService\"\n          data-service=\"unlock\"\n          hidden$=\"[[!isLocked]]\"\n          >[[localize('ui.card.lock.unlock')]]</mwc-button\n        >\n        <mwc-button\n          on-click=\"_callService\"\n          data-service=\"lock\"\n          hidden$=\"[[isLocked]]\"\n          >[[localize('ui.card.lock.lock')]]</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"_stateObjChanged\",\n      },\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      isLocked: Boolean,\n    };\n  }\n\n  _stateObjChanged(newVal) {\n    if (newVal) {\n      this.isLocked = newVal.state === \"locked\";\n    }\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const service = ev.target.dataset.service;\n    const data = {\n      entity_id: this.stateObj.entity_id,\n    };\n    this.hass.callService(\"lock\", service, data);\n  }\n}\ncustomElements.define(\"state-card-lock\", StateCardLock);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\nimport HassMediaPlayerEntity from \"../util/hass-media-player-model\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardMediaPlayer extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          line-height: 1.5;\n        }\n\n        .state {\n          @apply --paper-font-common-nowrap;\n          @apply --paper-font-body1;\n          margin-left: 16px;\n          text-align: right;\n        }\n\n        .main-text {\n          @apply --paper-font-common-nowrap;\n          color: var(--primary-text-color);\n          text-transform: capitalize;\n        }\n\n        .main-text[take-height] {\n          line-height: 40px;\n        }\n\n        .secondary-text {\n          @apply --paper-font-common-nowrap;\n          color: var(--secondary-text-color);\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <div class=\"state\">\n          <div class=\"main-text\" take-height$=\"[[!playerObj.secondaryTitle]]\">\n            [[computePrimaryText(localize, playerObj)]]\n          </div>\n          <div class=\"secondary-text\">[[playerObj.secondaryTitle]]</div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n      playerObj: {\n        type: Object,\n        computed: \"computePlayerObj(hass, stateObj)\",\n      },\n    };\n  }\n\n  computePlayerObj(hass, stateObj) {\n    return new HassMediaPlayerEntity(hass, stateObj);\n  }\n\n  computePrimaryText(localize, playerObj) {\n    return (\n      playerObj.primaryTitle ||\n      localize(`state.media_player.${playerObj.stateObj.state}`) ||\n      localize(`state.default.${playerObj.stateObj.state}`) ||\n      playerObj.stateObj.state\n    );\n  }\n}\ncustomElements.define(\"state-card-media_player\", StateCardMediaPlayer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardScene extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <mwc-button on-click=\"activateScene\"\n          >[[localize('ui.card.scene.activate')]]</mwc-button\n        >\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  activateScene(ev) {\n    ev.stopPropagation();\n    this.hass.callService(\"scene\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define(\"state-card-scene\", StateCardScene);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport \"@material/mwc-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/ha-entity-toggle\";\nimport \"../components/entity/state-info\";\n\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass StateCardScript extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        mwc-button {\n          top: 3px;\n          height: 37px;\n          margin-right: -0.57em;\n        }\n\n        ha-entity-toggle {\n          margin-left: 16px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <template is=\"dom-if\" if=\"[[stateObj.attributes.can_cancel]]\">\n          <ha-entity-toggle\n            state-obj=\"[[stateObj]]\"\n            hass=\"[[hass]]\"\n          ></ha-entity-toggle>\n        </template>\n        <template is=\"dom-if\" if=\"[[!stateObj.attributes.can_cancel]]\">\n          <mwc-button on-click=\"fireScript\"\n            >[[localize('ui.card.script.execute')]]</mwc-button\n          >\n        </template>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  fireScript(ev) {\n    ev.stopPropagation();\n    this.hass.callService(\"script\", \"turn_on\", {\n      entity_id: this.stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define(\"state-card-script\", StateCardScript);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\n\nimport timerTimeRemaining from \"../common/entity/timer_time_remaining\";\nimport secondsToDuration from \"../common/datetime/seconds_to_duration\";\n\nclass StateCardTimer extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        .state {\n          @apply --paper-font-body1;\n          color: var(--primary-text-color);\n\n          margin-left: 16px;\n          text-align: right;\n          line-height: 40px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <div class=\"state\">[[_secondsToDuration(timeRemaining)]]</div>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: \"stateObjChanged\",\n      },\n      timeRemaining: Number,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.startInterval(this.stateObj);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.clearInterval();\n  }\n\n  stateObjChanged(stateObj) {\n    this.startInterval(stateObj);\n  }\n\n  clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = null;\n    }\n  }\n\n  startInterval(stateObj) {\n    this.clearInterval();\n    this.calculateRemaining(stateObj);\n\n    if (stateObj.state === \"active\") {\n      this._updateRemaining = setInterval(\n        () => this.calculateRemaining(this.stateObj),\n        1000\n      );\n    }\n  }\n\n  calculateRemaining(stateObj) {\n    this.timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  _secondsToDuration(time) {\n    return secondsToDuration(time);\n  }\n}\ncustomElements.define(\"state-card-timer\", StateCardTimer);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/ha-entity-toggle\";\nimport \"../components/entity/state-info\";\n\nclass StateCardToggle extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        ha-entity-toggle {\n          margin: -4px -16px -4px 0;\n          padding: 4px 16px;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-entity-toggle\n          state-obj=\"[[stateObj]]\"\n          hass=\"[[hass]]\"\n        ></ha-entity-toggle>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-toggle\", StateCardToggle);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-vacuum-state\";\n\nclass StateCardVacuum extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-vacuum-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n        ></ha-vacuum-state>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-vacuum\", StateCardVacuum);\n","import \"@polymer/iron-flex-layout/iron-flex-layout-classes\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-info\";\nimport \"../components/ha-water_heater-state\";\n\nclass StateCardWaterHeater extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\"></style>\n      <style>\n        :host {\n          @apply --paper-font-body1;\n          line-height: 1.5;\n        }\n\n        ha-water_heater-state {\n          margin-left: 16px;\n          text-align: right;\n        }\n      </style>\n\n      <div class=\"horizontal justified layout\">\n        ${this.stateInfoTemplate}\n        <ha-water_heater-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[stateObj]]\"\n        ></ha-water_heater-state>\n      </div>\n    `;\n  }\n\n  static get stateInfoTemplate() {\n    return html`\n      <state-info\n        hass=\"[[hass]]\"\n        state-obj=\"[[stateObj]]\"\n        in-dialog=\"[[inDialog]]\"\n      ></state-info>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n}\ncustomElements.define(\"state-card-water_heater\", StateCardWaterHeater);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../components/entity/state-badge\";\n\nimport computeStateName from \"../common/entity/compute_state_name\";\n\nclass StateCardWeblink extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n        .name {\n          @apply --paper-font-common-nowrap;\n          @apply --paper-font-body1;\n          color: var(--primary-color);\n\n          text-transform: capitalize;\n          line-height: 40px;\n          margin-left: 16px;\n        }\n      </style>\n\n      ${this.stateBadgeTemplate}\n      <a href$=\"[[stateObj.state]]\" target=\"_blank\" class=\"name\" id=\"link\"\n        >[[_computeStateName(stateObj)]]</a\n      >\n    `;\n  }\n\n  static get stateBadgeTemplate() {\n    return html`\n      <state-badge state-obj=\"[[stateObj]]\"></state-badge>\n    `;\n  }\n\n  static get properties() {\n    return {\n      stateObj: Object,\n      inDialog: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.onTap(ev));\n  }\n\n  _computeStateName(stateObj) {\n    return computeStateName(stateObj);\n  }\n\n  onTap(ev) {\n    ev.stopPropagation();\n    ev.preventDefault();\n    window.open(this.stateObj.state, \"_blank\");\n  }\n}\ncustomElements.define(\"state-card-weblink\", StateCardWeblink);\n","const hassAttributeUtil = {};\n\nhassAttributeUtil.DOMAIN_DEVICE_CLASS = {\n  binary_sensor: [\n    \"battery\",\n    \"cold\",\n    \"connectivity\",\n    \"door\",\n    \"garage_door\",\n    \"gas\",\n    \"heat\",\n    \"light\",\n    \"lock\",\n    \"moisture\",\n    \"motion\",\n    \"moving\",\n    \"occupancy\",\n    \"opening\",\n    \"plug\",\n    \"power\",\n    \"presence\",\n    \"problem\",\n    \"safety\",\n    \"smoke\",\n    \"sound\",\n    \"vibration\",\n    \"window\",\n  ],\n  cover: [\n    \"awning\",\n    \"blind\",\n    \"curtain\",\n    \"damper\",\n    \"door\",\n    \"garage\",\n    \"shade\",\n    \"shutter\",\n    \"window\",\n  ],\n  sensor: [\n    \"battery\",\n    \"humidity\",\n    \"illuminance\",\n    \"temperature\",\n    \"pressure\",\n    \"power\",\n    \"signal_strength\",\n  ],\n  switch: [\"switch\", \"outlet\"],\n};\n\nhassAttributeUtil.UNKNOWN_TYPE = \"json\";\nhassAttributeUtil.ADD_TYPE = \"key-value\";\n\nhassAttributeUtil.TYPE_TO_TAG = {\n  string: \"ha-customize-string\",\n  json: \"ha-customize-string\",\n  icon: \"ha-customize-icon\",\n  boolean: \"ha-customize-boolean\",\n  array: \"ha-customize-array\",\n  \"key-value\": \"ha-customize-key-value\",\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES || {\n  entity_picture: undefined,\n  friendly_name: { type: \"string\", description: \"Name\" },\n  icon: { type: \"icon\" },\n  emulated_hue: {\n    type: \"boolean\",\n    domains: [\"emulated_hue\"],\n  },\n  emulated_hue_name: {\n    type: \"string\",\n    domains: [\"emulated_hue\"],\n  },\n  haaska_hidden: undefined,\n  haaska_name: undefined,\n  homebridge_hidden: { type: \"boolean\" },\n  homebridge_name: { type: \"string\" },\n  supported_features: undefined,\n  attribution: undefined,\n  custom_ui_more_info: { type: \"string\" },\n  custom_ui_state_card: { type: \"string\" },\n  device_class: {\n    type: \"array\",\n    options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n    description: \"Device class\",\n    domains: [\"binary_sensor\", \"cover\", \"sensor\", \"switch\"],\n  },\n  hidden: { type: \"boolean\", description: \"Hide from UI\" },\n  assumed_state: {\n    type: \"boolean\",\n    domains: [\n      \"switch\",\n      \"light\",\n      \"cover\",\n      \"climate\",\n      \"fan\",\n      \"group\",\n      \"water_heater\",\n    ],\n  },\n  initial_state: {\n    type: \"string\",\n    domains: [\"automation\"],\n  },\n  unit_of_measurement: { type: \"string\" },\n};\n\nexport default hassAttributeUtil;\n"],"sourceRoot":""}