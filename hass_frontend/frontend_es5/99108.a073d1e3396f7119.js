(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["99108"],{96814:function(i,t,e){e(9359),e(31526),i.exports=function i(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(e){!t.hasOwnProperty(e)||null===t[e]||"object"!=typeof t[e]&&"function"!=typeof t[e]||Object.isFrozen(t[e])||i(t[e])})),t}},22958:function(i,t,e){"use strict";e.a(i,(async function(i,a){try{e.r(t),e.d(t,{HuiDialogSuggestCard:()=>O});var s=e(61701),o=(e(71695),e(9359),e(70104),e(40251),e(47021),e(96814)),n=e.n(o),d=e(57243),r=e(50778),c=e(36522),l=(e(64889),e(10571)),h=e(28008),u=e(58885),g=e(80373),v=e(27353),p=e(2593),f=e(11734),_=e(41391),m=i([g,f]);[g,f]=m.then?(await m)():m;let C,y,k,w,b,x,$,S,z,j=i=>i,O=(0,s.Z)([(0,r.Mo)("hui-dialog-suggest-card")],(function(i,t){return{F:class extends t{constructor(...t){super(...t),i(this)}},d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_cardConfig",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_sectionConfig",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_saving",value(){return!1}},{kind:"field",decorators:[(0,r.IO)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"method",key:"showDialog",value:function(i){this._params=i,this._cardConfig=i.cardConfig,this._sectionConfig=i.sectionConfig,Object.isFrozen(this._cardConfig)||(this._cardConfig=n()(this._cardConfig)),Object.isFrozen(this._sectionConfig)||(this._sectionConfig=n()(this._sectionConfig)),this._yamlEditor&&this._yamlEditor.setValue(this._cardConfig)}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._cardConfig=void 0,(0,c.B)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_viewSupportsSection",value:function(){var i,t;if(null===(i=this._params)||void 0===i||!i.lovelaceConfig||null===(t=this._params)||void 0===t||!t.path)return!1;const{viewIndex:e}=(0,p.jb)(this._params.path),a=this._params.lovelaceConfig.views[e];return!(0,l.s)(a)&&"sections"===a.type}},{kind:"method",key:"_renderPreview",value:function(){return this._sectionConfig&&this._viewSupportsSection?(0,d.dy)(C||(C=j` <div class="element-preview"> <hui-section .hass="${0}" .config="${0}" preview></hui-section> </div> `),this.hass,this._sectionConfig):this._cardConfig?(0,d.dy)(y||(y=j` <div class="element-preview"> ${0} </div> `),this._cardConfig.map((i=>(0,d.dy)(k||(k=j` <hui-card .hass="${0}" .config="${0}" preview></hui-card> `),this.hass,i)))):d.Ld}},{kind:"method",key:"render",value:function(){return this._params?(0,d.dy)(w||(w=j` <ha-dialog open scrimClickAction @closed="${0}" .heading="${0}"> <div> ${0} ${0} </div> <mwc-button slot="secondaryAction" @click="${0}" dialogInitialFocus> ${0} </mwc-button> ${0} </ha-dialog> `),this.closeDialog,this.hass.localize("ui.panel.lovelace.editor.suggest_card.header"),this._renderPreview(),this._params.yaml&&this._cardConfig?(0,d.dy)(b||(b=j` <div class="editor"> <ha-yaml-editor .hass="${0}" .defaultValue="${0}"></ha-yaml-editor> </div> `),this.hass,this._cardConfig):d.Ld,this.closeDialog,this._params.yaml?this.hass.localize("ui.common.close"):this.hass.localize("ui.common.cancel"),this._params.yaml?d.Ld:(0,d.dy)(x||(x=j` ${0} <mwc-button slot="primaryAction" .disabled="${0}" @click="${0}"> ${0} </mwc-button> `),this._sectionConfig&&this._viewSupportsSection?d.Ld:(0,d.dy)($||($=j` <mwc-button slot="primaryAction" @click="${0}"> ${0} </mwc-button> `),this._pickCard,this.hass.localize("ui.panel.lovelace.editor.suggest_card.create_own")),this._saving,this._save,this._saving?(0,d.dy)(S||(S=j` <ha-circular-progress indeterminate aria-label="Saving" size="small"></ha-circular-progress> `)):this.hass.localize("ui.panel.lovelace.editor.suggest_card.add"))):d.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return[h.yu,(0,d.iv)(z||(z=j`@media all and (max-width:450px),all and (max-height:500px){ha-dialog{max-height:100%;height:100%}}@media all and (min-width:850px){ha-dialog{width:845px}}ha-dialog{max-width:845px;--dialog-z-index:6}.hidden{display:none}.element-preview{position:relative}hui-card,hui-section{padding-top:8px;margin:4px auto;max-width:390px;display:block;width:100%}.editor{padding-top:16px}`))]}},{kind:"method",key:"_pickCard",value:function(){var i,t,e;null!==(i=this._params)&&void 0!==i&&i.lovelaceConfig&&null!==(t=this._params)&&void 0!==t&&t.path&&null!==(e=this._params)&&void 0!==e&&e.saveConfig&&((0,_.F)(this,{lovelaceConfig:this._params.lovelaceConfig,saveConfig:this._params.saveConfig,path:this._params.path,entities:this._params.entities}),this.closeDialog())}},{kind:"method",key:"_computeNewConfig",value:function(i,t){if(!this._viewSupportsSection)return(0,v.BN)(i,t,this._cardConfig);const{viewIndex:e,sectionIndex:a}=(0,p.jb)(t);if(void 0===a){var s;const t=null!==(s=this._sectionConfig)&&void 0!==s?s:{type:"grid",cards:this._cardConfig};return(0,v.qG)(i,e,t)}const o=this._sectionConfig?this._sectionConfig.cards||[]:this._cardConfig;return(0,v.BN)(i,[e,a],o)}},{kind:"method",key:"_save",value:async function(){var i,t,e;if(!(null!==(i=this._params)&&void 0!==i&&i.lovelaceConfig&&null!==(t=this._params)&&void 0!==t&&t.path&&null!==(e=this._params)&&void 0!==e&&e.saveConfig&&this._cardConfig))return;this._saving=!0;const a=this._computeNewConfig(this._params.lovelaceConfig,this._params.path);await this._params.saveConfig(a),this._saving=!1,(0,u.f)(this,this.hass),this.closeDialog()}}]}}),d.oi);a()}catch(C){a(C)}}))},58885:function(i,t,e){"use strict";e.d(t,{f:()=>s});var a=e(72473);const s=(i,t)=>(0,a.C)(i,{message:t.localize("ui.common.successfully_saved")})}}]);
//# sourceMappingURL=99108.a073d1e3396f7119.js.map