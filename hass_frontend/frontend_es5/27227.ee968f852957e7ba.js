"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["27227"],{19631:function(e,t,i){i.a(e,(async function(e,o){try{i.d(t,{Bt:()=>c,T8:()=>l});i(19083);var r=i(16485),s=i(88977),n=i(20382),a=e([r]);r=(a.then?(await a)():a)[0];const d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],c=e=>e.first_weekday===n.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,s.L)(e.language)%7:d.includes(e.first_weekday)?d.indexOf(e.first_weekday):1,l=e=>{const t=c(e);return d[t]};o()}catch(d){o(d)}}))},12077:function(e,t,i){i.d(t,{K:()=>n,T:()=>a});var o=i(86431),r=i(47194),s=i(12753);const n=(e,t)=>{const i=t.entities[e.entity_id];return i?a(i,t):(0,r.C)(e)},a=(e,t)=>{const i=e.name||("original_name"in e?e.original_name:void 0),n=e.device_id?t.devices[e.device_id]:void 0;if(!n){if(i)return i;const o=t.states[e.entity_id];return o?(0,r.C)(o):void 0}const a=(0,o.jL)(n);if(a!==i)return a&&i&&(0,s.N)(i,a)||i}},12753:function(e,t,i){i.d(t,{N:()=>r});i(71695),i(88044),i(47021);const o=[" ",": "," - "],r=(e,t)=>{const i=e.toLowerCase(),r=t.toLowerCase();for(const n of o){const t=`${r}${n}`;if(i.startsWith(t)){const i=e.substring(t.length);if(i.length)return s(i.substr(0,i.indexOf(" ")))?i:i[0].toUpperCase()+i.slice(1)}}},s=e=>e.toLowerCase()!==e},31064:function(e,t,i){i.d(t,{T:()=>r});i(19134),i(5740);const o=/^(\w+)\.(\w+)$/,r=e=>o.test(e)},87733:function(e,t,i){i.d(t,{f:()=>o});const o=e=>e.charAt(0).toUpperCase()+e.slice(1)},54977:function(e,t,i){var o=i(61701),r=(i(71695),i(47021),i(57243)),s=i(50778);let n,a,d,c=e=>e;(0,o.Z)([(0,s.Mo)("ha-card")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)()],key:"header",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"raised",value(){return!1}},{kind:"field",static:!0,key:"styles",value(){return(0,r.iv)(n||(n=c`:host{background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);box-shadow:var(--ha-card-box-shadow,none);box-sizing:border-box;border-radius:var(--ha-card-border-radius,12px);border-width:var(--ha-card-border-width,1px);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));color:var(--primary-text-color);display:block;transition:all .3s ease-out;position:relative}:host([raised]){border:none;box-shadow:var(--ha-card-box-shadow,0px 2px 1px -1px rgba(0,0,0,.2),0px 1px 1px 0px rgba(0,0,0,.14),0px 1px 3px 0px rgba(0,0,0,.12))}.card-header,:host ::slotted(.card-header){color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, 24px);letter-spacing:-.012em;line-height:48px;padding:12px 16px 16px;display:block;margin-block-start:0px;margin-block-end:0px;font-weight:400}:host ::slotted(.card-content:not(:first-child)),slot:not(:first-child)::slotted(.card-content){padding-top:0px;margin-top:-8px}:host ::slotted(.card-content){padding:16px}:host ::slotted(.card-actions){border-top:1px solid var(--divider-color,#e8e8e8);padding:5px 16px}`))}},{kind:"method",key:"render",value:function(){return(0,r.dy)(a||(a=c` ${0} <slot></slot> `),this.header?(0,r.dy)(d||(d=c`<h1 class="card-header">${0}</h1>`),this.header):r.Ld)}}]}}),r.oi)},47844:function(e,t,i){i.d(t,{T9:()=>k,kU:()=>n,i4:()=>l,sF:()=>r,z9:()=>m,nk:()=>c,Mw:()=>v,Ch:()=>d,Lr:()=>u,jU:()=>a,Xn:()=>g,r:()=>b,B:()=>p,ou:()=>_,zj:()=>y,qW:()=>s});i(19423),i(40251),i(88044),i(71695),i(47021);var o=i(43546);const r=[1,2,3,4,6,8],s=2,n="hls",a="web_rtc",d=(e,t,i)=>`${e}&width=${t}&height=${i}`,c=e=>`/api/camera_proxy_stream/${e.entity_id}?token=${e.attributes.access_token}`,l=async(e,t,i,o)=>{const r=await(async(e,t,i,o,r,...s)=>{let n=o[e];n||(n=o[e]={});const a=n[r];if(a)return a;const d=i(o,r,...s);return n[r]=d,d.then((()=>setTimeout((()=>{n[r]=void 0}),t)),(()=>{n[r]=void 0})),d})("_cameraTmbUrl",9e3,h,e,t);return d(r,i,o)},h=async(e,t)=>{const i=await(0,o.iI)(e,`/api/camera_proxy/${t}`);return e.hassUrl(i.path)},u=async(e,t,i)=>{const o={type:"camera/stream",entity_id:t};i&&(o.format=i);const r=await e.callWS(o);return r.url=e.hassUrl(r.url),r},k=(e,t,i,o)=>e.connection.subscribeMessage(o,{type:"camera/webrtc/offer",entity_id:t,offer:i}),b=(e,t,i,o)=>e.callWS({type:"camera/webrtc/candidate",entity_id:t,session_id:i,candidate:o}),g=(e,t)=>e.callWS({type:"camera/get_prefs",entity_id:t}),v=(e,t,i)=>e.callWS(Object.assign({type:"camera/update_prefs",entity_id:t},i)),f="media-source://camera/",p=e=>e.startsWith(f),y=e=>e.substring(22),_=async(e,t)=>e.callWS({type:"camera/capabilities",entity_id:t}),m=async(e,t)=>e.callWS({type:"camera/webrtc/get_client_config",entity_id:t})},61107:function(e,t,i){i.d(t,{E:()=>s,O:()=>r});i(71695),i(40251),i(47021);var o=i(36522);const r=()=>Promise.all([i.e("46379"),i.e("66031"),i.e("72206"),i.e("97983"),i.e("24199"),i.e("78943"),i.e("42950"),i.e("65505"),i.e("58640"),i.e("42311"),i.e("17283"),i.e("18865"),i.e("27090"),i.e("44959"),i.e("3049"),i.e("72308"),i.e("84958"),i.e("38311"),i.e("17674")]).then(i.bind(i,2711)),s=(e,t)=>{(0,o.B)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:r,dialogParams:t})}},31993:function(e,t,i){i.d(t,{O:()=>r,r:()=>s});i(71695),i(40251),i(47021);var o=i(36522);const r=()=>Promise.all([i.e("24199"),i.e("78943"),i.e("27090"),i.e("84958"),i.e("41501")]).then(i.bind(i,86691)),s=(e,t)=>{(0,o.B)(e,"show-dialog",{dialogTag:"dialog-device-registry-detail",dialogImport:r,dialogParams:t})}},16581:function(e,t,i){i.a(e,(async function(e,t){try{var o=i(61701),r=i(72621),s=(i(52247),i(19083),i(71695),i(92745),i(61495),i(61893),i(9359),i(56475),i(31526),i(52924),i(40251),i(61006),i(47021),i(57243)),n=i(50778),a=i(72344),d=i(59847),c=i(93826),l=i(17170),h=i(25433),u=i(75244),k=i(4242),b=i(82480),g=e([l,b]);[l,b]=g.then?(await g)():g;let v,f,p,y,_,m=e=>e;const w=(e,t)=>new Date(e.getTime()-1e3*t).getTime()/1e3,x=(e,t)=>(void 0!==e||void 0!==t)&&(!e||!t||e.length!==t.length||e.some((e=>!t.includes(e)))||t.some((t=>!e.includes(t))));(0,o.Z)([(0,n.Mo)("ha-logbook")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"time",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"entityIds",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"deviceIds",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,reflect:!0})],key:"virtualize",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"no-icon"})],key:"noIcon",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"no-name"})],key:"noName",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"show-indicator"})],key:"showIndicator",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"relative-time"})],key:"relativeTime",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)({attribute:"show-more-link",type:Boolean})],key:"showMoreLink",value(){return!0}},{kind:"field",decorators:[(0,n.SB)()],key:"_logbookEntries",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_traceContexts",value(){return{}}},{kind:"field",decorators:[(0,n.SB)()],key:"_userIdToName",value(){return{}}},{kind:"field",decorators:[(0,n.SB)()],key:"_error",value:void 0},{kind:"field",key:"_unsubLogbook",value:void 0},{kind:"field",key:"_liveUpdatesEnabled",value(){return!0}},{kind:"field",key:"_pendingStreamMessages",value(){return[]}},{kind:"field",key:"_throttleGetLogbookEntries",value(){return(0,c.P)((()=>this._getLogBookData()),1e3)}},{kind:"method",key:"render",value:function(){return(0,a.p)(this.hass,"logbook")?this._error?(0,s.dy)(v||(v=m`<div class="no-entries"> ${0} </div>`),`${this.hass.localize("ui.components.logbook.retrieval_error")}: ${this._error}`):void 0===this._logbookEntries?(0,s.dy)(f||(f=m` <div class="progress-wrapper"> <ha-spinner></ha-spinner> </div> `)):0===this._logbookEntries.length?(0,s.dy)(p||(p=m`<div class="no-entries"> ${0} </div>`),this.hass.localize("ui.components.logbook.entries_not_found")):(0,s.dy)(y||(y=m` <ha-logbook-renderer .hass="${0}" .narrow="${0}" .virtualize="${0}" .noIcon="${0}" .noName="${0}" .showIndicator="${0}" .relativeTime="${0}" .entries="${0}" .traceContexts="${0}" .userIdToName="${0}" @hass-logbook-live="${0}"></ha-logbook-renderer> `),this.hass,this.narrow,this.virtualize,this.noIcon,this.noName,this.showIndicator,this.relativeTime,this._logbookEntries,this._traceContexts,this._userIdToName,this._handleLogbookLive):s.Ld}},{kind:"method",key:"refresh",value:async function(e=!1){(e||!this._unsubLogbook&&void 0!==this._logbookEntries)&&(this._throttleGetLogbookEntries.cancel(),this._updateTraceContexts.cancel(),this._updateUsers.cancel(),this._unsubscribe(!0),this._liveUpdatesEnabled=!0,e?this._getLogBookData():this._throttleGetLogbookEntries())}},{kind:"method",key:"shouldUpdate",value:function(e){if(1!==e.size||!e.has("hass"))return!0;const t=e.get("hass");return!t||t.localize!==this.hass.localize}},{kind:"method",key:"willUpdate",value:function(e){let t=e.has("time");for(const i of["entityIds","deviceIds"]){if(!e.has(i))continue;const o=e.get(i),r=this[i];if(x(o,r)){t=!0;break}}t&&this.refresh(!0)}},{kind:"method",key:"_handleLogbookLive",value:function(e){e.detail.enable&&!this._liveUpdatesEnabled&&(this._pendingStreamMessages.forEach((e=>this._processStreamMessage(e))),this._pendingStreamMessages=[]),this._liveUpdatesEnabled=e.detail.enable}},{kind:"get",key:"_filterAlwaysEmptyResults",value:function(){const e=this.entityIds,t=this.deviceIds;return Boolean(e||t)&&(!e||0===e.length)&&(!t||0===t.length)}},{kind:"method",key:"_unsubscribe",value:function(e){this._unsubLogbook&&(this._unsubLogbook.then((e=>e())),this._unsubLogbook=void 0,this._logbookEntries=e?void 0:[],this._pendingStreamMessages=[])}},{kind:"method",key:"connectedCallback",value:function(){(0,r.Z)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeLogbookPeriod(this._calculateLogbookPeriod())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,r.Z)(i,"disconnectedCallback",this,3)([]),this._unsubscribe(!0)}},{kind:"method",key:"_calculateLogbookPeriod",value:function(){const e=new Date;if("range"in this.time)return{now:e,startTime:this.time.range[0],endTime:this.time.range[1],purgeBeforePythonTime:void 0};if("recent"in this.time){const t=w(e,this.time.recent);return{now:e,startTime:new Date(1e3*t),endTime:new Date(e.getTime()+31536e6),purgeBeforePythonTime:w(e,this.time.recent)}}throw new Error("Unexpected time specified")}},{kind:"method",key:"_subscribeLogbookPeriod",value:async function(e){if(!this._unsubLogbook)try{this._unsubLogbook=(0,h.Yc)(this.hass,(e=>{this._processOrQueueStreamMessage(e)}),e.startTime.toISOString(),e.endTime.toISOString(),this.entityIds,this.deviceIds),await this._unsubLogbook}catch(t){this._unsubLogbook=void 0,this._error=t}}},{kind:"method",key:"_getLogBookData",value:async function(){var e;if(this._error=void 0,this._filterAlwaysEmptyResults)return void this._unsubscribe(!1);const t=this._calculateLogbookPeriod();t.startTime>t.now?this._unsubscribe(!1):(this._updateUsers(),null!==(e=this.hass.user)&&void 0!==e&&e.is_admin&&this._updateTraceContexts(),this._subscribeLogbookPeriod(t))}},{kind:"field",key:"_nonExpiredRecords",value(){return e=>this._logbookEntries?e?this._logbookEntries.filter((t=>t.when>e)):this._logbookEntries:[]}},{kind:"field",key:"_processOrQueueStreamMessage",value(){return e=>{this._liveUpdatesEnabled?this._processStreamMessage(e):this._pendingStreamMessages.push(e)}}},{kind:"field",key:"_processStreamMessage",value(){return e=>{const t="recent"in this.time?w(new Date,this.time.recent):void 0,i=[...e.events].reverse();if(!this._logbookEntries||!this._logbookEntries.length)return void(this._logbookEntries=i);if(!i.length)return;const o=this._nonExpiredRecords(t);o.length?i[i.length-1].when>o[0].when?this._logbookEntries=i.concat(o):o[o.length-1].when>i[0].when?this._logbookEntries=o.concat(i):this._logbookEntries=o.concat(i).sort(((e,t)=>t.when-e.when)):this._logbookEntries=i}}},{kind:"field",key:"_updateTraceContexts",value(){return(0,c.P)((async()=>{this._traceContexts=await(0,u.U_)(this.hass)}),6e4)}},{kind:"field",key:"_updateUsers",value(){return(0,c.P)((async()=>{var e;const t={},i=(null===(e=this.hass.user)||void 0===e?void 0:e.is_admin)&&(0,k.uh)(this.hass);for(const o of Object.values(this.hass.states))o.attributes.user_id&&"person"===(0,d.N)(o)&&(t[o.attributes.user_id]=o.attributes.friendly_name);if(i){const e=await i;for(const i of e)i.id in t||(t[i.id]=i.name)}this._userIdToName=t}),6e4)}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,s.iv)(_||(_=m`:host{display:block}:host([virtualize]){height:100%}.no-entries{text-align:center;padding:16px;color:var(--secondary-text-color)}.progress-wrapper{display:flex;justify-content:center;height:100%;align-items:center}`))]}}]}}),s.oi);t()}catch(v){t(v)}}))}}]);
//# sourceMappingURL=27227.ee968f852957e7ba.js.map