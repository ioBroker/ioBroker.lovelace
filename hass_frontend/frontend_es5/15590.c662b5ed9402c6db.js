"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["15590"],{17705:function(e,t,s){s.d(t,{Cj:()=>h,F7:()=>n,Hs:()=>g,Kd:()=>C,Kj:()=>f,Nw:()=>m,PA:()=>a,Py:()=>o,Qm:()=>w,Z0:()=>y,_Y:()=>u,_m:()=>d,dL:()=>c,dO:()=>S,hN:()=>_,h_:()=>l,j2:()=>b,q6:()=>p,uR:()=>r});s(19083),s(71695),s(9359),s(52924),s(61006),s(47021);var i=s(47194);let n=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const a=99387==s.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,d=e=>e.sendMessagePromise({type:"recorder/info"}),r=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),o=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),c=(e,t,s,i,n="hour",a,d)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==s?void 0:s.toISOString(),statistic_ids:i,period:n,units:a,types:d}),u=(e,t,s,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar,rolling_window:s.rolling_window}),l=e=>e.callWS({type:"recorder/validate_statistics"}),h=(e,t,s)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:s}),_=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),f=e=>{let t=null;if(!e)return null;for(const s of e)null!==s.change&&void 0!==s.change&&(null===t?t=s.change:t+=s.change);return t},p=(e,t)=>{let s=null;for(const i of t){if(!(i in e))continue;const t=f(e[i]);null!==t&&(null===s?s=t:s+=t)}return s},m=(e,t)=>e.some((e=>void 0!==e[t]&&null!==e[t])),k=["mean","min","max"],v=["sum","state","change"],y=(e,t)=>!(!k.includes(t)||e.mean_type===n.NONE)||!(!v.includes(t)||!e.has_sum),b=(e,t,s,i,n)=>{const a=new Date(s).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:a,adjustment:i,adjustment_unit_of_measurement:n})},C=(e,t,s)=>{const n=e.states[t];return n?(0,i.C)(n):(null==s?void 0:s.name)||t},S=(e,t,s)=>{let i;var n;t&&(i=null===(n=e.states[t])||void 0===n?void 0:n.attributes.unit_of_measurement);return void 0===i?null==s?void 0:s.statistics_unit_of_measurement:i},g=e=>e.includes(":"),w=e=>e.callWS({type:"recorder/update_statistics_issues"})},6736:function(e,t,s){s.d(t,{f:()=>d});var i=s(61701),n=s(72621),a=(s(19083),s(71695),s(9359),s(52924),s(40251),s(61006),s(47021),s(50778));const d=e=>(0,i.Z)(null,(function(e,t){class s extends t{constructor(...t){super(...t),e(this)}}return{F:s,d:[{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)(s,"connectedCallback",this,3)([]),this._checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,n.Z)(s,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(e){if((0,n.Z)(s,"updated",this,3)([e]),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"_checkSubscribed",value:function(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((e=>void 0===this[e]))||(this.__unsubs=this.hassSubscribe())}}]}}),e)},54586:function(e,t,s){s.a(e,(async function(e,i){try{s.r(t),s.d(t,{HuiEnergyCompareCard:()=>b});var n=s(61701),a=(s(71695),s(47021),s(13809)),d=s(96500),r=s(57243),o=s(50778),c=s(46467),u=s(1118),l=s(6736),h=s(93331),_=(s(99426),s(36522)),f=e([c,u]);[c,u]=f.then?(await f)():f;let p,m,k,v,y=e=>e,b=(0,n.Z)([(0,o.Mo)("hui-energy-compare-card")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_start",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_end",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_startCompare",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_endCompare",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean,reflect:!0})],key:"hidden",value(){return!0}},{kind:"field",key:"connectedWhileHidden",value(){return!0}},{kind:"method",key:"getCardSize",value:function(){return 1}},{kind:"method",key:"setConfig",value:function(e){this._config=e}},{kind:"field",key:"hassSubscribeRequiredHostProps",value(){return["_config"]}},{kind:"method",key:"hassSubscribe",value:function(){return[(0,u.UB)(this.hass,{key:this._config.collection_key}).subscribe((e=>this._update(e)))]}},{kind:"method",key:"shouldUpdate",value:function(e){return(0,h.SN)(this,e)||e.size>1||!e.has("hass")}},{kind:"method",key:"render",value:function(){if(!this._startCompare||!this._endCompare)return r.Ld;const e=(0,a.j)(this._endCompare,this._startCompare);return(0,r.dy)(p||(p=y` <ha-alert dismissable @alert-dismissed-clicked="${0}"> ${0} </ha-alert> `),this._stopCompare,this.hass.localize("ui.panel.energy.compare.info",{start:(0,r.dy)(m||(m=y`<b>${0}${0}</b>`),(0,c.p6)(this._start,this.hass.locale,this.hass.config),e>0?` -\n          ${(0,c.p6)(this._end||(0,d.i)(new Date),this.hass.locale,this.hass.config)}`:""),end:(0,r.dy)(k||(k=y`<b>${0}${0}</b>`),(0,c.p6)(this._startCompare,this.hass.locale,this.hass.config),e>0?` -\n          ${(0,c.p6)(this._endCompare,this.hass.locale,this.hass.config)}`:"")}))}},{kind:"method",key:"_update",value:function(e){this._start=e.start,this._end=e.end,this._startCompare=e.startCompare,this._endCompare=e.endCompare;const t=this.hidden;this.hidden=!this._startCompare,t!==this.hidden&&(0,_.B)(this,"card-visibility-changed")}},{kind:"method",key:"_stopCompare",value:function(){const e=(0,u.UB)(this.hass,{key:this._config.collection_key});e.setCompare(!1),e.refresh()}},{kind:"field",static:!0,key:"styles",value(){return(0,r.iv)(v||(v=y`mwc-button{width:max-content}`))}}]}}),(0,l.f)(r.oi));i()}catch(p){i(p)}}))}}]);
//# sourceMappingURL=15590.c662b5ed9402c6db.js.map