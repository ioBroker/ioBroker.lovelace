"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["58258"],{95262:function(t,e,i){function a(t){return null==t||Array.isArray(t)?t:[t]}i.d(e,{r:()=>a})},92636:function(t,e,i){i.d(e,{z:()=>a});i(19083),i(61006);const a=t=>(e,i)=>t.includes(e,i)},50875:function(t,e,i){i.d(e,{Eu:()=>o,hZ:()=>r,o9:()=>c});var a=i(27486),n=i(11259);const s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return s[t%s.length]}function r(t,e){const i=e.getPropertyValue(`--graph-color-${t+1}`)||o(t);return(0,n.Rq)(i)}const c=(0,a.Z)((t=>s.map(((e,i)=>r(i,t)))),((t,e)=>t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1")))},75011:function(t,e,i){i.d(e,{I:()=>n,k:()=>a});i(71695),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(47021);const a=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function n(t){return a.has(t)?`var(--${t}-color)`:t}},97674:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{AH:()=>b,Ai:()=>k,Al:()=>w,vA:()=>p});var n=i(86319),s=i(3938),o=i(6542),r=i(23459),c=i(2621),d=i(7591),l=i(96500),u=i(13809),h=i(32424),f=i(14276),m=i(23711),g=i(35895),_=i(20382),y=t([g]);g=(y.then?(await y)():y)[0];const v=(t,e,i,a)=>{const n=i((0,g.zW)(t,e),a);return n instanceof Date?(0,g.Nm)(n,e):n},b=(t,e,i,a,n)=>i.time_zone===_.c_.server?v(t,a.time_zone,e,n):e(t,n),p=(t,e,i,a,n)=>i.time_zone===_.c_.server?v(t,a.time_zone,e,n):e(t,n),k=(t,e,i,a,n)=>p(t,i,a,n,a.time_zone===_.c_.server?(0,g.zW)(e,n.time_zone):e),w=(t,e,i,a,g)=>{let _,y;if(p(t,n.b,a,g)&&p(e,s.h,a,g)){const n=(k(e,t,o.d,a,g)+1)*(i?1:-1);_=b(t,r.z,a,g,n),y=b(b(e,r.z,a,g,n),c.V,a,g)}else if(p(t,(t=>(0,d.b)(t).getMilliseconds()===t.getMilliseconds()),a,g)&&p(e,(t=>(0,l.i)(t).getMilliseconds()===t.getMilliseconds()),a,g)){const n=(k(e,t,u.j,a,g)+1)*(i?1:-1);_=b(t,h.E,a,g,n),y=b(e,h.E,a,g,n)}else{const n=(k(e,t,f._,a,g)+1)*(i?1:-1);_=b(t,m.n,a,g,n),y=b(e,m.n,a,g,n)}return{start:_,end:y}};a()}catch(v){a(v)}}))},48719:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{p:()=>k});var n=i(7591),s=i(96500),o=i(32424),r=i(29558),c=i(30921),d=i(83204),l=i(2621),u=i(21127),h=i(11735),f=i(80951),m=i(23723),g=i(40228),_=i(62725),y=i(21893),v=i(97674),b=i(19631),p=t([b,v]);[b,v]=p.then?(await p)():p;const k=(t,e)=>{const i=new Date,a=(0,b.Bt)(t.locale);switch(e){case"today":return[(0,v.AH)(i,n.b,t.locale,t.config,{weekStartsOn:a}),(0,v.AH)(i,s.i,t.locale,t.config,{weekStartsOn:a})];case"yesterday":return[(0,v.AH)((0,o.E)(i,-1),n.b,t.locale,t.config,{weekStartsOn:a}),(0,v.AH)((0,o.E)(i,-1),s.i,t.locale,t.config,{weekStartsOn:a})];case"this_week":return[(0,v.AH)(i,r.z,t.locale,t.config,{weekStartsOn:a}),(0,v.AH)(i,c.v,t.locale,t.config,{weekStartsOn:a})];case"this_month":return[(0,v.AH)(i,d.N,t.locale,t.config),(0,v.AH)(i,l.V,t.locale,t.config)];case"this_quarter":return[(0,v.AH)(i,u.x,t.locale,t.config),(0,v.AH)(i,h.x,t.locale,t.config)];case"this_year":return[(0,v.AH)(i,f.e,t.locale,t.config),(0,v.AH)(i,m.w,t.locale,t.config)];case"now-7d":return[(0,v.AH)(i,g.k,t.locale,t.config,7),(0,v.AH)(i,g.k,t.locale,t.config,1)];case"now-30d":return[(0,v.AH)(i,g.k,t.locale,t.config,30),(0,v.AH)(i,g.k,t.locale,t.config,1)];case"now-12m":return[(0,v.AH)((0,_.W)(i,12),d.N,t.locale,t.config),(0,v.AH)((0,_.W)(i,1),l.V,t.locale,t.config)];case"now-1h":return[(0,v.AH)(i,y.b,t.locale,t.config,1),(0,v.AH)(i,y.b,t.locale,t.config,0)];case"now-12h":return[(0,v.AH)(i,y.b,t.locale,t.config,12),(0,v.AH)(i,y.b,t.locale,t.config,0)];case"now-24h":return[(0,v.AH)(i,y.b,t.locale,t.config,24),(0,v.AH)(i,y.b,t.locale,t.config,0)]}return[i,i]};a()}catch(k){a(k)}}))},19631:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{Bt:()=>d,T8:()=>l});i(19083);var n=i(16485),s=i(88977),o=i(20382),r=t([n]);n=(r.then?(await r)():r)[0];const c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=t=>t.first_weekday===o.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(t.language).weekInfo.firstDay%7:(0,s.L)(t.language)%7:c.includes(t.first_weekday)?c.indexOf(t.first_weekday):1,l=t=>{const e=d(t);return c[e]};a()}catch(c){a(c)}}))},46467:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{D_:()=>$,NC:()=>y,Nh:()=>b,U8:()=>S,WB:()=>f,mn:()=>u,p6:()=>d,ud:()=>g,yQ:()=>k});i(63434),i(9359),i(1331),i(96829);var n=i(16485),s=i(27486),o=i(20382),r=i(11104),c=t([n,r]);[n,r]=c.then?(await c)():c;(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)})));const d=(t,e,i)=>l(e,i.time_zone).format(t),l=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),f=(t,e,i)=>{var a,n,s,r;const c=m(e,i.time_zone);if(e.date_format===o.t6.language||e.date_format===o.t6.system)return c.format(t);const d=c.formatToParts(t),l=null===(a=d.find((t=>"literal"===t.type)))||void 0===a?void 0:a.value,u=null===(n=d.find((t=>"day"===t.type)))||void 0===n?void 0:n.value,h=null===(s=d.find((t=>"month"===t.type)))||void 0===s?void 0:s.value,f=null===(r=d.find((t=>"year"===t.type)))||void 0===r?void 0:r.value,g=d.at(d.length-1);let _="literal"===(null==g?void 0:g.type)?null==g?void 0:g.value:"";"bg"===e.language&&e.date_format===o.t6.YMD&&(_="");return{[o.t6.DMY]:`${u}${l}${h}${l}${f}${_}`,[o.t6.MDY]:`${h}${l}${u}${l}${f}${_}`,[o.t6.YMD]:`${f}${l}${h}${l}${u}${_}`}[e.date_format]},m=(0,s.Z)(((t,e)=>{const i=t.date_format===o.t6.system?void 0:t.language;return t.date_format===o.t6.language||(t.date_format,o.t6.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)})})),g=(t,e,i)=>_(e,i.time_zone).format(t),_=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short",timeZone:(0,r.f)(t.time_zone,e)}))),y=(t,e,i)=>v(e,i.time_zone).format(t),v=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),b=(t,e,i)=>p(e,i.time_zone).format(t),p=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",timeZone:(0,r.f)(t.time_zone,e)}))),k=(t,e,i)=>w(e,i.time_zone).format(t),w=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),$=(t,e,i)=>D(e,i.time_zone).format(t),D=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",timeZone:(0,r.f)(t.time_zone,e)}))),S=(t,e,i)=>O(e,i.time_zone).format(t),O=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"short",timeZone:(0,r.f)(t.time_zone,e)})));a()}catch(d){a(d)}}))},64214:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{DG:()=>f,E8:()=>v,Fu:()=>y,NR:()=>p,o0:()=>u,yD:()=>g});var n=i(16485),s=i(27486),o=i(46467),r=i(33570),c=i(11104),d=i(16922),l=t([n,c,o,r]);[n,c,o,r]=l.then?(await l)():l;const u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),f=((0,s.Z)((()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))),(t,e,i)=>m(e,i.time_zone).format(t)),m=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),g=(t,e,i)=>_(e,i.time_zone).format(t),_=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"short",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),y=(t,e,i)=>(new Date).getFullYear()===t.getFullYear()?g(t,e,i):f(t,e,i),v=(t,e,i)=>b(e,i.time_zone).format(t),b=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),p=(t,e,i)=>`${(0,o.WB)(t,e,i)}, ${(0,r.mr)(t,e,i)}`;a()}catch(u){a(u)}}))},54363:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{$k:()=>d,K:()=>f,LU:()=>v,a_:()=>m,h6:()=>u});i(52247),i(95078);var n=i(16485),s=i(27486),o=i(34618),r=t([n]);n=(r.then?(await r)():r)[0];const c=t=>t<10?`0${t}`:t,d=(t,e)=>{const i=e.days||0,a=e.hours||0,n=e.minutes||0,s=e.seconds||0,o=e.milliseconds||0;return i>0?`${Intl.NumberFormat(t.language,{style:"unit",unit:"day",unitDisplay:"long"}).format(i)} ${a}:${c(n)}:${c(s)}`:a>0?`${a}:${c(n)}:${c(s)}`:n>0?`${n}:${c(s)}`:s>0?Intl.NumberFormat(t.language,{style:"unit",unit:"second",unitDisplay:"long"}).format(s):o>0?Intl.NumberFormat(t.language,{style:"unit",unit:"millisecond",unitDisplay:"long"}).format(o):null},l=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"long"}))),u=(t,e)=>l(t).format(e),h=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"digital",hoursDisplay:"auto"}))),f=(t,e)=>h(t).format(e),m=["min","h","d"],g=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"narrow",daysDisplay:"always"}))),_=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"narrow",hoursDisplay:"always"}))),y=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"narrow",minutesDisplay:"always"}))),v=(t,e,i,a)=>{const n=void 0!==a?(0,o.N)(parseFloat(e),a):parseFloat(e);switch(i){case"d":{const e=Math.floor(n),i={days:e,hours:Math.floor(24*(n-e))};return g(t).format(i)}case"h":{const e=Math.floor(n),i={hours:e,minutes:Math.floor(60*(n-e))};return _(t).format(i)}case"min":{const e=Math.floor(n),i={minutes:e,seconds:Math.floor(60*(n-e))};return y(t).format(i)}default:throw new Error("Invalid duration unit")}};a()}catch(c){a(c)}}))},33570:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{Vu:()=>u,Zs:()=>g,mr:()=>d,xO:()=>f});var n=i(16485),s=i(27486),o=i(11104),r=i(16922),c=t([n,o]);[n,o]=c.then?(await c)():c;const d=(t,e,i)=>l(e,i.time_zone).format(t),l=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:(0,o.f)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:(0,r.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:(0,o.f)(t.time_zone,e)}))),f=(t,e,i)=>m(e,i.time_zone).format(t),m=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",hour:(0,r.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:(0,o.f)(t.time_zone,e)}))),g=(t,e,i)=>_(e,i.time_zone).format(t),_=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,o.f)(t.time_zone,e)})));a()}catch(d){a(d)}}))},11104:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{f:()=>h});var n,s,o,r=i(16485),c=i(20382),d=t([r]);r=(d.then?(await d)():d)[0];const l=null===(n=Intl.DateTimeFormat)||void 0===n||null===(s=(o=n.call(Intl)).resolvedOptions)||void 0===s?void 0:s.call(o).timeZone,u=null!=l?l:"UTC",h=(t,e)=>t===c.c_.local&&l?u:e;a()}catch(l){a(l)}}))},16922:function(t,e,i){i.d(e,{y:()=>s});i(19083),i(61006);var a=i(27486),n=i(20382);const s=(0,a.Z)((t=>{if(t.time_format===n.zt.language||t.time_format===n.zt.system){const e=t.time_format===n.zt.language?t.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(e).includes("10")}return t.time_format===n.zt.am_pm}))},49976:function(t,e,i){i.d(e,{U:()=>a});const a=t=>t.stopPropagation()},97547:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{c:()=>g,computeStateDisplay:()=>m});i(19083),i(19423),i(61006);var n=i(96194),s=i(20382),o=i(54363),r=i(46467),c=i(64214),d=i(33570),l=i(50602),u=i(87974),h=i(73850),f=t([o,l,r,d,c]);[o,l,r,d,c]=f.then?(await f)():f;const m=(t,e,i,a,n,s,o)=>{const r=null==s?void 0:s[e.entity_id];return g(t,i,a,n,r,e.entity_id,e.attributes,void 0!==o?o:e.state)},g=(t,e,i,a,f,m,g,_)=>{if(_===n.lz||_===n.nZ)return t(`state.default.${_}`);const y=(0,h.M)(m),v="counter"===y||"number"===y||"input_number"===y;if((0,l.sJ)(g,"sensor"===y?i:[])||v){if("duration"===g.device_class&&g.unit_of_measurement&&o.a_.includes(g.unit_of_measurement))try{return(0,o.LU)(e,_,g.unit_of_measurement,null==f?void 0:f.display_precision)}catch(b){}if("monetary"===g.device_class)try{return(0,l.uf)(_,e,Object.assign({style:"currency",currency:g.unit_of_measurement,minimumFractionDigits:2},(0,l.l4)({state:_,attributes:g},f)))}catch(b){}const i=(0,l.uf)(_,e,(0,l.l4)({state:_,attributes:g},f)),a=(null==f?void 0:f.translation_key)&&t(`component.${f.platform}.entity.${y}.${f.translation_key}.unit_of_measurement`)||g.unit_of_measurement;return a?`${i}${(0,u.L)(a,e)}${a}`:i}if(["date","input_datetime","time"].includes(y))try{const t=_.split(" ");if(2===t.length)return(0,c.o0)(new Date(t.join("T")),Object.assign(Object.assign({},e),{},{time_zone:s.c_.local}),a);if(1===t.length){if(_.includes("-"))return(0,r.p6)(new Date(`${_}T00:00`),Object.assign(Object.assign({},e),{},{time_zone:s.c_.local}),a);if(_.includes(":")){const t=new Date;return(0,d.mr)(new Date(`${t.toISOString().split("T")[0]}T${_}`),Object.assign(Object.assign({},e),{},{time_zone:s.c_.local}),a)}}return _}catch(p){return _}if(["button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word","datetime"].includes(y)||"sensor"===y&&"timestamp"===g.device_class)try{return(0,c.o0)(new Date(_),e,a)}catch(b){return _}return(null==f?void 0:f.translation_key)&&t(`component.${f.platform}.entity.${y}.${f.translation_key}.state.${_}`)||g.device_class&&t(`component.${y}.entity_component.${g.device_class}.state.${_}`)||t(`component.${y}.entity_component._.state.${_}`)||_};a()}catch(m){a(m)}}))},59847:function(t,e,i){i.d(e,{N:()=>n});var a=i(73850);const n=t=>(0,a.M)(t.entity_id)},75278:function(t,e,i){i.d(e,{e:()=>a});const a=(t,e)=>n(t.attributes,e),n=(t,e)=>!!(t.supported_features&e)},31064:function(t,e,i){i.d(e,{T:()=>n});i(19134),i(5740);const a=/^(\w+)\.(\w+)$/,n=t=>a.test(t)},50602:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{SL:()=>c,l4:()=>h,sJ:()=>d,uf:()=>u});var n=i(16485),s=(i(19083),i(19423),i(11740),i(61006),i(20382)),o=i(34618),r=t([n]);n=(r.then?(await r)():r)[0];const c=t=>d(t.attributes),d=(t,e)=>!!t.unit_of_measurement||!!t.state_class||(e||[]).includes(t.device_class||""),l=t=>{switch(t.number_format){case s.y4.comma_decimal:return["en-US","en"];case s.y4.decimal_comma:return["de","es","it"];case s.y4.space_comma:return["fr","sv","cs"];case s.y4.system:return;default:return t.language}},u=(t,e,i)=>{const a=e?l(e):void 0;return Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},(null==e?void 0:e.number_format)===s.y4.none||Number.isNaN(Number(t))?Number.isNaN(Number(t))||""===t||(null==e?void 0:e.number_format)!==s.y4.none?"string"==typeof t?t:`${(0,o.N)(t,null==i?void 0:i.maximumFractionDigits).toString()}${"currency"===(null==i?void 0:i.style)?` ${i.currency}`:""}`:new Intl.NumberFormat("en-US",f(t,Object.assign(Object.assign({},i),{},{useGrouping:!1}))).format(Number(t)):new Intl.NumberFormat(a,f(t,i)).format(Number(t))},h=(t,e)=>{var i;const a=null==e?void 0:e.display_precision;return null!=a?{maximumFractionDigits:a,minimumFractionDigits:a}:Number.isInteger(Number(null==t||null===(i=t.attributes)||void 0===i?void 0:i.step))&&Number.isInteger(Number(null==t?void 0:t.state))?{maximumFractionDigits:0}:void 0},f=(t,e)=>{const i=Object.assign({maximumFractionDigits:2},e);if("string"!=typeof t)return i;if(!e||void 0===e.minimumFractionDigits&&void 0===e.maximumFractionDigits){const e=t.indexOf(".")>-1?t.split(".")[1].length:0;i.minimumFractionDigits=e,i.maximumFractionDigits=e}return i};a()}catch(c){a(c)}}))},34618:function(t,e,i){i.d(e,{N:()=>a});const a=(t,e=2)=>Math.round(t*10**e)/10**e},45061:function(t,e,i){i.d(e,{K:()=>a});const a=t=>{switch(t.language){case"cs":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},87974:function(t,e,i){i.d(e,{L:()=>n});var a=i(45061);const n=(t,e)=>"°"===t?"":e&&"%"===t?(0,a.K)(e):" "},35830:function(t,e,i){i.d(e,{q:()=>a});const a=t=>{const e=window.location.pathname;return t?e+"?"+t:e}},93826:function(t,e,i){i.d(e,{P:()=>a});i(71695),i(47021);const a=(t,e,i=!0,a=!0)=>{let n,s=0;const o=(...o)=>{const r=()=>{s=!1===i?0:Date.now(),n=void 0,t(...o)},c=Date.now();s||!1!==i||(s=c);const d=e-(c-s);d<=0||d>e?(n&&(clearTimeout(n),n=void 0),s=c,t(...o)):n||!1===a||(n=window.setTimeout(r,d))};return o.cancel=()=>{clearTimeout(n),n=void 0,s=0},o}},31428:function(t,e,i){i.d(e,{U:()=>f});i(71695),i(47021);var a=i(50875),n=i(11259),s=i(4643),o=i(73850),r=i(42818),c=i(96194),d=i(76190);const l={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let u=0;const h=new Map;function f(t,e,i){return function(t,e,i){var a;if(!i||t===c.nZ)return(0,d.g)("--history-unavailable-color",e);if(t===c.lz)return(0,d.g)("--history-unknown-color",e);const u=(0,r.tD)(i,t);if(!u)return;const h=(0,d.g)(u,e);if(!h)return;const f=(0,o.M)(i.entity_id),m=null===(a=l[f])||void 0===a?void 0:a[t];return m?(0,n.uO)((0,s.C)((0,n.Rw)((0,n.wK)(h)),m)):h}(t,e,i)||function(t,e){if(h.has(t))return h.get(t);const i=(0,a.hZ)(u,e);return u++,h.set(t,i),i}(t,e)}},34273:function(t,e,i){var a=i(61701),n=i(72621),s=(i(71695),i(9359),i(31526),i(47021),i(22997),i(57243)),o=i(50778),r=i(5111),c=i(76525);let d,l,u=t=>t;(0,a.Z)([(0,o.Mo)("ha-button-menu")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",key:c.gA,value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"corner",value(){return"BOTTOM_START"}},{kind:"field",decorators:[(0,o.Cb)({attribute:"menu-corner"})],key:"menuCorner",value(){return"START"}},{kind:"field",decorators:[(0,o.Cb)({type:Number})],key:"x",value(){return null}},{kind:"field",decorators:[(0,o.Cb)({type:Number})],key:"y",value(){return null}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"multi",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"activatable",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"fixed",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean,attribute:"no-anchor"})],key:"noAnchor",value(){return!1}},{kind:"field",decorators:[(0,o.IO)("mwc-menu",!0)],key:"_menu",value:void 0},{kind:"get",key:"items",value:function(){var t;return null===(t=this._menu)||void 0===t?void 0:t.items}},{kind:"get",key:"selected",value:function(){var t;return null===(t=this._menu)||void 0===t?void 0:t.selected}},{kind:"method",key:"focus",value:function(){var t,e;null!==(t=this._menu)&&void 0!==t&&t.open?this._menu.focusItemAtIndex(0):null===(e=this._triggerButton)||void 0===e||e.focus()}},{kind:"method",key:"render",value:function(){return(0,s.dy)(d||(d=u` <div @click="${0}"> <slot name="trigger" @slotchange="${0}"></slot> </div> <mwc-menu .corner="${0}" .menuCorner="${0}" .fixed="${0}" .multi="${0}" .activatable="${0}" .y="${0}" .x="${0}"> <slot></slot> </mwc-menu> `),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.Z)(i,"firstUpdated",this,3)([t]),"rtl"===r.E.document.dir&&this.updateComplete.then((()=>{this.querySelectorAll("mwc-list-item").forEach((t=>{const e=document.createElement("style");e.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",t.shadowRoot.appendChild(e)}))}))}},{kind:"method",key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{kind:"get",key:"_triggerButton",value:function(){return this.querySelector('ha-icon-button[slot="trigger"], mwc-button[slot="trigger"]')}},{kind:"method",key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}},{kind:"field",static:!0,key:"styles",value(){return(0,s.iv)(l||(l=u`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`))}}]}}),s.oi)},65981:function(t,e,i){i.r(e),i.d(e,{HaIcon:()=>S});var a=i(61701),n=i(72621),s=(i(19083),i(71695),i(40251),i(61006),i(47021),i(57243)),o=i(50778),r=i(36522),c=i(22381),d=i(80654),l=(i(92745),i(9359),i(31526),i(27608)),u=i(27486),h=i(37394);const f=JSON.parse('{"version":"7.4.47","parts":[{"file":"7a7139d465f1f41cb26ab851a17caa21a9331234"},{"start":"account-supervisor-circle-","file":"9561286c4c1021d46b9006596812178190a7cc1c"},{"start":"alpha-r-c","file":"eb466b7087fb2b4d23376ea9bc86693c45c500fa"},{"start":"arrow-decision-o","file":"4b3c01b7e0723b702940c5ac46fb9e555646972b"},{"start":"baby-f","file":"2611401d85450b95ab448ad1d02c1a432b409ed2"},{"start":"battery-hi","file":"89bcd31855b34cd9d31ac693fb073277e74f1f6a"},{"start":"blur-r","file":"373709cd5d7e688c2addc9a6c5d26c2d57c02c48"},{"start":"briefcase-account-","file":"a75956cf812ee90ee4f656274426aafac81e1053"},{"start":"calendar-question-","file":"3253f2529b5ebdd110b411917bacfacb5b7063e6"},{"start":"car-lig","file":"74566af3501ad6ae58ad13a8b6921b3cc2ef879d"},{"start":"cellphone-co","file":"7677f1cfb2dd4f5562a2aa6d3ae43a2e6997b21a"},{"start":"circle-slice-2","file":"70d08c50ec4522dd75d11338db57846588263ee2"},{"start":"cloud-co","file":"141d2bfa55ca4c83f4bae2812a5da59a84fec4ff"},{"start":"cog-s","file":"5a640365f8e47c609005d5e098e0e8104286d120"},{"start":"cookie-l","file":"dd85b8eb8581b176d3acf75d1bd82e61ca1ba2fc"},{"start":"currency-eur-","file":"15362279f4ebfc3620ae55f79d2830ad86d5213e"},{"start":"delete-o","file":"239434ab8df61237277d7599ebe066c55806c274"},{"start":"draw-","file":"5605918a592070803ba2ad05a5aba06263da0d70"},{"start":"emoticon-po","file":"a838cfcec34323946237a9f18e66945f55260f78"},{"start":"fan","file":"effd56103b37a8c7f332e22de8e4d67a69b70db7"},{"start":"file-question-","file":"b2424b50bd465ae192593f1c3d086c5eec893af8"},{"start":"flask-off-","file":"3b76295cde006a18f0301dd98eed8c57e1d5a425"},{"start":"food-s","file":"1c6941474cbeb1755faaaf5771440577f4f1f9c6"},{"start":"gamepad-u","file":"c6efe18db6bc9654ae3540c7dee83218a5450263"},{"start":"google-f","file":"df341afe6ad4437457cf188499cb8d2df8ac7b9e"},{"start":"head-c","file":"282121c9e45ed67f033edcc1eafd279334c00f46"},{"start":"home-pl","file":"27e8e38fc7adcacf2a210802f27d841b49c8c508"},{"start":"inbox-","file":"0f0316ec7b1b7f7ce3eaabce26c9ef619b5a1694"},{"start":"key-v","file":"ea33462be7b953ff1eafc5dac2d166b210685a60"},{"start":"leaf-circle-","file":"33db9bbd66ce48a2db3e987fdbd37fb0482145a4"},{"start":"lock-p","file":"b89e27ed39e9d10c44259362a4b57f3c579d3ec8"},{"start":"message-s","file":"7b5ab5a5cadbe06e3113ec148f044aa701eac53a"},{"start":"moti","file":"01024d78c248d36805b565e343dd98033cc3bcaf"},{"start":"newspaper-variant-o","file":"22a6ec4a4fdd0a7c0acaf805f6127b38723c9189"},{"start":"on","file":"c73d55b412f394e64632e2011a59aa05e5a1f50d"},{"start":"paw-ou","file":"3f669bf26d16752dc4a9ea349492df93a13dcfbf"},{"start":"pigg","file":"0c24edb27eb1c90b6e33fc05f34ef3118fa94256"},{"start":"printer-pos-sy","file":"41a55cda866f90b99a64395c3bb18c14983dcf0a"},{"start":"read","file":"c7ed91552a3a64c9be88c85e807404cf705b7edf"},{"start":"robot-vacuum-variant-o","file":"917d2a35d7268c0ea9ad9ecab2778060e19d90e0"},{"start":"sees","file":"6e82d9861d8fac30102bafa212021b819f303bdb"},{"start":"shoe-f","file":"e2fe7ce02b5472301418cc90a0e631f187b9f238"},{"start":"snowflake-m","file":"a28ba9f5309090c8b49a27ca20ff582a944f6e71"},{"start":"st","file":"7e92d03f095ec27e137b708b879dfd273bd735ab"},{"start":"su","file":"61c74913720f9de59a379bdca37f1d2f0dc1f9db"},{"start":"tag-plus-","file":"8f3184156a4f38549cf4c4fffba73a6a941166ae"},{"start":"timer-a","file":"baab470d11cfb3a3cd3b063ee6503a77d12a80d0"},{"start":"transit-d","file":"8561c0d9b1ac03fab360fd8fe9729c96e8693239"},{"start":"vector-arrange-b","file":"c9a3439257d4bab33d3355f1f2e11842e8171141"},{"start":"water-ou","file":"02dbccfb8ca35f39b99f5a085b095fc1275005a0"},{"start":"webc","file":"57bafd4b97341f4f2ac20a609d023719f23a619c"},{"start":"zip","file":"65ae094e8263236fa50486584a08c03497a38d93"}]}'),m=(0,u.Z)((async()=>{const t=(0,l.MT)("hass-icon-db","mdi-icon-store");{const e=await(0,l.U2)("_version",t);e?e!==f.version&&(await(0,l.ZH)(t),(0,l.t8)("_version",f.version,t)):(0,l.t8)("_version",f.version,t)}return t})),g=["mdi","hass","hassio","hademo"];let _=[];i(37583);let y,v,b,p=t=>t;const k={},w={},$=(0,c.D)((()=>(async t=>{const e=Object.keys(t),i=await Promise.all(Object.values(t));(await m())("readwrite",(a=>{i.forEach(((i,n)=>{Object.entries(i).forEach((([t,e])=>{a.put(e,t)})),delete t[e[n]]}))}))})(w)),2e3),D={};let S=(0,a.Z)([(0,o.Mo)("ha-icon")],(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,o.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_path",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_secondaryPath",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_viewBox",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_legacy",value(){return!1}},{kind:"method",key:"willUpdate",value:function(t){(0,n.Z)(a,"willUpdate",this,3)([t]),t.has("icon")&&(this._path=void 0,this._secondaryPath=void 0,this._viewBox=void 0,this._loadIcon())}},{kind:"method",key:"render",value:function(){return this.icon?this._legacy?(0,s.dy)(y||(y=p` <iron-icon .icon="${0}"></iron-icon>`),this.icon):(0,s.dy)(v||(v=p`<ha-svg-icon .path="${0}" .secondaryPath="${0}" .viewBox="${0}"></ha-svg-icon>`),this._path,this._secondaryPath,this._viewBox):s.Ld}},{kind:"method",key:"_loadIcon",value:async function(){if(!this.icon)return;const t=this.icon,[e,a]=this.icon.split(":",2);let n,s=a;if(!e||!s)return;if(!g.includes(e)){const i=d.g[e];return i?void(i&&"function"==typeof i.getIcon&&this._setCustomPath(i.getIcon(s),t)):void(this._legacy=!0)}if(this._legacy=!1,s in k){const t=k[s];let i;t.newName?(i=`Icon ${e}:${s} was renamed to ${e}:${t.newName}, please change your config, it will be removed in version ${t.removeIn}.`,s=t.newName):i=`Icon ${e}:${s} was removed from MDI, please replace this icon with an other icon in your config, it will be removed in version ${t.removeIn}.`,console.warn(i),(0,r.B)(this,"write_log",{level:"warning",message:i})}if(s in D)return void(this._path=D[s]);if("home-assistant"===s){const e=(await i.e("48348").then(i.bind(i,30511))).mdiHomeAssistant;return this.icon===t&&(this._path=e),void(D[s]=e)}try{n=await(t=>new Promise(((e,i)=>{if(_.push([t,e,i]),_.length>1)return;const a=m();(0,h.n)(1e3,(async()=>{(await a)("readonly",(t=>{for(const[e,i,a]of _)(0,l.RV)(t.get(e)).then((t=>i(t))).catch((t=>a(t)));_=[]}))})()).catch((t=>{for(const[,,e]of _)e(t);_=[]}))})))(s)}catch(u){n=void 0}if(n)return this.icon===t&&(this._path=n),void(D[s]=n);const o=(t=>{let e;for(const i of f.parts){if(void 0!==i.start&&t<i.start)break;e=i}return e.file})(s);if(o in w)return void this._setPath(w[o],s,t);const c=fetch(`/static/mdi/${o}.json`).then((t=>t.json()));w[o]=c,this._setPath(c,s,t),$()}},{kind:"method",key:"_setCustomPath",value:async function(t,e){const i=await t;this.icon===e&&(this._path=i.path,this._secondaryPath=i.secondaryPath,this._viewBox=i.viewBox)}},{kind:"method",key:"_setPath",value:async function(t,e,i){const a=await t;this.icon===i&&(this._path=a[e]),D[e]=a[e]}},{kind:"field",static:!0,key:"styles",value(){return(0,s.iv)(b||(b=p`:host{fill:currentcolor}`))}}]}}),s.oi)},7285:function(t,e,i){i.d(e,{M:()=>f});var a=i(61701),n=i(72621),s=(i(71695),i(47021),i(65703)),o=i(46289),r=i(57243),c=i(50778);let d,l,u,h=t=>t,f=(0,a.Z)([(0,c.Mo)("ha-list-item")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,n.Z)(i,"renderRipple",this,3)([])}},{kind:"get",static:!0,key:"styles",value:function(){return[o.W,(0,r.iv)(d||(d=h`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-inline-start:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px));padding-inline-end:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)!important}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)!important}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center;flex-shrink:0}:host([graphic=icon]:not([twoline])) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,20px)!important}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`)),"rtl"===document.dir?(0,r.iv)(l||(l=h`span.material-icons:first-of-type,span.material-icons:last-of-type{direction:rtl!important;--direction:rtl}`)):(0,r.iv)(u||(u=h``))]}}]}}),s.K)},43344:function(t,e,i){var a=i(61701),n=i(72621),s=(i(52247),i(71695),i(47021),i(57243)),o=i(50778),r=i(36522),c=i(83716);i(23334);let d,l,u,h=t=>t;(0,a.Z)([(0,o.Mo)("ha-menu-button")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"hassio",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_hasNotifications",value(){return!1}},{kind:"field",decorators:[(0,o.SB)()],key:"_show",value(){return!1}},{kind:"field",key:"_alwaysVisible",value(){return!1}},{kind:"field",key:"_attachNotifOnConnect",value(){return!1}},{kind:"field",key:"_unsubNotifications",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)(i,"connectedCallback",this,3)([]),this._attachNotifOnConnect&&(this._attachNotifOnConnect=!1,this._subscribeNotifications())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,n.Z)(i,"disconnectedCallback",this,3)([]),this._unsubNotifications&&(this._attachNotifOnConnect=!0,this._unsubNotifications(),this._unsubNotifications=void 0)}},{kind:"method",key:"render",value:function(){if(!this._show)return s.Ld;const t=this._hasNotifications&&(this.narrow||"always_hidden"===this.hass.dockedSidebar);return(0,s.dy)(d||(d=h` <ha-icon-button .label="${0}" .path="${0}" @click="${0}"></ha-icon-button> ${0} `),this.hass.localize("ui.sidebar.sidebar_toggle"),"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",this._toggleMenu,t?(0,s.dy)(l||(l=h`<div class="dot"></div>`)):"")}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.Z)(i,"firstUpdated",this,3)([t]),this.hassio&&(this._alwaysVisible=(Number(window.parent.frontendVersion)||0)<20190710)}},{kind:"method",key:"willUpdate",value:function(t){if((0,n.Z)(i,"willUpdate",this,3)([t]),!t.has("narrow")&&!t.has("hass"))return;const e=t.has("hass")?t.get("hass"):this.hass,a=(t.has("narrow")?t.get("narrow"):this.narrow)||"always_hidden"===(null==e?void 0:e.dockedSidebar),s=this.narrow||"always_hidden"===this.hass.dockedSidebar;this.hasUpdated&&a===s||(this._show=s||this._alwaysVisible,s?this._subscribeNotifications():this._unsubNotifications&&(this._unsubNotifications(),this._unsubNotifications=void 0))}},{kind:"method",key:"_subscribeNotifications",value:function(){if(this._unsubNotifications)throw new Error("Already subscribed");this._unsubNotifications=(0,c.r)(this.hass.connection,(t=>{this._hasNotifications=t.length>0}))}},{kind:"method",key:"_toggleMenu",value:function(){(0,r.B)(this,"hass-toggle-menu")}},{kind:"field",static:!0,key:"styles",value(){return(0,s.iv)(u||(u=h`:host{position:relative}.dot{pointer-events:none;position:absolute;background-color:var(--accent-color);width:12px;height:12px;top:9px;right:7px;inset-inline-end:7px;inset-inline-start:initial;border-radius:50%;border:2px solid var(--app-header-background-color)}`))}}]}}),s.oi)},51223:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(61701),n=(i(71695),i(47021),i(57243)),s=i(50778),o=i(94571),r=i(59847),c=i(45729),d=(i(65981),i(37583),t([c]));c=(d.then?(await d)():d)[0];let l,u,h,f,m=t=>t;(0,a.Z)([(0,s.Mo)("ha-state-icon")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"stateValue",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"icon",value:void 0},{kind:"method",key:"render",value:function(){var t,e;const i=this.icon||this.stateObj&&(null===(t=this.hass)||void 0===t||null===(t=t.entities[this.stateObj.entity_id])||void 0===t?void 0:t.icon)||(null===(e=this.stateObj)||void 0===e?void 0:e.attributes.icon);if(i)return(0,n.dy)(l||(l=m`<ha-icon .icon="${0}"></ha-icon>`),i);if(!this.stateObj)return n.Ld;if(!this.hass)return this._renderFallback();const a=(0,c.gD)(this.hass,this.stateObj,this.stateValue).then((t=>t?(0,n.dy)(u||(u=m`<ha-icon .icon="${0}"></ha-icon>`),t):this._renderFallback()));return(0,n.dy)(h||(h=m`${0}`),(0,o.C)(a))}},{kind:"method",key:"_renderFallback",value:function(){const t=(0,r.N)(this.stateObj);return(0,n.dy)(f||(f=m` <ha-svg-icon .path="${0}"></ha-svg-icon> `),c.Ls[t]||c.Rb)}}]}}),n.oi);e()}catch(l){e(l)}}))},85366:function(t,e,i){var a=i(61701),n=(i(71695),i(47021),i(82238)),s=i(66575),o=i(57243),r=i(50778);let c,d=t=>t;(0,a.Z)([(0,r.Mo)("ha-top-app-bar-fixed")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",static:!0,key:"styles",value(){return[s.W,(0,o.iv)(c||(c=d`.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}.mdc-top-app-bar__title{font-size:20px;padding-inline-start:24px;padding-inline-end:initial}`))]}}]}}),n.s)},43546:function(t,e,i){i.d(e,{Cp:()=>o,TZ:()=>r,W2:()=>s,YY:()=>d,iI:()=>n,j2:()=>c,oT:()=>a});i(19083),i(9359),i(70104),i(77439),i(19423),i(40251),i(97499),i(61006);const a=t=>t.map((t=>{if("string"!==t.type)return t;switch(t.name){case"username":return Object.assign(Object.assign({},t),{},{autocomplete:"username",autofocus:!0});case"password":return Object.assign(Object.assign({},t),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},t),{},{autocomplete:"one-time-code",autofocus:!0});default:return t}})),n=(t,e)=>t.callWS({type:"auth/sign_path",path:e}),s=async(t,e,i,a)=>t.callWS({type:"config/auth_provider/homeassistant/create",user_id:e,username:i,password:a}),o=(t,e,i)=>t.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:e,new_password:i}),r=(t,e,i)=>t.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:e,password:i}),c=(t,e,i)=>t.callWS({type:"config/auth_provider/homeassistant/admin_change_username",user_id:e,username:i}),d=(t,e,i)=>t.callWS({type:"auth/delete_all_refresh_tokens",token_type:e,delete_current_token:i})},47844:function(t,e,i){i.d(e,{T9:()=>f,kU:()=>o,i4:()=>l,sF:()=>n,z9:()=>k,nk:()=>d,Mw:()=>_,Ch:()=>c,Lr:()=>h,jU:()=>r,Xn:()=>g,r:()=>m,B:()=>v,ou:()=>p,zj:()=>b,qW:()=>s});i(19423),i(40251),i(88044),i(71695),i(47021);var a=i(43546);const n=[1,2,3,4,6,8],s=2,o="hls",r="web_rtc",c=(t,e,i)=>`${t}&width=${e}&height=${i}`,d=t=>`/api/camera_proxy_stream/${t.entity_id}?token=${t.attributes.access_token}`,l=async(t,e,i,a)=>{const n=await(async(t,e,i,a,n,...s)=>{let o=a[t];o||(o=a[t]={});const r=o[n];if(r)return r;const c=i(a,n,...s);return o[n]=c,c.then((()=>setTimeout((()=>{o[n]=void 0}),e)),(()=>{o[n]=void 0})),c})("_cameraTmbUrl",9e3,u,t,e);return c(n,i,a)},u=async(t,e)=>{const i=await(0,a.iI)(t,`/api/camera_proxy/${e}`);return t.hassUrl(i.path)},h=async(t,e,i)=>{const a={type:"camera/stream",entity_id:e};i&&(a.format=i);const n=await t.callWS(a);return n.url=t.hassUrl(n.url),n},f=(t,e,i,a)=>t.connection.subscribeMessage(a,{type:"camera/webrtc/offer",entity_id:e,offer:i}),m=(t,e,i,a)=>t.callWS({type:"camera/webrtc/candidate",entity_id:e,session_id:i,candidate:a}),g=(t,e)=>t.callWS({type:"camera/get_prefs",entity_id:e}),_=(t,e,i)=>t.callWS(Object.assign({type:"camera/update_prefs",entity_id:e},i)),y="media-source://camera/",v=t=>t.startsWith(y),b=t=>t.substring(22),p=async(t,e)=>t.callWS({type:"camera/capabilities",entity_id:e}),k=async(t,e)=>t.callWS({type:"camera/webrtc/get_client_config",entity_id:e})},80654:function(t,e,i){i.d(e,{g:()=>o});const a=window;"customIconsets"in a||(a.customIconsets={});const n=a.customIconsets,s=window;"customIcons"in s||(s.customIcons={});const o=new Proxy(s.customIcons,{get:(t,e)=>{var i;return null!==(i=t[e])&&void 0!==i?i:n[e]?{getIcon:n[e]}:void 0}})},96194:function(t,e,i){i.d(e,{ON:()=>o,PX:()=>r,V_:()=>c,lz:()=>s,nZ:()=>n,rk:()=>l});var a=i(92636);const n="unavailable",s="unknown",o="on",r="off",c=[n,s],d=[n,s,r],l=(0,a.z)(c);(0,a.z)(d)},6280:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{Nu:()=>D,V3:()=>H,Vk:()=>h,YA:()=>$,xS:()=>m,zP:()=>O});i(19083),i(71695),i(92745),i(61893),i(84283),i(9359),i(56475),i(1331),i(31526),i(70104),i(52924),i(19423),i(11740),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(47021);var n=i(73850),s=i(97547),o=i(47194),r=t([s]);s=(r.then?(await r)():r)[0];const c=["climate","humidifier","water_heater"],d=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],l=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],u=(t,e)=>!t.states[e]||d.includes((0,n.M)(e)),h=(t,e,i,a,n)=>{const s={type:"history/stream",entity_ids:n,start_time:i.toISOString(),end_time:a.toISOString(),minimal_response:!0,no_attributes:!n.some((e=>u(t,e)))},o=new f(t);return t.connection.subscribeMessage((t=>e(o.processMessage(t))),s)};class f{constructor(t,e){this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=t,this.hoursToShow=e,this.combinedHistory={}}processMessage(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;const e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,i={};for(const a of Object.keys(this.combinedHistory))i[a]=[];for(const a of Object.keys(t.states))i[a]=[];for(const a of Object.keys(i)){if(a in this.combinedHistory&&a in t.states){const e=this.combinedHistory[a],n=e[e.length-1];i[a]=e.concat(t.states[a]),t.states[a][0].lu<n.lu&&(i[a]=i[a].sort(((t,e)=>t.lu-e.lu)))}else a in this.combinedHistory?i[a]=this.combinedHistory[a]:i[a]=t.states[a];if(e&&a in this.combinedHistory){const t=i[a].filter((t=>t.lu<e));if(!t.length)continue;if(i[a]=i[a].filter((t=>t.lu>=e)),i[a].length&&i[a][0].lu===e)continue;const n=t[t.length-1];n.lu=e,i[a].unshift(n)}}return this.combinedHistory=i,this.combinedHistory}}const m=(t,e,i,a,n,s=!0,o=!0)=>{const r={type:"history/stream",entity_ids:a,start_time:new Date((new Date).getTime()-3600*i*1e3).toISOString(),minimal_response:s,significant_changes_only:o,no_attributes:null!=n?n:!a.some((e=>u(t,e)))},c=new f(t,i);return t.connection.subscribeMessage((t=>e(c.processMessage(t))),r)},g=(t,e)=>t.state===e.state&&(!t.attributes||!e.attributes||l.every((i=>t.attributes[i]===e.attributes[i]))),_=(t,e,i,a,n,r,c)=>{const d=[],l=r[0];for(const o of r){if(d.length>0&&o.s===d[d.length-1].state)continue;const r={};null!=c&&c.attributes.device_class&&(r.device_class=null==c?void 0:c.attributes.device_class),d.push({state_localize:(0,s.c)(t,e,[],i,a[n],n,Object.assign(Object.assign({},o.a||l.a),r),o.s),state:o.s,last_changed:1e3*(o.lc?o.lc:o.lu)})}return{name:(0,o.a)(n,(null==c?void 0:c.attributes)||l.a),entity_id:n,data:d}},y=(t,e,i,a)=>{const s=[];return Object.keys(i).forEach((t=>{const e=i[t],r=e[0],d=(0,n.M)(t),u=[];for(const i of e){let t;if(c.includes(d)){t={state:i.s,last_changed:1e3*i.lu,attributes:{}};for(const e of l)e in i.a&&(t.attributes[e]=i.a[e])}else t={state:i.s,last_changed:1e3*(i.lc?i.lc:i.lu),attributes:{}};u.length>1&&g(t,u[u.length-1])&&g(t,u[u.length-2])||u.push(t)}const h=t in a?a[t].attributes:"friendly_name"in r.a?r.a:void 0;s.push({domain:d,name:(0,o.a)(t,h||{}),entity_id:t,states:u})})),{unit:t,device_class:e,identifier:Object.keys(i).join(""),data:s}},v=["counter","input_number","number"],b=t=>v.includes(t),p=t=>"unit_of_measurement"in t||"state_class"in t,k=(t,e)=>null!=t.attributes.device_class&&e.includes(t.attributes.device_class),w=" ",$=(t,e,i,a,n=!1)=>{const s={};i.forEach((t=>{t in e&&(s[t]=e[t])}));const o={};Object.entries(s).forEach((([t,e])=>{const i=e.map((t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3})));o[t]=i}));const r=D(t,o,[],t.localize,a,n,!0);return((null==r?void 0:r.line)||[]).forEach((t=>{t.data.forEach((t=>{t.statistics=t.states,t.states=[]}))})),r},D=(t,e,i,a,s,o=!1,r=!1)=>{const c={},d=[],l={};if(new Set([...i,...Object.keys(e)]).forEach((i=>{i in e?l[i]=e[i]:t.states[i]&&(l[i]=[{s:t.states[i].state,a:t.states[i].attributes,lu:new Date(t.states[i].last_updated).getTime()/1e3}])})),!l)return{line:[],timeline:[]};Object.keys(l).forEach((e=>{var i;const u=l[e];if(0===u.length)return;const h=(0,n.M)(e),f=e in t.states?t.states[e]:void 0,m=f||b(h)?void 0:u.find((t=>t.a&&p(t.a)));let g;g=O(h,f,m,s,r)?(null==f?void 0:f.attributes.unit_of_measurement)||(null==m?void 0:m.a.unit_of_measurement)||w:{zone:a("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[h];const y={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[h]||(null===(i=(null==f?void 0:f.attributes)||(null==m?void 0:m.a))||void 0===i?void 0:i.device_class),v=S(g,y,o);g?v&&v in c&&e in c[v]?c[v][e].push(...u):v&&(v in c||(c[v]={}),c[v][e]=u):d.push(_(a,t.locale,t.config,t.entities,e,u,f))}));return{line:Object.keys(c).map((e=>{const i=e.split("_"),a=i[0],n=i[1]||void 0;return y(a,n,c[e],t.states)})),timeline:d}},S=(t,e,i)=>i?`${t}_${e||""}`:t,O=(t,e,i,a,n=!1)=>n||b(t)||null!=e&&p(e.attributes)||null!=e&&"sensor"===t&&k(e,a)||null!=i,H=(t,e,i=!0)=>{if(!e)return t;const a=Object.assign(Object.assign({},t),{},{line:[]}),n={};for(const o of t.line){const t=S(o.unit,o.device_class,i);t&&(n[t]={historyItem:o})}for(const o of e.line){const t=S(o.unit,o.device_class,i);t&&(t in n?n[t].ltsItem=o:n[t]={ltsItem:o})}for(const{historyItem:o,ltsItem:r}of Object.values(n)){if(!o||!r){a.line.push(o||r);continue}const t=Object.assign(Object.assign({},o),{},{data:[]}),e=new Set([...o.data.map((t=>t.entity_id)),...r.data.map((t=>t.entity_id))]);for(const i of e){var s;const e=o.data.find((t=>t.entity_id===i)),a=r.data.find((t=>t.entity_id===i));if(!e||!a){t.data.push(e||a);continue}const n=(null===(s=e.states[0])||void 0===s?void 0:s.last_changed)||a.statistics[a.statistics.length-1].last_changed+1,c=[];for(const t of a.statistics){if(t.last_changed>=n)break;c.push(t)}t.data.push(0===c.length?e:Object.assign(Object.assign({},e),{},{statistics:c}))}a.line.push(t)}return a};a()}catch(c){a(c)}}))},48977:function(t,e,i){function a(t){return"strategy"in t}i.d(e,{Oh:()=>s,Q2:()=>n,Tx:()=>a,vj:()=>o});const n=(t,e,i)=>t.sendMessagePromise({type:"lovelace/config",url_path:e,force:i}),s=(t,e,i)=>t.callWS({type:"lovelace/config/save",url_path:e,config:i}),o=(t,e)=>t.callWS({type:"lovelace/config/delete",url_path:e})},6649:function(t,e,i){i.d(e,{JR:()=>n,Y:()=>s,iM:()=>o,j2:()=>a});i(19423);const a=t=>t.callWS({type:"lovelace/dashboards/list"}),n=(t,e)=>t.callWS(Object.assign({type:"lovelace/dashboards/create"},e)),s=(t,e,i)=>t.callWS(Object.assign({type:"lovelace/dashboards/update",dashboard_id:e},i)),o=(t,e)=>t.callWS({type:"lovelace/dashboards/delete",dashboard_id:e})},83716:function(t,e,i){i.d(e,{r:()=>a});i(71695),i(19423),i(47021);const a=(t,e)=>{const i=new n,a=t.subscribeMessage((t=>e(i.processMessage(t))),{type:"persistent_notification/subscribe"});return()=>{a.then((t=>null==t?void 0:t()))}};class n{constructor(){this.notifications=void 0,this.notifications={}}processMessage(t){if("removed"===t.type)for(const e of Object.keys(t.notifications))delete this.notifications[e];else this.notifications=Object.assign(Object.assign({},this.notifications),t.notifications);return Object.values(this.notifications)}}},41063:function(t,e,i){i.d(e,{CM:()=>p,QQ:()=>y,aV:()=>m,bq:()=>w,c9:()=>k,dh:()=>$,lE:()=>v,lV:()=>b,o1:()=>u,qJ:()=>_,qR:()=>h,vI:()=>g,xO:()=>f});var a=i(58814),n=(i(60933),i(19083),i(71695),i(92745),i(32126),i(9359),i(56475),i(25677),i(31526),i(52924),i(19423),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(47021),i(95262)),s=i(59847),o=i(75278),r=i(96530),c=i(71857);const d=["domain","integration","device_class"],l=["integration","manufacturer","model"],u=(t,e,i,a,n,s,o)=>{const r=[],c=[],d=[];return Object.values(i).forEach((i=>{i.labels.includes(e)&&g(t,n,a,i.area_id,s,o)&&d.push(i.area_id)})),Object.values(a).forEach((i=>{i.labels.includes(e)&&_(t,Object.values(n),i,s,o)&&c.push(i.id)})),Object.values(n).forEach((i=>{i.labels.includes(e)&&y(t.states[i.entity_id],s,o)&&r.push(i.entity_id)})),{areas:d,devices:c,entities:r}},h=(t,e,i,a,n)=>{const s=[];return Object.values(i).forEach((i=>{i.floor_id===e&&g(t,t.entities,t.devices,i.area_id,a,n)&&s.push(i.area_id)})),{areas:s}},f=(t,e,i,a,n,s)=>{const o=[],r=[];return Object.values(i).forEach((i=>{i.area_id===e&&_(t,Object.values(a),i,n,s)&&r.push(i.id)})),Object.values(a).forEach((i=>{i.area_id===e&&y(t.states[i.entity_id],n,s)&&o.push(i.entity_id)})),{devices:r,entities:o}},m=(t,e,i,a,n)=>{const s=[];return Object.values(i).forEach((i=>{i.device_id===e&&y(t.states[i.entity_id],a,n)&&s.push(i.entity_id)})),{entities:s}},g=(t,e,i,a,n,s)=>!!Object.values(i).some((i=>!(i.area_id!==a||!_(t,Object.values(e),i,n,s))))||Object.values(e).some((e=>!(e.area_id!==a||!y(t.states[e.entity_id],n,s)))),_=(t,e,i,a,s)=>{var o,r;const d=s?(0,c.HP)(s,e):void 0;if(null!==(o=a.target)&&void 0!==o&&o.device&&!(0,n.r)(a.target.device).some((t=>v(t,i,d))))return!1;if(null!==(r=a.target)&&void 0!==r&&r.entity){return e.filter((t=>t.device_id===i.id)).some((e=>{const i=t.states[e.entity_id];return y(i,a,s)}))}return!0},y=(t,e,i)=>{var a;return!!t&&(null===(a=e.target)||void 0===a||!a.entity||(0,n.r)(e.target.entity).some((e=>b(e,t,i))))},v=(t,e,i)=>{const{manufacturer:a,model:n,model_id:s,integration:o}=t;if(a&&e.manufacturer!==a)return!1;if(n&&e.model!==n)return!1;if(s&&e.model_id!==s)return!1;var r;if(o&&i&&(null==i||null===(r=i[e.id])||void 0===r||!r.has(o)))return!1;return!0},b=(t,e,i)=>{var a;const{domain:r,device_class:c,supported_features:d,integration:l}=t;if(r){const t=(0,s.N)(e);if(Array.isArray(r)?!r.includes(t):t!==r)return!1}if(c){const t=e.attributes.device_class;if(t&&Array.isArray(c)?!c.includes(t):t!==c)return!1}return!(d&&!(0,n.r)(d).some((t=>(0,o.e)(e,t))))&&(!l||(null==i||null===(a=i[e.entity_id])||void 0===a?void 0:a.domain)===l)},p=t=>{if(!t.entity)return{entity:null};if("filter"in t.entity)return t;const e=t.entity,{domain:i,integration:n,device_class:s}=e,o=(0,a.Z)(e,d);return i||n||s?{entity:Object.assign(Object.assign({},o),{},{filter:{domain:i,integration:n,device_class:s}})}:{entity:o}},k=t=>{if(!t.device)return{device:null};if("filter"in t.device)return t;const e=t.device,{integration:i,manufacturer:n,model:s}=e,o=(0,a.Z)(e,l);return i||n||s?{device:Object.assign(Object.assign({},o),{},{filter:{integration:i,manufacturer:n,model:s}})}:{device:o}},w=t=>{let e;var i;if("target"in t)e=(0,n.r)(null===(i=t.target)||void 0===i?void 0:i.entity);else if("entity"in t){var a,s;if(null!==(a=t.entity)&&void 0!==a&&a.include_entities)return;e=(0,n.r)(null===(s=t.entity)||void 0===s?void 0:s.filter)}if(!e)return;const o=e.flatMap((t=>t.integration||t.device_class||t.supported_features||!t.domain?[]:(0,n.r)(t.domain).filter((t=>(0,r.X)(t)))));return[...new Set(o)]},$=(t,e,i,a,s)=>{if(!e)return[];const o={target:{}},r=new Set((0,n.r)(e.entity_id)),c=new Set((0,n.r)(e.device_id)),d=new Set((0,n.r)(e.area_id)),l=new Set((0,n.r)(e.floor_id));return new Set((0,n.r)(e.label_id)).forEach((e=>{const n=u(t,e,s,a,i,o);n.devices.forEach((t=>c.add(t))),n.entities.forEach((t=>r.add(t))),n.areas.forEach((t=>d.add(t)))})),l.forEach((e=>{h(t,e,s,o).areas.forEach((t=>d.add(t)))})),d.forEach((e=>{const n=f(t,e,a,i,o);n.devices.forEach((t=>c.add(t))),n.entities.forEach((t=>r.add(t)))})),c.forEach((e=>{m(t,e,i,o).entities.forEach((t=>r.add(t)))})),Array.from(r)}},69919:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{EX:()=>f,Fj:()=>w,M$:()=>$,SO:()=>m,Sk:()=>_,TN:()=>S,UJ:()=>y,Ym:()=>D,hF:()=>g});i(19083),i(61893),i(9359),i(56475),i(70104),i(40251);var n=i(73358),s=i(73850),o=i(59847),r=i(75278),c=i(50602),d=i(1416),l=i(76131),u=i(72473),h=t([c]);c=(h.then?(await h)():h)[0];let f=function(t){return t[t.INSTALL=1]="INSTALL",t[t.SPECIFIC_VERSION=2]="SPECIFIC_VERSION",t[t.PROGRESS=4]="PROGRESS",t[t.BACKUP=8]="BACKUP",t[t.RELEASE_NOTES=16]="RELEASE_NOTES",t}({});const m=t=>(0,r.e)(t,f.PROGRESS)&&null!==t.attributes.update_percentage,g=(t,e=!1)=>(t.state===n.uo||e&&Boolean(t.attributes.skipped_version))&&(0,r.e)(t,f.INSTALL),_=t=>!!t.attributes.in_progress,y=(t,e)=>t.callWS({type:"update/release_notes",entity_id:e}),v="ioBroker Core",b="ioBroker Supervisor",p="ioBroker Operating System",k=(t,e)=>Object.values(t).filter((t=>"update"===(0,o.N)(t))).sort(((t,i)=>t.attributes.title===v?-3:i.attributes.title===v?3:t.attributes.title===p?-2:i.attributes.title===p?2:t.attributes.title===b?-1:i.attributes.title===b?1:(0,d.fe)(t.attributes.title||t.attributes.friendly_name||"",i.attributes.title||i.attributes.friendly_name||"",e))),w=(t,e=!1)=>k(t).filter((t=>g(t,e))),$=async(t,e)=>{const i=k(e.states,e.locale.language).map((t=>t.entity_id));if(!i.length)return void(0,l.showAlertDialog)(t,{title:e.localize("ui.panel.config.updates.no_update_entities.title"),text:e.localize("ui.panel.config.updates.no_update_entities.description"),warning:!0});(0,u.C)(t,{message:e.localize("ui.panel.config.updates.checking_updates")});let a=0;const n=await e.connection.subscribeEvents((i=>{"update"===(0,s.M)(i.data.entity_id)&&(a++,(0,u.C)(t,{message:e.localize("ui.panel.config.updates.updates_refreshed",{count:a})}))}),"state_changed");await e.callService("homeassistant","update_entity",{entity_id:i}),await new Promise((t=>{setTimeout(t,15e3)})),n(),0===a&&(0,u.C)(t,{message:e.localize("ui.panel.config.updates.no_new_updates")})},D=(t,e)=>{const i=t.state,a=t.attributes;if("off"===i){return a.latest_version&&a.skipped_version===a.latest_version?a.latest_version:e.formatEntityState(t)}if("on"===i&&_(t)){return(0,r.e)(t,f.PROGRESS)&&null!==a.update_percentage?e.localize("ui.card.update.installing_with_progress",{progress:(0,c.uf)(a.update_percentage,e.locale,{maximumFractionDigits:a.display_precision,minimumFractionDigits:a.display_precision})}):e.localize("ui.card.update.installing")}return e.formatEntityState(t)},S=(t,e)=>{var i;if("hassio"!==(null===(i=e[t.entity_id])||void 0===i?void 0:i.domain))return"generic";const a=t.attributes.title||"";return a===v?"home_assistant":[v,b,p].includes(a)?"generic":"addon"};a()}catch(f){a(f)}}))},96530:function(t,e,i){i.d(e,{X:()=>s,y:()=>n});var a=i(92636);const n=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],s=(0,a.z)(n)},99135:function(t,e,i){i.a(t,(async function(t,a){try{i.r(e);var n=i(61701),s=i(72621),o=(i(71695),i(92745),i(61893),i(40251),i(19134),i(5740),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(97003),i(69797),i(47021),i(72700),i(8038),i(71513),i(75656),i(50100),i(18084),i(13633)),r=i(57243),c=i(50778),d=i(27486),l=i(95262),u=i(68958),h=i(73850),f=i(83523),m=i(35830),g=i(58776),_=i(25179),y=i(71489),v=i(17170),b=i(12667),p=(i(23334),i(34273),i(7285),i(54202),i(43344),i(37432)),k=(i(85366),i(6280)),w=i(17705),$=i(41063),D=i(96309),S=i(76131),O=i(28008),H=i(58014),x=i(69615),C=t([y,v,b,p,k,_]);[y,v,b,p,k,_]=C.then?(await C)():C;let I,z,j,A,Z,N,E,M,T=t=>t;const V="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",P="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",F="M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",L="M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z";let B=(0,n.Z)(null,(function(t,e){class i extends e{constructor(){super(),t(this);const e=new Date;e.setHours(e.getHours()-1,0,0,0),this._startDate=e;const i=new Date;i.setHours(i.getHours()+2,0,0,0),this._endDate=i}}return{F:i,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)({reflect:!0,type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,c.Cb)({reflect:!0,type:Boolean})],key:"rtl",value(){return!1}},{kind:"field",decorators:[(0,c.SB)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,u.t)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value(){return{}}},{kind:"field",decorators:[(0,c.SB)()],key:"_isLoading",value(){return!1}},{kind:"field",decorators:[(0,c.SB)()],key:"_stateHistory",value:void 0},{kind:"field",key:"_mungedStateHistory",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_statisticsHistory",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,c.IO)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,s.Z)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,s.Z)(i,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){const t=this._getEntityIds().length>0;return(0,r.dy)(I||(I=T` <ha-top-app-bar-fixed> ${0} <div slot="title">${0}</div> ${0} <ha-button-menu slot="actionItems" @action="${0}"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-list-item graphic="icon" .disabled="${0}"> ${0} <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> </ha-list-item> <ha-list-item graphic="icon" .disabled="${0}"> ${0} <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> </ha-list-item> </ha-button-menu> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="${0}" ?disabled="${0}" .startDate="${0}" .endDate="${0}" extended-presets time-picker @value-changed="${0}"></ha-date-range-picker> <ha-target-picker .hass="${0}" .value="${0}" .disabled="${0}" add-on-top @value-changed="${0}"></ha-target-picker> </div> ${0} </div> </ha-top-app-bar-fixed> `),this._showBack?(0,r.dy)(z||(z=T` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${0}"></ha-icon-button-arrow-prev> `),this._goBack):(0,r.dy)(j||(j=T` <ha-menu-button slot="navigationIcon" .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.hass,this.narrow),this.hass.localize("panel.history"),t?(0,r.dy)(A||(A=T` <ha-icon-button slot="actionItems" @click="${0}" .disabled="${0}" .path="${0}" .label="${0}"></ha-icon-button> `),this._removeAll,this._isLoading,F,this.hass.localize("ui.panel.history.remove_all")):"",this._handleMenuAction,this.hass.localize("ui.common.menu"),V,this._isLoading,this.hass.localize("ui.panel.history.download_data"),P,this._isLoading,this.hass.localize("ui.panel.history.add_card"),L,this.hass,this._isLoading,this._startDate,this._endDate,this._dateRangeChanged,this.hass,this._targetPickerValue,this._isLoading,this._targetsChanged,this._isLoading?(0,r.dy)(Z||(Z=T`<div class="progress-wrapper"> <ha-spinner></ha-spinner> </div>`)):t?(0,r.dy)(E||(E=T` <state-history-charts .hass="${0}" .historyData="${0}" .startTime="${0}" .endTime="${0}" .narrow="${0}"> </state-history-charts> `),this.hass,this._mungedStateHistory,this._startDate,this._endDate,this.narrow):(0,r.dy)(N||(N=T`<div class="start-search"> ${0} </div>`),this.hass.localize("ui.panel.history.start_search")))}},{kind:"method",key:"willUpdate",value:function(t){if((0,s.Z)(i,"willUpdate",this,3)([t]),(t.has("_stateHistory")||t.has("_statisticsHistory")||t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue"))&&(this._statisticsHistory&&this._stateHistory?this._mungedStateHistory=(0,k.V3)(this._stateHistory,this._statisticsHistory):this._mungedStateHistory=this._stateHistory||this._statisticsHistory),this.hasUpdated)return;const e=(0,g.Q2)(),a=e.entity_id,n=e.device_id,o=e.area_id,r=e.floor_id,c=e.label_id;if((a||n||o||r||c)&&(this._targetPickerValue={}),a){const t=a.split(",");this._targetPickerValue.entity_id=t}if(n){const t=n.split(",");this._targetPickerValue.device_id=t}if(o){const t=o.split(",");this._targetPickerValue.area_id=t}if(r){const t=r.split(",");this._targetPickerValue.floor_id=t}if(c){const t=c.split(",");this._targetPickerValue.label_id=t}const d=e.start_date;d&&(this._startDate=new Date(d));const l=e.end_date;l&&(this._endDate=new Date(l))}},{kind:"method",key:"firstUpdated",value:function(t){(0,s.Z)(i,"firstUpdated",this,3)([t]);"1"===(0,g.Q2)().back&&history.length>1&&(this._showBack=!0,(0,f.c)((0,m.q)((0,g.pc)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(t){(t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue")||!this._stateHistory&&(t.has("_deviceEntityLookup")||t.has("_areaEntityLookup")||t.has("_areaDeviceLookup")))&&(this._getHistory(),this._getStats())}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue={},this._updatePath()}},{kind:"method",key:"_getStats",value:async function(){const t=this._getEntityIds();if(0===t.length)return void(this._statisticsHistory=void 0);const e=await(0,w.dL)(this.hass,this._startDate,this._endDate,t,"hour",void 0,["mean","state"]),{numeric_device_classes:i}=await(0,D.ib)(this.hass);this._statisticsHistory=(0,k.YA)(this.hass,e,t,i,!0)}},{kind:"method",key:"_getHistory",value:async function(){const t=this._getEntityIds();if(0===t.length)return void(this._stateHistory=void 0);this._isLoading=!0,this._subscribed&&this._unsubscribeHistory();const e=new Date,{numeric_device_classes:i}=await(0,D.ib)(this.hass);this._subscribed=(0,k.Vk)(this.hass,(e=>{this._isLoading=!1,this._stateHistory=(0,k.Nu)(this.hass,e,t,this.hass.localize,i,!0)}),this._startDate,this._endDate,t),this._subscribed.catch((()=>{this._isLoading=!1,this._unsubscribeHistory()})),this._endDate>e&&this._setRedrawTimer()}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval);const t=new Date,e=this._endDate>t?t:this._endDate,i=(0,o.A)(e,this._startDate);this._interval=window.setInterval((()=>{var t;return null===(t=this._stateHistoryCharts)||void 0===t?void 0:t.requestUpdate()}),i<2?1e4:i<10?6e4:_.Q)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((t=>null==t?void 0:t())),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){return this.__getEntityIds(this._targetPickerValue,this.hass.entities,this.hass.devices,this.hass.areas)}},{kind:"field",key:"__getEntityIds",value(){return(0,d.Z)(((t,e,i,a)=>(0,$.dh)(this.hass,t,e,i,a)))}},{kind:"method",key:"_dateRangeChanged",value:function(t){this._startDate=t.detail.value.startDate;const e=t.detail.value.endDate;0===e.getHours()&&0===e.getMinutes()&&(e.setDate(e.getDate()+1),e.setMilliseconds(e.getMilliseconds()-1)),this._endDate=e,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(t){this._targetPickerValue=t.detail.value||{},this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){const t={};this._targetPickerValue.entity_id&&(t.entity_id=(0,l.r)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.label_id&&(t.label_id=(0,l.r)(this._targetPickerValue.label_id).join(",")),this._targetPickerValue.floor_id&&(t.floor_id=(0,l.r)(this._targetPickerValue.floor_id).join(",")),this._targetPickerValue.area_id&&(t.area_id=(0,l.r)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(t.device_id=(0,l.r)(this._targetPickerValue.device_id).join(",")),this._startDate&&(t.start_date=this._startDate.toISOString()),this._endDate&&(t.end_date=this._endDate.toISOString()),(0,f.c)(`/history?${(0,g.ou)(t)}`,{replace:!0})}},{kind:"method",key:"_handleMenuAction",value:async function(t){switch(t.detail.index){case 0:this._downloadHistory();break;case 1:this._suggestCard()}}},{kind:"method",key:"_downloadHistory",value:function(){if(0===[...this._getEntityIds()].sort().length||!this._mungedStateHistory)return void(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.download_data_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const t=[""],e=["entity_id","state","last_changed"],i=new Set,a={climate:{current_temperature:0,hvac_action:0,target_temp_high:0,target_temp_low:0,temperature:0},humidifier:{action:0,current_humidity:0,humidity:0},water_heater:{current_temperature:0,operation_mode:0,temperature:0}},n=t=>new Date(t).toISOString();for(const r of this._mungedStateHistory.line)for(const s of r.data){const o=s.entity_id,r=(0,h.M)(o),c=a[r];if(c&&!i.has(r)){i.add(r);let t=e.length;for(const i of Object.keys(c))e.push(i),c[i]=t,t+=1}if(s.statistics)for(const e of s.statistics)t.push(`${o},${e.state},${n(e.last_changed)}\n`);for(const e of s.states){const i=n(e.last_changed),a=[o,e.state,i];if(e.attributes&&c){const t=e.attributes;for(const[e,i]of Object.entries(c))e in t&&(a[i]=t[e])}t.push(a.join(",")+"\n")}}for(const r of this._mungedStateHistory.timeline){const e=r.entity_id;for(const i of r.data){const a=/,|"/.test(i.state)?`"${i.state.replaceAll('"','""')}"`:i.state;t.push(`${e},${a},${n(i.last_changed)}\n`)}}t[0]=e.join(",")+"\n";const s=new Blob(t,{type:"text/csv"}),o=window.URL.createObjectURL(s);(0,H.N)(o,"history.csv")}},{kind:"method",key:"_suggestCard",value:function(){const t=this._getEntityIds();if(0===t.length||!this._mungedStateHistory)return void(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.add_card_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const e=Math.min(this._endDate.getTime(),Date.now()),i=[{title:this.hass.localize("panel.history"),type:"history-graph",hours_to_show:Math.round((e-this._startDate.getTime())/1e3/60/60),entities:t}];(0,x.$)(this,this.hass,i,{title:this.hass.localize("panel.history"),cards:i},t)}},{kind:"get",static:!0,key:"styles",value:function(){return[O.Qx,(0,r.iv)(M||(M=T`ha-top-app-bar-fixed{height:100vh;overflow-x:hidden;overflow-y:visible}.content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{width:100%;margin-bottom:8px}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}`))]}}]}}),r.oi);customElements.define("ha-panel-history",B),a()}catch(I){a(I)}}))},69615:function(t,e,i){i.d(e,{$:()=>c});i(71695),i(9359),i(56475),i(40251),i(47021);var a=i(48977),n=i(6649),s=i(76131),o=i(53380),r=i(74941);const c=async(t,e,i,c,d)=>{var l,u;e.loadFragmentTranslation("lovelace");const h=await(0,n.j2)(e),f=h.filter((t=>"storage"===t.mode)),m=null===(l=e.panels.lovelace)||void 0===l||null===(l=l.config)||void 0===l?void 0:l.mode;if("storage"!==m&&!f.length)return void(0,o.f)(t,{cardConfig:i,entities:d,yaml:!0});let g,_=null;if("storage"===m)try{g=await(0,a.Q2)(e.connection,null,!1)}catch(y){}if(!g&&f.length)for(const n of f)try{g=await(0,a.Q2)(e.connection,n.url_path,!1),_=n.url_path;break}catch(y){}g?f.length||null!==(u=g.views)&&void 0!==u&&u.length?f.length||1!==g.views.length?(0,r.i)(t,{lovelaceConfig:g,urlPath:_,allowDashboardChange:!0,actionLabel:e.localize("ui.common.next"),dashboards:h,viewSelectedCallback:(n,s,r)=>{(0,o.f)(t,{cardConfig:i,sectionConfig:c,lovelaceConfig:s,saveConfig:async t=>{try{await(0,a.Oh)(e,n,t)}catch(i){alert(e.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[r],entities:d})}}):(0,o.f)(t,{cardConfig:i,sectionConfig:c,lovelaceConfig:g,saveConfig:async t=>{try{await(0,a.Oh)(e,null,t)}catch(y){alert(e.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[0],entities:d}):(0,s.showAlertDialog)(t,{text:"You don't have any Lovelace views, first create a view in Lovelace."}):h.length>f.length?(0,o.f)(t,{cardConfig:i,sectionConfig:c,entities:d,yaml:!0}):(0,s.showAlertDialog)(t,{text:"You don't seem to be in control of any dashboard, please take control first."})}},53380:function(t,e,i){i.d(e,{f:()=>s});i(71695),i(40251),i(47021);var a=i(36522);const n=()=>Promise.all([i.e("35671"),i.e("79525"),i.e("29570"),i.e("65505"),i.e("8795"),i.e("71588"),i.e("92139"),i.e("32146"),i.e("31241"),i.e("47399"),i.e("68581"),i.e("63055"),i.e("70147"),i.e("44251"),i.e("65005"),i.e("60487"),i.e("1466"),i.e("38326"),i.e("80809"),i.e("70639"),i.e("92368"),i.e("39043"),i.e("37457"),i.e("80312"),i.e("96827")]).then(i.bind(i,22958)),s=(t,e)=>{(0,a.B)(t,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:n,dialogParams:e})}},74941:function(t,e,i){i.d(e,{i:()=>n});i(71695),i(40251),i(47021);var a=i(36522);const n=(t,e)=>{(0,a.B)(t,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:()=>Promise.all([i.e("97983"),i.e("41258"),i.e("35671"),i.e("7010"),i.e("5851")]).then(i.bind(i,67271)),dialogParams:e})}},30511:function(t,e,i){i.r(e),i.d(e,{mdiHomeAssistant:()=>a});const a="m12.151 1.5882c-.3262 0-.6523.1291-.8996.3867l-8.3848 8.7354c-.0619.0644-.1223.1368-.1807.2154-.0588.0789-.1151.1638-.1688.2534-.2593.4325-.4552.9749-.5232 1.4555-.0026.018-.0076.0369-.0094.0548-.0121.0987-.0184.1944-.0184.2857v8.0124a1.2731 1.2731 0 001.2731 1.2731h7.8313l-3.4484-3.593a1.7399 1.7399 0 111.0803-1.125l2.6847 2.7972v-10.248a1.7399 1.7399 0 111.5276-0v7.187l2.6702-2.782a1.7399 1.7399 0 111.0566 1.1505l-3.7269 3.8831v2.7299h8.174a1.2471 1.2471 0 001.2471-1.2471v-8.0375c0-.0912-.0059-.1868-.0184-.2855-.0603-.4935-.2636-1.0617-.5326-1.5105-.0537-.0896-.1101-.1745-.1684-.253-.0588-.079-.1191-.1513-.181-.2158l-8.3848-8.7363c-.2473-.2577-.5735-.3866-.8995-.3864"},31948:function(t,e,i){i.a(t,(async function(t,e){try{i(71695),i(40251),i(47021);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await i.e("73378").then(i.bind(i,88198))).default),e()}catch(a){e(a)}}),1)},58014:function(t,e,i){i.d(e,{N:()=>n,G:()=>s});var a=i(18117);const n=(t,e="")=>{const i=document.createElement("a");i.target="_blank",i.href=t,i.download=e,i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)},s=t=>{var e;return!(t=>!!t.auth.external&&a.G)(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},18117:function(t,e,i){i.d(e,{G:()=>a});i(19134),i(5740);const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=58258.6d6e25d2b0f05c91.js.map