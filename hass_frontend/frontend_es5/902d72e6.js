"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[36898],{36898:function(e,t,n){n.r(t);var i,r,o,a,s,l,c,u,d,f,h,p,m,y,v=n(33310),g=n(14516),b=n(22311),k=n(38346),w=n(18199),_=(n(51187),n(44577),n(53268),n(12730),n(37500)),E=n(8636),A=n(47181),C=n(83849),x=n(50577),O=n(96151),P=(n(81545),n(22098),n(36125),n(10983),n(52039),n(18900),n(93748)),z=n(26765),S=(n(27849),n(60010),n(23670)),j=n(11654),T=n(81796),D=(n(88165),function(){return Promise.all([n.e(85084),n.e(34821),n.e(75049)]).then(n.bind(n,75049))}),R=function(){return Promise.all([n.e(85084),n.e(34821),n.e(74365)]).then(n.bind(n,74365))},M=(n(13266),n(31206),n(4940),n(25727),n(14089),n(3555),n(9381),n(86490));function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function V(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){V(o,i,r,a,s,"next",e)}function s(e){V(o,i,r,a,s,"throw",e)}a(void 0)}))}}function F(e,t){return ne(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||ee(e,t)||X()}function B(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){return Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=re(e);if(t){var r=re(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(){$=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(i){t.forEach((function(t){var r=t.placement;if(t.kind===i&&("static"===r||"prototype"===r)){var o="static"===r?e:n;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var i=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],i=[],r={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,r)}),this),e.forEach((function(e){if(!q(e))return n.push(e);var t=this.decorateElement(e,r);n.push(t.element),n.push.apply(n,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:n,finishers:i};var o=this.decorateConstructor(n,t);return i.push.apply(i,o.finishers),o.finishers=i,o},addElementPlacement:function(e,t,n){var i=t[e.placement];if(!n&&-1!==i.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var n=[],i=[],r=e.decorators,o=r.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,r[o])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:i,extras:n}},decorateConstructor:function(e,t){for(var n=[],i=t.length-1;i>=0;i--){var r=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[i])(r)||r);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,ne(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||ee(t)||X()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=J(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var r=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:n,placement:i,descriptor:Object.assign({},r)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:K(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=K(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var i=(0,t[n])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function N(e){var t,n=J(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function Q(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function q(e){return e.decorators&&e.decorators.length}function G(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function K(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function J(e){var t=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==I(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===I(t)?t:String(t)}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ne(e){if(Array.isArray(e))return e}function ie(e,t,n){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},ie(e,t,n||e)}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}!function(e,t,n,i){var r=$();if(i)for(var o=0;o<i.length;o++)r=i[o](r);var a=t((function(e){r.initializeInstanceElements(e,s.elements)}),n),s=r.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},i=0;i<e.length;i++){var r,o=e[i];if("method"===o.kind&&(r=t.find(n)))if(G(o.descriptor)||G(r.descriptor)){if(q(o)||q(r))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");r.descriptor=o.descriptor}else{if(q(o)){if(q(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");r.decorators=o.decorators}Q(o,r)}else t.push(o)}return t}(a.d.map(N)),e);r.initializeClassElements(a.F,s.elements),r.runClassFinishers(a.F,s.finishers)}([(0,v.Mo)("blueprint-automation-editor")],(function(e,t){var n,g,b=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,t);var n=U(i);function i(){var t;L(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e(W(t)),t}return i}(t);return{F:b,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"isWide",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,v.Cb)({reflect:!0,type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"config",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_blueprints",value:void 0},{kind:"method",key:"firstUpdated",value:function(e){ie(re(b.prototype),"firstUpdated",this).call(this,e),this._getBlueprints()}},{kind:"get",key:"_blueprint",value:function(){if(this._blueprints)return this._blueprints[this.config.use_blueprint.path]}},{kind:"method",key:"render",value:function(){var e,t,n=this,y=this._blueprint;return(0,_.dy)(i||(i=B(["\n      ","\n      ","\n      ",'\n      <ha-card\n        outlined\n        class="blueprint"\n        .header=','\n      >\n        <div class="blueprint-picker-container">\n          ',"\n        </div>\n\n        ","\n      </ha-card>\n    "])),this.disabled?(0,_.dy)(r||(r=B(['<ha-alert alert-type="warning">\n            ','\n            <mwc-button slot="action" @click=',">\n              ","\n            </mwc-button>\n          </ha-alert>"])),this.hass.localize("ui.panel.config.automation.editor.read_only"),this._duplicate,this.hass.localize("ui.panel.config.automation.editor.migrate")):"","off"===(null===(e=this.stateObj)||void 0===e?void 0:e.state)?(0,_.dy)(o||(o=B(['\n            <ha-alert alert-type="info">\n              ','\n              <mwc-button slot="action" @click=',">\n                ","\n              </mwc-button>\n            </ha-alert>\n          "])),this.hass.localize("ui.panel.config.automation.editor.disabled"),this._enable,this.hass.localize("ui.panel.config.automation.editor.enable")):"",this.config.description?(0,_.dy)(a||(a=B(['<p class="description">',"</p>"])),this.config.description):"",this.hass.localize("ui.panel.config.automation.editor.blueprint.header"),this._blueprints?Object.keys(this._blueprints).length?(0,_.dy)(s||(s=B(["\n                  <ha-blueprint-picker\n                    .hass=","\n                    .label=","\n                    .blueprints=","\n                    .value=","\n                    .disabled=","\n                    @value-changed=","\n                  ></ha-blueprint-picker>\n                "])),this.hass,this.hass.localize("ui.panel.config.automation.editor.blueprint.blueprint_to_use"),this._blueprints,this.config.use_blueprint.path,this.disabled,this._blueprintChanged):this.hass.localize("ui.panel.config.automation.editor.blueprint.no_blueprints"):(0,_.dy)(l||(l=B(["<ha-circular-progress active></ha-circular-progress>"]))),this.config.use_blueprint.path?y&&"error"in y?(0,_.dy)(c||(c=B(['<p class="warning padding">\n                There is an error in this Blueprint: ',"\n              </p>"])),y.error):(0,_.dy)(u||(u=B(["","\n              ",""])),null!=y&&y.metadata.description?(0,_.dy)(d||(d=B(['<ha-markdown\n                    class="card-content"\n                    breaks\n                    .content=',"\n                  ></ha-markdown>"])),y.metadata.description):"",null!=y&&null!==(t=y.metadata)&&void 0!==t&&t.input&&Object.keys(y.metadata.input).length?Object.entries(y.metadata.input).map((function(e){var t,i,r=F(e,2),o=r[0],a=r[1];return(0,_.dy)(f||(f=B(["<ha-settings-row .narrow=",'>\n                        <span slot="heading">','</span>\n                        <ha-markdown\n                          slot="description"\n                          class="card-content"\n                          breaks\n                          .content=',"\n                        ></ha-markdown>\n                        ","\n                      </ha-settings-row>"])),n.narrow,(null==a?void 0:a.name)||o,null==a?void 0:a.description,null!=a&&a.selector?(0,_.dy)(h||(h=B(["<ha-selector\n                              .hass=","\n                              .selector=","\n                              .key=","\n                              .value=","\n                              .disabled=","\n                              @value-changed=","\n                            ></ha-selector>"])),n.hass,a.selector,o,null!==(t=n.config.use_blueprint.input&&n.config.use_blueprint.input[o])&&void 0!==t?t:null==a?void 0:a.default,n.disabled,n._inputChanged):(0,_.dy)(p||(p=B(["<ha-textfield\n                              .key=","\n                              required\n                              .value=","\n                              .disabled=","\n                              @input=","\n                            ></ha-textfield>"])),o,null!==(i=n.config.use_blueprint.input&&n.config.use_blueprint.input[o])&&void 0!==i?i:null==a?void 0:a.default,n.disabled,n._inputChanged))})):(0,_.dy)(m||(m=B(['<p class="padding">\n                    ',"\n                  </p>"])),this.hass.localize("ui.panel.config.automation.editor.blueprint.no_inputs"))):"")}},{kind:"method",key:"_getBlueprints",value:(g=H(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.wc)(this.hass,"automation");case 2:this._blueprints=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{kind:"method",key:"_blueprintChanged",value:function(e){e.stopPropagation(),this.config.use_blueprint.path!==e.detail.value&&(0,A.B)(this,"value-changed",{value:Object.assign({},this.config,{use_blueprint:{path:e.detail.value}})})}},{kind:"method",key:"_inputChanged",value:function(e){var t,n;e.stopPropagation();var i=e.target,r=i.key,o=null!==(t=null===(n=e.detail)||void 0===n?void 0:n.value)&&void 0!==t?t:i.value;if(!(this.config.use_blueprint.input&&this.config.use_blueprint.input[r]===o||!this.config.use_blueprint.input&&""===o)){var a=Object.assign({},this.config.use_blueprint.input,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,o));""!==o&&void 0!==o||delete a[r],(0,A.B)(this,"value-changed",{value:Object.assign({},this.config,{use_blueprint:Object.assign({},this.config.use_blueprint,{input:a})})})}}},{kind:"method",key:"_enable",value:(n=H(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass&&this.stateObj){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.hass.callService("automation","turn_on",{entity_id:this.stateObj.entity_id});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_duplicate",value:function(){(0,A.B)(this,"duplicate")}},{kind:"get",static:!0,key:"styles",value:function(){return[j.Qx,(0,_.iv)(y||(y=B(["\n        :host {\n          display: block;\n        }\n        ha-card.blueprint {\n          margin: 0 auto;\n        }\n        .padding {\n          padding: 16px;\n        }\n        .link-button-row {\n          padding: 14px;\n        }\n        .blueprint-picker-container {\n          padding: 0 16px 16px;\n        }\n        ha-textfield,\n        ha-blueprint-picker {\n          display: block;\n        }\n        h3 {\n          margin: 16px;\n        }\n        .introduction {\n          margin-top: 0;\n          margin-bottom: 12px;\n        }\n        .introduction a {\n          color: var(--primary-color);\n        }\n        p {\n          margin-bottom: 0;\n        }\n        .description {\n          margin-bottom: 16px;\n        }\n        ha-settings-row {\n          --paper-time-input-justify-content: flex-end;\n          --settings-row-content-width: 100%;\n          --settings-row-prefix-display: contents;\n          border-top: 1px solid var(--divider-color);\n        }\n        ha-alert {\n          margin-bottom: 16px;\n          display: block;\n        }\n      "])))]}}]}}),_.oi);var oe,ae,se,le,ce,ue,de=n(27322);n(44686),n(50364),n(4670);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function pe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ke(e);if(t){var r=ke(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ge(this,n)}}function ge(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function we(){we=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(i){t.forEach((function(t){var r=t.placement;if(t.kind===i&&("static"===r||"prototype"===r)){var o="static"===r?e:n;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var i=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],i=[],r={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,r)}),this),e.forEach((function(e){if(!Ae(e))return n.push(e);var t=this.decorateElement(e,r);n.push(t.element),n.push.apply(n,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:n,finishers:i};var o=this.decorateConstructor(n,t);return i.push.apply(i,o.finishers),o.finishers=i,o},addElementPlacement:function(e,t,n){var i=t[e.placement];if(!n&&-1!==i.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var n=[],i=[],r=e.decorators,o=r.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,r[o])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:i,extras:n}},decorateConstructor:function(e,t){for(var n=[],i=t.length-1;i>=0;i--){var r=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[i])(r)||r);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=Oe(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var r=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:n,placement:i,descriptor:Object.assign({},r)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:xe(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=xe(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var i=(0,t[n])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function _e(e){var t,n=Oe(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function Ee(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Ae(e){return e.decorators&&e.decorators.length}function Ce(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function xe(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function Oe(e){var t=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==fe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fe(t)?t:String(t)}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ze,Se,je,Te,De,Re,Me,Ie,Ve,He,Fe,Be,Le,Ze,Ue,Ye="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z";!function(e,t,n,i){var r=we();if(i)for(var o=0;o<i.length;o++)r=i[o](r);var a=t((function(e){r.initializeInstanceElements(e,s.elements)}),n),s=r.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},i=0;i<e.length;i++){var r,o=e[i];if("method"===o.kind&&(r=t.find(n)))if(Ce(o.descriptor)||Ce(r.descriptor)){if(Ae(o)||Ae(r))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");r.descriptor=o.descriptor}else{if(Ae(o)){if(Ae(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");r.decorators=o.decorators}Ee(o,r)}else t.push(o)}return t}(a.d.map(_e)),e);r.initializeClassElements(a.F,s.elements),r.runClassFinishers(a.F,s.finishers)}([(0,v.Mo)("manual-automation-editor")],(function(e,t){var n,i,r=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(i,t);var n=ve(i);function i(){var t;me(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e(be(t)),t}return i}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"isWide",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean,reflect:!0,attribute:"re-order-mode"})],key:"reOrderMode",value:function(){return!1}},{kind:"method",key:"render",value:function(){var e;return(0,_.dy)(oe||(oe=pe(["\n      ","\n      ","\n      ","\n      ",'\n      <div class="header">\n        <h2 id="triggers-heading" class="name">\n          ',"\n        </h2>\n        <a\n          href=",'\n          target="_blank"\n          rel="noreferrer"\n        >\n          <ha-icon-button\n            .path=',"\n            .label=",'\n          ></ha-icon-button>\n        </a>\n      </div>\n\n      <ha-automation-trigger\n        role="region"\n        aria-labelledby="triggers-heading"\n        .triggers=',"\n        @value-changed=","\n        .hass=","\n        .reOrderMode=","\n        .disabled=",'\n      ></ha-automation-trigger>\n\n      <div class="header">\n        <h2 id="conditions-heading" class="name">\n          ',"\n        </h2>\n        <a\n          href=",'\n          target="_blank"\n          rel="noreferrer"\n        >\n          <ha-icon-button\n            .path=',"\n            .label=",'\n          ></ha-icon-button>\n        </a>\n      </div>\n\n      <ha-automation-condition\n        role="region"\n        aria-labelledby="conditions-heading"\n        .conditions=',"\n        @value-changed=","\n        .hass=","\n        .reOrderMode=","\n        .disabled=",'\n      ></ha-automation-condition>\n\n      <div class="header">\n        <h2 id="actions-heading" class="name">\n          ',"\n        </h2>\n        <div>\n          <a\n            href=",'\n            target="_blank"\n            rel="noreferrer"\n          >\n            <ha-icon-button\n              .path=',"\n              .label=",'\n            ></ha-icon-button>\n          </a>\n        </div>\n      </div>\n\n      <ha-automation-action\n        role="region"\n        aria-labelledby="actions-heading"\n        .actions=',"\n        @value-changed=","\n        .hass=","\n        .narrow=","\n        .reOrderMode=","\n        .disabled=","\n      ></ha-automation-action>\n    "])),this.disabled?(0,_.dy)(ae||(ae=pe(['<ha-alert alert-type="warning">\n            ','\n            <mwc-button slot="action" @click=',">\n              ","\n            </mwc-button>\n          </ha-alert>"])),this.hass.localize("ui.panel.config.automation.editor.read_only"),this._duplicate,this.hass.localize("ui.panel.config.automation.editor.migrate")):"","off"===(null===(e=this.stateObj)||void 0===e?void 0:e.state)?(0,_.dy)(se||(se=pe(['\n            <ha-alert alert-type="info">\n              ','\n              <mwc-button slot="action" @click=',">\n                ","\n              </mwc-button>\n            </ha-alert>\n          "])),this.hass.localize("ui.panel.config.automation.editor.disabled"),this._enable,this.hass.localize("ui.panel.config.automation.editor.enable")):"",this.reOrderMode?(0,_.dy)(le||(le=pe(['\n            <ha-alert\n              alert-type="info"\n              .title=',"\n            >\n              ",'\n              <mwc-button slot="action" @click=',">\n                ","\n              </mwc-button>\n            </ha-alert>\n          "])),this.hass.localize("ui.panel.config.automation.editor.re_order_mode.title"),this.hass.localize("ui.panel.config.automation.editor.re_order_mode.description"),this._exitReOrderMode,this.hass.localize("ui.panel.config.automation.editor.re_order_mode.exit")):"",this.config.description?(0,_.dy)(ce||(ce=pe(['<ha-markdown\n            class="description"\n            breaks\n            .content=',"\n          ></ha-markdown>"])),this.config.description):"",this.hass.localize("ui.panel.config.automation.editor.triggers.header"),(0,de.R)(this.hass,"/docs/automation/trigger/"),Ye,this.hass.localize("ui.panel.config.automation.editor.triggers.learn_more"),this.config.trigger,this._triggerChanged,this.hass,this.reOrderMode,this.disabled,this.hass.localize("ui.panel.config.automation.editor.conditions.header"),(0,de.R)(this.hass,"/docs/automation/condition/"),Ye,this.hass.localize("ui.panel.config.automation.editor.conditions.learn_more"),this.config.condition||[],this._conditionChanged,this.hass,this.reOrderMode,this.disabled,this.hass.localize("ui.panel.config.automation.editor.actions.header"),(0,de.R)(this.hass,"/docs/automation/action/"),Ye,this.hass.localize("ui.panel.config.automation.editor.actions.learn_more"),this.config.action,this._actionChanged,this.hass,this.narrow,this.reOrderMode,this.disabled)}},{kind:"method",key:"_exitReOrderMode",value:function(){this.reOrderMode=!this.reOrderMode}},{kind:"method",key:"_triggerChanged",value:function(e){e.stopPropagation(),(0,A.B)(this,"value-changed",{value:Object.assign({},this.config,{trigger:e.detail.value})})}},{kind:"method",key:"_conditionChanged",value:function(e){e.stopPropagation(),(0,A.B)(this,"value-changed",{value:Object.assign({},this.config,{condition:e.detail.value})})}},{kind:"method",key:"_actionChanged",value:function(e){e.stopPropagation(),(0,A.B)(this,"value-changed",{value:Object.assign({},this.config,{action:e.detail.value})})}},{kind:"method",key:"_enable",value:(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass&&this.stateObj){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.hass.callService("automation","turn_on",{entity_id:this.stateObj.entity_id});case 4:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(i,r){var o=n.apply(e,t);function a(e){he(o,i,r,a,s,"next",e)}function s(e){he(o,i,r,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{kind:"method",key:"_duplicate",value:function(){(0,A.B)(this,"duplicate")}},{kind:"get",static:!0,key:"styles",value:function(){return[j.Qx,(0,_.iv)(ue||(ue=pe(["\n        :host {\n          display: block;\n        }\n        ha-card {\n          overflow: hidden;\n        }\n        .description {\n          margin: 0;\n        }\n        p {\n          margin-bottom: 0;\n        }\n        .header {\n          display: flex;\n          align-items: center;\n        }\n        .header:first-child {\n          margin-top: -16px;\n        }\n        .header .name {\n          font-size: 20px;\n          font-weight: 400;\n          flex: 1;\n        }\n        .header a {\n          color: var(--secondary-text-color);\n        }\n        ha-alert {\n          display: block;\n          margin-bottom: 16px;\n        }\n      "])))]}}]}}),_.oi);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function $e(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){$e(o,i,r,a,s,"next",e)}function s(e){$e(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Qe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){return Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ge(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ct(e);if(t){var r=ct(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Je(this,n)}}function Je(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xe(e)}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(){et=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(i){t.forEach((function(t){var r=t.placement;if(t.kind===i&&("static"===r||"prototype"===r)){var o="static"===r?e:n;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var i=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],i=[],r={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,r)}),this),e.forEach((function(e){if(!it(e))return n.push(e);var t=this.decorateElement(e,r);n.push(t.element),n.push.apply(n,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:n,finishers:i};var o=this.decorateConstructor(n,t);return i.push.apply(i,o.finishers),o.finishers=i,o},addElementPlacement:function(e,t,n){var i=t[e.placement];if(!n&&-1!==i.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var n=[],i=[],r=e.decorators,o=r.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,r[o])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:i,extras:n}},decorateConstructor:function(e,t){for(var n=[],i=t.length-1;i>=0;i--){var r=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[i])(r)||r);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=at(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var r=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:n,placement:i,descriptor:Object.assign({},r)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ot(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=ot(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var i=(0,t[n])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function tt(e){var t,n=at(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function nt(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function it(e){return e.decorators&&e.decorators.length}function rt(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ot(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function at(e){var t=function(e,t){if("object"!==We(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==We(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===We(t)?t:String(t)}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function lt(e,t,n){return lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},lt(e,t,n||e)}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}var ut="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",dt=function(e,t,n,i){var r=et();if(i)for(var o=0;o<i.length;o++)r=i[o](r);var a=t((function(e){r.initializeInstanceElements(e,s.elements)}),n),s=r.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},i=0;i<e.length;i++){var r,o=e[i];if("method"===o.kind&&(r=t.find(n)))if(rt(o.descriptor)||rt(r.descriptor)){if(it(o)||it(r))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");r.descriptor=o.descriptor}else{if(it(o)){if(it(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");r.decorators=o.decorators}nt(o,r)}else t.push(o)}return t}(a.d.map(tt)),e);return r.initializeClassElements(a.F,s.elements),r.runClassFinishers(a.F,s.finishers)}(null,(function(e,t){var n,i,r,o,a,s,l,c,u,d,f,h=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(i,t);var n=Ke(i);function i(){var t;qe(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e(Xe(t)),t}return i}(t);return{F:h,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"automationId",value:function(){return null}},{kind:"field",decorators:[(0,v.Cb)()],key:"entityId",value:function(){return null}},{kind:"field",decorators:[(0,v.Cb)()],key:"automations",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"isWide",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"narrow",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"route",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_dirty",value:function(){return!1}},{kind:"field",decorators:[(0,v.SB)()],key:"_errors",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_entityId",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_mode",value:function(){return"gui"}},{kind:"field",decorators:[(0,v.SB)()],key:"_readOnly",value:function(){return!1}},{kind:"field",decorators:[(0,v.IO)("ha-yaml-editor",!0)],key:"_yamlEditor",value:void 0},{kind:"field",decorators:[(0,v.IO)("manual-automation-editor")],key:"_manualEditor",value:void 0},{kind:"field",key:"_configSubscriptions",value:function(){return{}}},{kind:"field",key:"_configSubscriptionsId",value:function(){return 1}},{kind:"method",key:"render",value:function(){var e,t=this._entityId?this.hass.states[this._entityId]:void 0;return(0,_.dy)(ze||(ze=Qe(["\n      <hass-subpage\n        .hass=","\n        .narrow=","\n        .route=","\n        .backCallback=","\n        .header=","\n      >\n        ",'\n        <ha-button-menu corner="BOTTOM_START" slot="toolbar-icon">\n          <ha-icon-button\n            slot="trigger"\n            .label=',"\n            .path=",'\n          ></ha-icon-button>\n\n          <mwc-list-item\n            graphic="icon"\n            .disabled=',"\n            @click=","\n          >\n            ",'\n            <ha-svg-icon\n              slot="graphic"\n              .path=','\n            ></ha-svg-icon>\n          </mwc-list-item>\n\n          <mwc-list-item\n            graphic="icon"\n            .disabled=',"\n            @click=","\n          >\n            ",'\n            <ha-svg-icon slot="graphic" .path=',"></ha-svg-icon>\n          </mwc-list-item>\n\n          ",'\n\n          <mwc-list-item\n            graphic="icon"\n            @click=',"\n            .disabled=","\n          >\n            ",'\n            <ha-svg-icon slot="graphic" .path=',"></ha-svg-icon>\n          </mwc-list-item>\n\n          ","\n          ","\n\n          <mwc-list-item\n            .disabled=",'\n            graphic="icon"\n            @click=',"\n          >\n            ",'\n            <ha-svg-icon\n              slot="graphic"\n              .path=','\n            ></ha-svg-icon>\n          </mwc-list-item>\n\n          <li divider role="separator"></li>\n\n          <mwc-list-item graphic="icon" @click=',">\n            ","\n            ",'\n          </mwc-list-item>\n          <mwc-list-item graphic="icon" @click=',">\n            ","\n            ",'\n          </mwc-list-item>\n\n          <li divider role="separator"></li>\n\n          <mwc-list-item\n            graphic="icon"\n            .disabled=',"\n            @click=","\n          >\n            ",'\n            <ha-svg-icon\n              slot="graphic"\n              .path=',"\n            ></ha-svg-icon>\n          </mwc-list-item>\n\n          <mwc-list-item\n            .disabled=","\n            class=",'\n            graphic="icon"\n            @click=',"\n          >\n            ","\n            <ha-svg-icon\n              class=",'\n              slot="graphic"\n              .path=',"\n            >\n            </ha-svg-icon>\n          </mwc-list-item>\n        </ha-button-menu>\n\n        ",'\n        <ha-fab\n          slot="fab"\n          class=',"\n          .label=","\n          extended\n          @click=",'\n        >\n          <ha-svg-icon slot="icon" .path=',"></ha-svg-icon>\n        </ha-fab>\n      </hass-subpage>\n    "])),this.hass,this.narrow,this.route,this._backTapped,this._config?this._config.alias||this.hass.localize("ui.panel.config.automation.editor.default_name"):"",null!==(e=this._config)&&void 0!==e&&e.id&&!this.narrow?(0,_.dy)(Se||(Se=Qe(["\n              <mwc-button @click=",' slot="toolbar-icon">\n                ',"\n              </mwc-button>\n            "])),this._showTrace,this.hass.localize("ui.panel.config.automation.editor.show_trace")):"",this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",!t,this._showInfo,this.hass.localize("ui.panel.config.automation.editor.show_info"),"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",!t,this._runActions,this.hass.localize("ui.panel.config.automation.editor.run"),"M8,5.14V19.14L19,12.14L8,5.14Z",t&&this._config&&this.narrow?(0,_.dy)(je||(je=Qe(['<a href="/config/automation/trace/','">\n                <mwc-list-item graphic="icon">\n                  ','\n                  <ha-svg-icon\n                    slot="graphic"\n                    .path=',"\n                  ></ha-svg-icon>\n                </mwc-list-item>\n              </a>"])),this._config.id,this.hass.localize("ui.panel.config.automation.editor.show_trace"),"M15,12C15,10.7 14.16,9.6 13,9.18V6.82C14.16,6.4 15,5.3 15,4A3,3 0 0,0 12,1A3,3 0 0,0 9,4C9,5.3 9.84,6.4 11,6.82V9.19C9.84,9.6 9,10.7 9,12C9,13.3 9.84,14.4 11,14.82V17.18C9.84,17.6 9,18.7 9,20A3,3 0 0,0 12,23A3,3 0 0,0 15,20C15,18.7 14.16,17.6 13,17.18V14.82C14.16,14.4 15,13.3 15,12M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M12,21A1,1 0 0,1 11,20A1,1 0 0,1 12,19A1,1 0 0,1 13,20A1,1 0 0,1 12,21Z"):"",this._promptAutomationAlias,!this.automationId||"yaml"===this._mode,this.hass.localize("ui.panel.config.automation.editor.rename"),"M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",this._config&&!("use_blueprint"in this._config)?(0,_.dy)(Te||(Te=Qe(['\n                <mwc-list-item\n                  graphic="icon"\n                  @click=',"\n                  .disabled=","\n                >\n                  ",'\n                  <ha-svg-icon\n                    slot="graphic"\n                    .path=',"\n                  ></ha-svg-icon>\n                </mwc-list-item>\n              "])),this._promptAutomationMode,this._readOnly||"yaml"===this._mode,this.hass.localize("ui.panel.config.automation.editor.change_mode"),"M12,14A2,2 0 0,1 14,16A2,2 0 0,1 12,18A2,2 0 0,1 10,16A2,2 0 0,1 12,14M23.46,8.86L21.87,15.75L15,14.16L18.8,11.78C17.39,9.5 14.87,8 12,8C8.05,8 4.77,10.86 4.12,14.63L2.15,14.28C2.96,9.58 7.06,6 12,6C15.58,6 18.73,7.89 20.5,10.72L23.46,8.86Z"):"",this._config&&!("use_blueprint"in this._config)?(0,_.dy)(De||(De=Qe(['<mwc-list-item\n                graphic="icon"\n                @click=',"\n                .disabled=","\n              >\n                ",'\n                <ha-svg-icon slot="graphic" .path=',"></ha-svg-icon>\n              </mwc-list-item>"])),this._toggleReOrderMode,this._readOnly||"yaml"===this._mode,this.hass.localize("ui.panel.config.automation.editor.re_order"),"M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z"):"",!this._readOnly&&!this.automationId,this._duplicate,this.hass.localize(this._readOnly?"ui.panel.config.automation.editor.migrate":"ui.panel.config.automation.editor.duplicate"),"M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",this._switchUiMode,this.hass.localize("ui.panel.config.automation.editor.edit_ui"),"gui"===this._mode?(0,_.dy)(Re||(Re=Qe(['<ha-svg-icon\n                  class="selected_menu_item"\n                  slot="graphic"\n                  .path=',"\n                ></ha-svg-icon>"])),ut):"",this._switchYamlMode,this.hass.localize("ui.panel.config.automation.editor.edit_yaml"),"yaml"===this._mode?(0,_.dy)(Me||(Me=Qe(['<ha-svg-icon\n                  class="selected_menu_item"\n                  slot="graphic"\n                  .path=',"\n                ></ha-svg-icon>"])),ut):"",!t,this._toggle,"off"===(null==t?void 0:t.state)?this.hass.localize("ui.panel.config.automation.editor.enable"):this.hass.localize("ui.panel.config.automation.editor.disable"),"off"===(null==t?void 0:t.state)?"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z":"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9",!this.automationId,(0,E.$)({warning:Boolean(this.automationId)}),this._deleteConfirm,this.hass.localize("ui.panel.config.automation.picker.delete"),(0,E.$)({warning:Boolean(this.automationId)}),"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",this._config?(0,_.dy)(Ie||(Ie=Qe(['\n              <div\n                class="content ','"\n                @subscribe-automation-config=',"\n              >\n                ","\n                ","\n              </div>\n            "])),(0,E.$)({"yaml-mode":"yaml"===this._mode}),this._subscribeAutomationConfig,this._errors?(0,_.dy)(Ve||(Ve=Qe(['<ha-alert alert-type="error">\n                      ',"\n                    </ha-alert>"])),this._errors):"","gui"===this._mode?"use_blueprint"in this._config?(0,_.dy)(He||(He=Qe(["\n                        <blueprint-automation-editor\n                          .hass=","\n                          .narrow=","\n                          .isWide=","\n                          .stateObj=","\n                          .config=","\n                          .disabled=","\n                          @value-changed=","\n                          @duplicate=","\n                        ></blueprint-automation-editor>\n                      "])),this.hass,this.narrow,this.isWide,t,this._config,Boolean(this._readOnly),this._valueChanged,this._duplicate):(0,_.dy)(Fe||(Fe=Qe(["\n                        <manual-automation-editor\n                          .hass=","\n                          .narrow=","\n                          .isWide=","\n                          .stateObj=","\n                          .config=","\n                          .disabled=","\n                          @value-changed=","\n                          @duplicate=","\n                        ></manual-automation-editor>\n                      "])),this.hass,this.narrow,this.isWide,t,this._config,Boolean(this._readOnly),this._valueChanged,this._duplicate):"yaml"===this._mode?(0,_.dy)(Be||(Be=Qe(["\n                      ","\n                      ","\n                      <ha-yaml-editor\n                        .hass=","\n                        .defaultValue=","\n                        .readOnly=","\n                        @value-changed=",'\n                      ></ha-yaml-editor>\n                      <ha-card outlined>\n                        <div class="card-actions">\n                          <mwc-button @click=',">\n                            ","\n                          </mwc-button>\n                        </div>\n                      </ha-card>\n                    "])),this._readOnly?(0,_.dy)(Le||(Le=Qe(['<ha-alert alert-type="warning">\n                            ','\n                            <mwc-button slot="action" @click=',">\n                              ","\n                            </mwc-button>\n                          </ha-alert>"])),this.hass.localize("ui.panel.config.automation.editor.read_only"),this._duplicate,this.hass.localize("ui.panel.config.automation.editor.migrate")):"","off"===(null==t?void 0:t.state)?(0,_.dy)(Ze||(Ze=Qe(['\n                            <ha-alert alert-type="info">\n                              ','\n                              <mwc-button slot="action" @click=',">\n                                ","\n                              </mwc-button>\n                            </ha-alert>\n                          "])),this.hass.localize("ui.panel.config.automation.editor.disabled"),this._toggle,this.hass.localize("ui.panel.config.automation.editor.enable")):"",this.hass,this._preprocessYaml(),this._readOnly,this._yamlChanged,this._copyYaml,this.hass.localize("ui.panel.config.automation.editor.copy_to_clipboard")):""):"",(0,E.$)({dirty:this._dirty}),this.hass.localize("ui.panel.config.automation.editor.save"),this._saveAutomation,"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z")}},{kind:"method",key:"updated",value:function(e){var t=this;lt(ct(h.prototype),"updated",this).call(this,e);var n=e.get("automationId");if(e.has("automationId")&&this.automationId&&this.hass&&n!==this.automationId&&(this._setEntityId(),this._loadConfig()),e.has("automationId")&&!this.automationId&&!this.entityId&&this.hass){var i=(0,P.Pl)(),r={description:""};i&&"use_blueprint"in i||(r=Object.assign({},r,{mode:"single",trigger:[],condition:[],action:[]})),this._config=Object.assign({},r,i),this._entityId=void 0,this._readOnly=!1,this._dirty=!0}e.has("entityId")&&this.entityId&&((0,P.SQ)(this.hass,this.entityId).then((function(e){t._config=t._normalizeConfig(e.config)})),this._entityId=this.entityId,this._dirty=!1,this._readOnly=!0),e.has("automations")&&this.automationId&&!this._entityId&&this._setEntityId(),e.has("_config")&&Object.values(this._configSubscriptions).forEach((function(e){return e(t._config)}))}},{kind:"method",key:"_setEntityId",value:function(){var e=this,t=this.automations.find((function(t){return t.attributes.id===e.automationId}));this._entityId=null==t?void 0:t.entity_id}},{kind:"method",key:"_normalizeConfig",value:function(e){for(var t=0,n=["trigger","condition","action"];t<n.length;t++){var i=n[t],r=e[i];r&&!Array.isArray(r)&&(e[i]=[r])}return e}},{kind:"method",key:"_loadConfig",value:(f=Ne(regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,P.r4)(this.hass,this.automationId);case 3:t=e.sent,this._dirty=!1,this._readOnly=!1,this._config=this._normalizeConfig(t),e.next=18;break;case 9:if(e.prev=9,e.t0=e.catch(0),!(n=Object.values(this.hass.entities).find((function(e){return"automation"===e.platform&&e.unique_id===i.automationId})))){e.next=15;break}return(0,C.c)("/config/automation/show/".concat(n.entity_id),{replace:!0}),e.abrupt("return");case 15:return e.next=17,(0,z.Ys)(this,{text:404===e.t0.status_code?this.hass.localize("ui.panel.config.automation.editor.load_error_not_editable"):this.hass.localize("ui.panel.config.automation.editor.load_error_unknown","err_no",e.t0.status_code)});case 17:history.back();case 18:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return f.apply(this,arguments)})},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),this._readOnly||(this._config=e.detail.value,this._dirty=!0,this._errors=void 0)}},{kind:"method",key:"_showInfo",value:function(){this.hass&&this._entityId&&(0,A.B)(this,"hass-more-info",{entityId:this._entityId})}},{kind:"method",key:"_showTrace",value:(d=Ne(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=this._config)||void 0===t||!t.id){e.next=5;break}return e.next=3,this.confirmUnsavedChanged();case 3:e.sent&&(0,C.c)("/config/automation/trace/".concat(this._config.id));case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{kind:"method",key:"_runActions",value:function(){this.hass&&this._entityId&&(0,P.Es)(this.hass,this.hass.states[this._entityId].entity_id)}},{kind:"method",key:"_toggle",value:(u=Ne(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass&&this._entityId){e.next=2;break}return e.abrupt("return");case 2:return t=this.hass.states[this._entityId],n="off"===t.state?"turn_on":"turn_off",e.next=6,this.hass.callService("automation",n,{entity_id:t.entity_id});case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{kind:"method",key:"_preprocessYaml",value:function(){if(!this._config)return{};var e=Object.assign({},this._config);return delete e.id,e}},{kind:"method",key:"_copyYaml",value:(c=Ne(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=this._yamlEditor)||void 0===t||!t.yaml){e.next=4;break}return e.next=3,(0,x.v)(this._yamlEditor.yaml);case 3:(0,T.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")});case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{kind:"method",key:"_yamlChanged",value:function(e){var t;e.stopPropagation(),e.detail.isValid&&(this._config=Object.assign({id:null===(t=this._config)||void 0===t?void 0:t.id},e.detail.value),this._errors=void 0,this._dirty=!0)}},{kind:"method",key:"confirmUnsavedChanged",value:(l=Ne(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dirty){e.next=2;break}return e.abrupt("return",(0,z.g7)(this,{title:this.hass.localize("ui.panel.config.automation.editor.unsaved_confirm_title"),text:this.hass.localize("ui.panel.config.automation.editor.unsaved_confirm_text"),confirmText:this.hass.localize("ui.common.leave"),dismissText:this.hass.localize("ui.common.stay"),destructive:!0}));case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{kind:"field",key:"_backTapped",value:function(){var e=this;return Ne(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.confirmUnsavedChanged();case 2:t.sent&&(0,O.T)((function(){return history.back()}));case 4:case"end":return t.stop()}}),t)})))}},{kind:"method",key:"_duplicate",value:(s=Ne(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._readOnly){e.next=6;break}return e.next=3,(0,z.g7)(this,{title:"Migrate automation?",text:"You can migrate this automation, so it can be edited from the UI. After it is migrated and you have saved it, you will have to manually delete your old automation from your configuration. Do you want to migrate this automation?"});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.confirmUnsavedChanged();case 8:e.t0=e.sent;case 9:e.t0&&(0,P.Ip)(Object.assign({},this._config,{id:void 0,alias:this._readOnly?null===(t=this._config)||void 0===t?void 0:t.alias:void 0}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{kind:"method",key:"_deleteConfirm",value:(a=Ne(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,z.g7)(this,{title:this.hass.localize("ui.panel.config.automation.picker.delete_confirm_title"),text:this.hass.localize("ui.panel.config.automation.picker.delete_confirm_text",{name:null===(t=this._config)||void 0===t?void 0:t.alias}),confirmText:this.hass.localize("ui.common.delete"),destructive:!0,dismissText:this.hass.localize("ui.common.cancel"),confirm:function(){return n._delete()}});case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{kind:"method",key:"_delete",value:(o=Ne(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.automationId){e.next=4;break}return e.next=3,(0,P.SC)(this.hass,this.automationId);case 3:history.back();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{kind:"method",key:"_switchUiMode",value:function(){this._mode="gui"}},{kind:"method",key:"_switchYamlMode",value:function(){this._mode="yaml"}},{kind:"method",key:"_toggleReOrderMode",value:function(){this._manualEditor&&(this._manualEditor.reOrderMode=!this._manualEditor.reOrderMode)}},{kind:"method",key:"_promptAutomationAlias",value:(r=Ne(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n,i;n=t,i={config:t._config,updateAutomation:function(n){t._config=n,t._dirty=!0,t.requestUpdate(),e()},onClose:function(){return e()}},(0,A.B)(n,"show-dialog",{dialogTag:"ha-dialog-automation-rename",dialogImport:R,dialogParams:i})})));case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_promptAutomationMode",value:(i=Ne(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n,i;n=t,i={config:t._config,updateAutomation:function(n){t._config=n,t._dirty=!0,t.requestUpdate(),e()},onClose:function(){return e()}},(0,A.B)(n,"show-dialog",{dialogTag:"ha-dialog-automation-mode",dialogImport:D,dialogParams:i})})));case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_saveAutomation",value:(n=Ne(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.automationId||String(Date.now()),this.automationId){e.next=4;break}return e.next=4,this._promptAutomationAlias();case 4:return e.prev=4,e.next=7,(0,P.sq)(this.hass,t,this._config);case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(4),this._errors=e.t0.body.message||e.t0.error||e.t0.body,(0,T.C)(this,{message:e.t0.body.message||e.t0.error||e.t0.body}),e.t0;case 14:this._dirty=!1,this.automationId||(0,C.c)("/config/automation/edit/".concat(t),{replace:!0});case 16:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_subscribeAutomationConfig",value:function(e){var t=this,n=this._configSubscriptionsId++;this._configSubscriptions[n]=e.detail.callback,e.detail.unsub=function(){delete t._configSubscriptions[n]},e.detail.callback(this._config)}},{kind:"method",key:"handleKeyboardSave",value:function(){this._saveAutomation()}},{kind:"get",static:!0,key:"styles",value:function(){return[j.Qx,(0,_.iv)(Ue||(Ue=Qe(['\n        ha-card {\n          overflow: hidden;\n        }\n        .content {\n          padding-bottom: 20px;\n        }\n        .yaml-mode {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          padding-bottom: 0;\n        }\n        manual-automation-editor,\n        blueprint-automation-editor {\n          margin: 0 auto;\n          max-width: 1040px;\n          padding: 28px 20px 0;\n        }\n        ha-yaml-editor {\n          flex-grow: 1;\n          --code-mirror-height: 100%;\n          min-height: 0;\n        }\n        .yaml-mode ha-card {\n          overflow: initial;\n          --ha-card-border-radius: 0;\n          border-bottom: 1px solid var(--divider-color);\n        }\n        p {\n          margin-bottom: 0;\n        }\n        ha-entity-toggle {\n          margin-right: 8px;\n        }\n        ha-fab {\n          position: relative;\n          bottom: calc(-80px - env(safe-area-inset-bottom));\n          transition: bottom 0.3s;\n        }\n        ha-fab.dirty {\n          bottom: 0;\n        }\n        .selected_menu_item {\n          color: var(--primary-color);\n        }\n        li[role="separator"] {\n          border-bottom-color: var(--divider-color);\n        }\n        ha-button-menu a {\n          text-decoration: none;\n          color: var(--primary-color);\n        }\n        h1 {\n          margin: 0;\n        }\n        .header-name {\n          display: flex;\n          align-items: center;\n          margin: 0 auto;\n          max-width: 1040px;\n          padding: 28px 20px 0;\n        }\n      '])))]}}]}}),(0,S.U)(_.oi));customElements.define("ha-automation-editor",dt);n(54444);var ft,ht,pt,mt,yt,vt,gt,bt=n(4535),kt=n(7323),wt=n(44583),_t=n(70144),Et=n(91741),At=(n(67556),n(88324),n(48429),n(96551),n(29311)),Ct=function(){return Promise.all([n.e(85084),n.e(34821),n.e(42228)]).then(n.bind(n,42228))};function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function Ot(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Ot(o,i,r,a,s,"next",e)}function s(e){Ot(o,i,r,a,s,"throw",e)}a(void 0)}))}}function zt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Mt(e);if(t){var r=Mt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Dt(this,n)}}function Dt(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rt(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function It(){It=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(i){t.forEach((function(t){var r=t.placement;if(t.kind===i&&("static"===r||"prototype"===r)){var o="static"===r?e:n;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var i=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],i=[],r={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,r)}),this),e.forEach((function(e){if(!Ft(e))return n.push(e);var t=this.decorateElement(e,r);n.push(t.element),n.push.apply(n,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:n,finishers:i};var o=this.decorateConstructor(n,t);return i.push.apply(i,o.finishers),o.finishers=i,o},addElementPlacement:function(e,t,n){var i=t[e.placement];if(!n&&-1!==i.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var n=[],i=[],r=e.decorators,o=r.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,r[o])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:i,extras:n}},decorateConstructor:function(e,t){for(var n=[],i=t.length-1;i>=0;i--){var r=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[i])(r)||r);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=Zt(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var r=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:n,placement:i,descriptor:Object.assign({},r)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Lt(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=Lt(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var i=(0,t[n])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function Vt(e){var t,n=Zt(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function Ht(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Ft(e){return e.decorators&&e.decorators.length}function Bt(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Lt(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function Zt(e){var t=function(e,t){if("object"!==xt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==xt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xt(t)?t:String(t)}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}!function(e,t,n,i){var r=It();if(i)for(var o=0;o<i.length;o++)r=i[o](r);var a=t((function(e){r.initializeInstanceElements(e,s.elements)}),n),s=r.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},i=0;i<e.length;i++){var r,o=e[i];if("method"===o.kind&&(r=t.find(n)))if(Bt(o.descriptor)||Bt(r.descriptor)){if(Ft(o)||Ft(r))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");r.descriptor=o.descriptor}else{if(Ft(o)){if(Ft(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");r.decorators=o.decorators}Ht(o,r)}else t.push(o)}return t}(a.d.map(Vt)),e);r.initializeClassElements(a.F,s.elements),r.runClassFinishers(a.F,s.finishers)}([(0,v.Mo)("ha-automation-picker")],(function(e,t){var n,i,r,o,a=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(i,t);var n=Tt(i);function i(){var t;St(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e(Rt(t)),t}return i}(t);return{F:a,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"isWide",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"route",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"automations",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"_activeFilters",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_filteredAutomations",value:void 0},{kind:"field",decorators:[(0,v.SB)()],key:"_filterValue",value:void 0},{kind:"field",key:"_automations",value:function(){return(0,g.Z)((function(e,t){return null===t?[]:(t?e.filter((function(e){return t.includes(e.entity_id)})):e).map((function(e){return Object.assign({},e,{name:(0,Et.C)(e),last_triggered:e.attributes.last_triggered||void 0,disabled:"off"===e.state})}))}))}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,g.Z)((function(t,n){var i={name:{title:e.hass.localize("ui.panel.config.automation.picker.headers.name"),main:!0,sortable:!0,filterable:!0,direction:"asc",grows:!0,template:t?function(t,n){var i=new Date(n.attributes.last_triggered),r=new Date,o=(0,bt.Z)(r,i);return(0,_.dy)(ft||(ft=zt(["\n                  ",'\n                  <div class="secondary">\n                    ',":\n                    ","\n                  </div>\n                "])),t,e.hass.localize("ui.card.automation.last_triggered"),n.attributes.last_triggered?o>3?(0,wt.yD)(i,e.hass.locale):(0,_t.G)(i,e.hass.locale):e.hass.localize("ui.components.relative_time.never"))}:void 0}};return t||(i.last_triggered={sortable:!0,width:"20%",title:e.hass.localize("ui.card.automation.last_triggered"),template:function(t){var n=new Date(t),i=new Date,r=(0,bt.Z)(i,n);return(0,_.dy)(ht||(ht=zt(["\n              ","\n            "])),t?r>3?(0,wt.yD)(n,e.hass.locale):(0,_t.G)(n,e.hass.locale):e.hass.localize("ui.components.relative_time.never"))}}),i.disabled=e.narrow?{title:"",template:function(t){return t?(0,_.dy)(pt||(pt=zt(['\n                    <paper-tooltip animation-delay="0" position="left">\n                      ',"\n                    </paper-tooltip>\n                    <ha-svg-icon\n                      .path=",'\n                      style="color: var(--secondary-text-color)"\n                    ></ha-svg-icon>\n                  '])),e.hass.localize("ui.panel.config.automation.picker.disabled"),"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z"):""}}:{width:"20%",title:"",template:function(t){return t?(0,_.dy)(mt||(mt=zt(["\n                    <ha-chip>\n                      ","\n                    </ha-chip>\n                  "])),e.hass.localize("ui.panel.config.automation.picker.disabled")):""}},i.actions={title:"",width:e.narrow?void 0:"10%",type:"overflow-menu",template:function(t,n){return(0,_.dy)(yt||(yt=zt(["\n            <ha-icon-overflow-menu\n              .hass=","\n              narrow\n              .items=","\n            >\n            </ha-icon-overflow-menu>\n          "])),e.hass,[{path:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",label:e.hass.localize("ui.panel.config.automation.editor.show_info"),action:function(){return e._showInfo(n)}},{path:"M8,5.14V19.14L19,12.14L8,5.14Z",label:e.hass.localize("ui.panel.config.automation.editor.run"),action:function(){return e._runActions(n)}},{path:"M15,12C15,10.7 14.16,9.6 13,9.18V6.82C14.16,6.4 15,5.3 15,4A3,3 0 0,0 12,1A3,3 0 0,0 9,4C9,5.3 9.84,6.4 11,6.82V9.19C9.84,9.6 9,10.7 9,12C9,13.3 9.84,14.4 11,14.82V17.18C9.84,17.6 9,18.7 9,20A3,3 0 0,0 12,23A3,3 0 0,0 15,20C15,18.7 14.16,17.6 13,17.18V14.82C14.16,14.4 15,13.3 15,12M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M12,21A1,1 0 0,1 11,20A1,1 0 0,1 12,19A1,1 0 0,1 13,20A1,1 0 0,1 12,21Z",label:e.hass.localize("ui.panel.config.automation.editor.show_trace"),action:function(){return e._showTrace(n)}},{divider:!0},{path:"M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",label:e.hass.localize("ui.panel.config.automation.picker.duplicate"),action:function(){return e.duplicate(n)}},{path:"off"===n.state?"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z":"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9",label:"off"===n.state?e.hass.localize("ui.panel.config.automation.editor.enable"):e.hass.localize("ui.panel.config.automation.editor.disable"),action:function(){return e._toggle(n)}},{label:e.hass.localize("ui.panel.config.automation.picker.delete"),path:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",action:function(){return e._deleteConfirm(n)},warning:!0}])}},i}))}},{kind:"method",key:"render",value:function(){return(0,_.dy)(vt||(vt=zt(["\n      <hass-tabs-subpage-data-table\n        .hass=","\n        .narrow=",'\n        back-path="/config"\n        id="entity_id"\n        .route=',"\n        .tabs=","\n        .activeFilters=","\n        .columns=","\n        .data=","\n        @row-click=","\n        .noDataText=","\n        @clear-filter=",'\n        hasFab\n        clickable\n      >\n        <ha-icon-button\n          slot="toolbar-icon"\n          .label=',"\n          .path=","\n          @click=",'\n        ></ha-icon-button>\n        <ha-button-related-filter-menu\n          slot="filter-menu"\n          corner="BOTTOM_START"\n          .narrow=',"\n          .hass=","\n          .value=","\n          exclude-domains='[\"automation\"]'\n          @related-changed=",'\n        >\n        </ha-button-related-filter-menu>\n        <ha-fab\n          slot="fab"\n          .label=',"\n          extended\n          @click=",'\n        >\n          <ha-svg-icon slot="icon" .path=',"></ha-svg-icon>\n        </ha-fab>\n      </hass-tabs-subpage-data-table>\n    "])),this.hass,this.narrow,this.route,At.configSections.automations,this._activeFilters,this._columns(this.narrow,this.hass.locale),this._automations(this.automations,this._filteredAutomations),this._handleRowClicked,this.hass.localize("ui.panel.config.automation.picker.no_automations"),this._clearFilter,this.hass.localize("ui.common.help"),"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",this._showHelp,this.narrow,this.hass,this._filterValue,this._relatedFilterChanged,this.hass.localize("ui.panel.config.automation.picker.add_automation"),this._createNew,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z")}},{kind:"method",key:"_relatedFilterChanged",value:function(e){this._filterValue=e.detail.value,this._filterValue?(this._activeFilters=[e.detail.filter],this._filteredAutomations=e.detail.items.automation||null):this._clearFilter()}},{kind:"method",key:"_clearFilter",value:function(){this._filteredAutomations=void 0,this._activeFilters=void 0,this._filterValue=void 0}},{kind:"method",key:"_showInfo",value:function(e){(0,A.B)(this,"hass-more-info",{entityId:e.entity_id})}},{kind:"method",key:"_runActions",value:function(e){(0,P.Es)(this.hass,e.entity_id)}},{kind:"method",key:"_showTrace",value:function(e){e.attributes.id?(0,C.c)("/config/automation/trace/".concat(e.attributes.id)):(0,z.Ys)(this,{text:this.hass.localize("ui.panel.config.automation.picker.traces_not_available")})}},{kind:"method",key:"_toggle",value:(o=Pt(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="off"===t.state?"turn_on":"turn_off",e.next=3,this.hass.callService("automation",n,{entity_id:t.entity_id});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{kind:"method",key:"_deleteConfirm",value:(r=Pt(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,z.g7)(this,{title:this.hass.localize("ui.panel.config.automation.picker.delete_confirm_title"),text:this.hass.localize("ui.panel.config.automation.picker.delete_confirm_text",{name:t.name}),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),confirm:function(){return n._delete(t)},destructive:!0});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{kind:"method",key:"_delete",value:(i=Pt(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,P.SC)(this.hass,t.attributes.id);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,(0,z.Ys)(this,{text:400===e.t0.status_code?this.hass.localize("ui.panel.config.automation.editor.load_error_not_deletable"):this.hass.localize("ui.panel.config.automation.editor.load_error_unknown","err_no",e.t0.status_code)});case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return i.apply(this,arguments)})},{kind:"method",key:"duplicate",value:(n=Pt(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,P.r4)(this.hass,t.attributes.id);case 3:n=e.sent,(0,P.HF)(n),e.next=17;break;case 7:if(e.prev=7,e.t0=e.catch(0),404!==e.t0.status_code){e.next=15;break}return e.next=12,(0,P.SQ)(this.hass,t.entity_id);case 12:return i=e.sent,(0,P.Ip)(Object.assign({},i.config,{id:void 0})),e.abrupt("return");case 15:return e.next=17,(0,z.Ys)(this,{text:this.hass.localize("ui.panel.config.automation.editor.load_error_unknown","err_no",e.t0.status_code)});case 17:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return n.apply(this,arguments)})},{kind:"method",key:"_showHelp",value:function(){(0,z.Ys)(this,{title:this.hass.localize("ui.panel.config.automation.caption"),text:(0,_.dy)(gt||(gt=zt(["\n        ","\n        <p>\n          <a\n            href=",'\n            target="_blank"\n            rel="noreferrer"\n          >\n            ',"\n          </a>\n        </p>\n      "])),this.hass.localize("ui.panel.config.automation.picker.introduction"),(0,de.R)(this.hass,"/docs/automation/editor/"),this.hass.localize("ui.panel.config.automation.picker.learn_more"))})}},{kind:"method",key:"_handleRowClicked",value:function(e){var t=this.automations.find((function(t){return t.entity_id===e.detail.id}));null!=t&&t.attributes.id?(0,C.c)("/config/automation/edit/".concat(t.attributes.id)):(0,C.c)("/config/automation/show/".concat(e.detail.id))}},{kind:"method",key:"_createNew",value:function(){var e;(0,kt.p)(this.hass,"blueprint")?(e=this,(0,A.B)(e,"show-dialog",{dialogTag:"ha-dialog-new-automation",dialogImport:Ct,dialogParams:{}})):(0,C.c)("/config/automation/edit/new")}},{kind:"get",static:!0,key:"styles",value:function(){return j.Qx}}]}}),_.oi);function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){return $t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$t(e,t)}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=an(e);if(t){var r=an(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Qt(this,n)}}function Qt(e,t){if(t&&("object"===Yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qt(e)}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(){Gt=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(i){t.forEach((function(t){var r=t.placement;if(t.kind===i&&("static"===r||"prototype"===r)){var o="static"===r?e:n;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var i=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],i=[],r={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,r)}),this),e.forEach((function(e){if(!Xt(e))return n.push(e);var t=this.decorateElement(e,r);n.push(t.element),n.push.apply(n,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:n,finishers:i};var o=this.decorateConstructor(n,t);return i.push.apply(i,o.finishers),o.finishers=i,o},addElementPlacement:function(e,t,n){var i=t[e.placement];if(!n&&-1!==i.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var n=[],i=[],r=e.decorators,o=r.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,r[o])(s)||s);e=l.element,this.addElementPlacement(e,t),l.finisher&&i.push(l.finisher);var c=l.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:i,extras:n}},decorateConstructor:function(e,t){for(var n=[],i=t.length-1;i>=0;i--){var r=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[i])(r)||r);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=nn(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var r=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:n,placement:i,descriptor:Object.assign({},r)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:tn(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=tn(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var i=(0,t[n])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function Kt(e){var t,n=nn(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function Jt(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Xt(e){return e.decorators&&e.decorators.length}function en(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function tn(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}function nn(e){var t=function(e,t){if("object"!==Yt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Yt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yt(t)?t:String(t)}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function on(e,t,n){return on="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=an(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},on(e,t,n||e)}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}!function(e,t,n,i){var r=Gt();if(i)for(var o=0;o<i.length;o++)r=i[o](r);var a=t((function(e){r.initializeInstanceElements(e,s.elements)}),n),s=r.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},i=0;i<e.length;i++){var r,o=e[i];if("method"===o.kind&&(r=t.find(n)))if(en(o.descriptor)||en(r.descriptor)){if(Xt(o)||Xt(r))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");r.descriptor=o.descriptor}else{if(Xt(o)){if(Xt(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");r.decorators=o.decorators}Jt(o,r)}else t.push(o)}return t}(a.d.map(Kt)),e);r.initializeClassElements(a.F,s.elements),r.runClassFinishers(a.F,s.finishers)}([(0,v.Mo)("ha-config-automation")],(function(e,t){var i=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(i,t);var n=Nt(i);function i(){var t;Wt(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e(qt(t)),t}return i}(t);return{F:i,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"narrow",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"isWide",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"showAdvanced",value:void 0},{kind:"field",decorators:[(0,v.Cb)()],key:"automations",value:function(){return[]}},{kind:"field",key:"_debouncedUpdateAutomations",value:function(){var e=this;return(0,k.D)((function(t){var n,i,r=e._getAutomations(e.hass.states);n=r,i=t.automations,n.length===i.length&&n.every((function(e,t){return e===i[t]}))||(t.automations=r)}),10)}},{kind:"field",key:"routerOptions",value:function(){return{defaultPage:"dashboard",routes:{dashboard:{tag:"ha-automation-picker",cache:!0},edit:{tag:"ha-automation-editor"},show:{tag:"ha-automation-editor"},trace:{tag:"ha-automation-trace",load:function(){return Promise.all([n.e(99528),n.e(49830),n.e(53890)]).then(n.bind(n,53890))}}}}}},{kind:"field",key:"_getAutomations",value:function(){return(0,g.Z)((function(e){return Object.values(e).filter((function(e){return"automation"===(0,b.N)(e)&&!e.attributes.restored}))}))}},{kind:"method",key:"firstUpdated",value:function(e){on(an(i.prototype),"firstUpdated",this).call(this,e),this.hass.loadBackendTranslation("device_automation")}},{kind:"method",key:"updatePageEl",value:function(e,t){if(e.hass=this.hass,e.narrow=this.narrow,e.isWide=this.isWide,e.route=this.routeTail,e.showAdvanced=this.showAdvanced,this.hass&&(e.automations&&t?t.has("hass")&&this._debouncedUpdateAutomations(e):e.automations=this._getAutomations(this.hass.states)),(!t||t.has("route"))&&"show"===this._currentPage){var n=decodeURIComponent(this.routeTail.path.substr(1));return e.automationId=null,void(e.entityId="new"===n?null:n)}if((!t||t.has("route"))&&"dashboard"!==this._currentPage){var i=decodeURIComponent(this.routeTail.path.substr(1));e.automationId="new"===i?null:i,e.entityId=null}}}]}}),w.n)}}]);