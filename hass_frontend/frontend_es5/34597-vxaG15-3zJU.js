"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[34597],{66695:function(e,t,i){i.d(t,{V:function(){return c}});var n=i(40039),a=i(33368),o=i(71650),r=Symbol("selection controller"),s=(0,a.Z)((function e(){(0,o.Z)(this,e),this.selected=null,this.ordered=null,this.set=new Set})),c=function(){function e(t){var i=this;(0,o.Z)(this,e),this.sets={},this.focusedSet=null,this.mouseIsDown=!1,this.updating=!1,t.addEventListener("keydown",(function(e){i.keyDownHandler(e)})),t.addEventListener("mousedown",(function(){i.mousedownHandler()})),t.addEventListener("mouseup",(function(){i.mouseupHandler()}))}return(0,a.Z)(e,[{key:"keyDownHandler",value:function(e){var t=e.target;"checked"in t&&this.has(t)&&("ArrowRight"==e.key||"ArrowDown"==e.key?this.selectNext(t):"ArrowLeft"!=e.key&&"ArrowUp"!=e.key||this.selectPrevious(t))}},{key:"mousedownHandler",value:function(){this.mouseIsDown=!0}},{key:"mouseupHandler",value:function(){this.mouseIsDown=!1}},{key:"has",value:function(e){return this.getSet(e.name).set.has(e)}},{key:"selectPrevious",value:function(e){var t=this.getOrdered(e),i=t.indexOf(e),n=t[i-1]||t[t.length-1];return this.select(n),n}},{key:"selectNext",value:function(e){var t=this.getOrdered(e),i=t.indexOf(e),n=t[i+1]||t[0];return this.select(n),n}},{key:"select",value:function(e){e.click()}},{key:"focus",value:function(e){if(!this.mouseIsDown){var t=this.getSet(e.name),i=this.focusedSet;this.focusedSet=t,i!=t&&t.selected&&t.selected!=e&&t.selected.focus()}}},{key:"isAnySelected",value:function(e){var t,i=this.getSet(e.name),a=(0,n.Z)(i.set);try{for(a.s();!(t=a.n()).done;){if(t.value.checked)return!0}}catch(o){a.e(o)}finally{a.f()}return!1}},{key:"getOrdered",value:function(e){var t=this.getSet(e.name);return t.ordered||(t.ordered=Array.from(t.set),t.ordered.sort((function(e,t){return e.compareDocumentPosition(t)==Node.DOCUMENT_POSITION_PRECEDING?1:0}))),t.ordered}},{key:"getSet",value:function(e){return this.sets[e]||(this.sets[e]=new s),this.sets[e]}},{key:"register",value:function(e){var t=e.name||e.getAttribute("name")||"",i=this.getSet(t);i.set.add(e),i.ordered=null}},{key:"unregister",value:function(e){var t=this.getSet(e.name);t.set.delete(e),t.ordered=null,t.selected==e&&(t.selected=null)}},{key:"update",value:function(e){if(!this.updating){this.updating=!0;var t=this.getSet(e.name);if(e.checked){var i,a=(0,n.Z)(t.set);try{for(a.s();!(i=a.n()).done;){var o=i.value;o!=e&&(o.checked=!1)}}catch(l){a.e(l)}finally{a.f()}t.selected=e}if(this.isAnySelected(e)){var r,s=(0,n.Z)(t.set);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(void 0===c.formElementTabIndex)break;c.formElementTabIndex=c.checked?0:-1}}catch(l){s.e(l)}finally{s.f()}}this.updating=!1}}}],[{key:"getController",value:function(t){var i=!("global"in t)||"global"in t&&t.global?document:t.getRootNode(),n=i[r];return void 0===n&&(n=new e(i),i[r]=n),n}}]),e}()},73366:function(e,t,i){var n,a=i(88962),o=i(33368),r=i(71650),s=i(82390),c=i(69205),l=i(70906),d=i(91808),u=i(88771),h=i(47838),g=i(61092),f=i(96762),v=i(68144),m=i(79932);(0,d.Z)([(0,m.Mo)("ha-list-item")],(function(e,t){var i=function(t){(0,c.Z)(n,t);var i=(0,l.Z)(n);function n(){var t;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return t=i.call.apply(i,[this].concat(o)),e((0,s.Z)(t)),t}return(0,o.Z)(n)}(t);return{F:i,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,u.Z)((0,h.Z)(i.prototype),"renderRipple",this).call(this)}},{kind:"get",static:!0,key:"styles",value:function(){return[f.W,(0,v.iv)(n||(n=(0,a.Z)([":host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}"])))]}}]}}),g.K)},68968:function(e,t,i){i.r(t);var n,a,o,r,s,c=i(99312),l=i(81043),d=i(88962),u=i(33368),h=i(71650),g=i(82390),f=i(69205),v=i(70906),m=i(91808),y=i(88771),_=i(47838),p=(i(53918),i(68144)),k=i(79932),b=i(14516),x=i(47181),w=(i(9381),i(95250),i(56250),i(83927),i(4159),i(33220),i(3555),i(8693),i(48456),i(76307)),S=i(69906),Z=[52.3731339,4.8903147],V=matchMedia("(prefers-color-scheme: dark)"),z="location";(0,m.Z)([(0,k.Mo)("onboarding-core-config")],(function(e,t){var i,m,C=function(t){(0,f.Z)(n,t);var i=(0,v.Z)(n);function n(){var t;(0,h.Z)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o)),e((0,g.Z)(t)),t}return(0,u.Z)(n)}(t);return{F:C,d:[{kind:"field",decorators:[(0,k.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.Cb)()],key:"onboardingLocalize",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_working",value:function(){return!1}},{kind:"field",decorators:[(0,k.SB)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_location",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_elevation",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_unitSystem",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_currency",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_timeZone",value:function(){var e,t,i,n;return null===(e=(t=Intl).DateTimeFormat)||void 0===e||null===(i=(n=e.call(t)).resolvedOptions)||void 0===i?void 0:i.call(n).timeZone}},{kind:"field",decorators:[(0,k.SB)()],key:"_language",value:function(){return(0,S.sS)()}},{kind:"field",decorators:[(0,k.SB)()],key:"_country",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,k.IO)("ha-locations-editor",!0)],key:"map",value:void 0},{kind:"method",key:"render",value:function(){return(0,p.dy)(n||(n=(0,d.Z)([" "," <p> ",' </p> <ha-textfield .label="','" name="name" .disabled="','" .value="','" @change="','"></ha-textfield> <div class="middle-text"> <p> ',' </p> <div class="row"> <div> ',' </div> <mwc-button @click="','"> ',' </mwc-button> </div> </div> <div class="row"> <ha-locations-editor class="flex" .hass="','" .locations="','" zoom="14" .darkMode="','" @location-updated="','"></ha-locations-editor> </div> <div class="row"> <ha-country-picker class="flex" .language="','" .label="','" name="country" required .disabled="','" .value="','" @value-changed="','"> </ha-country-picker> <ha-language-picker class="flex" .hass="','" nativeName .label="','" name="language" required .value="','" .disabled="','" @value-changed="','"> </ha-language-picker> </div> <div class="row"> <ha-timezone-picker class="flex" .label="','" name="timeZone" .disabled="','" .value="','" @value-changed="','"> </ha-timezone-picker> <ha-textfield class="flex" .label="','" name="elevation" type="number" .disabled="','" .value="','" .suffix="','" @change="','"> </ha-textfield> </div> <div class="row"> <div class="flex"> ',' </div> <div class="radio-group"> <ha-formfield .label="','"> <ha-radio name="unit_system" value="metric" .checked="','" @change="','" .disabled="','"></ha-radio> </ha-formfield> <ha-formfield .label="','"> <ha-radio name="unit_system" value="us_customary" .checked="','" @change="','" .disabled="','"></ha-radio> </ha-formfield> </div> </div> <div class="row"> <div class="flex"> ','<br> <a href="https://en.wikipedia.org/wiki/ISO_4217#Active_codes" target="_blank" rel="noopener noreferrer">','</a> </div> <ha-currency-picker class="flex" .label="','" name="currency" .disabled="','" .value="','" @value-changed="','"> </ha-currency-picker> </div>  <div class="footer"> <mwc-button @click="','" .disabled="','"> '," </mwc-button> </div> "])),this._error?(0,p.dy)(a||(a=(0,d.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):p.Ld,this.onboardingLocalize("ui.panel.page-onboarding.core-config.intro","name",this.hass.user.name),this.onboardingLocalize("ui.panel.page-onboarding.core-config.location_name"),this._working,this._nameValue,this._handleChange,this.onboardingLocalize("ui.panel.page-onboarding.core-config.intro_location"),this.onboardingLocalize("ui.panel.page-onboarding.core-config.intro_location_detect"),this._detect,this.onboardingLocalize("ui.panel.page-onboarding.core-config.button_detect"),this.hass,this._markerLocation(this._locationValue),V.matches,this._locationChanged,this.hass.locale.language,this.hass.localize("ui.panel.config.core.section.core.core_config.country")||"Country",this._working,this._countryValue,this._handleValueChanged,this.hass,this.hass.localize("ui.panel.config.core.section.core.core_config.language"),this._languageValue,this._working,this._handleValueChanged,this.hass.localize("ui.panel.config.core.section.core.core_config.time_zone"),this._working,this._timeZoneValue,this._handleValueChanged,this.hass.localize("ui.panel.config.core.section.core.core_config.elevation"),this._working,this._elevationValue,this.hass.localize("ui.panel.config.core.section.core.core_config.elevation_meters"),this._handleChange,this.hass.localize("ui.panel.config.core.section.core.core_config.unit_system"),(0,p.dy)(o||(o=(0,d.Z)(["",' <div class="secondary"> '," </div>"])),this.hass.localize("ui.panel.config.core.section.core.core_config.unit_system_metric"),this.hass.localize("ui.panel.config.core.section.core.core_config.metric_example")),"metric"===this._unitSystemValue,this._unitSystemChanged,this._working,(0,p.dy)(r||(r=(0,d.Z)(["",' <div class="secondary"> '," </div>"])),this.hass.localize("ui.panel.config.core.section.core.core_config.unit_system_us_customary"),this.hass.localize("ui.panel.config.core.section.core.core_config.us_customary_example")),"us_customary"===this._unitSystemValue,this._unitSystemChanged,this._working,this.hass.localize("ui.panel.config.core.section.core.core_config.currency"),this.hass.localize("ui.panel.config.core.section.core.core_config.find_currency_value"),this.hass.localize("ui.panel.config.core.section.core.core_config.currency"),this._working,this._currencyValue,this._handleValueChanged,this._save,this._working,this.onboardingLocalize("ui.panel.page-onboarding.core-config.finish"))}},{kind:"method",key:"firstUpdated",value:function(e){var t=this;(0,y.Z)((0,_.Z)(C.prototype),"firstUpdated",this).call(this,e),setTimeout((function(){return t.renderRoot.querySelector("ha-textfield").focus()}),100),this.addEventListener("keypress",(function(e){"Enter"===e.key&&t._save(e)}))}},{kind:"get",key:"_nameValue",value:function(){return void 0!==this._name?this._name:this.onboardingLocalize("ui.panel.page-onboarding.core-config.location_name_default")}},{kind:"get",key:"_locationValue",value:function(){return this._location||Z}},{kind:"get",key:"_elevationValue",value:function(){return void 0!==this._elevation?this._elevation:0}},{kind:"get",key:"_timeZoneValue",value:function(){return this._timeZone||""}},{kind:"get",key:"_languageValue",value:function(){return this._language||""}},{kind:"get",key:"_countryValue",value:function(){return this._country||""}},{kind:"get",key:"_unitSystemValue",value:function(){return void 0!==this._unitSystem?this._unitSystem:"metric"}},{kind:"get",key:"_currencyValue",value:function(){return void 0!==this._currency?this._currency:""}},{kind:"field",key:"_markerLocation",value:function(){return(0,b.Z)((function(e){return[{id:z,latitude:e[0],longitude:e[1],location_editable:!0}]}))}},{kind:"method",key:"_handleValueChanged",value:function(e){var t=e.currentTarget;this["_".concat(t.getAttribute("name"))]=e.detail.value}},{kind:"method",key:"_handleChange",value:function(e){var t=e.currentTarget;this["_".concat(t.name)]=t.value}},{kind:"method",key:"_locationChanged",value:function(e){this._location=e.detail.location}},{kind:"method",key:"_unitSystemChanged",value:function(e){this._unitSystem=e.target.value}},{kind:"method",key:"_detect",value:(m=(0,l.Z)((0,c.Z)().mark((function e(){var t,i=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._working=!0,e.prev=1,e.next=4,this.hass.callWS({type:"config/core/detect"});case 4:(t=e.sent).latitude&&t.longitude&&(this.map.addEventListener("markers-updated",(function(){i.map.fitMarker(z)}),{once:!0}),this._location=[Number(t.latitude),Number(t.longitude)]),t.elevation&&(this._elevation=String(t.elevation)),t.unit_system&&(this._unitSystem=t.unit_system),t.time_zone&&(this._timeZone=t.time_zone),t.currency&&(this._currency=t.currency),t.country&&(this._country=t.country),this._language=(0,S.sS)(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),this._error="Failed to detect location information: ".concat(e.t0.message);case 17:return e.prev=17,this._working=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[1,14,17,20]])}))),function(){return m.apply(this,arguments)})},{kind:"method",key:"_save",value:(i=(0,l.Z)((0,c.Z)().mark((function e(t){var i,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this._working=!0,e.prev=2,i=this._locationValue,e.next=6,a=this.hass,o={location_name:this._nameValue,latitude:i[0],longitude:i[1],elevation:Number(this._elevationValue),unit_system:this._unitSystemValue,time_zone:this._timeZoneValue||"UTC",currency:this._currencyValue||"EUR",country:this._countryValue,language:this._languageValue},a.callWS(Object.assign({type:"config/core/update"},o));case 6:return e.next=8,(0,w.Rj)(this.hass);case 8:n=e.sent,(0,x.B)(this,"onboarding-step",{type:"core_config",result:n}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),this._working=!1,this._error=e.t0.message;case 16:case"end":return e.stop()}var a,o}),e,this,[[2,12]])}))),function(e){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,p.iv)(s||(s=(0,d.Z)([".row{display:flex;flex-direction:row;margin:0 -8px;align-items:center;--ha-select-min-width:100px}.secondary{color:var(--secondary-text-color)}ha-textfield{display:block}ha-locations-editor{height:200px}.flex{flex:1}.middle-text{margin:16px 0}.row{margin-top:16px}.row>*{margin:0 8px}.radio-group{display:flex;flex-direction:column;flex:1}.footer{margin-top:16px;text-align:right}a{color:var(--primary-color)}"])))}}]}}),p.oi)}}]);
//# sourceMappingURL=34597-vxaG15-3zJU.js.map