(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["69507"],{19631:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{Bt:()=>l});i(19083);var s=i(16485),n=i(88977),o=i(20382),r=e([s]);s=(r.then?(await r)():r)[0];const c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],l=e=>e.first_weekday===o.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,n.L)(e.language)%7:c.includes(e.first_weekday)?c.indexOf(e.first_weekday):1;a()}catch(c){a(c)}}))},62201:function(e,t,i){"use strict";i.d(t,{K:()=>a});const a=(e,t)=>{const i=matchMedia(e),a=e=>t(e.matches);return i.addListener(a),t(i.matches),()=>i.removeListener(a)}},90122:function(e,t,i){"use strict";i.d(t,{X:()=>a});const a=(e,t,i)=>(void 0!==i&&(i=!!i),e.hasAttribute(t)?!!i||(e.removeAttribute(t),!1):!1!==i&&(e.setAttribute(t,""),!0))},31064:function(e,t,i){"use strict";i.d(t,{T:()=>s});i(19134),i(5740);const a=/^(\w+)\.(\w+)$/,s=e=>a.test(e)},50602:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{SL:()=>c,l4:()=>f,sJ:()=>l,uf:()=>u});var s=i(16485),n=(i(19083),i(19423),i(11740),i(61006),i(20382)),o=i(34618),r=e([s]);s=(r.then?(await r)():r)[0];const c=e=>l(e.attributes),l=(e,t)=>!!e.unit_of_measurement||!!e.state_class||(t||[]).includes(e.device_class||""),d=e=>{switch(e.number_format){case n.y4.comma_decimal:return["en-US","en"];case n.y4.decimal_comma:return["de","es","it"];case n.y4.space_comma:return["fr","sv","cs"];case n.y4.system:return;default:return e.language}},u=(e,t,i)=>{const a=t?d(t):void 0;return Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)===n.y4.none||Number.isNaN(Number(e))?Number.isNaN(Number(e))||""===e||(null==t?void 0:t.number_format)!==n.y4.none?"string"==typeof e?e:`${(0,o.N)(e,null==i?void 0:i.maximumFractionDigits).toString()}${"currency"===(null==i?void 0:i.style)?` ${i.currency}`:""}`:new Intl.NumberFormat("en-US",_(e,Object.assign(Object.assign({},i),{},{useGrouping:!1}))).format(Number(e)):new Intl.NumberFormat(a,_(e,i)).format(Number(e))},f=(e,t)=>{var i;const a=null==t?void 0:t.display_precision;return null!=a?{maximumFractionDigits:a,minimumFractionDigits:a}:Number.isInteger(Number(null==e||null===(i=e.attributes)||void 0===i?void 0:i.step))&&Number.isInteger(Number(null==e?void 0:e.state))?{maximumFractionDigits:0}:void 0},_=(e,t)=>{const i=Object.assign({maximumFractionDigits:2},t);if("string"!=typeof e)return i;if(!t||void 0===t.minimumFractionDigits&&void 0===t.maximumFractionDigits){const t=e.indexOf(".")>-1?e.split(".")[1].length:0;i.minimumFractionDigits=t,i.maximumFractionDigits=t}return i};a()}catch(c){a(c)}}))},85746:function(e,t,i){"use strict";i.d(t,{V:()=>s});var a=i(87733);const s=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,a.f)(e):e.toLocaleLowerCase(t)},48045:function(e,t,i){"use strict";i.d(t,{v:()=>a});i(71695),i(69235),i(12385),i(19134),i(32517),i(11740),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(47021);const a=(e,t)=>{if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;let i,s;if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(i=s;0!=i--;)if(!a(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!a(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!==t.length)return!1;for(i=s;0!=i--;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e);if(s=n.length,s!==Object.keys(t).length)return!1;for(i=s;0!=i--;)if(!Object.prototype.hasOwnProperty.call(t,n[i]))return!1;for(i=s;0!=i--;){const s=n[i];if(!a(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}},93826:function(e,t,i){"use strict";i.d(t,{P:()=>a});i(71695),i(47021);const a=(e,t,i=!0,a=!0)=>{let s,n=0;const o=(...o)=>{const r=()=>{n=!1===i?0:Date.now(),s=void 0,e(...o)},c=Date.now();n||!1!==i||(n=c);const l=t-(c-n);l<=0||l>t?(s&&(clearTimeout(s),s=void 0),n=c,e(...o)):s||!1===a||(s=window.setTimeout(r,l))};return o.cancel=()=>{clearTimeout(s),s=void 0,n=0},o}},65981:function(e,t,i){"use strict";i.r(t),i.d(t,{HaIcon:()=>L});var a=i(61701),s=i(72621),n=(i(19083),i(71695),i(40251),i(61006),i(47021),i(57243)),o=i(50778),r=i(36522),c=i(22381),l=i(80654),d=(i(92745),i(9359),i(31526),i(27608)),u=i(27486),f=i(37394);const _=JSON.parse('{"version":"7.4.47","parts":[{"file":"7a7139d465f1f41cb26ab851a17caa21a9331234"},{"start":"account-supervisor-circle-","file":"9561286c4c1021d46b9006596812178190a7cc1c"},{"start":"alpha-r-c","file":"eb466b7087fb2b4d23376ea9bc86693c45c500fa"},{"start":"arrow-decision-o","file":"4b3c01b7e0723b702940c5ac46fb9e555646972b"},{"start":"baby-f","file":"2611401d85450b95ab448ad1d02c1a432b409ed2"},{"start":"battery-hi","file":"89bcd31855b34cd9d31ac693fb073277e74f1f6a"},{"start":"blur-r","file":"373709cd5d7e688c2addc9a6c5d26c2d57c02c48"},{"start":"briefcase-account-","file":"a75956cf812ee90ee4f656274426aafac81e1053"},{"start":"calendar-question-","file":"3253f2529b5ebdd110b411917bacfacb5b7063e6"},{"start":"car-lig","file":"74566af3501ad6ae58ad13a8b6921b3cc2ef879d"},{"start":"cellphone-co","file":"7677f1cfb2dd4f5562a2aa6d3ae43a2e6997b21a"},{"start":"circle-slice-2","file":"70d08c50ec4522dd75d11338db57846588263ee2"},{"start":"cloud-co","file":"141d2bfa55ca4c83f4bae2812a5da59a84fec4ff"},{"start":"cog-s","file":"5a640365f8e47c609005d5e098e0e8104286d120"},{"start":"cookie-l","file":"dd85b8eb8581b176d3acf75d1bd82e61ca1ba2fc"},{"start":"currency-eur-","file":"15362279f4ebfc3620ae55f79d2830ad86d5213e"},{"start":"delete-o","file":"239434ab8df61237277d7599ebe066c55806c274"},{"start":"draw-","file":"5605918a592070803ba2ad05a5aba06263da0d70"},{"start":"emoticon-po","file":"a838cfcec34323946237a9f18e66945f55260f78"},{"start":"fan","file":"effd56103b37a8c7f332e22de8e4d67a69b70db7"},{"start":"file-question-","file":"b2424b50bd465ae192593f1c3d086c5eec893af8"},{"start":"flask-off-","file":"3b76295cde006a18f0301dd98eed8c57e1d5a425"},{"start":"food-s","file":"1c6941474cbeb1755faaaf5771440577f4f1f9c6"},{"start":"gamepad-u","file":"c6efe18db6bc9654ae3540c7dee83218a5450263"},{"start":"google-f","file":"df341afe6ad4437457cf188499cb8d2df8ac7b9e"},{"start":"head-c","file":"282121c9e45ed67f033edcc1eafd279334c00f46"},{"start":"home-pl","file":"27e8e38fc7adcacf2a210802f27d841b49c8c508"},{"start":"inbox-","file":"0f0316ec7b1b7f7ce3eaabce26c9ef619b5a1694"},{"start":"key-v","file":"ea33462be7b953ff1eafc5dac2d166b210685a60"},{"start":"leaf-circle-","file":"33db9bbd66ce48a2db3e987fdbd37fb0482145a4"},{"start":"lock-p","file":"b89e27ed39e9d10c44259362a4b57f3c579d3ec8"},{"start":"message-s","file":"7b5ab5a5cadbe06e3113ec148f044aa701eac53a"},{"start":"moti","file":"01024d78c248d36805b565e343dd98033cc3bcaf"},{"start":"newspaper-variant-o","file":"22a6ec4a4fdd0a7c0acaf805f6127b38723c9189"},{"start":"on","file":"c73d55b412f394e64632e2011a59aa05e5a1f50d"},{"start":"paw-ou","file":"3f669bf26d16752dc4a9ea349492df93a13dcfbf"},{"start":"pigg","file":"0c24edb27eb1c90b6e33fc05f34ef3118fa94256"},{"start":"printer-pos-sy","file":"41a55cda866f90b99a64395c3bb18c14983dcf0a"},{"start":"read","file":"c7ed91552a3a64c9be88c85e807404cf705b7edf"},{"start":"robot-vacuum-variant-o","file":"917d2a35d7268c0ea9ad9ecab2778060e19d90e0"},{"start":"sees","file":"6e82d9861d8fac30102bafa212021b819f303bdb"},{"start":"shoe-f","file":"e2fe7ce02b5472301418cc90a0e631f187b9f238"},{"start":"snowflake-m","file":"a28ba9f5309090c8b49a27ca20ff582a944f6e71"},{"start":"st","file":"7e92d03f095ec27e137b708b879dfd273bd735ab"},{"start":"su","file":"61c74913720f9de59a379bdca37f1d2f0dc1f9db"},{"start":"tag-plus-","file":"8f3184156a4f38549cf4c4fffba73a6a941166ae"},{"start":"timer-a","file":"baab470d11cfb3a3cd3b063ee6503a77d12a80d0"},{"start":"transit-d","file":"8561c0d9b1ac03fab360fd8fe9729c96e8693239"},{"start":"vector-arrange-b","file":"c9a3439257d4bab33d3355f1f2e11842e8171141"},{"start":"water-ou","file":"02dbccfb8ca35f39b99f5a085b095fc1275005a0"},{"start":"webc","file":"57bafd4b97341f4f2ac20a609d023719f23a619c"},{"start":"zip","file":"65ae094e8263236fa50486584a08c03497a38d93"}]}'),h=(0,u.Z)((async()=>{const e=(0,d.MT)("hass-icon-db","mdi-icon-store");{const t=await(0,d.U2)("_version",e);t?t!==_.version&&(await(0,d.ZH)(e),(0,d.t8)("_version",_.version,e)):(0,d.t8)("_version",_.version,e)}return e})),p=["mdi","hass","hassio","hademo"];let m=[];i(37583);let g,b,y,v=e=>e;const w={},k={},C=(0,c.D)((()=>(async e=>{const t=Object.keys(e),i=await Promise.all(Object.values(e));(await h())("readwrite",(a=>{i.forEach(((i,s)=>{Object.entries(i).forEach((([e,t])=>{a.put(t,e)})),delete e[t[s]]}))}))})(k)),2e3),A={};let L=(0,a.Z)([(0,o.Mo)("ha-icon")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,o.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_path",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_secondaryPath",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_viewBox",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_legacy",value(){return!1}},{kind:"method",key:"willUpdate",value:function(e){(0,s.Z)(a,"willUpdate",this,3)([e]),e.has("icon")&&(this._path=void 0,this._secondaryPath=void 0,this._viewBox=void 0,this._loadIcon())}},{kind:"method",key:"render",value:function(){return this.icon?this._legacy?(0,n.dy)(g||(g=v` <iron-icon .icon="${0}"></iron-icon>`),this.icon):(0,n.dy)(b||(b=v`<ha-svg-icon .path="${0}" .secondaryPath="${0}" .viewBox="${0}"></ha-svg-icon>`),this._path,this._secondaryPath,this._viewBox):n.Ld}},{kind:"method",key:"_loadIcon",value:async function(){if(!this.icon)return;const e=this.icon,[t,a]=this.icon.split(":",2);let s,n=a;if(!t||!n)return;if(!p.includes(t)){const i=l.g[t];return i?void(i&&"function"==typeof i.getIcon&&this._setCustomPath(i.getIcon(n),e)):void(this._legacy=!0)}if(this._legacy=!1,n in w){const e=w[n];let i;e.newName?(i=`Icon ${t}:${n} was renamed to ${t}:${e.newName}, please change your config, it will be removed in version ${e.removeIn}.`,n=e.newName):i=`Icon ${t}:${n} was removed from MDI, please replace this icon with an other icon in your config, it will be removed in version ${e.removeIn}.`,console.warn(i),(0,r.B)(this,"write_log",{level:"warning",message:i})}if(n in A)return void(this._path=A[n]);if("home-assistant"===n){const t=(await i.e("48348").then(i.bind(i,30511))).mdiHomeAssistant;return this.icon===e&&(this._path=t),void(A[n]=t)}try{s=await(e=>new Promise(((t,i)=>{if(m.push([e,t,i]),m.length>1)return;const a=h();(0,f.n)(1e3,(async()=>{(await a)("readonly",(e=>{for(const[t,i,a]of m)(0,d.RV)(e.get(t)).then((e=>i(e))).catch((e=>a(e)));m=[]}))})()).catch((e=>{for(const[,,t]of m)t(e);m=[]}))})))(n)}catch(u){s=void 0}if(s)return this.icon===e&&(this._path=s),void(A[n]=s);const o=(e=>{let t;for(const i of _.parts){if(void 0!==i.start&&e<i.start)break;t=i}return t.file})(n);if(o in k)return void this._setPath(k[o],n,e);const c=fetch(`/static/mdi/${o}.json`).then((e=>e.json()));k[o]=c,this._setPath(c,n,e),C()}},{kind:"method",key:"_setCustomPath",value:async function(e,t){const i=await e;this.icon===t&&(this._path=i.path,this._secondaryPath=i.secondaryPath,this._viewBox=i.viewBox)}},{kind:"method",key:"_setPath",value:async function(e,t,i){const a=await e;this.icon===i&&(this._path=a[t]),A[t]=a[t]}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(y||(y=v`:host{fill:currentcolor}`))}}]}}),n.oi)},7285:function(e,t,i){"use strict";var a=i(61701),s=i(72621),n=(i(71695),i(47021),i(65703)),o=i(46289),r=i(57243),c=i(50778);let l,d,u,f=e=>e;(0,a.Z)([(0,c.Mo)("ha-list-item")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,s.Z)(i,"renderRipple",this,3)([])}},{kind:"get",static:!0,key:"styles",value:function(){return[o.W,(0,r.iv)(l||(l=f`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-inline-start:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px));padding-inline-end:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)!important}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)!important}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center;flex-shrink:0}:host([graphic=icon]:not([twoline])) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,20px)!important}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`)),"rtl"===document.dir?(0,r.iv)(d||(d=f`span.material-icons:first-of-type,span.material-icons:last-of-type{direction:rtl!important;--direction:rtl}`)):(0,r.iv)(u||(u=f``))]}}]}}),n.K)},38495:function(e,t,i){"use strict";i.d(t,{Dy:()=>d,GV:()=>l,PA:()=>o,SC:()=>n,Xp:()=>s,af:()=>c,eP:()=>a,jZ:()=>r});i(71695),i(19423),i(47021);const a=(e,t,i)=>"run-start"===t.type?e={init_options:i,stage:"ready",run:t.data,events:[t]}:e?((e="wake_word-start"===t.type?Object.assign(Object.assign({},e),{},{stage:"wake_word",wake_word:Object.assign(Object.assign({},t.data),{},{done:!1})}):"wake_word-end"===t.type?Object.assign(Object.assign({},e),{},{wake_word:Object.assign(Object.assign(Object.assign({},e.wake_word),t.data),{},{done:!0})}):"stt-start"===t.type?Object.assign(Object.assign({},e),{},{stage:"stt",stt:Object.assign(Object.assign({},t.data),{},{done:!1})}):"stt-end"===t.type?Object.assign(Object.assign({},e),{},{stt:Object.assign(Object.assign(Object.assign({},e.stt),t.data),{},{done:!0})}):"intent-start"===t.type?Object.assign(Object.assign({},e),{},{stage:"intent",intent:Object.assign(Object.assign({},t.data),{},{done:!1})}):"intent-end"===t.type?Object.assign(Object.assign({},e),{},{intent:Object.assign(Object.assign(Object.assign({},e.intent),t.data),{},{done:!0})}):"tts-start"===t.type?Object.assign(Object.assign({},e),{},{stage:"tts",tts:Object.assign(Object.assign({},t.data),{},{done:!1})}):"tts-end"===t.type?Object.assign(Object.assign({},e),{},{tts:Object.assign(Object.assign(Object.assign({},e.tts),t.data),{},{done:!0})}):"run-end"===t.type?Object.assign(Object.assign({},e),{},{stage:"done"}):"error"===t.type?Object.assign(Object.assign({},e),{},{stage:"error",error:t.data}):Object.assign({},e)).events=[...e.events,t],e):void console.warn("Received unexpected event before receiving session",t),s=(e,t,i)=>e.connection.subscribeMessage(t,Object.assign(Object.assign({},i),{},{type:"assist_pipeline/run"})),n=e=>e.callWS({type:"assist_pipeline/pipeline/list"}),o=(e,t)=>e.callWS({type:"assist_pipeline/pipeline/get",pipeline_id:t}),r=(e,t)=>e.callWS(Object.assign({type:"assist_pipeline/pipeline/create"},t)),c=(e,t,i)=>e.callWS(Object.assign({type:"assist_pipeline/pipeline/update",pipeline_id:t},i)),l=(e,t)=>e.callWS({type:"assist_pipeline/pipeline/set_preferred",pipeline_id:t}),d=e=>e.callWS({type:"assist_pipeline/language/list"})},14473:function(e,t,i){"use strict";i.d(t,{Es:()=>n,Gd:()=>s,J8:()=>l,Kc:()=>r,W9:()=>o,Xm:()=>c});i(71695),i(92745),i(9359),i(31526),i(70104),i(19423),i(47021),i(83523);var a=i(95262);i(68418),i(58776);const s=e=>{if("condition"in e&&Array.isArray(e.condition))return{condition:"and",conditions:e.condition};for(const t of["and","or","not"])if(t in e)return{condition:t,conditions:e[t]};return e},n=(e,t)=>{e.callService("automation","trigger",{entity_id:t,skip_condition:!0})};const o=e=>e?Array.isArray(e)?e.map(o):("triggers"in e&&e.triggers&&(e.triggers=o(e.triggers)),"platform"in e&&("trigger"in e||(e.trigger=e.platform),delete e.platform),e):e,r=e=>{if(!e)return[];const t=[];return(0,a.r)(e).forEach((e=>{"triggers"in e?e.triggers&&t.push(...r(e.triggers)):t.push(e)})),t},c=(e,t,i,a)=>e.connection.subscribeMessage(t,{type:"subscribe_trigger",trigger:i,variables:a}),l=(e,t,i)=>e.callWS({type:"test_condition",condition:t,variables:i})},47844:function(e,t,i){"use strict";i.d(t,{qW:()=>n,Lr:()=>f,kU:()=>o,jU:()=>r,Xn:()=>p,i4:()=>d,T9:()=>_,r:()=>h,ou:()=>g,sF:()=>s,z9:()=>b,nk:()=>l,Mw:()=>m,Ch:()=>c});i(19423),i(40251),i(88044),i(71695),i(47021);var a=i(43546);const s=[1,2,3,4,6,8],n=2,o="hls",r="web_rtc",c=(e,t,i)=>`${e}&width=${t}&height=${i}`,l=e=>`/api/camera_proxy_stream/${e.entity_id}?token=${e.attributes.access_token}`,d=async(e,t,i,a)=>{const s=await(async(e,t,i,a,s,...n)=>{let o=a[e];o||(o=a[e]={});const r=o[s];if(r)return r;const c=i(a,s,...n);return o[s]=c,c.then((()=>setTimeout((()=>{o[s]=void 0}),t)),(()=>{o[s]=void 0})),c})("_cameraTmbUrl",9e3,u,e,t);return c(s,i,a)},u=async(e,t)=>{const i=await(0,a.iI)(e,`/api/camera_proxy/${t}`);return e.hassUrl(i.path)},f=async(e,t,i)=>{const a={type:"camera/stream",entity_id:t};i&&(a.format=i);const s=await e.callWS(a);return s.url=e.hassUrl(s.url),s},_=(e,t,i,a)=>e.connection.subscribeMessage(a,{type:"camera/webrtc/offer",entity_id:t,offer:i}),h=(e,t,i,a)=>e.callWS({type:"camera/webrtc/candidate",entity_id:t,session_id:i,candidate:a}),p=(e,t)=>e.callWS({type:"camera/get_prefs",entity_id:t}),m=(e,t,i)=>e.callWS(Object.assign({type:"camera/update_prefs",entity_id:t},i)),g=async(e,t)=>e.callWS({type:"camera/capabilities",entity_id:t}),b=async(e,t)=>e.callWS({type:"camera/webrtc/get_client_config",entity_id:t})},94616:function(e,t,i){"use strict";i.d(t,{LI:()=>l,QD:()=>d,_Y:()=>n,_t:()=>c,bi:()=>r,u_:()=>o});var a=i(58814);i(19423);const s=["hass"],n=e=>{let{hass:t}=e,i=(0,a.Z)(e,s);return t.callApi("POST","cloud/login",i)},o=(e,t)=>e.callApi("POST","cloud/forgot_password",{email:t}),r=(e,t,i)=>e.callApi("POST","cloud/register",{email:t,password:i}),c=(e,t)=>e.callApi("POST","cloud/resend_confirm",{email:t}),l=e=>e.callWS({type:"cloud/status"}),d=(e,t,i)=>e.callWS({type:"cloud/google_assistant/entities/update",entity_id:t,disable_2fa:i})},80654:function(e,t,i){"use strict";i.d(t,{g:()=>o});const a=window;"customIconsets"in a||(a.customIconsets={});const s=a.customIconsets,n=window;"customIcons"in n||(n.customIcons={});const o=new Proxy(n.customIcons,{get:(e,t)=>{var i;return null!==(i=e[t])&&void 0!==i?i:s[t]?{getIcon:s[t]}:void 0}})},6280:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{Nu:()=>C,V3:()=>O,YA:()=>k,xS:()=>_,zP:()=>L});i(19083),i(71695),i(92745),i(61893),i(84283),i(9359),i(56475),i(1331),i(31526),i(70104),i(52924),i(19423),i(11740),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(47021);var s=i(73850),n=i(97547),o=i(47194),r=e([n]);n=(r.then?(await r)():r)[0];const c=["climate","humidifier","water_heater"],l=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],d=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],u=(e,t)=>!e.states[t]||l.includes((0,s.M)(t));class f{constructor(e,t){this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=e,this.hoursToShow=t,this.combinedHistory={}}processMessage(e){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=e.states,this.combinedHistory;if(!Object.keys(e.states).length)return this.combinedHistory;const t=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,i={};for(const a of Object.keys(this.combinedHistory))i[a]=[];for(const a of Object.keys(e.states))i[a]=[];for(const a of Object.keys(i)){if(a in this.combinedHistory&&a in e.states){const t=this.combinedHistory[a],s=t[t.length-1];i[a]=t.concat(e.states[a]),e.states[a][0].lu<s.lu&&(i[a]=i[a].sort(((e,t)=>e.lu-t.lu)))}else a in this.combinedHistory?i[a]=this.combinedHistory[a]:i[a]=e.states[a];if(t&&a in this.combinedHistory){const e=i[a].filter((e=>e.lu<t));if(!e.length)continue;if(i[a]=i[a].filter((e=>e.lu>=t)),i[a].length&&i[a][0].lu===t)continue;const s=e[e.length-1];s.lu=t,i[a].unshift(s)}}return this.combinedHistory=i,this.combinedHistory}}const _=(e,t,i,a,s,n=!0,o=!0)=>{const r={type:"history/stream",entity_ids:a,start_time:new Date((new Date).getTime()-3600*i*1e3).toISOString(),minimal_response:n,significant_changes_only:o,no_attributes:null!=s?s:!a.some((t=>u(e,t)))},c=new f(e,i);return e.connection.subscribeMessage((e=>t(c.processMessage(e))),r)},h=(e,t)=>e.state===t.state&&(!e.attributes||!t.attributes||d.every((i=>e.attributes[i]===t.attributes[i]))),p=(e,t,i,a,s,r,c)=>{const l=[],d=r[0];for(const o of r){if(l.length>0&&o.s===l[l.length-1].state)continue;const r={};null!=c&&c.attributes.device_class&&(r.device_class=null==c?void 0:c.attributes.device_class),l.push({state_localize:(0,n.c)(e,t,[],i,a[s],s,Object.assign(Object.assign({},o.a||d.a),r),o.s),state:o.s,last_changed:1e3*(o.lc?o.lc:o.lu)})}return{name:(0,o.a)(s,(null==c?void 0:c.attributes)||d.a),entity_id:s,data:l}},m=(e,t,i,a)=>{const n=[];return Object.keys(i).forEach((e=>{const t=i[e],r=t[0],l=(0,s.M)(e),u=[];for(const i of t){let e;if(c.includes(l)){e={state:i.s,last_changed:1e3*i.lu,attributes:{}};for(const t of d)t in i.a&&(e.attributes[t]=i.a[t])}else e={state:i.s,last_changed:1e3*(i.lc?i.lc:i.lu),attributes:{}};u.length>1&&h(e,u[u.length-1])&&h(e,u[u.length-2])||u.push(e)}const f=e in a?a[e].attributes:"friendly_name"in r.a?r.a:void 0;n.push({domain:l,name:(0,o.a)(e,f||{}),entity_id:e,states:u})})),{unit:e,device_class:t,identifier:Object.keys(i).join(""),data:n}},g=["counter","input_number","number"],b=e=>g.includes(e),y=e=>"unit_of_measurement"in e||"state_class"in e,v=(e,t)=>null!=e.attributes.device_class&&t.includes(e.attributes.device_class),w=" ",k=(e,t,i,a,s=!1)=>{const n={};i.forEach((e=>{e in t&&(n[e]=t[e])}));const o={};Object.entries(n).forEach((([e,t])=>{const i=t.map((e=>({s:null!=e.mean?e.mean.toString():e.state.toString(),lc:e.start/1e3,a:{},lu:e.start/1e3})));o[e]=i}));const r=C(e,o,[],e.localize,a,s,!0);return((null==r?void 0:r.line)||[]).forEach((e=>{e.data.forEach((e=>{e.statistics=e.states,e.states=[]}))})),r},C=(e,t,i,a,n,o=!1,r=!1)=>{const c={},l=[],d={};if(new Set([...i,...Object.keys(t)]).forEach((i=>{i in t?d[i]=t[i]:e.states[i]&&(d[i]=[{s:e.states[i].state,a:e.states[i].attributes,lu:new Date(e.states[i].last_updated).getTime()/1e3}])})),!d)return{line:[],timeline:[]};Object.keys(d).forEach((t=>{var i;const u=d[t];if(0===u.length)return;const f=(0,s.M)(t),_=t in e.states?e.states[t]:void 0,h=_||b(f)?void 0:u.find((e=>e.a&&y(e.a)));let m;m=L(f,_,h,n,r)?(null==_?void 0:_.attributes.unit_of_measurement)||(null==h?void 0:h.a.unit_of_measurement)||w:{zone:a("ui.dialogs.more_info_control.zone.graph_unit"),climate:e.config.unit_system.temperature,humidifier:"%",water_heater:e.config.unit_system.temperature}[f];const g={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[f]||(null===(i=(null==_?void 0:_.attributes)||(null==h?void 0:h.a))||void 0===i?void 0:i.device_class),v=A(m,g,o);m?v&&v in c&&t in c[v]?c[v][t].push(...u):v&&(v in c||(c[v]={}),c[v][t]=u):l.push(p(a,e.locale,e.config,e.entities,t,u,_))}));return{line:Object.keys(c).map((t=>{const i=t.split("_"),a=i[0],s=i[1]||void 0;return m(a,s,c[t],e.states)})),timeline:l}},A=(e,t,i)=>i?`${e}_${t||""}`:e,L=(e,t,i,a,s=!1)=>s||b(e)||null!=t&&y(t.attributes)||null!=t&&"sensor"===e&&v(t,a)||null!=i,O=(e,t,i=!0)=>{if(!t)return e;const a=Object.assign(Object.assign({},e),{},{line:[]}),s={};for(const o of e.line){const e=A(o.unit,o.device_class,i);e&&(s[e]={historyItem:o})}for(const o of t.line){const e=A(o.unit,o.device_class,i);e&&(e in s?s[e].ltsItem=o:s[e]={ltsItem:o})}for(const{historyItem:o,ltsItem:r}of Object.values(s)){if(!o||!r){a.line.push(o||r);continue}const e=Object.assign(Object.assign({},o),{},{data:[]}),t=new Set([...o.data.map((e=>e.entity_id)),...r.data.map((e=>e.entity_id))]);for(const i of t){var n;const t=o.data.find((e=>e.entity_id===i)),a=r.data.find((e=>e.entity_id===i));if(!t||!a){e.data.push(t||a);continue}const s=(null===(n=t.states[0])||void 0===n?void 0:n.last_changed)||a.statistics[a.statistics.length-1].last_changed+1,c=[];for(const e of a.statistics){if(e.last_changed>=s)break;c.push(e)}e.data.push(0===c.length?t:Object.assign(Object.assign({},t),{},{statistics:c}))}a.line.push(e)}return a};a()}catch(c){a(c)}}))},25433:function(e,t,i){"use strict";i.d(t,{MY:()=>p,Yc:()=>u,hb:()=>_,jV:()=>l,o1:()=>f,ri:()=>h});i(71695),i(40251),i(19134),i(11740),i(97003),i(88044),i(47021);var a=i(73358),s=i(73850),n=i(59847),o=i(85746),r=i(96194);const c="ui.components.logbook.messages",l=["counter","proximity","sensor","zone"],d={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"ioBroker stopping",triggered_by_homeassistant_starting:"ioBroker starting"},u=(e,t,i,a,s,n)=>{if((s||n)&&(!s||0===s.length)&&(!n||0===n.length))return Promise.reject("No entities or devices");const o={type:"logbook/event_stream",start_time:i,end_time:a};return null!=s&&s.length&&(o.entity_ids=s),null!=n&&n.length&&(o.device_ids=n),e.connection.subscribeMessage((e=>t(e)),o)},f=(e,t)=>({entity_id:e.entity_id,state:t,attributes:{device_class:null==e?void 0:e.attributes.device_class,source_type:null==e?void 0:e.attributes.source_type,has_date:null==e?void 0:e.attributes.has_date,has_time:null==e?void 0:e.attributes.has_time,entity_picture_local:a.iY.has((0,s.M)(e.entity_id))||null==e?void 0:e.attributes.entity_picture_local,entity_picture:a.iY.has((0,s.M)(e.entity_id))||null==e?void 0:e.attributes.entity_picture}}),_=(e,t)=>{for(const i of Object.keys(d)){const a=d[i];if(t.startsWith(a))return t.replace(a,`${e(`ui.components.logbook.${i}`)}`)}return t},h=(e,t,i,s,n)=>{switch(n){case"device_tracker":case"person":return"not_home"===i?t(`${c}.was_away`):"home"===i?t(`${c}.was_at_home`):t(`${c}.was_at_state`,{state:i});case"sun":return t("above_horizon"===i?`${c}.rose`:`${c}.set`);case"binary_sensor":{const n=i===a.uo,r=i===a.lC,l=s.attributes.device_class;if(l&&(n||r))return t(`${c}.${n?"detected_device_classes":"cleared_device_classes"}.${l}`,{device_class:(0,o.V)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)})||t(`${c}.${n?"detected_device_class":"cleared_device_class"}`,{device_class:(0,o.V)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)});break}case"cover":switch(i){case"open":return t(`${c}.was_opened`);case"opening":return t(`${c}.is_opening`);case"closing":return t(`${c}.is_closing`);case"closed":return t(`${c}.was_closed`)}break;case"event":return t(`${c}.detected_event_no_type`);case"lock":switch(i){case"unlocked":return t(`${c}.was_unlocked`);case"locking":return t(`${c}.is_locking`);case"unlocking":return t(`${c}.is_unlocking`);case"opening":return t(`${c}.is_opening`);case"open":return t(`${c}.is_opened`);case"locked":return t(`${c}.was_locked`);case"jammed":return t(`${c}.is_jammed`)}}return i===a.uo?t(`${c}.turned_on`):i===a.lC?t(`${c}.turned_off`):i===r.lz?t(`${c}.became_unknown`):i===r.nZ?t(`${c}.became_unavailable`):e.localize(`${c}.changed_to_state`,{state:s?e.formatEntityState(s,i):i})},p=e=>"sensor"!==(0,n.N)(e)||void 0===e.attributes.unit_of_measurement&&void 0===e.attributes.state_class},17951:function(e,t,i){"use strict";i.d(t,{IT:()=>c,Qo:()=>a,V0:()=>l,cs:()=>r,kb:()=>n,tS:()=>o});i(71695),i(9359),i(1331),i(88044),i(47021);const a="custom:",s=window;"customCards"in s||(s.customCards=[]),"customCardFeatures"in s||(s.customCardFeatures=[]),"customBadges"in s||(s.customBadges=[]),"customTileFeatures"in s||(s.customTileFeatures=[]);const n=s.customCards,o=()=>[...s.customCardFeatures,...s.customTileFeatures],r=(s.customBadges,e=>n.find((t=>t.type===e))),c=e=>e.startsWith(a),l=e=>e.slice(a.length)},89890:function(e,t,i){"use strict";i.d(t,{Fn:()=>p,Mj:()=>b,N8:()=>h,WL:()=>v,kr:()=>w,qV:()=>k,rs:()=>g,xt:()=>y,yZ:()=>_,zz:()=>m});i(92745),i(19423),i(19134),i(97003),i(88044);var a=i(75278),s=i(5839),n=i(96194),o=i(58968);const r="M11,14C12,14 13.05,14.16 14.2,14.44C13.39,15.31 13,16.33 13,17.5C13,18.39 13.25,19.23 13.78,20H3V18C3,16.81 3.91,15.85 5.74,15.12C7.57,14.38 9.33,14 11,14M11,12C9.92,12 9,11.61 8.18,10.83C7.38,10.05 7,9.11 7,8C7,6.92 7.38,6 8.18,5.18C9,4.38 9.92,4 11,4C12.11,4 13.05,4.38 13.83,5.18C14.61,6 15,6.92 15,8C15,9.11 14.61,10.05 13.83,10.83C13.05,11.61 12.11,12 11,12M18.5,10H20L22,10V12H20V17.5A2.5,2.5 0 0,1 17.5,20A2.5,2.5 0 0,1 15,17.5A2.5,2.5 0 0,1 17.5,15C17.86,15 18.19,15.07 18.5,15.21V10Z",c="M14,19H18V5H14M6,19H10V5H6V19Z",l="M8,5.14V19.14L19,12.14L8,5.14Z",d="M16.56,5.44L15.11,6.89C16.84,7.94 18,9.83 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12C6,9.83 7.16,7.94 8.88,6.88L7.44,5.44C5.36,6.88 4,9.28 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12C20,9.28 18.64,6.88 16.56,5.44M13,3H11V13H13",u="M18,18H6V6H18V18Z",f="M8.16,3L6.75,4.41L9.34,7H4C2.89,7 2,7.89 2,9V19C2,20.11 2.89,21 4,21H20C21.11,21 22,20.11 22,19V9C22,7.89 21.11,7 20,7H14.66L17.25,4.41L15.84,3L12,6.84L8.16,3M4,9H17V19H4V9M19.5,9A1,1 0 0,1 20.5,10A1,1 0 0,1 19.5,11A1,1 0 0,1 18.5,10A1,1 0 0,1 19.5,9M19.5,12A1,1 0 0,1 20.5,13A1,1 0 0,1 19.5,14A1,1 0 0,1 18.5,13A1,1 0 0,1 19.5,12Z";let _=function(e){return e[e.PAUSE=1]="PAUSE",e[e.SEEK=2]="SEEK",e[e.VOLUME_SET=4]="VOLUME_SET",e[e.VOLUME_MUTE=8]="VOLUME_MUTE",e[e.PREVIOUS_TRACK=16]="PREVIOUS_TRACK",e[e.NEXT_TRACK=32]="NEXT_TRACK",e[e.TURN_ON=128]="TURN_ON",e[e.TURN_OFF=256]="TURN_OFF",e[e.PLAY_MEDIA=512]="PLAY_MEDIA",e[e.VOLUME_STEP=1024]="VOLUME_STEP",e[e.SELECT_SOURCE=2048]="SELECT_SOURCE",e[e.STOP=4096]="STOP",e[e.CLEAR_PLAYLIST=8192]="CLEAR_PLAYLIST",e[e.PLAY=16384]="PLAY",e[e.SHUFFLE_SET=32768]="SHUFFLE_SET",e[e.SELECT_SOUND_MODE=65536]="SELECT_SOUND_MODE",e[e.BROWSE_MEDIA=131072]="BROWSE_MEDIA",e[e.REPEAT_SET=262144]="REPEAT_SET",e[e.GROUPING=524288]="GROUPING",e}({});const h="browser",p={album:{icon:"M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11M12,16.5C9.5,16.5 7.5,14.5 7.5,12C7.5,9.5 9.5,7.5 12,7.5C14.5,7.5 16.5,9.5 16.5,12C16.5,14.5 14.5,16.5 12,16.5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",layout:"grid"},app:{icon:"M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 7H3V4H21V7Z",layout:"grid",show_list_images:!0},artist:{icon:r,layout:"grid",show_list_images:!0},channel:{icon:f,thumbnail_ratio:"portrait",layout:"grid",show_list_images:!0},composer:{icon:"M11,4A4,4 0 0,1 15,8A4,4 0 0,1 11,12A4,4 0 0,1 7,8A4,4 0 0,1 11,4M11,6A2,2 0 0,0 9,8A2,2 0 0,0 11,10A2,2 0 0,0 13,8A2,2 0 0,0 11,6M11,13C12.1,13 13.66,13.23 15.11,13.69C14.5,14.07 14,14.6 13.61,15.23C12.79,15.03 11.89,14.9 11,14.9C8.03,14.9 4.9,16.36 4.9,17V18.1H13.04C13.13,18.8 13.38,19.44 13.76,20H3V17C3,14.34 8.33,13 11,13M18.5,10H20L22,10V12H20V17.5A2.5,2.5 0 0,1 17.5,20A2.5,2.5 0 0,1 15,17.5A2.5,2.5 0 0,1 17.5,15C17.86,15 18.19,15.07 18.5,15.21V10Z",layout:"grid",show_list_images:!0},contributing_artist:{icon:r,layout:"grid",show_list_images:!0},directory:{icon:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",layout:"grid",show_list_images:!0},episode:{icon:f,layout:"grid",thumbnail_ratio:"portrait",show_list_images:!0},game:{icon:"M7,6H17A6,6 0 0,1 23,12A6,6 0 0,1 17,18C15.22,18 13.63,17.23 12.53,16H11.47C10.37,17.23 8.78,18 7,18A6,6 0 0,1 1,12A6,6 0 0,1 7,6M6,9V11H4V13H6V15H8V13H10V11H8V9H6M15.5,12A1.5,1.5 0 0,0 14,13.5A1.5,1.5 0 0,0 15.5,15A1.5,1.5 0 0,0 17,13.5A1.5,1.5 0 0,0 15.5,12M18.5,9A1.5,1.5 0 0,0 17,10.5A1.5,1.5 0 0,0 18.5,12A1.5,1.5 0 0,0 20,10.5A1.5,1.5 0 0,0 18.5,9Z",layout:"grid",thumbnail_ratio:"portrait"},genre:{icon:"M8.11,19.45C5.94,18.65 4.22,16.78 3.71,14.35L2.05,6.54C1.81,5.46 2.5,4.4 3.58,4.17L13.35,2.1L13.38,2.09C14.45,1.88 15.5,2.57 15.72,3.63L16.07,5.3L20.42,6.23H20.45C21.5,6.47 22.18,7.53 21.96,8.59L20.3,16.41C19.5,20.18 15.78,22.6 12,21.79C10.42,21.46 9.08,20.61 8.11,19.45V19.45M20,8.18L10.23,6.1L8.57,13.92V13.95C8,16.63 9.73,19.27 12.42,19.84C15.11,20.41 17.77,18.69 18.34,16L20,8.18M16,16.5C15.37,17.57 14.11,18.16 12.83,17.89C11.56,17.62 10.65,16.57 10.5,15.34L16,16.5M8.47,5.17L4,6.13L5.66,13.94L5.67,13.97C5.82,14.68 6.12,15.32 6.53,15.87C6.43,15.1 6.45,14.3 6.62,13.5L7.05,11.5C6.6,11.42 6.21,11.17 6,10.81C6.06,10.2 6.56,9.66 7.25,9.5C7.33,9.5 7.4,9.5 7.5,9.5L8.28,5.69C8.32,5.5 8.38,5.33 8.47,5.17M15.03,12.23C15.35,11.7 16.03,11.42 16.72,11.57C17.41,11.71 17.91,12.24 18,12.86C17.67,13.38 17,13.66 16.3,13.5C15.61,13.37 15.11,12.84 15.03,12.23M10.15,11.19C10.47,10.66 11.14,10.38 11.83,10.53C12.5,10.67 13.03,11.21 13.11,11.82C12.78,12.34 12.11,12.63 11.42,12.5C10.73,12.33 10.23,11.8 10.15,11.19M11.97,4.43L13.93,4.85L13.77,4.05L11.97,4.43Z",layout:"grid",show_list_images:!0},image:{icon:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",layout:"grid",show_list_images:!0},movie:{icon:"M18,4L20,8H17L15,4H13L15,8H12L10,4H8L10,8H7L5,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V4H18Z",thumbnail_ratio:"portrait",layout:"grid",show_list_images:!0},music:{icon:"M21,3V15.5A3.5,3.5 0 0,1 17.5,19A3.5,3.5 0 0,1 14,15.5A3.5,3.5 0 0,1 17.5,12C18.04,12 18.55,12.12 19,12.34V6.47L9,8.6V17.5A3.5,3.5 0 0,1 5.5,21A3.5,3.5 0 0,1 2,17.5A3.5,3.5 0 0,1 5.5,14C6.04,14 6.55,14.12 7,14.34V6L21,3Z",show_list_images:!0},playlist:{icon:"M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z",layout:"grid",show_list_images:!0},podcast:{icon:"M17,18.25V21.5H7V18.25C7,16.87 9.24,15.75 12,15.75C14.76,15.75 17,16.87 17,18.25M12,5.5A6.5,6.5 0 0,1 18.5,12C18.5,13.25 18.15,14.42 17.54,15.41L16,14.04C16.32,13.43 16.5,12.73 16.5,12C16.5,9.5 14.5,7.5 12,7.5C9.5,7.5 7.5,9.5 7.5,12C7.5,12.73 7.68,13.43 8,14.04L6.46,15.41C5.85,14.42 5.5,13.25 5.5,12A6.5,6.5 0 0,1 12,5.5M12,1.5A10.5,10.5 0 0,1 22.5,12C22.5,14.28 21.77,16.39 20.54,18.11L19.04,16.76C19.96,15.4 20.5,13.76 20.5,12A8.5,8.5 0 0,0 12,3.5A8.5,8.5 0 0,0 3.5,12C3.5,13.76 4.04,15.4 4.96,16.76L3.46,18.11C2.23,16.39 1.5,14.28 1.5,12A10.5,10.5 0 0,1 12,1.5M12,9.5A2.5,2.5 0 0,1 14.5,12A2.5,2.5 0 0,1 12,14.5A2.5,2.5 0 0,1 9.5,12A2.5,2.5 0 0,1 12,9.5Z",layout:"grid"},season:{icon:f,layout:"grid",thumbnail_ratio:"portrait",show_list_images:!0},track:{icon:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,13H11V18A2,2 0 0,1 9,20A2,2 0 0,1 7,18A2,2 0 0,1 9,16C9.4,16 9.7,16.1 10,16.3V11H13V13M13,9V3.5L18.5,9H13Z"},tv_show:{icon:f,layout:"grid",thumbnail_ratio:"portrait"},url:{icon:"M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},video:{icon:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",layout:"grid",show_list_images:!0}},m=(e,t,i,a)=>e.callWS({type:"media_player/browse_media",entity_id:t,media_content_id:i,media_content_type:a}),g=e=>{let t=e.attributes.media_position;return"playing"!==e.state?t:(t+=(Date.now()-new Date(e.attributes.media_position_updated_at).getTime())/1e3,t<0?0:t)},b=e=>{let t;switch(e.attributes.media_content_type){case"music":case"image":t=e.attributes.media_artist;break;case"playlist":t=e.attributes.media_playlist||e.attributes.media_artist;break;case"tvshow":t=e.attributes.media_series_title,e.attributes.media_season&&(t+=" S"+e.attributes.media_season,e.attributes.media_episode&&(t+="E"+e.attributes.media_episode));break;case"channel":t=e.attributes.media_channel;break;default:t=e.attributes.app_name||""}return t},y=(e,t=!1)=>{if(!e)return;const i=e.state;if((0,n.rk)(i))return;if(!(0,s.v)(e))return(0,a.e)(e,_.TURN_ON)?[{icon:d,action:"turn_on"}]:void 0;const o=[];(0,a.e)(e,_.TURN_OFF)&&o.push({icon:d,action:"turn_off"});const r=!0===e.attributes.assumed_state,f=e.attributes;return("playing"===i||"paused"===i||r)&&(0,a.e)(e,_.SHUFFLE_SET)&&t&&o.push({icon:!0===f.shuffle?"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z":"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",action:"shuffle_set"}),("playing"===i||"paused"===i||r)&&(0,a.e)(e,_.PREVIOUS_TRACK)&&o.push({icon:"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z",action:"media_previous_track"}),!r&&("playing"===i&&((0,a.e)(e,_.PAUSE)||(0,a.e)(e,_.STOP))||("paused"===i||"idle"===i)&&(0,a.e)(e,_.PLAY)||"on"===i&&((0,a.e)(e,_.PLAY)||(0,a.e)(e,_.PAUSE)))&&o.push({icon:"on"===i?"M3,5V19L11,12M13,19H16V5H13M18,5V19H21V5":"playing"!==i?l:(0,a.e)(e,_.PAUSE)?c:u,action:"playing"!==i?"media_play":(0,a.e)(e,_.PAUSE)?"media_pause":"media_stop"}),r&&(0,a.e)(e,_.PLAY)&&o.push({icon:l,action:"media_play"}),r&&(0,a.e)(e,_.PAUSE)&&o.push({icon:c,action:"media_pause"}),r&&(0,a.e)(e,_.STOP)&&o.push({icon:u,action:"media_stop"}),("playing"===i||"paused"===i||r)&&(0,a.e)(e,_.NEXT_TRACK)&&o.push({icon:"M16,18H18V6H16M6,18L14.5,12L6,6V18Z",action:"media_next_track"}),("playing"===i||"paused"===i||r)&&(0,a.e)(e,_.REPEAT_SET)&&t&&o.push({icon:"all"===f.repeat?"M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z":"one"===f.repeat?"M13,15V9H12L10,10V11H11.5V15M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z":"M2,5.27L3.28,4L20,20.72L18.73,22L15.73,19H7V22L3,18L7,14V17H13.73L7,10.27V11H5V8.27L2,5.27M17,13H19V17.18L17,15.18V13M17,5V2L21,6L17,10V7H8.82L6.82,5H17Z",action:"repeat_set"}),o.length>0?o:void 0},v=e=>{if(!e)return;const t=e.indexOf("?authSig=");let i=t>0?e.slice(0,t):e;return i.startsWith("http")&&(i=decodeURIComponent(i.split("/").pop())),i},w=(e,t,i)=>e.callService("media_player",i,"shuffle_set"===i?{entity_id:t.entity_id,shuffle:!t.attributes.shuffle}:"repeat_set"===i?{entity_id:t.entity_id,repeat:"all"===t.attributes.repeat?"one":"off"===t.attributes.repeat?"all":"off"}:{entity_id:t.entity_id}),k=(e,t,i,a,s={})=>(!s.enqueue&&void 0===s.announce&&(0,o.b_)(i)&&(s.announce=!0),e.callService("media_player","play_media",Object.assign({entity_id:t,media_content_id:i,media_content_type:a},s)))},93352:function(e,t,i){"use strict";i.d(t,{k5:()=>a});i(83523);const a=(e,t)=>e.callService("scene","turn_on",{entity_id:t})},68418:function(e,t,i){"use strict";i.d(t,{Kx:()=>l,Pw:()=>_,TL:()=>d,eR:()=>p,rq:()=>f,sf:()=>h});i(71695),i(9359),i(70104),i(47021);var a=i(62900),s=i(92636),n=(i(83523),i(14473)),o=i(97969);i(58776);const r=(0,s.z)(["queued","parallel"]),c=(0,a.Ry)({alias:(0,a.jt)((0,a.Z_)()),continue_on_error:(0,a.jt)((0,a.O7)()),enabled:(0,a.jt)((0,a.O7)())}),l=(0,a.Ry)({entity_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())])),device_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())])),area_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())])),floor_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())])),label_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())]))}),d=(0,a.f0)(c,(0,a.Ry)({action:(0,a.jt)((0,a.Z_)()),service_template:(0,a.jt)((0,a.Z_)()),entity_id:(0,a.jt)((0,a.Z_)()),target:(0,a.jt)(l),data:(0,a.jt)((0,a.Ry)()),response_variable:(0,a.jt)((0,a.Z_)()),metadata:(0,a.jt)((0,a.Ry)())})),u=(0,a.f0)(c,(0,a.Ry)({action:(0,a.i0)("media_player.play_media"),target:(0,a.jt)((0,a.Ry)({entity_id:(0,a.jt)((0,a.Z_)())})),entity_id:(0,a.jt)((0,a.Z_)()),data:(0,a.Ry)({media_content_id:(0,a.Z_)(),media_content_type:(0,a.Z_)()}),metadata:(0,a.Ry)()})),f=e=>"off"===e.state||!!("on"===e.state&&r(e.attributes.mode)&&e.attributes.current<e.attributes.max);const _=e=>"delay"in e?"delay":"wait_template"in e?"wait_template":["condition","and","or","not"].some((t=>t in e))?"check_condition":"event"in e?"fire_event":"device_id"in e?"device_action":"repeat"in e?"repeat":"choose"in e?"choose":"if"in e?"if":"wait_for_trigger"in e?"wait_for_trigger":"variables"in e?"variables":"stop"in e?"stop":"sequence"in e?"sequence":"parallel"in e?"parallel":"set_conversation_response"in e?"set_conversation_response":"action"in e||"service"in e?"metadata"in e&&(0,a.is)(e,u)?"play_media":"service":"unknown",h=(e,t)=>{var i;const a=null===(i=e.services.script[(0,o.p)(t)])||void 0===i?void 0:i.fields;return void 0!==a&&Object.keys(a).length>0},p=e=>{if(!e)return e;if(Array.isArray(e))return e.map(p);if("service"in e&&("action"in e||(e.action=e.service),delete e.service),"scene"in e&&(e.action="scene.turn_on",e.target={entity_id:e.scene},delete e.scene),"sequence"in e)for(const i of e.sequence)p(i);const t=_(e);if("parallel"===t){p(e.parallel)}if("choose"===t){const t=e;if(Array.isArray(t.choose))for(const e of t.choose)p(e.sequence);else t.choose&&p(t.choose.sequence);t.default&&p(t.default)}if("repeat"===t){p(e.repeat.sequence)}if("if"===t){const t=e;p(t.then),t.else&&p(t.else)}if("wait_for_trigger"===t){const t=e;(0,n.W9)(t.wait_for_trigger)}return e}},69919:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{EX:()=>c,SO:()=>l,Sk:()=>u,TN:()=>g,UJ:()=>f,Ym:()=>m,hF:()=>d});i(19083),i(61893),i(9359),i(56475),i(70104),i(40251);var s=i(73358),n=i(75278),o=i(50602),r=(i(1416),i(76131),e([o]));o=(r.then?(await r)():r)[0];let c=function(e){return e[e.INSTALL=1]="INSTALL",e[e.SPECIFIC_VERSION=2]="SPECIFIC_VERSION",e[e.PROGRESS=4]="PROGRESS",e[e.BACKUP=8]="BACKUP",e[e.RELEASE_NOTES=16]="RELEASE_NOTES",e}({});const l=e=>(0,n.e)(e,c.PROGRESS)&&null!==e.attributes.update_percentage,d=(e,t=!1)=>(e.state===s.uo||t&&Boolean(e.attributes.skipped_version))&&(0,n.e)(e,c.INSTALL),u=e=>!!e.attributes.in_progress,f=(e,t)=>e.callWS({type:"update/release_notes",entity_id:t}),_="ioBroker Core",h="ioBroker Supervisor",p="ioBroker Operating System",m=(e,t)=>{const i=e.state,a=e.attributes;if("off"===i){return a.latest_version&&a.skipped_version===a.latest_version?a.latest_version:t.formatEntityState(e)}if("on"===i&&u(e)){return(0,n.e)(e,c.PROGRESS)&&null!==a.update_percentage?t.localize("ui.card.update.installing_with_progress",{progress:(0,o.uf)(a.update_percentage,t.locale,{maximumFractionDigits:a.display_precision,minimumFractionDigits:a.display_precision})}):t.localize("ui.card.update.installing")}return t.formatEntityState(e)},g=(e,t)=>{var i;if("hassio"!==(null===(i=t[e.entity_id])||void 0===i?void 0:i.domain))return"generic";const a=e.attributes.title||"";return a===_?"home_assistant":[_,h,p].includes(a)?"generic":"addon"};a()}catch(c){a(c)}}))},4242:function(e,t,i){"use strict";i.d(t,{fm:()=>s,uh:()=>a});i(92745),i(9359),i(70104),i(19423),i(40251),i(81804);const a=async e=>e.callWS({type:"config/auth/list"}),s=e=>e?e.trim().split(" ").slice(0,3).map((e=>e.substring(0,1))).join(""):"?"},81530:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{Fb:()=>v,Gt:()=>w,Og:()=>_,PG:()=>y,kh:()=>u,l:()=>m,oA:()=>f,tm:()=>g,uq:()=>p});i(19083),i(61006);var s=i(72344),n=i(73850),o=i(3582),r=i(25433),c=i(6280),l=i(49319),d=e([c]);c=(d.then?(await d)():d)[0];const u=["camera","configurator","weather"],f=["scene","automation"],_=["script"],h=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather"],p=["update"],m=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],g=["input_number","input_select","input_text","number","scene","select","text","update","event"],b=["camera","configurator"],y=(e,t)=>{if("weather"===(0,n.M)(t)){const i=e.states[t];if(i&&(0,l.M0)(i.state))return!1}return(0,s.p)(e,"history")&&!b.includes((0,n.M)(t))},v=(e,t,i=[])=>{if(!(0,s.p)(e,"logbook"))return!1;const a=e.states[t];if(!a)return!1;const o=(0,n.M)(t);return!(r.jV.includes(o)&&(0,c.zP)(o,a,void 0,i)||b.includes(o))&&("weather"!==o||!a||!(0,l.M0)(a.state))},w=e=>{const t=(0,n.M)(e.entity_id);if("group"===t){const t=(0,o.W)(e);return null!=t&&"group"!==t&&h.includes(t)}return h.includes(t)};a()}catch(u){a(u)}}))},61877:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.r(t);var s=i(61701),n=(i(71695),i(40251),i(47021),i(57243)),o=i(50778),r=i(16798),c=(i(54202),i(17170)),l=i(83523),d=i(58776),u=i(17409),f=e([r,c]);[r,c]=f.then?(await f)():f;let _,h,p,m,g,b,y=e=>e;(0,s.Z)([(0,o.Mo)("onboarding-restore-backup-cloud-login")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"backup",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_email",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_view",value(){return"login"}},{kind:"field",decorators:[(0,o.SB)()],key:"_showResetPasswordDone",value(){return!1}},{kind:"field",decorators:[(0,o.IO)("cloud-login")],key:"_cloudLoginElement",value:void 0},{kind:"field",decorators:[(0,o.IO)("cloud-forgot-password-card")],key:"_forgotPasswordElement",value:void 0},{kind:"method",key:"render",value:function(){return(0,n.dy)(_||(_=y` <ha-icon-button-arrow-prev .label="${0}" @click="${0}"></ha-icon-button-arrow-prev> <h1>ioBroker Cloud</h1> <p> ${0} </p> ${0} ${0} `),this.localize("ui.panel.page-onboarding.restore.back"),this._back,this.localize("ui.panel.page-onboarding.restore.ha-cloud.sign_in_description"),this._showResetPasswordDone?this._renderResetPasswordDone():n.Ld,"login"===this._view?(0,n.dy)(h||(h=y`<cloud-login card-less .email="${0}" .localize="${0}" translation-key-panel="page-onboarding.restore.ha-cloud" @cloud-forgot-password="${0}"></cloud-login>`),this._email,this.localize,this._showForgotPassword):"loading"===this._view?(0,n.dy)(p||(p=y`<div class="loading"> <ha-spinner size="large"></ha-spinner> </div>`)):(0,n.dy)(m||(m=y`<cloud-forgot-password-card card-less .email="${0}" .localize="${0}" translation-key-panel="page-onboarding.restore.ha-cloud.forgot_password" @cloud-email-changed="${0}" @cloud-done="${0}"></cloud-forgot-password-card>`),this._email,this.localize,this._emailChanged,this._showPasswordResetDone))}},{kind:"method",key:"_back",value:function(){"forgot-password"!==this._view?(0,l.c)(`${location.pathname}?${(0,d.pc)("page")}`):this._view="login"}},{kind:"method",key:"_renderResetPasswordDone",value:function(){return(0,n.dy)(g||(g=y`<ha-alert dismissable @alert-dismissed-clicked="${0}"> ${0} </ha-alert>`),this._dismissResetPasswordDoneInfo,this.localize("ui.panel.page-onboarding.restore.ha-cloud.forgot_password.check_your_email"))}},{kind:"method",key:"_showForgotPassword",value:async function(){this._view="loading",this._cloudLoginElement&&(this._email=this._cloudLoginElement.emailField.value),await i.e("59086").then(i.bind(i,95612)),this._view="forgot-password"}},{kind:"method",key:"_emailChanged",value:function(){var e;this._forgotPasswordElement&&(this._email=null===(e=this._forgotPasswordElement)||void 0===e?void 0:e.emailField.value)}},{kind:"method",key:"_showPasswordResetDone",value:function(){this._view="login",this._showResetPasswordDone=!0}},{kind:"method",key:"_dismissResetPasswordDoneInfo",value:function(){this._showResetPasswordDone=!1}},{kind:"get",static:!0,key:"styles",value:function(){return[u.I,(0,n.iv)(b||(b=y`h1,p{text-align:left}h2{font-size:24px;display:flex;align-items:center;gap:16px}h2 img{width:48px}.loading{display:flex;justify-content:center}ha-alert{margin-bottom:8px;display:block}`))]}}]}}),n.oi);a()}catch(_){a(_)}}))},47873:function(e,t,i){"use strict";i.d(t,{F:()=>s});i(71695),i(19423),i(40251),i(47021);var a=i(36522);const s=(e,t)=>new Promise((s=>{const n=t.closeDialog,o=t.logInHereAction;(0,a.B)(e,"show-dialog",{dialogTag:"dialog-cloud-already-connected",dialogImport:()=>Promise.all([i.e("97983"),i.e("58640"),i.e("39027")]).then(i.bind(i,94223)),dialogParams:Object.assign(Object.assign({},t),{},{closeDialog:()=>{null==n||n(),s(!1)},logInHereAction:()=>{null==o||o(),s(!0)}})})}))},16798:function(e,t,i){"use strict";i.a(e,(async function(e,t){try{var a=i(61701),s=(i(52247),i(71695),i(19423),i(40251),i(88972),i(47021),i(57243)),n=i(50778),o=i(36522),r=i(29095),c=(i(99426),i(54977),i(59826),i(34326),i(83166),i(28008)),l=i(94616),d=i(12660),u=i(38495),f=i(47873),_=i(37013),h=e([r,d]);[r,d]=h.then?(await h)():h;let p,m,g,b,y=e=>e;(0,a.Z)([(0,n.Mo)("cloud-login")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"check-connection"})],key:"checkConnection",value(){return!1}},{kind:"field",decorators:[(0,n.Cb)()],key:"email",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"localize",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"translation-key-panel"})],key:"translationKeyPanel",value(){return"config.cloud"}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"card-less"})],key:"cardLess",value(){return!1}},{kind:"field",decorators:[(0,n.IO)("#email",!0)],key:"emailField",value:void 0},{kind:"field",decorators:[(0,n.IO)("#password",!0)],key:"_passwordField",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_inProgress",value(){return!1}},{kind:"method",key:"render",value:function(){return this.cardLess?this._renderLoginForm():(0,s.dy)(p||(p=y` <ha-card outlined .header="${0}"> ${0} </ha-card> `),this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`),this._renderLoginForm())}},{kind:"method",key:"_renderLoginForm",value:function(){var e;return(0,s.dy)(m||(m=y` <div class="card-content login-form"> ${0} <ha-textfield .label="${0}" id="email" name="username" type="email" autocomplete="username" required .value="${0}" @keydown="${0}" .disabled="${0}" .validationMessage="${0}"></ha-textfield> <ha-password-field id="password" name="password" .label="${0}" autocomplete="current-password" required minlength="8" @keydown="${0}" .disabled="${0}" .validationMessage="${0}"></ha-password-field> </div> <div class="card-actions"> <ha-button .disabled="${0}" @click="${0}"> ${0} </ha-button> <ha-progress-button unelevated @click="${0}" .progress="${0}">${0}</ha-progress-button> </div> `),this._error?(0,s.dy)(g||(g=y`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):s.Ld,this.localize(`ui.panel.${this.translationKeyPanel}.login.email`),null!==(e=this.email)&&void 0!==e?e:"",this._keyDown,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.login.email_error_msg`),this.localize(`ui.panel.${this.translationKeyPanel}.login.password`),this._keyDown,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.login.password_error_msg`),this._inProgress,this._handleForgotPassword,this.localize(`ui.panel.${this.translationKeyPanel}.login.forgot_password`),this._handleLogin,this._inProgress,this.localize(`ui.panel.${this.translationKeyPanel}.login.sign_in`))}},{kind:"method",key:"_keyDown",value:function(e){"Enter"===e.key&&this._handleLogin()}},{kind:"field",key:"_handleCloudLoginError",value(){return async(e,t,i,a)=>{const s=e&&e.body&&e.body.code;if("mfarequired"===s){const e=await(0,d.showPromptDialog)(this,{title:this.localize(`ui.panel.${this.translationKeyPanel}.login.totp_code_prompt_title`),inputLabel:this.localize(`ui.panel.${this.translationKeyPanel}.login.totp_code`),inputType:"text",defaultValue:"",confirmText:this.localize(`ui.panel.${this.translationKeyPanel}.login.submit`),dismissText:this.localize(`ui.panel.${this.translationKeyPanel}.login.cancel`)});if(null!==e&&""!==e)return this._login(t,i,a,e),"continue"}if("alreadyconnectederror"===s){const a=await(0,f.F)(this,{details:JSON.parse(e.body.message)});return a&&this._login(t,i,!1),a?"continue":"cancel"}if("PasswordChangeRequired"===s)return(0,d.showAlertDialog)(this,{title:this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_password_change_required`)}),"password-change";if("usernotfound"!==s||t===t.toLowerCase())switch(s){case"UserNotConfirmed":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_email_confirm_necessary`);case"mfarequired":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_mfa_code_required`);case"mfaexpiredornotstarted":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_mfa_expired_or_not_started`);case"invalidtotpcode":return this.localize(`ui.panel.${this.translationKeyPanel}.login.alert_totp_code_invalid`);default:return e&&e.body&&e.body.message?e.body.message:"Unknown error"}else this._login(t.toLowerCase(),i,a)}}},{kind:"field",key:"_login",value(){return async(e,t,i,a)=>{if(!t&&!a)throw new Error("Password or code required");try{if(this.hass){const s=await(0,l._Y)(Object.assign(Object.assign({hass:this.hass,email:e},a?{code:a}:{password:t}),{},{check_connection:i}));s.cloud_pipeline&&await(0,d.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_title"),text:this.hass.localize("ui.panel.config.cloud.login.cloud_pipeline_text")})&&(0,u.GV)(this.hass,s.cloud_pipeline)}else await(0,_.ao)(Object.assign({email:e},a?{code:a}:{password:t}));this.email="",(0,o.B)(this,"ha-refresh-cloud-status")}catch(s){const a=await this._handleCloudLoginError(s,e,t,i);if("cancel"===a)return this._inProgress=!1,this.email="",void(this._passwordField.value="");if("password-change"===a)return void this._handleForgotPassword();"continue"!==a&&(this._inProgress=!1,this._error=a)}}}},{kind:"method",key:"_handleLogin",value:async function(){if(!this._inProgress){if(!this.emailField.reportValidity())return void this.emailField.focus();if(!this._passwordField.reportValidity())return void this._passwordField.focus();this._inProgress=!0,this._login(this.emailField.value,this._passwordField.value,this.checkConnection)}}},{kind:"method",key:"_handleForgotPassword",value:function(){(0,o.B)(this,"cloud-forgot-password")}},{kind:"get",static:!0,key:"styles",value:function(){return[c.Qx,(0,s.iv)(b||(b=y`ha-card{overflow:hidden}ha-card .card-header{margin-bottom:-8px}.card-actions{display:flex;justify-content:space-between;align-items:center}.login-form{display:flex;flex-direction:column}`))]}}]}}),s.oi);t()}catch(p){t(p)}}))},27934:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{JE:()=>l});i(71695),i(40251),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(47021);var s=i(88693),n=i(40249),o=e([s]);s=(o.then?(await o)():o)[0];const r=new Set(["error","entity"]),c={"entity-filter":()=>i.e("36240").then(i.bind(i,26199)),"state-label":()=>i.e("23759").then(i.bind(i,34270))},l=e=>(0,n.Tw)("badge",e,r,c,void 0,"entity");a()}catch(r){a(r)}}))},12660:function(e,t,i){"use strict";i.a(e,(async function(e,a){try{i.d(t,{importMoreInfoControl:()=>n.ST,showAlertDialog:()=>s.showAlertDialog,showConfirmationDialog:()=>s.showConfirmationDialog,showPromptDialog:()=>s.showPromptDialog});i(17808);var s=i(76131),n=i(88991),o=i(27934),r=i(62037),c=(i(64830),i(52032)),l=i(46542),d=e([n,o,r,c,l]);[n,o,r,c,l]=d.then?(await d)():d,a()}catch(u){a(u)}}))},22152:function(){Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(e,t){return void 0!==t&&(t=!!t),this.hasAttribute(e)?!!t||(this.removeAttribute(e),!1):!1!==t&&(this.setAttribute(e,""),!0)})}}]);
//# sourceMappingURL=69507.1ea3a864783c76d3.js.map