"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[62151],{3239:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(76775);n(46798),n(94570),n(46349),n(70320),n(9849),n(50289),n(94167),n(65974);function a(e){if(!e||"object"!=(0,i.Z)(e))return e;if("[object Date]"==Object.prototype.toString.call(e))return new Date(e.getTime());if(Array.isArray(e))return e.map(a);var t={};return Object.keys(e).forEach((function(n){t[n]=a(e[n])})),t}},25516:function(e,t,n){n.d(t,{i:function(){return a}});var i=(0,n(8330).P)((function(e){history.replaceState({scrollPosition:e},"")}),300),a=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){i(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var i=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;i.call(this);var a=this[t.key];a&&this.updateComplete.then((function(){var t=n.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=a}),0)}))}}}}}},54531:function(e,t,n){n.d(t,{Qc:function(){return c},Xr:function(){return l},zJ:function(){return s}});n(46798),n(9849),n(50289),n(94167),n(51358),n(78399),n(5239),n(56086),n(47884),n(81912),n(64584),n(41483),n(12367),n(9454),n(98490),n(65974),n(40271);var i=["zone","persistent_notification"],a=function(e,t){var n,i,a,r,o,s,l,c;if("call-service"===t.action&&(null!==(n=t.target)&&void 0!==n&&n.entity_id||null!==(i=t.service_data)&&void 0!==i&&i.entity_id||null!==(a=t.data)&&void 0!==a&&a.entity_id)){var u=null!==(r=null!==(o=null===(s=t.service_data)||void 0===s?void 0:s.entity_id)&&void 0!==o?o:null===(l=t.data)||void 0===l?void 0:l.entity_id)&&void 0!==r?r:null===(c=t.target)||void 0===c?void 0:c.entity_id;Array.isArray(u)||(u=[u]);for(var d=0,h=u;d<h.length;d++){var f=h[d];e.add(f)}}},r=function(e,t){"string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&a(e,t.tap_action),t.hold_action&&a(e,t.hold_action)):e.add(t)},o=function e(t,n){n.entity&&r(t,n.entity),n.entities&&Array.isArray(n.entities)&&n.entities.forEach((function(e){return r(t,e)})),n.card&&e(t,n.card),n.cards&&Array.isArray(n.cards)&&n.cards.forEach((function(n){return e(t,n)})),n.elements&&Array.isArray(n.elements)&&n.elements.forEach((function(n){return e(t,n)})),n.badges&&Array.isArray(n.badges)&&n.badges.forEach((function(e){return r(t,e)}))},s=function(e){var t=new Set;return e.views.forEach((function(e){return o(t,e)})),t},l=function(e,t){for(var n=new Set,a=0,r=Object.keys(e.states);a<r.length;a++){var o=r[a];t.has(o)||i.includes(o.split(".",1)[0])||n.add(o)}return n},c=function(e,t){var n=s(t);return l(e,n)}},59110:function(e,t,n){var i,a,r,o,s,l,c=n(88962),u=n(33368),d=n(71650),h=n(82390),f=n(69205),v=n(70906),g=n(91808),y=(n(97393),n(22859),n(68144)),p=n(95260),b=n(14516),m=n(47181),k=n(87744);n(37168),n(3143),n(42952),(0,g.Z)([(0,p.Mo)("hui-entity-picker-table")],(function(e,t){var n=function(t){(0,f.Z)(i,t);var n=(0,v.Z)(i);function i(){var t;(0,d.Z)(this,i);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=n.call.apply(n,[this].concat(r)),e((0,h.Z)(t)),t}return(0,u.Z)(i)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,p.Cb)({type:Boolean,attribute:"no-label-float"})],key:"noLabelFloat",value:function(){return!1}},{kind:"field",decorators:[(0,p.Cb)({type:Array})],key:"entities",value:void 0},{kind:"method",key:"render",value:function(){return(0,y.dy)(i||(i=(0,c.Z)([' <ha-data-table .hass="','" selectable .id="','" .columns="','" .data="','" .dir="','" .searchLabel="','" .noLabelFloat="','" .noDataText="','" @selection-changed="','"></ha-data-table> '])),this.hass,"entity_id",this._columns(this.narrow),this.entities,(0,k.Zu)(this.hass),this.hass.localize("ui.panel.lovelace.unused_entities.search"),this.noLabelFloat,this.hass.localize("ui.panel.lovelace.unused_entities.no_data"),this._handleSelectionChanged)}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,b.Z)((function(t){var n={icon:{title:"",label:e.hass.localize("ui.panel.lovelace.unused_entities.state_icon"),type:"icon",template:function(t){return(0,y.dy)(a||(a=(0,c.Z)([' <state-badge @click="','" .hass="','" .stateObj="','"></state-badge> '])),e._handleEntityClicked,e.hass,t.stateObj)}},name:{title:e.hass.localize("ui.panel.lovelace.unused_entities.entity"),sortable:!0,filterable:!0,grows:!0,direction:"asc",template:function(n){return(0,y.dy)(r||(r=(0,c.Z)([' <div @click="','" style="cursor:pointer"> '," "," </div> "])),e._handleEntityClicked,n.name,t?(0,y.dy)(o||(o=(0,c.Z)([' <div class="secondary">',"</div> "])),n.entity_id):"")}}};return n.entity_id={title:e.hass.localize("ui.panel.lovelace.unused_entities.entity_id"),sortable:!0,filterable:!0,width:"30%",hidden:t},n.domain={title:e.hass.localize("ui.panel.lovelace.unused_entities.domain"),sortable:!0,filterable:!0,width:"15%",hidden:t},n.last_changed={title:e.hass.localize("ui.panel.lovelace.unused_entities.last_changed"),type:"numeric",sortable:!0,width:"15%",hidden:t,template:function(t){return(0,y.dy)(s||(s=(0,c.Z)([' <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '])),e.hass,t.last_changed)}},n}))}},{kind:"method",key:"_handleSelectionChanged",value:function(e){var t=e.detail.value;(0,m.B)(this,"selected-changed",{selectedEntities:t})}},{kind:"method",key:"_handleEntityClicked",value:function(e){var t=e.target.closest(".mdc-data-table__row").rowId;(0,m.B)(this,"hass-more-info",{entityId:t})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,y.iv)(l||(l=(0,c.Z)(["ha-data-table{--data-table-border-width:0;height:100%}"])))}}]}}),y.oi)},17310:function(e,t,n){n.d(t,{f:function(){return r}});n(51358),n(46798),n(47084),n(5239),n(98490);var i=n(47181),a=function(){return Promise.all([n.e(49412),n.e(96055),n.e(77426),n.e(52506),n.e(96549),n.e(53257),n.e(11925),n.e(18900),n.e(57544),n.e(47680),n.e(75329)]).then(n.bind(n,9444))},r=function(e,t){(0,i.B)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:a,dialogParams:t})}},4398:function(e,t,n){n.d(t,{i:function(){return a}});n(51358),n(46798),n(47084),n(5239),n(98490);var i=n(47181),a=function(e,t){(0,i.B)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:function(){return Promise.all([n.e(28597),n.e(3762),n.e(49412),n.e(70632),n.e(20855)]).then(n.bind(n,20855))},dialogParams:t})}},28279:function(e,t,n){n.r(t),n.d(t,{HuiUnusedEntities:function(){return S}});var i,a,r,o,s=n(53709),l=n(88962),c=n(33368),u=n(71650),d=n(82390),h=n(69205),f=n(70906),v=n(91808),g=n(34541),y=n(47838),p=(n(97393),n(46349),n(70320),n(37313),n(68144)),b=n(95260),m=n(83448),k=n(58831),_=n(91741),E=n(87744),w=(n(36125),n(52039),n(54531)),Z=(n(59110),n(17310)),C=n(4398),S=(0,v.Z)([(0,b.Mo)("hui-unused-entities")],(function(e,t){var n=function(t){(0,h.Z)(i,t);var n=(0,f.Z)(i);function i(){var t;(0,u.Z)(this,i);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=n.call.apply(n,[this].concat(r)),e((0,d.Z)(t)),t}return(0,c.Z)(i)}(t);return{F:n,d:[{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,b.SB)()],key:"_unusedEntities",value:function(){return[]}},{kind:"field",decorators:[(0,b.SB)()],key:"_selectedEntities",value:function(){return[]}},{kind:"get",key:"_config",value:function(){return this.lovelace.config}},{kind:"method",key:"updated",value:function(e){(0,g.Z)((0,y.Z)(n.prototype),"updated",this).call(this,e),e.has("lovelace")&&this._getUnusedEntities()}},{kind:"method",key:"render",value:function(){var e=this;return this.hass&&this.lovelace?"storage"===this.lovelace.mode&&!1===this.lovelace.editMode?p.Ld:(0,p.dy)(i||(i=(0,l.Z)([' <div class="container"> ',' <hui-entity-picker-table .hass="','" .narrow="','" .entities="','" @selected-changed="','"></hui-entity-picker-table> </div> <div class="fab ','"> <ha-fab .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </div> '])),this.narrow?"":(0,p.dy)(a||(a=(0,l.Z)([' <ha-card header="','"> <div class="card-content"> '," "," </div> </ha-card> "])),this.hass.localize("ui.panel.lovelace.unused_entities.title"),this.hass.localize("ui.panel.lovelace.unused_entities.available_entities"),"storage"===this.lovelace.mode?(0,p.dy)(r||(r=(0,l.Z)([" <br>"," "])),this.hass.localize("ui.panel.lovelace.unused_entities.select_to_add")):""),this.hass,this.narrow,this._unusedEntities.map((function(t){var n=e.hass.states[t];return{icon:"",entity_id:t,stateObj:n,name:n?(0,_.C)(n):"Unavailable",domain:(0,k.M)(t),last_changed:null==n?void 0:n.last_changed}})),this._handleSelectedChanged,(0,m.$)({rtl:(0,E.HE)(this.hass),selected:this._selectedEntities.length}),this.hass.localize("ui.panel.lovelace.editor.edit_card.add"),this._addToLovelaceView,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"):p.Ld}},{kind:"method",key:"_getUnusedEntities",value:function(){if(this.hass&&this.lovelace){this._selectedEntities=[];var e=(0,w.Qc)(this.hass,this._config);this._unusedEntities=(0,s.Z)(e).sort()}}},{kind:"method",key:"_handleSelectedChanged",value:function(e){this._selectedEntities=e.detail.selectedEntities}},{kind:"method",key:"_addToLovelaceView",value:function(){var e=this;1!==this.lovelace.config.views.length?(0,C.i)(this,{lovelaceConfig:this.lovelace.config,allowDashboardChange:!1,viewSelectedCallback:function(t,n,i){(0,Z.f)(e,{lovelaceConfig:e.lovelace.config,saveConfig:e.lovelace.saveConfig,path:[i],entities:e._selectedEntities})}}):(0,Z.f)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[0],entities:this._selectedEntities})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,p.iv)(o||(o=(0,l.Z)([":host{background:var(--lovelace-background);overflow:hidden}.container{display:flex;flex-direction:column;height:100%}ha-card{--ha-card-box-shadow:none;--ha-card-border-radius:0}hui-entity-picker-table{flex-grow:1}.fab{position:sticky;float:right;right:calc(16px + env(safe-area-inset-right));bottom:calc(16px + env(safe-area-inset-bottom));z-index:1}.fab.rtl{right:initial;left:0;bottom:0;padding-right:16px;padding-left:calc(16px + env(safe-area-inset-left))}ha-fab{position:relative;bottom:calc(-80px - env(safe-area-inset-bottom));transition:bottom .3s}.fab.selected ha-fab{bottom:0}"])))}}]}}),p.oi)},79894:function(e,t,n){n(68077)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},93217:function(e,t,n){n.d(t,{Ud:function(){return b}});var i=n(68990),a=n(93359),r=n(59202),o=n(53709),s=n(40039),l=n(76775),c=(n(58556),n(94738),n(98214),n(46798),n(51467),n(22859),n(85717),n(51358),n(96043),n(5239),n(98490),n(10999),n(52117),n(63789),n(82479),n(94570),n(99397),n(89802),n(46349),n(70320),n(34997),n(9849),n(12148),n(17692),n(47084),n(39685),n(97393),n(91989),n(86576),n(79894),n(76843),Symbol("Comlink.proxy")),u=Symbol("Comlink.endpoint"),d=Symbol("Comlink.releaseProxy"),h=Symbol("Comlink.finalizer"),f=Symbol("Comlink.thrown"),v=function(e){return"object"===(0,l.Z)(e)&&null!==e||"function"==typeof e},g=new Map([["proxy",{canHandle:function(e){return v(e)&&e[c]},serialize:function(e){var t=new MessageChannel,n=t.port1,i=t.port2;return y(e,n),[i,[i]]},deserialize:function(e){return e.start(),b(e)}}],["throw",{canHandle:function(e){return v(e)&&f in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function l(u){if(u&&u.data)if(function(e,t){var n,i=(0,s.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t===a||"*"===a)return!0;if(a instanceof RegExp&&a.test(t))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}(n,u.origin)){var d,v=Object.assign({path:[]},u.data),g=v.id,b=v.type,m=v.path,k=(u.data.argumentList||[]).map(A);try{var _=m.slice(0,-1).reduce((function(e,t){return e[t]}),e),E=m.reduce((function(e,t){return e[t]}),e);switch(b){case"GET":d=E;break;case"SET":_[m.slice(-1)[0]]=A(u.data.value),d=!0;break;case"APPLY":d=E.apply(_,k);break;case"CONSTRUCT":var w;d=function(e){return Object.assign(e,(0,a.Z)({},c,!0))}((0,r.Z)(E,(0,o.Z)(k)));break;case"ENDPOINT":var Z=new MessageChannel,z=Z.port1,T=Z.port2;y(e,T),d=function(e,t){return C.set(e,t),e}(z,[z]);break;case"RELEASE":d=void 0;break;default:return}}catch(w){d=(0,a.Z)({value:w},f,0)}Promise.resolve(d).catch((function(e){return(0,a.Z)({value:e},f,0)})).then((function(n){var a=S(n),r=(0,i.Z)(a,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:g}),s),"RELEASE"===b&&(t.removeEventListener("message",l),p(t),h in e&&"function"==typeof e[h]&&e[h]())})).catch((function(e){var n=S((0,a.Z)({value:new TypeError("Unserializable return value")},f,0)),r=(0,i.Z)(n,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:g}),s)}))}else console.warn("Invalid origin '".concat(u.origin,"' for comlink proxy"))})),t.start&&t.start()}function p(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function b(e,t){return w(e,[],t)}function m(e){if(e)throw new Error("Proxy has been released and is not useable")}function k(e){return z(e,{type:"RELEASE"}).then((function(){p(e)}))}var _=new WeakMap,E="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(e){var t=(_.get(e)||0)-1;_.set(e,t),0===t&&k(e)}));function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,a=new Proxy(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},{get:function(i,r){if(m(n),r===d)return function(){!function(e){E&&E.unregister(e)}(a),k(e),n=!0};if("then"===r){if(0===t.length)return{then:function(){return a}};var s=z(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(A);return s.then.bind(s)}return w(e,[].concat((0,o.Z)(t),[r]))},set:function(a,r,s){m(n);var l=S(s),c=(0,i.Z)(l,2),u=c[0],d=c[1];return z(e,{type:"SET",path:[].concat((0,o.Z)(t),[r]).map((function(e){return e.toString()})),value:u},d).then(A)},apply:function(a,r,o){m(n);var s=t[t.length-1];if(s===u)return z(e,{type:"ENDPOINT"}).then(A);if("bind"===s)return w(e,t.slice(0,-1));var l=Z(o),c=(0,i.Z)(l,2),d=c[0],h=c[1];return z(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:d},h).then(A)},construct:function(a,r){m(n);var o=Z(r),s=(0,i.Z)(o,2),l=s[0],c=s[1];return z(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:l},c).then(A)}});return function(e,t){var n=(_.get(t)||0)+1;_.set(t,n),E&&E.register(e,t,e)}(a,e),a}function Z(e){var t,n=e.map(S);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var C=new WeakMap;function S(e){var t,n=(0,s.Z)(g);try{for(n.s();!(t=n.n()).done;){var a=(0,i.Z)(t.value,2),r=a[0],o=a[1];if(o.canHandle(e)){var l=o.serialize(e),c=(0,i.Z)(l,2);return[{type:"HANDLER",name:r,value:c[0]},c[1]]}}}catch(u){n.e(u)}finally{n.f()}return[{type:"RAW",value:e},C.get(e)||[]]}function A(e){switch(e.type){case"HANDLER":return g.get(e.name).deserialize(e.value);case"RAW":return e.value}}function z(e,t,n){return new Promise((function(i){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),i(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}}}]);
//# sourceMappingURL=62151.M8hLKNwXONw.js.map