"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[29786],{55642:function(t,e,n){n.d(e,{h:function(){return d}});var a=n(68990),i=n(71650),r=n(33368),c=n(69205),o=n(70906),s=(n(51467),n(46798),n(9849),n(50289),n(94167),n(82073),n(68144)),u=n(57835),d=(0,u.XM)(function(t){(0,c.Z)(n,t);var e=(0,o.Z)(n);function n(t){var a;if((0,i.Z)(this,n),(a=e.call(this,t))._element=void 0,t.type!==u.pX.CHILD)throw new Error("dynamicElementDirective can only be used in content bindings");return a}return(0,r.Z)(n,[{key:"update",value:function(t,e){var n=this,i=(0,a.Z)(e,2),r=i[0],c=i[1];return this._element&&this._element.localName===r?(c&&Object.entries(c).forEach((function(t){var e=(0,a.Z)(t,2),i=e[0],r=e[1];n._element[i]=r})),s.Jb):this.render(r,c)}},{key:"render",value:function(t,e){var n=this;return this._element=document.createElement(t),e&&Object.entries(e).forEach((function(t){var e=(0,a.Z)(t,2),i=e[0],r=e[1];n._element[i]=r})),this._element}}]),n}(u.Xe))},5083:function(t,e,n){n.r(e),n.d(e,{HuiStatisticCardEditor:function(){return R}});var a,i=n(99312),r=n(81043),c=n(88962),o=n(68990),s=n(33368),u=n(71650),d=n(82390),l=n(69205),h=n(70906),f=n(91808),_=(n(97393),n(85717),n(82073),n(46349),n(40271),n(60163),n(65974),n(70320),n(46798),n(9849),n(50289),n(94167),n(22859),n(68144)),m=n(95260),p=n(14516),y=n(93088),v=n(47181),Z=n(36639),g=(n(68331),n(38014)),j=n(61173),k=n(98346),b=(0,y.f0)(k.I,(0,y.Ry)({entity:(0,y.jt)((0,y.Z_)()),name:(0,y.jt)((0,y.Z_)()),icon:(0,y.jt)((0,y.Z_)()),unit:(0,y.jt)((0,y.Z_)()),stat_type:(0,y.jt)((0,y.Z_)()),period:(0,y.jt)((0,y.Yj)()),theme:(0,y.jt)((0,y.Z_)()),footer:(0,y.jt)(j.ds)})),x=["mean","min","max","change"],w={mean:"mean",min:"min",max:"max",change:"sum"},C={today:{calendar:{period:"day"}},yesterday:{calendar:{period:"day",offset:-1}},this_week:{calendar:{period:"week"}},last_week:{calendar:{period:"week",offset:-1}},this_month:{calendar:{period:"month"}},last_month:{calendar:{period:"month",offset:-1}},this_year:{calendar:{period:"year"}},last_year:{calendar:{period:"year",offset:-1}}},R=(0,f.Z)([(0,m.Mo)("hui-statistic-card-editor")],(function(t,e){var n,f,j=function(e){(0,l.Z)(a,e);var n=(0,h.Z)(a);function a(){var e;(0,u.Z)(this,a);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return e=n.call.apply(n,[this].concat(r)),t((0,d.Z)(e)),e}return(0,s.Z)(a)}(e);return{F:j,d:[{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_metadata",value:void 0},{kind:"method",key:"setConfig",value:function(t){(0,y.hu)(t,b),this._config=t,this._fetchMetadata()}},{kind:"method",key:"firstUpdated",value:function(){var t=this;this._fetchMetadata().then((function(){var e,n,a;null!==(e=t._config)&&void 0!==e&&e.stat_type||null===(n=t._config)||void 0===n||!n.entity||(0,v.B)(t,"config-changed",{config:Object.assign(Object.assign({},t._config),{},{stat_type:null!==(a=t._metadata)&&void 0!==a&&a.has_sum?"change":"mean"})})}))}},{kind:"field",key:"_data",value:function(){return(0,p.Z)((function(t){if(!t||!t.period)return t;for(var e=0,n=Object.entries(C);e<n.length;e++){var a=(0,o.Z)(n[e],2),i=a[0],r=a[1];if((0,Z.v)(r,t.period))return Object.assign(Object.assign({},t),{},{period:i})}return t}))}},{kind:"field",key:"_schema",value:function(){return(0,p.Z)((function(t,e,n){return[{name:"entity",required:!0,selector:{statistic:{}}},{name:"stat_type",required:!0,selector:{select:{multiple:!1,options:x.map((function(t){return{value:t,label:e("ui.panel.lovelace.editor.card.statistic.stat_type_labels.".concat(t)),disabled:!n||!(0,g.Z0)(n,w[t])}}))}}},{name:"period",required:!0,selector:t&&Object.keys(C).includes(t)?{select:{multiple:!1,options:Object.keys(C).map((function(t){return{value:t,label:e("ui.panel.lovelace.editor.card.statistic.periods.".concat(t))||t}}))}}:{object:{}}},{type:"grid",name:"",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}},{name:"unit",selector:{text:{}}},{name:"theme",selector:{theme:{}}}]}]}))}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return _.Ld;var t=this._data(this._config),e=this._schema("string"==typeof t.period?t.period:void 0,this.hass.localize,this._metadata);return(0,_.dy)(a||(a=(0,c.Z)([' <ha-form .hass="','" .data="','" .schema="','" .computeLabel="','" @value-changed="','"></ha-form> '])),this.hass,t,e,this._computeLabelCallback,this._valueChanged)}},{kind:"method",key:"_fetchMetadata",value:(f=(0,r.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hass&&this._config){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,g.Py)(this.hass,[this._config.entity]);case 4:this._metadata=t.sent[0];case 5:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{kind:"method",key:"_valueChanged",value:(n=(0,r.Z)((0,i.Z)().mark((function t(e){var n,a,r,c,o,s,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object.assign({},e.detail.value),Object.keys(a).forEach((function(t){return""===a[t]&&delete a[t]})),"string"==typeof a.period&&(r=C[a.period])&&(a.period=r),!a.stat_type||!a.entity||a.entity===(null===(n=this._metadata)||void 0===n?void 0:n.statistic_id)){t.next=18;break}return t.next=6,(0,g.Py)(this.hass,[a.entity]);case 6:if(t.t1=c=t.sent,t.t0=null===t.t1,t.t0){t.next=10;break}t.t0=void 0===c;case 10:if(!t.t0){t.next=14;break}t.t2=void 0,t.next=15;break;case 14:t.t2=c[0];case 15:(o=t.t2)&&!o.has_sum&&"change"===a.stat_type&&(a.stat_type="mean"),o&&!o.has_mean&&"change"!==a.stat_type&&(a.stat_type="change");case 18:if(a.stat_type||!a.entity){t.next=32;break}return t.next=21,(0,g.Py)(this.hass,[a.entity]);case 21:if(t.t4=s=t.sent,t.t3=null===t.t4,t.t3){t.next=25;break}t.t3=void 0===s;case 25:if(!t.t3){t.next=29;break}t.t5=void 0,t.next=30;break;case 29:t.t5=s[0];case 30:u=t.t5,a.stat_type=null!=u&&u.has_sum?"change":"mean";case 32:(0,v.B)(this,"config-changed",{config:a});case 33:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{kind:"field",key:"_computeLabelCallback",value:function(){var t=this;return function(e){return"period"===e.name?t.hass.localize("ui.panel.lovelace.editor.card.statistic.period"):"theme"===e.name?"".concat(t.hass.localize("ui.panel.lovelace.editor.card.generic.theme")," (").concat(t.hass.localize("ui.panel.lovelace.editor.card.config.optional"),")"):t.hass.localize("ui.panel.lovelace.editor.card.generic.".concat(e.name))}}}]}}),_.oi)},85677:function(t,e,n){n.d(e,{C:function(){return f}});var a=n(76775),i=n(93088),r=(0,i.Ry)({user:(0,i.Z_)()}),c=(0,i.G0)([(0,i.O7)(),(0,i.Ry)({text:(0,i.jt)((0,i.Z_)()),excemptions:(0,i.jt)((0,i.IX)(r))})]),o=(0,i.Ry)({action:(0,i.i0)("url"),url_path:(0,i.Z_)(),confirmation:(0,i.jt)(c)}),s=(0,i.Ry)({action:(0,i.i0)("call-service"),service:(0,i.Z_)(),service_data:(0,i.jt)((0,i.Ry)()),data:(0,i.jt)((0,i.Ry)()),target:(0,i.jt)((0,i.Ry)({entity_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())])),device_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())])),area_id:(0,i.jt)((0,i.G0)([(0,i.Z_)(),(0,i.IX)((0,i.Z_)())]))})),confirmation:(0,i.jt)(c)}),u=(0,i.Ry)({action:(0,i.i0)("navigate"),navigation_path:(0,i.Z_)(),navigation_replace:(0,i.jt)((0,i.O7)()),confirmation:(0,i.jt)(c)}),d=(0,i.dt)({action:(0,i.i0)("assist"),pipeline_id:(0,i.jt)((0,i.Z_)()),start_listening:(0,i.jt)((0,i.O7)())}),l=(0,i.dt)({action:(0,i.i0)("fire-dom-event")}),h=(0,i.Ry)({action:(0,i.kE)(["none","toggle","more-info","call-service","url","navigate","assist"]),confirmation:(0,i.jt)(c)}),f=(0,i.D8)((function(t){if(t&&"object"===(0,a.Z)(t)&&"action"in t)switch(t.action){case"call-service":return s;case"fire-dom-event":return l;case"navigate":return u;case"url":return o;case"assist":return d}return h}))},98346:function(t,e,n){n.d(e,{I:function(){return i}});var a=n(93088),i=(0,a.Ry)({type:(0,a.Z_)(),view_layout:(0,a.Yj)()})},53939:function(t,e,n){n.d(e,{k:function(){return r}});var a=n(93088),i=n(85677),r=(0,a.Ry)({entity:(0,a.Z_)(),name:(0,a.jt)((0,a.Z_)()),icon:(0,a.jt)((0,a.Z_)()),image:(0,a.jt)((0,a.Z_)()),show_name:(0,a.jt)((0,a.O7)()),show_icon:(0,a.jt)((0,a.O7)()),tap_action:(0,a.jt)(i.C),hold_action:(0,a.jt)(i.C),double_tap_action:(0,a.jt)(i.C)})},61173:function(t,e,n){n.d(e,{ds:function(){return d},gg:function(){return u}});var a=n(76775),i=n(93088),r=n(85677),c=n(53939),o=(0,i.Ry)({type:(0,i.Z_)(),image:(0,i.Z_)(),tap_action:(0,i.jt)(r.C),hold_action:(0,i.jt)(r.C),double_tap_action:(0,i.jt)(r.C),alt_text:(0,i.jt)((0,i.Z_)())}),s=(0,i.Ry)({type:(0,i.Z_)(),entities:(0,i.IX)(c.k)}),u=(0,i.Ry)({type:(0,i.Z_)(),entity:(0,i.Z_)(),detail:(0,i.jt)((0,i.Rx)()),hours_to_show:(0,i.jt)((0,i.Rx)())}),d=(0,i.D8)((function(t){if(t&&"object"===(0,a.Z)(t)&&"type"in t)switch(t.type){case"buttons":return s;case"graph":return u;case"picture":return o}return(0,i.G0)([s,u,o])}))}}]);
//# sourceMappingURL=29786._gE0O97AnOA.js.map