{"version":3,"file":"78786.f19bbe5200b75ade.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20250401.0/src/panels/lovelace/cards/energy/hui-energy-usage-graph-card.ts","/unknown/node_modules/date-fns/constructNow.js","/unknown/node_modules/date-fns/isSameDay.js","/unknown/node_modules/date-fns/isToday.js"],"names":["colorPropertyMap","to_grid","to_battery","from_grid","used_grid","used_solar","used_battery","HuiEnergyUsageGraphCard","_decorate","customElement","_initialize","_SubscribeMixin","F","constructor","args","d","kind","decorators","property","attribute","key","value","state","startOfToday","endOfToday","_this$_config","getEnergyDataCollection","this","hass","_config","collection_key","subscribe","data","_getStatistics","config","changedProps","hasConfigChanged","size","has","html","_t","_","title","_t2","classMap","_chartData","_createOptions","_start","_end","locale","_compareStart","_compareEnd","some","dataset","length","_t3","isToday","localize","nothing","total","num","formatNumber","memoizeOne","start","end","compareStart","compareEnd","commonOptions","getCommonOptions","_formatTotal","Object","assign","tooltip","formatter","params","_commonOptions$toolti","_commonOptions$toolti2","Array","isArray","sort","a","b","_a$value","_b$value","aValue","bValue","componentIndex","call","energyData","datasets","statIds","source","prefs","energy_sources","type","flowFrom","flow_from","push","stat_energy_from","flowTo","flow_to","stat_energy_to","from_battery","solar","computedStyles","getComputedStyle","colorIndices","keys","forEach","values","id","idx","labels","startCompare","endCompare","statsCompare","_processDataSet","statsMetadata","stack","order","stats","fillDataGapsAndRoundCaps","statistics","statisticsMetaData","statIdsByCat","compare","combinedData","summedData","entries","sum","includes","add","totalStats","sets","set","stat","change","undefined","val","grid_to_battery","battery_to_grid","_summedData$to_grid","_summedData$to_batter","_summedData$from_grid","_summedData$from_grid2","_summedData$from_grid3","noOfSources","total_from_grid","allKeys","sources","concat","uniqueKeys","from","Set","Number","compareTransform","getCompareTransform","statId","_colorIndices$type","_colorIndices$type2","points","dataPoint","cursor","name","getStatisticLabel","barMaxWidth","itemStyle","borderColor","getEnergyColor","themes","darkMode","color","static","css","_t4","SubscribeMixin","LitElement","constructNow","date","constructFrom","Date","now","isSameDay","laterDate","earlierDate","options","dateLeft_","dateRight_","normalizeDates","in","startOfDay"],"mappings":"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"}