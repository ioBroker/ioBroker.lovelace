(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["24531"],{92636:function(e,t,i){"use strict";i.d(t,{z:()=>o});i(19083),i(61006);const o=e=>(t,i)=>e.includes(t,i)},59847:function(e,t,i){"use strict";i.d(t,{N:()=>n});var o=i(73850);const n=e=>(0,o.M)(e.entity_id)},75278:function(e,t,i){"use strict";i.d(t,{e:()=>o});const o=(e,t)=>n(e.attributes,t),n=(e,t)=>!!(e.supported_features&t)},73729:function(e,t,i){"use strict";i.d(t,{i:()=>v});var o=i(61701),n=i(72621),a=(i(22152),i(71695),i(47021),i(74966)),r=i(51408),s=i(57243),l=i(50778),d=i(76525);i(23334);let c,h,u,p=e=>e;const m=["button","ha-list-item"],v=(e,t)=>{var i;return(0,s.dy)(c||(c=p` <div class="header_title"> <ha-icon-button .label="${0}" .path="${0}" dialogAction="close" class="header_button"></ha-icon-button> <span>${0}</span> </div> `),null!==(i=null==e?void 0:e.localize("ui.common.close"))&&void 0!==i?i:"Close","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",t)};(0,o.Z)([(0,l.Mo)("ha-dialog")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",key:d.gA,value:void 0},{kind:"method",key:"scrollToPos",value:function(e,t){var i;null===(i=this.contentElement)||void 0===i||i.scrollTo(e,t)}},{kind:"method",key:"renderHeading",value:function(){return(0,s.dy)(h||(h=p`<slot name="heading"> ${0} </slot>`),(0,n.Z)(i,"renderHeading",this,3)([]))}},{kind:"method",key:"firstUpdated",value:function(){var e;(0,n.Z)(i,"firstUpdated",this,3)([]),this.suppressDefaultPressSelector=[this.suppressDefaultPressSelector,m].join(", "),this._updateScrolledAttribute(),null===(e=this.contentElement)||void 0===e||e.addEventListener("scroll",this._onScroll,{passive:!0})}},{kind:"method",key:"disconnectedCallback",value:function(){(0,n.Z)(i,"disconnectedCallback",this,3)([]),this.contentElement.removeEventListener("scroll",this._onScroll)}},{kind:"field",key:"_onScroll",value(){return()=>{this._updateScrolledAttribute()}}},{kind:"method",key:"_updateScrolledAttribute",value:function(){this.contentElement&&this.toggleAttribute("scrolled",0!==this.contentElement.scrollTop)}},{kind:"field",static:!0,key:"styles",value(){return[r.W,(0,s.iv)(u||(u=p`:host([scrolled]) ::slotted(ha-dialog-header){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.mdc-dialog{--mdc-dialog-scroll-divider-color:var(
          --dialog-scroll-divider-color,
          var(--divider-color)
        );z-index:var(--dialog-z-index,8);-webkit-backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));--mdc-dialog-box-shadow:var(--dialog-box-shadow, none);--mdc-typography-headline6-font-weight:400;--mdc-typography-headline6-font-size:1.574rem}.mdc-dialog__actions{justify-content:var(--justify-action-buttons,flex-end);padding-bottom:max(env(safe-area-inset-bottom),24px)}.mdc-dialog__actions span:first-child{flex:var(--secondary-action-button-flex,unset)}.mdc-dialog__actions span:nth-child(2){flex:var(--primary-action-button-flex,unset)}.mdc-dialog__container{align-items:var(--vertical-align-dialog,center)}.mdc-dialog__title{padding:24px 24px 0 24px}.mdc-dialog__title:has(span){padding:12px 12px 0}.mdc-dialog__actions{padding:12px 24px 12px 24px}.mdc-dialog__title::before{content:unset}.mdc-dialog .mdc-dialog__content{position:var(--dialog-content-position,relative);padding:var(--dialog-content-padding,24px)}:host([hideactions]) .mdc-dialog .mdc-dialog__content{padding-bottom:max(var(--dialog-content-padding,24px),env(safe-area-inset-bottom))}.mdc-dialog .mdc-dialog__surface{position:var(--dialog-surface-position,relative);top:var(--dialog-surface-top);margin-top:var(--dialog-surface-margin-top);min-height:var(--mdc-dialog-min-height,auto);border-radius:var(--ha-dialog-border-radius,28px);-webkit-backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);background:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff))}:host([flexContent]) .mdc-dialog .mdc-dialog__content{display:flex;flex-direction:column}.header_title{display:flex;align-items:center;direction:var(--direction)}.header_title span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;padding-left:4px}.header_button{text-decoration:none;color:inherit;inset-inline-start:initial;inset-inline-end:-12px;direction:var(--direction)}.dialog-actions{inset-inline-start:initial!important;inset-inline-end:0px!important;direction:var(--direction)}`))]}}]}}),a.M)},53013:function(e,t,i){"use strict";var o=i(61701),n=i(72621),a=i(91179),r=(i(19083),i(71695),i(52805),i(9359),i(56475),i(70104),i(48136),i(40251),i(19134),i(61006),i(47021),i(57243)),s=i(50778),l=i(94886),d=i.n(l),c=i(36522),h=(i(72700),i(8038),i(71513),i(75656),i(50100),i(18084),i(75351));let u;const p=new(i(80262).L)(1e3),m={reType:(0,a.Z)(/((\[!(caution|important|note|tip|warning)\])(?:\s|\\n)?)/i,{input:1,type:3}),typeToHaAlert:{caution:"error",important:"info",note:"info",tip:"success",warning:"warning"}};(0,o.Z)([(0,s.Mo)("ha-markdown-element")],(function(e,t){class o extends t{constructor(...t){super(...t),e(this)}}return{F:o,d:[{kind:"field",decorators:[(0,s.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"allow-svg",type:Boolean})],key:"allowSvg",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"breaks",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,attribute:"lazy-images"})],key:"lazyImages",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"cache",value(){return!1}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,n.Z)(o,"disconnectedCallback",this,3)([]),this.cache){const e=this._computeCacheKey();p.set(e,this.innerHTML)}}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"update",value:function(e){(0,n.Z)(o,"update",this,3)([e]),void 0!==this.content&&this._render()}},{kind:"method",key:"willUpdate",value:function(e){if(!this.innerHTML&&this.cache){const e=this._computeCacheKey();p.has(e)&&(this.innerHTML=p.get(e),this._resize())}}},{kind:"method",key:"_computeCacheKey",value:function(){return d()({content:this.content,allowSvg:this.allowSvg,breaks:this.breaks})}},{kind:"method",key:"_render",value:async function(){this.innerHTML=await(async(e,t,o)=>(u||(u=(0,h.Ud)(new Worker(new URL(i.p+i.u("45845"),i.b)))),u.renderMarkdown(e,t,o)))(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg}),this._resize();const e=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);for(;e.nextNode();){const o=e.currentNode;if(o instanceof HTMLAnchorElement&&o.host!==document.location.host)o.target="_blank",o.rel="noreferrer noopener";else if(o instanceof HTMLImageElement)this.lazyImages&&(o.loading="lazy"),o.addEventListener("load",this._resize);else if(o instanceof HTMLQuoteElement){var t;const i=(null===(t=o.firstElementChild)||void 0===t||null===(t=t.firstChild)||void 0===t?void 0:t.textContent)&&m.reType.exec(o.firstElementChild.firstChild.textContent);if(i){const{type:t}=i.groups,n=document.createElement("ha-alert");n.alertType=m.typeToHaAlert[t.toLowerCase()],n.append(...Array.from(o.childNodes).map((e=>{const t=Array.from(e.childNodes);if(!this.breaks&&t.length){var o;const e=t[0];e.nodeType===Node.TEXT_NODE&&e.textContent===i.input&&null!==(o=e.textContent)&&void 0!==o&&o.includes("\n")&&(e.textContent=e.textContent.split("\n").slice(1).join("\n"))}return t})).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.textContent&&e.textContent!==i.input))),e.parentNode().replaceChild(n,o)}}else o instanceof HTMLElement&&["ha-alert","ha-qr-code","ha-icon","ha-svg-icon"].includes(o.localName)&&i(23265)(`./${o.localName}`)}}},{kind:"field",key:"_resize",value(){return()=>(0,c.B)(this,"content-resize")}}]}}),r.fl)},99254:function(e,t,i){"use strict";var o=i(61701),n=(i(71695),i(47021),i(57243)),a=i(50778);i(53013);let r,s,l=e=>e;(0,o.Z)([(0,a.Mo)("ha-markdown")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,a.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:"allow-svg",type:Boolean})],key:"allowSvg",value(){return!1}},{kind:"field",decorators:[(0,a.Cb)({type:Boolean})],key:"breaks",value(){return!1}},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,attribute:"lazy-images"})],key:"lazyImages",value(){return!1}},{kind:"field",decorators:[(0,a.Cb)({type:Boolean})],key:"cache",value(){return!1}},{kind:"method",key:"render",value:function(){return this.content?(0,n.dy)(r||(r=l`<ha-markdown-element .content="${0}" .allowSvg="${0}" .breaks="${0}" .lazyImages="${0}" .cache="${0}"></ha-markdown-element>`),this.content,this.allowSvg,this.breaks,this.lazyImages,this.cache):n.Ld}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(s||(s=l`:host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}ha-alert{display:block;margin:4px 0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:85%;padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:1.45;font-family:var(--code-font-family, monospace)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:1.5em;font-weight:700}hr{border-color:var(--divider-color);border-bottom:none;margin:16px 0}`))}}]}}),n.oi)},96530:function(e,t,i){"use strict";i.d(t,{X:()=>a,y:()=>n});var o=i(92636);const n=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],a=(0,o.z)(n)},33518:function(e,t,i){"use strict";i.a(e,(async function(e,o){try{i.r(t);var n=i(61701),a=i(72621),r=(i(19083),i(71695),i(47021),i(31622),i(57243)),s=i(50778),l=i(17170),d=(i(73729),i(29073),i(99254),i(43546)),c=i(28008),h=e([l]);l=(h.then?(await h)():h)[0];let u,p,m,v,f,k,_,g,b,y,w=e=>e,x=0;(0,n.Z)([(0,s.Mo)("ha-mfa-module-setup-flow")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_dialogClosedCallback",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_instance",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_loading",value(){return!1}},{kind:"field",decorators:[(0,s.SB)()],key:"_opened",value(){return!1}},{kind:"field",decorators:[(0,s.SB)()],key:"_stepData",value(){return{}}},{kind:"field",decorators:[(0,s.SB)()],key:"_step",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_errorMessage",value:void 0},{kind:"method",key:"showDialog",value:function({continueFlowId:e,mfaModuleId:t,dialogClosedCallback:i}){this._instance=x++,this._dialogClosedCallback=i,this._opened=!0;const o=e?this.hass.callWS({type:"auth/setup_mfa",flow_id:e}):this.hass.callWS({type:"auth/setup_mfa",mfa_module_id:t}),n=this._instance;o.then((e=>{n===this._instance&&this._processStep(e)}))}},{kind:"method",key:"closeDialog",value:function(){this._step&&this._flowDone(),this._opened=!1}},{kind:"method",key:"render",value:function(){var e,t;return this._opened?(0,r.dy)(u||(u=w` <ha-dialog open .heading="${0}" @closed="${0}"> <div> ${0} ${0} </div> ${0} ${0} </ha-dialog> `),this._computeStepTitle(),this.closeDialog,this._errorMessage?(0,r.dy)(p||(p=w`<div class="error">${0}</div>`),this._errorMessage):"",this._step?(0,r.dy)(v||(v=w`${0}`),"abort"===this._step.type?(0,r.dy)(f||(f=w` <ha-markdown allow-svg breaks .content="${0}"></ha-markdown>`),this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.abort.${this._step.reason}`)):"create_entry"===this._step.type?(0,r.dy)(k||(k=w`<p> ${0} </p>`),this.hass.localize("ui.panel.profile.mfa_setup.step_done",{step:this._step.title||this._step.handler})):"form"===this._step.type?(0,r.dy)(_||(_=w`<ha-markdown allow-svg breaks .content="${0}"></ha-markdown> <ha-form .hass="${0}" .data="${0}" .schema="${0}" .error="${0}" .computeLabel="${0}" .computeError="${0}" @value-changed="${0}"></ha-form>`),this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.step.${this._step.step_id}.description`,this._step.description_placeholders),this.hass,this._stepData,(0,d.oT)(this._step.data_schema),this._step.errors,this._computeLabel,this._computeError,this._stepDataChanged):""):(0,r.dy)(m||(m=w`<div class="init-spinner"> <ha-spinner></ha-spinner> </div>`)),["abort","create_entry"].includes((null===(e=this._step)||void 0===e?void 0:e.type)||"")?(0,r.dy)(g||(g=w`<mwc-button slot="primaryAction" @click="${0}">${0}</mwc-button>`),this.closeDialog,this.hass.localize("ui.panel.profile.mfa_setup.close")):"","form"===(null===(t=this._step)||void 0===t?void 0:t.type)?(0,r.dy)(b||(b=w`<mwc-button slot="primaryAction" .disabled="${0}" @click="${0}">${0}</mwc-button>`),this._loading,this._submitStep,this.hass.localize("ui.panel.profile.mfa_setup.submit")):""):r.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return[c.yu,(0,r.iv)(y||(y=w`.error{color:red}ha-dialog{max-width:500px}ha-markdown{--markdown-svg-background-color:white;--markdown-svg-color:black;display:block;margin:0 auto}ha-markdown a{color:var(--primary-color)}ha-markdown-element p{text-align:center}ha-markdown-element code{background-color:transparent}ha-markdown-element>:last-child{margin-bottom:revert}.init-spinner{padding:10px 100px 34px;text-align:center}.submit-spinner{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial}`))]}},{kind:"method",key:"firstUpdated",value:function(e){(0,a.Z)(i,"firstUpdated",this,3)([e]),this.hass.loadBackendTranslation("mfa_setup","auth"),this.addEventListener("keypress",(e=>{"Enter"===e.key&&this._submitStep()}))}},{kind:"method",key:"_stepDataChanged",value:function(e){this._stepData=e.detail.value}},{kind:"method",key:"_submitStep",value:function(){this._loading=!0,this._errorMessage=void 0;const e=this._instance;this.hass.callWS({type:"auth/setup_mfa",flow_id:this._step.flow_id,user_input:this._stepData}).then((t=>{e===this._instance&&(this._processStep(t),this._loading=!1)}),(e=>{this._errorMessage=e&&e.body&&e.body.message||"Unknown error occurred",this._loading=!1}))}},{kind:"method",key:"_processStep",value:function(e){e.errors||(e.errors={}),this._step=e,0===Object.keys(e.errors).length&&(this._stepData={})}},{kind:"method",key:"_flowDone",value:function(){const e=Boolean(this._step&&["create_entry","abort"].includes(this._step.type));this._dialogClosedCallback({flowFinished:e}),this._errorMessage=void 0,this._step=void 0,this._stepData={},this._dialogClosedCallback=void 0,this.closeDialog()}},{kind:"method",key:"_computeStepTitle",value:function(){var e,t,i;return"abort"===(null===(e=this._step)||void 0===e?void 0:e.type)?this.hass.localize("ui.panel.profile.mfa_setup.title_aborted"):"create_entry"===(null===(t=this._step)||void 0===t?void 0:t.type)?this.hass.localize("ui.panel.profile.mfa_setup.title_success"):"form"===(null===(i=this._step)||void 0===i?void 0:i.type)?this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.step.${this._step.step_id}.title`):""}},{kind:"field",key:"_computeLabel",value(){return e=>this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.step.${this._step.step_id}.data.${e.name}`)||e.name}},{kind:"field",key:"_computeError",value(){return e=>this.hass.localize(`component.auth.mfa_setup.${this._step.handler}.error.${e}`)||e}}]}}),r.oi);o()}catch(u){o(u)}}))},22152:function(){Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(e,t){return void 0!==t&&(t=!!t),this.hasAttribute(e)?!!t||(this.removeAttribute(e),!1):!1!==t&&(this.setAttribute(e,""),!0)})},80262:function(e,t,i){"use strict";i.d(t,{L:()=>o});i(71695),i(47021);class o{constructor(e){this._expiration=void 0,this._cache=new Map,this._expiration=e}get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t),this._expiration&&window.setTimeout((()=>this._cache.delete(e)),this._expiration)}has(e){return this._cache.has(e)}}},23265:function(e,t,i){var o={"./ha-icon":["65981","97406"],"./ha-icon-button-toggle":["79505","80175"],"./ha-svg-icon":["37583"],"./ha-icon-button-group":["45747","97792"],"./ha-svg-icon.ts":["37583"],"./ha-icon.ts":["65981","97406"],"./ha-icon-overflow-menu":["59959","91552","78456","56898","99287","14932"],"./ha-icon-next":["13928","99172"],"./ha-icon-picker":["21393","46379","66031","24199","78943","45760"],"./ha-qr-code.ts":["50634","53750","70472"],"./ha-icon-button-arrow-prev.ts":["54202","41069"],"./ha-icon-button-arrow-prev":["54202","41069"],"./ha-icon-overflow-menu.ts":["59959","91552","78456","56898","99287","14932"],"./ha-alert":["99426","4809"],"./ha-icon-button-next":["4635","51577"],"./ha-icon-button":["23334"],"./ha-icon-button-next.ts":["4635","51577"],"./ha-icon-picker.ts":["21393","46379","66031","24199","78943","45760"],"./ha-icon-button-group.ts":["45747","97792"],"./ha-icon-button-toggle.ts":["79505","80175"],"./ha-icon-button-arrow-next.ts":["54237","21559"],"./ha-icon-button-prev.ts":["5828","43537"],"./ha-icon-prev":["95499","87557"],"./ha-icon-prev.ts":["95499","87557"],"./ha-icon-button.ts":["23334"],"./ha-alert.ts":["99426","4809"],"./ha-icon-button-prev":["5828","43537"],"./ha-qr-code":["50634","53750","70472"],"./ha-icon-next.ts":["13928","99172"],"./ha-icon-button-arrow-next":["54237","21559"]};function n(e){if(!i.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],n=t[0];return Promise.all(t.slice(1).map(i.e)).then((function(){return i(n)}))}n.keys=()=>Object.keys(o),n.id=23265,e.exports=n}}]);
//# sourceMappingURL=24531.34def1471e725b05.js.map