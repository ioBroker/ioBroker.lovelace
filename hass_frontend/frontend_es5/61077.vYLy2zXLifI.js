"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[61077],{55070:function(e,t,n){n.d(t,{Eu:function(){return i},hZ:function(){return a}});var r=["#44739e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067","#f43600","#4ba93b","#5779bb","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function i(e){return r[e%r.length]}function a(e,t){return t.getPropertyValue("--graph-color-".concat(e+1))||i(e)}},43793:function(e,t,n){n.d(t,{x:function(){return r}});var r=function(e,t){return e.substring(0,t.length)===t}},39258:function(e,t,n){n.d(t,{U:function(){return v}});n(51358),n(96043),n(46798),n(5239),n(98490);var r=n(55070),i=n(15838),a=n(89525),o=n(58831),c=n(6229),s=n(56007),d=n(22134),l={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var h=0,u=new Map;function v(e,t,n){return function(e,t,n){var r;if(!n||e===s.nZ)return(0,d.g)("--history-unavailable-color",t);if(e===s.lz)return(0,d.g)("--history-unknown-color",t);var h=(0,c.tD)(n,e);if(h){var u=(0,d.g)(h,t);if(u){var v=(0,o.M)(n.entity_id),f=null===(r=l[v])||void 0===r?void 0:r[e];return f?(0,i.uO)((0,a.C)((0,i.Rw)((0,i.wK)(u)),f)):u}}}(e,t,n)||function(e,t){if(u.has(e))return u.get(e);var n=(0,r.hZ)(h,t);return h++,u.set(e,n),n}(e,t)}},99282:function(e,t,n){var r=n(33368),i=n(71650),a=n(82390),o=n(69205),c=n(70906),s=n(91808),d=(n(97393),n(95260)),l=n(30418),h=n(52039);(0,s.Z)([(0,d.Mo)("ha-icon-next")],(function(e,t){var n=function(t){(0,o.Z)(s,t);var n=(0,c.Z)(s);function s(){var t;(0,i.Z)(this,s);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=n.call.apply(n,[this].concat(o)),e((0,a.Z)(t)),t}return(0,r.Z)(s)}(t);return{F:n,d:[{kind:"field",decorators:[(0,d.Cb)()],key:"path",value:function(){return"rtl"===l.E.document.dir?"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z":"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}}]}}),h.C)},42952:function(e,t,n){var r=n(33368),i=n(71650),a=n(82390),o=n(69205),c=n(70906),s=n(91808),d=n(34541),l=n(47838),h=(n(97393),n(68144)),u=n(95260),v=n(80596),f=n(21780);(0,s.Z)([(0,u.Mo)("ha-relative-time")],(function(e,t){var n=function(t){(0,o.Z)(s,t);var n=(0,c.Z)(s);function s(){var t;(0,i.Z)(this,s);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=n.call.apply(n,[this].concat(o)),e((0,a.Z)(t)),t}return(0,r.Z)(s)}(t);return{F:n,d:[{kind:"field",decorators:[(0,u.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,u.Cb)({attribute:!1})],key:"datetime",value:void 0},{kind:"field",decorators:[(0,u.Cb)({type:Boolean})],key:"capitalize",value:function(){return!1}},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,d.Z)((0,l.Z)(n.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){(0,d.Z)((0,l.Z)(n.prototype),"connectedCallback",this).call(this),this.datetime&&this._startInterval()}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"firstUpdated",value:function(e){(0,d.Z)((0,l.Z)(n.prototype),"firstUpdated",this).call(this,e),this._updateRelative()}},{kind:"method",key:"update",value:function(e){(0,d.Z)((0,l.Z)(n.prototype),"update",this).call(this,e),this._updateRelative()}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(){var e=this;this._clearInterval(),this._interval=window.setInterval((function(){return e._updateRelative()}),6e4)}},{kind:"method",key:"_updateRelative",value:function(){if(this.datetime){var e=(0,v.G)(new Date(this.datetime),this.hass.locale);this.innerHTML=this.capitalize?(0,f.f)(e):e}else this.innerHTML=this.hass.localize("ui.components.relative_time.never")}}]}}),h.fl)},71955:function(e,t,n){var r,i=n(88962),a=n(33368),o=n(71650),c=n(82390),s=n(69205),d=n(70906),l=n(91808),h=(n(97393),n(62544),n(77426)),u=n(68144),v=n(95260);n(33753),n(10983),(0,l.Z)([(0,v.Mo)("ha-trace-blueprint-config")],(function(e,t){var n=function(t){(0,s.Z)(r,t);var n=(0,d.Z)(r);function r(){var t;(0,o.Z)(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a)),e((0,c.Z)(t)),t}return(0,a.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"method",key:"render",value:function(){return(0,u.dy)(r||(r=(0,i.Z)([' <ha-code-editor .value="','" readOnly="readOnly" dir="ltr"></ha-code-editor> '])),(0,h.dump)(this.trace.blueprint_inputs||"").trimRight())}}]}}),u.oi)},13126:function(e,t,n){var r,i,a=n(88962),o=n(33368),c=n(71650),s=n(82390),d=n(69205),l=n(70906),h=n(91808),u=(n(97393),n(62544),n(77426)),v=n(68144),f=n(95260);n(33753),n(10983),(0,h.Z)([(0,f.Mo)("ha-trace-config")],(function(e,t){var n=function(t){(0,d.Z)(r,t);var n=(0,l.Z)(r);function r(){var t;(0,c.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,s.Z)(t)),t}return(0,o.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"method",key:"render",value:function(){return(0,v.dy)(r||(r=(0,a.Z)([' <ha-code-editor .value="','" readOnly="readOnly" dir="ltr"></ha-code-editor> '])),(0,u.dump)(this.trace.config).trimRight())}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,v.iv)(i||(i=(0,a.Z)([""])))]}}]}}),v.oi)},89497:function(e,t,n){var r,i,a,o=n(88962),c=n(33368),s=n(71650),d=n(82390),l=n(69205),h=n(70906),u=n(91808),v=(n(97393),n(68144)),f=n(95260);n(5588),n(44198),(0,u.Z)([(0,f.Mo)("ha-trace-logbook")],(function(e,t){var n=function(t){(0,l.Z)(r,t);var n=(0,h.Z)(r);function r(){var t;(0,s.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,d.Z)(t)),t}return(0,c.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"method",key:"render",value:function(){return this.logbookEntries.length?(0,v.dy)(r||(r=(0,o.Z)([' <ha-logbook-renderer relative-time .hass="','" .entries="','" .narrow="','"></ha-logbook-renderer> <hat-logbook-note .domain="','"></hat-logbook-note> '])),this.hass,this.logbookEntries,this.narrow,this.trace.domain):(0,v.dy)(i||(i=(0,o.Z)(['<div class="padded-box"> No Logbook entries found for this step. </div>'])))}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,v.iv)(a||(a=(0,o.Z)([".padded-box{padding:16px}"])))]}}]}}),v.oi)},78940:function(e,t,n){var r,i,a,o,c,s,d,l,h,u,v,f,g,p,k,y,b,m,_=n(40039),Z=n(23370),x=n(68990),C=n(88962),w=n(33368),L=n(71650),A=n(82390),V=n(69205),M=n(70906),H=n(91808),E=(n(97393),n(46349),n(91989),n(17692),n(65974),n(36513),n(70320),n(62544),n(56308),n(86439),n(77426)),I=n(68144),N=n(95260),P=n(83448),S=n(44583),T=(n(33753),n(10983),n(5588),n(97389)),R=(n(44198),n(19476)),z=["path","timestamp","result","error","changed_variables"];(0,H.Z)([(0,N.Mo)("ha-trace-path-details")],(function(e,t){var n=function(t){(0,V.Z)(r,t);var n=(0,M.Z)(r);function r(){var t;(0,L.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,A.Z)(t)),t}return(0,w.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,N.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,N.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,N.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,N.Cb)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,N.Cb)({attribute:!1})],key:"selected",value:void 0},{kind:"field",decorators:[(0,N.Cb)()],key:"renderedNodes",value:function(){return{}}},{kind:"field",decorators:[(0,N.Cb)()],key:"trackedNodes",value:void 0},{kind:"field",decorators:[(0,N.SB)()],key:"_view",value:function(){return"config"}},{kind:"method",key:"render",value:function(){var e=this;return(0,I.dy)(r||(r=(0,C.Z)([' <div class="padded-box trace-info"> ',' </div> <div class="tabs top"> '," </div> "," "])),this._renderSelectedTraceInfo(),[["config","Step Config"],["changed_variables","Changed Variables"],["logbook","Related logbook entries"]].map((function(t){var n=(0,x.Z)(t,2),r=n[0],a=n[1];return(0,I.dy)(i||(i=(0,C.Z)([' <button .view="','" class="','" @click="','"> '," </button> "])),r,(0,P.$)({active:e._view===r}),e._showTab,a)})),"config"===this._view?this._renderSelectedConfig():"changed_variables"===this._view?this._renderChangedVars():this._renderLogbook())}},{kind:"method",key:"_renderSelectedTraceInfo",value:function(){var e,t=this,n=this.trace.trace;if(null===(e=this.selected)||void 0===e||!e.path)return"Select a node on the left for more information.";var r=this.selected.path.split("/");if("default"===r[r.length-1]){var i,u=n[r.slice(0,r.length-1).join("/")];if(u&&"default"===(null===(i=u[0])||void 0===i||null===(i=i.result)||void 0===i?void 0:i.choice))return"The default action was executed because no options matched."}if(!(this.selected.path in n))return"This node was not executed and so no further trace information is available.";for(var v=[],f=!1,g=function(){var e=k[p];if(f){if(e in t.renderedNodes)return 0}else{if(e!==t.selected.path)return 1;f=!0}var r=n[e];v.push(r.map((function(n,i){var u=n,v=(u.path,u.timestamp),f=u.result,g=u.error,p=(u.changed_variables,(0,Z.Z)(u,z));return!1===(null==f?void 0:f.enabled)?(0,I.dy)(a||(a=(0,C.Z)(["This node was disabled and skipped during execution so no further trace information is available."]))):(0,I.dy)(o||(o=(0,C.Z)([" "," "," Executed: ","<br> "," "," "])),e===t.selected.path?"":(0,I.dy)(c||(c=(0,C.Z)(["<h2>","</h2>"])),e.substr(t.selected.path.length+1)),1===r.length?"":(0,I.dy)(s||(s=(0,C.Z)(["<h3>Iteration ","</h3>"])),i+1),(0,S.E8)(new Date(v),t.hass.locale,t.hass.config),f?(0,I.dy)(d||(d=(0,C.Z)(["Result: <pre>","</pre>"])),(0,E.dump)(f)):g?(0,I.dy)(l||(l=(0,C.Z)(['<div class="error">Error: ',"</div>"])),g):"",0===Object.keys(p).length?"":(0,I.dy)(h||(h=(0,C.Z)(["<pre>","</pre>"])),(0,E.dump)(p)))})))},p=0,k=Object.keys(this.trace.trace);p<k.length&&0!==g();p++);return v}},{kind:"method",key:"_renderSelectedConfig",value:function(){var e;if(null===(e=this.selected)||void 0===e||!e.path)return"";var t=(0,T.nV)(this.trace.config,this.selected.path);return t?(0,I.dy)(u||(u=(0,C.Z)(['<ha-code-editor .value="','" readOnly="readOnly" dir="ltr"></ha-code-editor>'])),(0,E.dump)(t).trimRight()):"Unable to find config"}},{kind:"method",key:"_renderChangedVars",value:function(){var e=this.trace.trace[this.selected.path];return(0,I.dy)(v||(v=(0,C.Z)([' <div class="padded-box"> '," </div> "])),e.map((function(e,t){return(0,I.dy)(f||(f=(0,C.Z)([" "," "," "])),t>0?(0,I.dy)(g||(g=(0,C.Z)(["<p>Iteration ","</p>"])),t+1):"",0===Object.keys(e.changed_variables||{}).length?"No variables changed":(0,I.dy)(p||(p=(0,C.Z)(["<pre>","</pre>"])),(0,E.dump)(e.changed_variables).trimRight()))})))}},{kind:"method",key:"_renderLogbook",value:function(){var e,t=this.trace.trace,n=t[this.selected.path],r=Object.keys(this.trackedNodes),i=r.indexOf(this.selected.path);if(-1===i)return(0,I.dy)(k||(k=(0,C.Z)(['<div class="padded-box">Node not tracked.</div>'])));if(i===r.length-1){var a=new Date(n[0].timestamp),o=this.logbookEntries.findIndex((function(e){return new Date(1e3*e.when)>=a}));e=-1===o?[]:this.logbookEntries.slice(o)}else{var c=t[r[i+1]],s=new Date(n[0].timestamp),d=new Date(c[0].timestamp);e=[];var l,h=(0,_.Z)(this.logbookEntries||[]);try{for(h.s();!(l=h.n()).done;){var u=l.value,v=new Date(1e3*u.when);if(v>=s){if(!(v<d))break;e.push(u)}}}catch(f){h.e(f)}finally{h.f()}}return e.length?(0,I.dy)(y||(y=(0,C.Z)([' <ha-logbook-renderer relative-time .hass="','" .entries="','" .narrow="','"></ha-logbook-renderer> <hat-logbook-note .domain="','"></hat-logbook-note> '])),this.hass,e,this.narrow,this.trace.domain):(0,I.dy)(b||(b=(0,C.Z)(['<div class="padded-box"> No Logbook entries found for this step. </div>'])))}},{kind:"method",key:"_showTab",value:function(e){this._view=e.target.view}},{kind:"get",static:!0,key:"styles",value:function(){return[R.b,(0,I.iv)(m||(m=(0,C.Z)([".padded-box{margin:16px}:host(:not([narrow])) .trace-info{min-height:250px}pre{margin:0}.error{color:var(--error-color)}"])))]}}]}}),I.oi)},41035:function(e,t,n){var r,i,a,o,c,s,d,l,h,u,v,f,g,p,k,y,b,m,_=n(88962),Z=n(33368),x=n(71650),C=n(82390),w=n(69205),L=n(70906),A=n(91808),V=(n(97393),n(68144)),M=n(95260),H=(n(5588),n(34541)),E=n(47838),I=(n(51358),n(46798),n(98490),n(36513),n(22859),n(65974),n(9849),n(50289),n(94167),n(63789),n(24074),n(5110),n(94738),n(98214),n(30153)),N=n(44583),P=n(80596),S=n(47181),T=n(70518),R=n(74186),z=n(44547),B=n(31991),D=n(97389),F=n(11654),O=(n(52039),(0,A.Z)([(0,M.Mo)("ha-timeline")],(function(e,t){var n=function(t){(0,w.Z)(r,t);var n=(0,L.Z)(r);function r(){var t;(0,x.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,C.Z)(t)),t}return(0,Z.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,M.Cb)({type:Boolean,reflect:!0})],key:"label",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,reflect:!0})],key:"raised",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({reflect:!0,type:Boolean})],key:"notEnabled",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean})],key:"lastItem",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:String})],key:"icon",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"moreItems",value:void 0},{kind:"field",decorators:[(0,M.SB)()],key:"_showMore",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,V.dy)(r||(r=(0,_.Z)([' <div class="timeline-start"> '," ",' </div> <div class="content"> <slot></slot> '," </div> "])),this.label?"":(0,V.dy)(i||(i=(0,_.Z)([' <ha-svg-icon .path="','"></ha-svg-icon> '])),this.icon||"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),this.lastItem?"":(0,V.dy)(a||(a=(0,_.Z)(['<div class="line"></div>']))),this.moreItems?(0,V.dy)(o||(o=(0,_.Z)([" <div> "," </div> "])),this._showMore||1===this.moreItems.length?this.moreItems:(0,V.dy)(c||(c=(0,_.Z)([' <button class="link" @click="','"> Show '," more items </button> "])),this._handleShowMore,this.moreItems.length)):"")}},{kind:"method",key:"_handleShowMore",value:function(){this._showMore=!0}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,V.iv)(s||(s=(0,_.Z)([":host{display:flex;flex-direction:row}:host(:not([lastItem])){min-height:50px}:host([label]){margin-top:-8px;font-style:italic;color:var(--timeline-label-color,var(--secondary-text-color))}.timeline-start{display:flex;flex-direction:column;align-items:center;margin-right:8px;width:24px}:host([notEnabled]) ha-svg-icon{opacity:.5}ha-svg-icon{color:var(--timeline-ball-color,var(--timeline-color,var(--secondary-text-color)));border-radius:50%}:host([raised]) ha-svg-icon{transform:scale(1.3)}.line{flex:1;width:2px;background-color:var(--timeline-line-color,var(--timeline-color,var(--secondary-text-color)));margin:4px 0}.content{margin-top:2px}:host(:not([lastItem])) .content{padding-bottom:16px}:host([label]) .content{margin-top:0;padding-top:6px}"]))),F.k1]}}]}}),V.oi),"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),j="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",W=function(e,t){return Math.abs(t.getTime()-e.getTime())>1e3},q=function(){function e(t,n,r){(0,x.Z)(this,e),this.hass=t,this.entries=n,this.lastReportedTime=void 0,this.lastReportedTime=new Date(r.timestamp.start)}return(0,Z.Z)(e,[{key:"setLastReportedTime",value:function(e){this.lastReportedTime=e}},{key:"renderTime",value:function(e,t){this.entries.push((0,V.dy)(d||(d=(0,_.Z)([" <ha-timeline label> "," later </ha-timeline> "])),(0,P.G)(e,this.hass.locale,t,!1))),this.lastReportedTime=t}},{key:"maybeRenderTime",value:function(e){return W(e,this.lastReportedTime)?(this.renderTime(this.lastReportedTime,e),!0):(this.lastReportedTime=e,!1)}}]),e}(),U=function(){function e(t,n,r){(0,x.Z)(this,e),this.entries=t,this.timeTracker=n,this.logbookEntries=r,this.curIndex=void 0,this.pendingItems=[],this.curIndex=r.length>0&&"automation"===r[0].domain?1:0}return(0,Z.Z)(e,[{key:"curItem",get:function(){return this.logbookEntries[this.curIndex]}},{key:"hasNext",get:function(){return this.curIndex<this.logbookEntries.length}},{key:"maybeRenderItem",value:function(){var e=this.curItem;this.curIndex++;var t=new Date(1e3*e.when);if(0!==this.pendingItems.length){var n=this.pendingItems[this.pendingItems.length-1][0];W(n,t)&&(this._renderLogbookEntries(),this.timeTracker.renderTime(n,t)),this.pendingItems.push([t,e])}else this.pendingItems.push([t,e])}},{key:"flush",value:function(){this.pendingItems.length>0&&this._renderLogbookEntries()}},{key:"_renderLogbookEntries",value:function(){this.timeTracker.maybeRenderTime(this.pendingItems[0][0]);var e,t,n=[];for(e=0;e<Math.min(this.pendingItems.length,2);e++)n.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));if(e<this.pendingItems.length)for(t=[];e<this.pendingItems.length;e++)t.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));this.entries.push((0,V.dy)(l||(l=(0,_.Z)([' <ha-timeline .icon="','" .moreItems="','"> '," </ha-timeline> "])),"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",t,n)),this.timeTracker.setLastReportedTime(this.pendingItems[this.pendingItems.length-1][0]),this.pendingItems=[]}},{key:"_renderLogbookEntryHelper",value:function(e){return(0,V.dy)(h||(h=(0,_.Z)([""," (",") ","<br>"])),e.name,e.entity_id,e.message||"turned ".concat(e.state))}}]),e}(),Y=function(){function e(t,n,r,i,a,o){(0,x.Z)(this,e),this.hass=t,this.entityReg=n,this.entries=r,this.trace=i,this.logbookRenderer=a,this.timeTracker=o,this.curIndex=0,this.keys=void 0,this.keys=Object.keys(i.trace)}return(0,Z.Z)(e,[{key:"curItem",get:function(){return this._getItem(this.curIndex)}},{key:"hasNext",get:function(){return this.curIndex<this.keys.length}},{key:"renderItem",value:function(){this.curIndex=this._renderItem(this.curIndex)}},{key:"_getItem",value:function(e){return this.trace.trace[this.keys[e]]}},{key:"_renderItem",value:function(e,t,n){var r,i=this,a=this._getItem(e);return n?(a.forEach((function(n){r=i._renderIteration(e,n,t)})),r):this._renderIteration(e,a[0],t)}},{key:"_renderIteration",value:function(e,t,n){if((0,D.Zm)(t.path))return this._handleTrigger(e,t);for(var r=new Date(t.timestamp);this.logbookRenderer.hasNext&&new Date(1e3*this.logbookRenderer.curItem.when)<r;)this.logbookRenderer.maybeRenderItem();this.logbookRenderer.flush(),this.timeTracker.maybeRenderTime(r);var i,a=t.path;try{i=(0,D.nV)(this.trace.config,a)}catch(s){return this._renderEntry(a,"Unable to extract path ".concat(a,". Download trace and report as bug")),e+1}var o=a.split("/");if(!(2===o.length)&&!n)return this._renderEntry(a,a.replace(/\//g," ")),e+1;if(n||(n=(0,z.Pw)(i)),"choose"===n)return this._handleChoose(e);if("repeat"===n)return this._handleRepeat(e);if("if"===n)return this._handleIf(e);if("parallel"===n)return this._handleParallel(e);this._renderEntry(a,(0,B.Q)(this.hass,this.entityReg,i,n),void 0,!1===i.enabled);for(var c=e+1;c<this.keys.length&&this.keys[c].split("/").length!==o.length;c++);return c}},{key:"_handleTrigger",value:function(e,t){return this._renderEntry(t.path,"".concat(t.changed_variables.trigger.alias?"".concat(t.changed_variables.trigger.alias," triggered"):"Triggered"," ").concat("trigger"===t.path?"manually":"by the ".concat(this.trace.trigger)," at\n    ").concat((0,N.E8)(new Date(t.timestamp),this.hass.locale,this.hass.config)),j),e+1}},{key:"_handleChoose",value:function(e){var t,n,r=this.keys[e],i=r.split("/").length,a=this._getItem(e)[0],o="default"===(null===(t=a.result)||void 0===t?void 0:t.choice),c=this._getDataFromPath(this.keys[e]),s=!1===c.enabled,d=c.alias||"Choose";if(o)this._renderEntry(r,"".concat(d,": Default action executed"),void 0,s);else if(a.result){var l="default"!==a.result.choice?a.result.choice+1:void 0,h=this._getDataFromPath("".concat(this.keys[e],"/choose/").concat(a.result.choice)),u=h?"".concat(h.alias||"Option ".concat(l)," executed"):"Error: ".concat(a.error);this._renderEntry(r,"".concat(d,": ").concat(u),void 0,s)}else this._renderEntry(r,"".concat(d,": No action taken"),void 0,s);for(n=e+1;n<this.keys.length;n++){var v=this.keys[n].split("/");if(v.length<=i)return n;if(o&&"default"===v[i+1]||!o&&"sequence"===v[i+3])break}for(;n<this.keys.length;){var f=this.keys[n];if(f.split("/").length<=i)return n;n=this._renderItem(n,(0,z.Pw)(this._getDataFromPath(f)))}return n}},{key:"_handleRepeat",value:function(e){var t,n=this.keys[e],r=n.split("/").length,i=this._getDataFromPath(this.keys[e]),a=!1===i.enabled,o=i.alias||(0,B.Q)(this.hass,this.entityReg,i);for(this._renderEntry(n,o,void 0,a),t=e+1;t<this.keys.length;t++){var c=this.keys[t];if(c.split("/").length<=r)return t;t=this._renderItem(t,(0,z.Pw)(this._getDataFromPath(c)),!0)}return t}},{key:"_handleIf",value:function(e){var t,n,r=this.keys[e],i=r.split("/").length,a=this._getItem(e)[0],o=this._getDataFromPath(this.keys[e]),c=!1===o.enabled,s=o.alias||"If";if(null!==(t=a.result)&&void 0!==t&&t.choice){var d=this._getDataFromPath("".concat(this.keys[e],"/").concat(a.result.choice,"/")),l=d?"".concat(d.alias||"".concat(a.result.choice," action executed")):"Error: ".concat(a.error);this._renderEntry(r,"".concat(s,": ").concat(l),void 0,c)}else this._renderEntry(r,"".concat(s,": No action taken"),void 0,c);for(n=e+1;n<this.keys.length;n++){var h=this.keys[n],u=this.keys[n].split("/");if(u.length<=i)return n;"condition"===u[i+1]||u.length<i+2||(n=this._renderItem(n,(0,z.Pw)(this._getDataFromPath(h))))}return n}},{key:"_handleParallel",value:function(e){var t,n=this.keys[e],r=n.split("/").length,i=this._getDataFromPath(this.keys[e]),a=!1===i.enabled,o=i.alias||"Execute in parallel";for(this._renderEntry(n,o,void 0,a),t=e+1;t<this.keys.length;t++){var c=this.keys[t];if(c.split("/").length<=r)return t;t=this._renderItem(t,(0,z.Pw)(this._getDataFromPath(c)))}return t}},{key:"_renderEntry",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.entries.push((0,V.dy)(u||(u=(0,_.Z)([' <ha-timeline .icon="','" data-path="','" .notEnabled="','"> ',""," </ha-timeline> "])),n,e,r,t,r?(0,V.dy)(v||(v=(0,_.Z)(['<span class="disabled"> (disabled)</span>']))):""))}},{key:"_getDataFromPath",value:function(e){return(0,D.nV)(this.trace.config,e)}}]),e}();(0,A.Z)([(0,M.Mo)("hat-trace-timeline")],(function(e,t){var n=function(t){(0,w.Z)(r,t);var n=(0,L.Z)(r);function r(){var t;(0,x.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,C.Z)(t)),t}return(0,Z.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"selectedPath",value:void 0},{kind:"field",decorators:[(0,M.Cb)({type:Boolean})],key:"allowPick",value:function(){return!1}},{kind:"field",decorators:[(0,M.SB)()],key:"_entityReg",value:function(){return[]}},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,R.LM)(this.hass.connection,(function(t){e._entityReg=t}))]}},{kind:"method",key:"render",value:function(){var e=this;if(!this.trace)return V.Ld;for(var t=[],n=new q(this.hass,t,this.trace),r=new U(t,n,this.logbookEntries||[]),i=new Y(this.hass,this._entityReg,t,this.trace,r,n);i.hasNext;)i.renderItem();for(;r.hasNext;)r.maybeRenderItem();r.flush();var a,o=function(){return(0,N.E8)(new Date(e.trace.timestamp.finish),e.hass.locale,e.hass.config)},c=function(){return"(runtime:\n      ".concat(((new Date(e.trace.timestamp.finish).getTime()-new Date(e.trace.timestamp.start).getTime())/1e3).toFixed(2),"\n      seconds)")};if("running"===this.trace.state)a={description:"Still running",icon:"M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"};else if("debugged"===this.trace.state)a={description:"Debugged",icon:"M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M16.82,15.19L12.71,11.08C13.12,10.04 12.89,8.82 12.03,7.97C11.13,7.06 9.78,6.88 8.69,7.38L10.63,9.32L9.28,10.68L7.29,8.73C6.75,9.82 7,11.17 7.88,12.08C8.74,12.94 9.96,13.16 11,12.76L15.11,16.86C15.29,17.05 15.56,17.05 15.74,16.86L16.78,15.83C17,15.65 17,15.33 16.82,15.19Z"};else if("finished"===this.trace.script_execution)a={description:"Finished at ".concat(o()," ").concat(c()),icon:j};else if("aborted"===this.trace.script_execution)a={description:"Aborted at ".concat(o()," ").concat(c()),icon:O};else if("cancelled"===this.trace.script_execution)a={description:"Cancelled at ".concat(o()," ").concat(c()),icon:O};else{var s,d,l=!1;switch(this.trace.script_execution){case"failed_conditions":s="a condition failed";break;case"failed_single":s="only a single execution is allowed";break;case"failed_max_runs":s="maximum number of parallel runs reached";break;case"error":s="an error was encountered",l=!0,d=(0,V.dy)(f||(f=(0,_.Z)(["<br><br>",""])),this.trace.error);break;default:s='of unknown reason "'.concat(this.trace.script_execution,'"'),l=!0}a={description:(0,V.dy)(g||(g=(0,_.Z)(["Stopped because "," at "," ","",""])),s,o(),c(),d||""),icon:O,className:l?"error":void 0}}return t.push((0,V.dy)(p||(p=(0,_.Z)([' <ha-timeline lastItem .icon="','" class="','"> '," </ha-timeline> "])),a.icon,(0,I.o)(a.className),a.description)),(0,V.dy)(k||(k=(0,_.Z)(["",""])),t)}},{kind:"method",key:"updated",value:function(e){var t=this;if((0,H.Z)((0,E.Z)(n.prototype),"updated",this).call(this,e),this.allowPick&&e.has("trace")&&this.trace&&this.selectedPath&&!(this.selectedPath in this.trace.trace)){var r=this.shadowRoot.querySelector("ha-timeline[data-path]");r&&((0,S.B)(this,"value-changed",{value:r.dataset.path}),this.selectedPath=r.dataset.path)}(e.has("trace")||e.has("selectedPath"))&&this.shadowRoot.querySelectorAll("ha-timeline[data-path]").forEach((function(e){if((0,T.X)(e,"selected",t.selectedPath===e.dataset.path),t.allowPick&&0!==e.tabIndex){e.tabIndex=0;var n=function(){t.selectedPath=e.dataset.path,(0,S.B)(t,"value-changed",{value:e.dataset.path})};e.addEventListener("click",n),e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||n()})),e.addEventListener("mouseover",(function(){e.raised=!0})),e.addEventListener("mouseout",(function(){e.raised=!1}))}}))}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,V.iv)(y||(y=(0,_.Z)(["ha-timeline[lastItem].condition{--timeline-ball-color:var(--error-color)}ha-timeline[data-path]{cursor:pointer}ha-timeline[selected]{--timeline-ball-color:var(--primary-color)}ha-timeline:focus{outline:0;--timeline-ball-color:var(--accent-color)}.error{--timeline-ball-color:var(--error-color);color:var(--error-color)}"])))]}}]}}),V.oi),(0,A.Z)([(0,M.Mo)("ha-trace-timeline")],(function(e,t){var n=function(t){(0,w.Z)(r,t);var n=(0,L.Z)(r);function r(){var t;(0,x.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,C.Z)(t)),t}return(0,Z.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"selected",value:void 0},{kind:"method",key:"render",value:function(){return(0,V.dy)(b||(b=(0,_.Z)([' <hat-trace-timeline .hass="','" .trace="','" .logbookEntries="','" .selectedPath="','" allowPick> </hat-trace-timeline> <hat-logbook-note .domain="','"></hat-logbook-note> '])),this.hass,this.trace,this.logbookEntries,this.selected.path,this.trace.domain)}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,V.iv)(m||(m=(0,_.Z)([":host{display:block;padding:16px}"])))]}}]}}),V.oi)},5588:function(e,t,n){var r,i,a=n(88962),o=n(33368),c=n(71650),s=n(82390),d=n(69205),l=n(70906),h=n(91808),u=(n(97393),n(68144)),v=n(95260);(0,h.Z)([(0,v.Mo)("hat-logbook-note")],(function(e,t){var n=function(t){(0,d.Z)(r,t);var n=(0,l.Z)(r);function r(){var t;(0,c.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,s.Z)(t)),t}return(0,o.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.Cb)()],key:"domain",value:function(){return"automation"}},{kind:"method",key:"render",value:function(){return(0,u.dy)(r||(r=(0,a.Z)([" Not all shown logbook entries might be related to this ",". "])),this.domain)}},{kind:"field",static:!0,key:"styles",value:function(){return(0,u.iv)(i||(i=(0,a.Z)([":host{display:block;text-align:center;font-style:italic;padding:16px;margin-top:8px}"])))}}]}}),u.oi)},30946:function(e,t,n){var r,i,a,o,c,s,d,l,h,u,v,f,g,p,k,y,b,m,_,Z,x,C,w,L,A,V,M,H,E,I,N,P,S,T,R,z,B,D,F,O=n(40039),j=n(88962),W=n(33368),q=n(71650),U=n(82390),Y=n(69205),$=n(70906),Q=n(91808),G=n(34541),X=n(47838),K=(n(97393),n(85472),n(46798),n(9849),n(90126),n(65974),n(46349),n(70320),n(40271),n(60163),n(7179),n(37313),n(56308),n(68144)),J=n(95260),ee=n(47181),te=n(76680),ne=(n(10983),n(50289),n(94167),n(36513),n(83448)),re=10,ie=30;(0,Q.Z)([(0,J.Mo)("hat-graph-branch")],(function(e,t){var n=function(t){(0,Y.Z)(r,t);var n=(0,$.Z)(r);function r(){var t;(0,q.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,U.Z)(t)),t}return(0,W.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,J.Cb)({reflect:!0,type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[(0,J.Cb)({type:Boolean})],key:"selected",value:void 0},{kind:"field",decorators:[(0,J.Cb)({type:Boolean})],key:"start",value:function(){return!1}},{kind:"field",decorators:[(0,J.Cb)({type:Boolean})],key:"short",value:function(){return!1}},{kind:"field",decorators:[(0,J.SB)()],key:"_branches",value:function(){return[]}},{kind:"field",key:"_totalWidth",value:function(){return 0}},{kind:"field",key:"_maxHeight",value:function(){return 0}},{kind:"method",key:"_updateBranches",value:function(e){var t=0,n=[],r=[];e.target.assignedElements().forEach((function(e){var i=e.clientWidth,a=e.clientHeight;r.push({x:i/2+t,height:a,start:e.hasAttribute("graphStart"),end:e.hasAttribute("graphEnd"),track:e.hasAttribute("track")}),t+=i,n.push(a)})),this._totalWidth=t,this._maxHeight=Math.max.apply(Math,n),this._branches=r.sort((function(e,t){return e.track&&!t.track?1:e.track&&t.track?0:-1}))}},{kind:"method",key:"render",value:function(){var e=this;return(0,K.dy)(r||(r=(0,j.Z)([' <slot name="head"></slot> ',' <div id="branches"> <svg id="lines" width="','" height="','"> ',' </svg> <slot @slotchange="','"></slot> </div> '," "])),this.start?"":(0,K.YP)(i||(i=(0,j.Z)([' <svg id="top" width="','"> '," </svg> "])),this._totalWidth,this._branches.map((function(t){return t.start?"":(0,K.YP)(a||(a=(0,j.Z)([' <path class="','" d="\n                      M '," 0\n                      L "," ",'\n                      "/> '])),(0,ne.$)({track:t.track}),e._totalWidth/2,t.x,20)}))),this._totalWidth,this._maxHeight,this._branches.map((function(t){return t.end?"":(0,K.YP)(o||(o=(0,j.Z)([' <path class="','" d="\n                        M '," ","\n                        v ",'\n                        "/> '])),(0,ne.$)({track:t.track}),t.x,t.height,e._maxHeight-t.height)})),this._updateBranches,this.short?"":(0,K.YP)(c||(c=(0,j.Z)([' <svg id="bottom" width="','"> '," </svg> "])),this._totalWidth,this._branches.map((function(t){return t.end?"":(0,K.YP)(s||(s=(0,j.Z)([' <path class="','" d="\n                      M '," 0\n                      V ","\n                      L "," ",'\n                      "/> '])),(0,ne.$)({track:t.track}),t.x,re,e._totalWidth/2,30)}))))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,K.iv)(d||(d=(0,j.Z)([":host{position:relative;display:flex;flex-direction:column;align-items:center}:host(:focus){outline:0}#branches{position:relative;display:flex;flex-direction:row;align-items:start}::slotted(*){z-index:1}::slotted([slot=head]){margin-bottom:calc(var(--hat-graph-branch-height)/ -2)}#lines{position:absolute}#top{height:var(--hat-graph-branch-height)}#bottom{height:calc(var(--hat-graph-branch-height) + var(--hat-graph-spacing))}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}path.track{stroke:var(--track-clr)}:host([disabled]) path{stroke:var(--disabled-clr)}"])))}}]}}),K.oi),n(76843),(0,Q.Z)([(0,J.Mo)("hat-graph-node")],(function(e,t){var n=function(t){(0,Y.Z)(r,t);var n=(0,$.Z)(r);function r(){var t;(0,q.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,U.Z)(t)),t}return(0,W.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,J.Cb)()],key:"iconPath",value:void 0},{kind:"field",decorators:[(0,J.Cb)({reflect:!0,type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[(0,J.Cb)({reflect:!0,type:Boolean})],key:"notEnabled",value:function(){return!1}},{kind:"field",decorators:[(0,J.Cb)({reflect:!0,type:Boolean})],key:"graphStart",value:void 0},{kind:"field",decorators:[(0,J.Cb)({type:Boolean,attribute:"nofocus"})],key:"noFocus",value:function(){return!1}},{kind:"field",decorators:[(0,J.Cb)({reflect:!0,type:Number})],key:"badge",value:void 0},{kind:"method",key:"updated",value:function(e){e.has("noFocus")&&(this.hasAttribute("tabindex")||this.noFocus?void 0!==e.get("noFocus")&&this.noFocus&&this.removeAttribute("tabindex"):this.setAttribute("tabindex","0"))}},{kind:"method",key:"render",value:function(){var e=ie+(this.graphStart?2:11);return(0,K.dy)(l||(l=(0,j.Z)([' <svg width="','px" height="','px" viewBox="-'," -"," "," ",'"> ',' <g class="node"> <circle cx="0" cy="0" r="','"/> } ',' <g style="pointer-events:none" transform="translate('," ",')"> '," </g> </g> </svg> "])),40,e,Math.ceil(20),this.graphStart?Math.ceil(e/2):Math.ceil(25),40,e,this.graphStart?"":(0,K.YP)(h||(h=(0,j.Z)([' <path class="connector" d="\n              M 0 ','\n              L 0 0\n            " line-caps="round"/> '])),-25),15,this.badge?(0,K.YP)(u||(u=(0,j.Z)([' <g class="number"> <circle cx="8" cy="','" r="8"></circle> <text x="8" y="','" text-anchor="middle" alignment-baseline="middle">',"</text> </g> "])),-15,-15,this.badge>9?"9+":this.badge):"",-12,-12,this.iconPath?(0,K.YP)(v||(v=(0,j.Z)(['<path class="icon" d="','/"></path>'])),this.iconPath):"")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,K.iv)(f||(f=(0,j.Z)([":host{display:flex;flex-direction:column;min-width:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing));height:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing) + 1px)}:host([graphStart]){height:calc(var(--hat-graph-node-size) + 2px)}:host([track]){--stroke-clr:var(--track-clr);--icon-clr:var(--default-icon-clr)}:host([active]) circle{--stroke-clr:var(--active-clr);--icon-clr:var(--default-icon-clr)}:host(:focus){outline:0}:host(:hover) circle{--stroke-clr:var(--hover-clr);--icon-clr:var(--default-icon-clr)}:host([notEnabled]) circle{--stroke-clr:var(--disabled-clr)}:host([notEnabled][active]) circle{--stroke-clr:var(--disabled-active-clr)}:host([notEnabled]:hover) circle{--stroke-clr:var(--disabled-hover-clr)}svg{width:100%;height:100%}circle,path.connector{stroke:var(--stroke-clr);stroke-width:2;fill:none}circle{fill:var(--background-clr);stroke:var(--circle-clr,var(--stroke-clr))}.number circle{fill:var(--track-clr);stroke:none;stroke-width:0}.number text{font-size:smaller}path.icon{fill:var(--icon-clr)}"])))}}]}}),K.oi),(0,Q.Z)([(0,J.Mo)("hat-graph-spacer")],(function(e,t){var n=function(t){(0,Y.Z)(r,t);var n=(0,$.Z)(r);function r(){var t;(0,q.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,U.Z)(t)),t}return(0,W.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,J.Cb)({reflect:!0,type:Boolean})],key:"disabled",value:void 0},{kind:"method",key:"render",value:function(){return(0,K.dy)(g||(g=(0,j.Z)([' <svg viewBox="-'," 0 10 ",'"> <path d="\n              M 0 ','\n              V 0\n            " line-caps="round"/> } </svg> '])),5,41,41)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,K.iv)(p||(p=(0,j.Z)([":host{display:flex;flex-direction:column;align-items:center}svg{width:var(--hat-graph-spacing);height:calc(var(--hat-graph-spacing) + var(--hat-graph-node-size) + 1px)}:host([track]){--stroke-clr:var(--track-clr)}:host-context([disabled]){--stroke-clr:var(--disabled-clr)}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}"])))}}]}}),K.oi),(0,Q.Z)([(0,J.Mo)("hat-script-graph")],(function(e,t){var n=function(t){(0,Y.Z)(r,t);var n=(0,$.Z)(r);function r(){var t;(0,q.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,U.Z)(t)),t}return(0,W.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,J.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,J.Cb)({attribute:!1})],key:"selected",value:void 0},{kind:"field",key:"renderedNodes",value:function(){return{}}},{kind:"field",key:"trackedNodes",value:function(){return{}}},{kind:"method",key:"selectNode",value:function(e,t){var n=this;return function(){(0,ee.B)(n,"graph-node-selected",{config:e,path:t})}}},{kind:"method",key:"render_trigger",value:function(e,t){var n="trigger/".concat(t),r=this.trace&&n in this.trace.trace;return this.renderedNodes[n]={config:e,path:n},r&&(this.trackedNodes[n]=this.renderedNodes[n]),(0,K.dy)(k||(k=(0,j.Z)([' <hat-graph-node graphStart ?track="','" @focus="','" ?active="','" .iconPath="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),r,this.selectNode(e,n),this.selected===n,"M21 13H14.4L19.1 17.7L17.7 19.1L13 14.4V21H11V14.3L6.3 19L4.9 17.6L9.4 13H3V11H9.6L4.9 6.3L6.3 4.9L11 9.6V3H13V9.4L17.6 4.8L19 6.3L14.3 11H21V13Z",!1===e.enabled,r?"0":"-1")}},{kind:"method",key:"render_condition",value:function(e,t){var n="condition/".concat(t);return this.renderedNodes[n]={config:e,path:n},this.trace&&n in this.trace.trace&&(this.trackedNodes[n]=this.renderedNodes[n]),this.render_condition_node(e,n)}},{kind:"field",key:"typeRenderers",value:function(){return{condition:this.render_condition_node,and:this.render_condition_node,or:this.render_condition_node,not:this.render_condition_node,delay:this.render_delay_node,event:this.render_event_node,scene:this.render_scene_node,service:this.render_service_node,wait_template:this.render_wait_node,wait_for_trigger:this.render_wait_node,repeat:this.render_repeat_node,choose:this.render_choose_node,device_id:this.render_device_node,if:this.render_if_node,stop:this.render_stop_node,parallel:this.render_parallel_node,other:this.render_other_node}}},{kind:"method",key:"render_action_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object.keys(this.typeRenderers).find((function(t){return t in e}))||"other";return this.renderedNodes[t]={config:e,path:t},this.trace&&t in this.trace.trace&&(this.trackedNodes[t]=this.renderedNodes[t]),this.typeRenderers[i].bind(this)(e,t,n,r)}},{kind:"method",key:"render_choose_node",value:function(e,t){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=this.trace.trace[t],s=c?c.map((function(e){return void 0===e.result||"default"===e.result.choice?"default":e.result.choice})):[],d=s.includes("default");return(0,K.dy)(y||(y=(0,j.Z)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> ',' <div ?track="','"> <hat-graph-spacer ?track="','"></hat-graph-spacer> '," </div> </hat-graph-branch> "])),void 0===c?"-1":"0",this.selectNode(e,t),void 0!==c,this.selected===t,o||!1===e.enabled,a,"M11,5H8L12,1L16,5H13V9.43C12.25,9.89 11.58,10.46 11,11.12V5M22,11L18,7V10C14.39,9.85 11.31,12.57 11,16.17C9.44,16.72 8.62,18.44 9.17,20C9.72,21.56 11.44,22.38 13,21.83C14.56,21.27 15.38,19.56 14.83,18C14.53,17.14 13.85,16.47 13,16.17C13.47,12.17 17.47,11.97 17.95,11.97V14.97L22,11M10.63,11.59C9.3,10.57 7.67,10 6,10V7L2,11L6,15V12C7.34,12.03 8.63,12.5 9.64,13.4C9.89,12.76 10.22,12.15 10.63,11.59Z",void 0!==c,this.selected===t,o||!1===e.enabled,e.choose?null===(n=(0,te.r)(e.choose))||void 0===n?void 0:n.map((function(n,r){var a="".concat(t,"/choose/").concat(r),d=s.includes(r);return i.renderedNodes[a]={config:e,path:a},d&&(i.trackedNodes[a]=i.renderedNodes[a]),(0,K.dy)(b||(b=(0,j.Z)([' <div class="graph-container" ?track="','"> <hat-graph-node .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"></hat-graph-node> '," </div> "])),d,!c||d?"M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z":"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",i.selectNode(e,a),d,i.selected===a,o||!1===e.enabled,null!==n.sequence?(0,te.r)(n.sequence).map((function(t,n){return i.render_action_node(t,"".concat(a,"/sequence/").concat(n),!1,o||!1===e.enabled)})):"")})):"",d,d,null!==e.default?null===(r=(0,te.r)(e.default))||void 0===r?void 0:r.map((function(n,r){return i.render_action_node(n,"".concat(t,"/default/").concat(r),!1,o||!1===e.enabled)})):"")}},{kind:"method",key:"render_if_node",value:function(e,t){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=this.trace.trace[t],s=!1,d=!1,l=(0,O.Z)(c||[]);try{for(l.s();!(r=l.n()).done;){var h,u,v=r.value;if(s||"then"!==(null===(h=v.result)||void 0===h?void 0:h.choice)||(s=!0),(d||"else"!==(null===(u=v.result)||void 0===u?void 0:u.choice))&&v.result||(d=!0),d&&s)break}}catch(f){l.e(f)}finally{l.f()}return(0,K.dy)(m||(m=(0,j.Z)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> ',' <div class="graph-container" ?track="','"> <hat-graph-node .iconPath="','" ?track="','" ?active="','" .notEnabled="','" nofocus></hat-graph-node> '," </div> </hat-graph-branch> "])),void 0===c?"-1":"0",this.selectNode(e,t),void 0!==c,this.selected===t,o||!1===e.enabled,a,"M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29",void 0!==c,this.selected===t,o||!1===e.enabled,e.else?(0,K.dy)(_||(_=(0,j.Z)(['<div class="graph-container" ?track="','"> <hat-graph-node .iconPath="','" ?track="','" ?active="','" .notEnabled="','" nofocus></hat-graph-node>'," </div>"])),d,"M19.59,7L12,14.59L6.41,9H11V7H3V15H5V10.41L12,17.41L21,8.41",d,this.selected===t,o||!1===e.enabled,(0,te.r)(e.else).map((function(n,r){return i.render_action_node(n,"".concat(t,"/else/").concat(r),!1,o||!1===e.enabled)}))):(0,K.dy)(Z||(Z=(0,j.Z)(['<hat-graph-spacer ?track="','"></hat-graph-spacer>'])),d),s,"M20,5.41L18.59,4L7,15.59V9H5V19H15V17H8.41",s,this.selected===t,o||!1===e.enabled,(0,te.r)(null!==(n=e.then)&&void 0!==n?n:[]).map((function(n,r){return i.render_action_node(n,"".concat(t,"/then/").concat(r),!1,o||!1===e.enabled)})))}},{kind:"method",key:"render_condition_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.trace.trace[t],a=!1,o=!1,c=!1;if(i){var s,d=(0,O.Z)(i);try{for(d.s();!(s=d.n()).done;){var l=s.value;if(l.result&&(a=!0,l.result.result?o=!0:c=!0),o&&c)break}}catch(h){d.e(h)}finally{d.f()}}return(0,K.dy)(x||(x=(0,j.Z)([' <hat-graph-branch @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','" short> <hat-graph-node .graphStart="','" slot="head" ?track="','" ?active="','" .notEnabled="','" .iconPath="','" nofocus></hat-graph-node> <div style="','" graphStart graphEnd></div> <div ?track="','"></div> <hat-graph-node .iconPath="','" nofocus ?track="','" ?active="','" .notEnabled="','"></hat-graph-node> </hat-graph-branch> '])),this.selectNode(e,t),a,this.selected===t,r||!1===e.enabled,void 0===i?"-1":"0",n,a,this.selected===t,r||!1===e.enabled,"M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z","width: ".concat(40,"px;"),o,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",c,this.selected===t,r||!1===e.enabled)}},{kind:"method",key:"render_delay_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(C||(C=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),n,"M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled,this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_device_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(w||(w=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),n,"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled,this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_event_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(L||(L=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),n,"M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5M11,3A6,6 0 0,1 17,9C17,10.7 16.29,12.23 15.16,13.33L14.16,12.88C15.28,11.96 16,10.56 16,9A5,5 0 0,0 11,4A5,5 0 0,0 6,9C6,11.05 7.23,12.81 9,13.58V14.66C6.67,13.83 5,11.61 5,9A6,6 0 0,1 11,3Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled,this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_repeat_node",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.trace.trace[t],c=null===(n=this.trace)||void 0===n||null===(n=n.trace["".concat(t,"/repeat/sequence/0")])||void 0===n?void 0:n.length;return(0,K.dy)(A||(A=(0,j.Z)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> <hat-graph-node .iconPath="','" ?track="','" ?active="','" .notEnabled="','" nofocus .badge="','"></hat-graph-node> <div ?track="','"> '," </div> </hat-graph-branch> "])),void 0===o?"-1":"0",this.selectNode(e,t),t in this.trace.trace,this.selected===t,a||!1===e.enabled,i,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",t in this.trace.trace,this.selected===t,a||!1===e.enabled,"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",c>1,this.selected===t,a||!1===e.enabled,c>1?c:void 0,o,(0,te.r)(e.repeat.sequence).map((function(n,i){return r.render_action_node(n,"".concat(t,"/repeat/sequence/").concat(i),!1,a||!1===e.enabled)})))}},{kind:"method",key:"render_scene_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(V||(V=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),n,"M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled,this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_service_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(M||(M=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),n,"M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled,this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_wait_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(H||(H=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','"></hat-graph-node> '])),n,"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled,this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_parallel_node",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.trace.trace[t];return(0,K.dy)(E||(E=(0,j.Z)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> '," </hat-graph-branch> "])),void 0===a?"-1":"0",this.selectNode(e,t),t in this.trace.trace,this.selected===t,i||!1===e.enabled,r,"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",t in this.trace.trace,this.selected===t,i||!1===e.enabled,(0,te.r)(e.parallel).map((function(r,a){return"sequence"in r?(0,K.dy)(I||(I=(0,j.Z)(['<div ?track="','"> '," </div>"])),t in n.trace.trace,(0,te.r)(r.sequence).map((function(r,o){return n.render_action_node(r,"".concat(t,"/parallel/").concat(a,"/sequence/").concat(o),!1,i||!1===e.enabled)}))):n.render_action_node(r,"".concat(t,"/parallel/").concat(a,"/sequence/0"),!1,i||!1===e.enabled)})))}},{kind:"method",key:"render_stop_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(N||(N=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"></hat-graph-node> '])),n,"M13 24C9.74 24 6.81 22 5.6 19L2.57 11.37C2.26 10.58 3 9.79 3.81 10.05L4.6 10.31C5.16 10.5 5.62 10.92 5.84 11.47L7.25 15H8V3.25C8 2.56 8.56 2 9.25 2S10.5 2.56 10.5 3.25V12H11.5V1.25C11.5 .56 12.06 0 12.75 0S14 .56 14 1.25V12H15V2.75C15 2.06 15.56 1.5 16.25 1.5C16.94 1.5 17.5 2.06 17.5 2.75V12H18.5V5.75C18.5 5.06 19.06 4.5 19.75 4.5S21 5.06 21 5.75V16C21 20.42 17.42 24 13 24Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled)}},{kind:"method",key:"render_other_node",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,K.dy)(P||(P=(0,j.Z)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"></hat-graph-node> '])),n,"M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,r||!1===e.enabled)}},{kind:"method",key:"render",value:function(){var e=this,t=Object.keys(this.trackedNodes),n="trigger"in this.trace.config?(0,te.r)(this.trace.config.trigger).map((function(t,n){return e.render_trigger(t,n)})):void 0;try{var r;return(0,K.dy)(S||(S=(0,j.Z)([' <div class="parent graph-container"> '," "," "," ",' </div> <div class="actions"> <ha-icon-button .disabled="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .disabled="','" @click="','" .path="','"></ha-icon-button> </div> '])),n?(0,K.dy)(T||(T=(0,j.Z)(['<hat-graph-branch start .short="','"> '," </hat-graph-branch>"])),n.length<2,n):"","condition"in this.trace.config?(0,K.dy)(R||(R=(0,j.Z)(["",""])),null===(r=(0,te.r)(this.trace.config.condition))||void 0===r?void 0:r.map((function(t,n){return e.render_condition(t,n)}))):"","action"in this.trace.config?(0,K.dy)(z||(z=(0,j.Z)(["",""])),(0,te.r)(this.trace.config.action).map((function(t,n){return e.render_action_node(t,"action/".concat(n))}))):"","sequence"in this.trace.config?(0,K.dy)(B||(B=(0,j.Z)(["",""])),(0,te.r)(this.trace.config.sequence).map((function(t,n){return e.render_action_node(t,"sequence/".concat(n),0===n)}))):"",0===t.length||t[0]===this.selected,this._previousTrackedNode,"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",0===t.length||t[t.length-1]===this.selected,this._nextTrackedNode,"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z")}catch(i){return(0,K.dy)(D||(D=(0,j.Z)([' <div class="error"> Error rendering graph. Please download trace and share with the developers. </div> '])))}}},{kind:"method",key:"willUpdate",value:function(e){(0,G.Z)((0,X.Z)(n.prototype),"willUpdate",this).call(this,e),e.has("trace")&&(this.renderedNodes={},this.trackedNodes={})}},{kind:"method",key:"updated",value:function(e){if((0,G.Z)((0,X.Z)(n.prototype),"updated",this).call(this,e),e.has("trace")){if(!this.selected||!(this.selected in this.trackedNodes)){var t=this.trackedNodes[Object.keys(this.trackedNodes)[0]];t&&(0,ee.B)(this,"graph-node-selected",t)}if(this.trace){var r,i=Object.keys(this.trace.trace),a=Object.keys(this.renderedNodes).sort((function(e,t){return i.indexOf(e)-i.indexOf(t)})),o={},c={},s=(0,O.Z)(a);try{for(s.s();!(r=s.n()).done;){var d=r.value;c[d]=this.renderedNodes[d],d in this.trackedNodes&&(o[d]=this.trackedNodes[d])}}catch(l){s.e(l)}finally{s.f()}this.renderedNodes=c,this.trackedNodes=o}}}},{kind:"method",key:"_previousTrackedNode",value:function(){var e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)-1;t>=0&&(0,ee.B)(this,"graph-node-selected",this.trackedNodes[e[t]])}},{kind:"method",key:"_nextTrackedNode",value:function(){var e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)+1;t<e.length&&(0,ee.B)(this,"graph-node-selected",this.trackedNodes[e[t]])}},{kind:"get",static:!0,key:"styles",value:function(){return(0,K.iv)(F||(F=(0,j.Z)([":host{display:flex;--stroke-clr:var(--stroke-color, var(--secondary-text-color));--active-clr:var(--active-color, var(--primary-color));--track-clr:var(--track-color, var(--accent-color));--hover-clr:var(--hover-color, var(--primary-color));--disabled-clr:var(--disabled-color, var(--disabled-text-color));--disabled-active-clr:rgba(var(--rgb-primary-color), 0.5);--disabled-hover-clr:rgba(var(--rgb-primary-color), 0.7);--default-trigger-color:3,169,244;--rgb-trigger-color:var(--trigger-color, var(--default-trigger-color));--background-clr:var(--background-color, white);--default-icon-clr:var(--icon-color, black);--icon-clr:var(--stroke-clr);--hat-graph-spacing:","px;--hat-graph-node-size:","px;--hat-graph-branch-height:","px}.graph-container{display:flex;flex-direction:column;align-items:center}.actions{display:flex;flex-direction:column}.parent{margin-left:8px;margin-top:16px}.error{padding:16px;max-width:300px}"])),re,ie,20)}}]}}),K.oi)},19476:function(e,t,n){n.d(t,{b:function(){return a}});var r,i=n(88962),a=(0,n(68144).iv)(r||(r=(0,i.Z)([".tabs{background-color:var(--primary-background-color);border-top:1px solid var(--divider-color);border-bottom:1px solid var(--divider-color);display:flex;padding-left:4px}.tabs.top{border-top:none}.tabs>*{padding:2px 16px;cursor:pointer;position:relative;bottom:-1px;border:none;border-bottom:2px solid transparent;user-select:none;background:0 0;color:var(--primary-text-color);outline:0;transition:background 15ms linear}.tabs>.active{border-bottom-color:var(--primary-color)}.tabs>:focus,.tabs>:hover{background:var(--secondary-background-color)}"])))},57266:function(e,t,n){n.d(t,{jV:function(){return u},o1:function(){return k},MY:function(){return m},sS:function(){return f},ri:function(){return b},hb:function(){return y},Yc:function(){return p}});var r=n(99312),i=n(81043),a=(n(46798),n(47084),n(88640),n(63789),n(24074),n(94570),n(49706)),o=n(58831),c=n(22311),s=n(21780),d=function(e,t){return function(e){switch(e){case"de":case"lb":return!0;default:return!1}}(t)?(0,s.f)(e):e.toLocaleLowerCase(t)},l=n(56007),h="ui.components.logbook.messages",u=["counter","proximity","sensor","zone"],v={"numeric state of":"triggered_by_numeric_state_of","state of":"triggered_by_state_of",event:"triggered_by_event",time:"triggered_by_time","time pattern":"triggered_by_time_pattern","ioBroker stopping":"triggered_by_homeassistant_stopping","ioBroker starting":"triggered_by_homeassistant_starting"},f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(t,n,void 0,void 0,i));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(e,t,n,r,i,a){if((r||a)&&(!r||0===r.length)&&(!a||0===a.length))return Promise.resolve([]);var o={type:"logbook/get_events",start_time:t};return n&&(o.end_time=n),null!=r&&r.length&&(o.entity_ids=r),null!=a&&a.length&&(o.device_ids=a),i&&(o.context_id=i),e.callWS(o)},p=function(e,t,n,r,i,a){if((i||a)&&(!i||0===i.length)&&(!a||0===a.length))return Promise.reject("No entities or devices");var o={type:"logbook/event_stream",start_time:n,end_time:r};return null!=i&&i.length&&(o.entity_ids=i),null!=a&&a.length&&(o.device_ids=a),e.connection.subscribeMessage((function(e){return t(e)}),o)},k=function(e,t){return{entity_id:e.entity_id,state:t,attributes:{device_class:null==e?void 0:e.attributes.device_class,source_type:null==e?void 0:e.attributes.source_type,has_date:null==e?void 0:e.attributes.has_date,has_time:null==e?void 0:e.attributes.has_time,entity_picture_local:a.iY.has((0,o.M)(e.entity_id))||null==e?void 0:e.attributes.entity_picture_local,entity_picture:a.iY.has((0,o.M)(e.entity_id))||null==e?void 0:e.attributes.entity_picture}}},y=function(e,t){for(var n in v)if(t.startsWith(n))return t.replace(n,"".concat(e("ui.components.logbook.".concat(v[n]))));return t},b=function(e,t,n,r,i){switch(i){case"device_tracker":case"person":return"not_home"===n?t("".concat(h,".was_away")):"home"===n?t("".concat(h,".was_at_home")):t("".concat(h,".was_at_state"),{state:n});case"sun":return t("".concat(h,"above_horizon"===n?".rose":".set"));case"binary_sensor":var o=n===a.uo,c=n===a.lC,s=r.attributes.device_class;switch(s){case"battery":if(o)return t("".concat(h,".was_low"));if(c)return t("".concat(h,".was_normal"));break;case"connectivity":if(o)return t("".concat(h,".was_connected"));if(c)return t("".concat(h,".was_disconnected"));break;case"door":case"garage_door":case"opening":case"window":if(o)return t("".concat(h,".was_opened"));if(c)return t("".concat(h,".was_closed"));break;case"lock":if(o)return t("".concat(h,".was_unlocked"));if(c)return t("".concat(h,".was_locked"));break;case"plug":if(o)return t("".concat(h,".was_plugged_in"));if(c)return t("".concat(h,".was_unplugged"));break;case"presence":if(o)return t("".concat(h,".was_at_home"));if(c)return t("".concat(h,".was_away"));break;case"safety":if(o)return t("".concat(h,".was_unsafe"));if(c)return t("".concat(h,".was_safe"));break;case"cold":case"gas":case"heat":case"moisture":case"motion":case"occupancy":case"power":case"problem":case"smoke":case"sound":case"vibration":if(o)return t("".concat(h,".detected_device_class"),{device_class:d(t("component.binary_sensor.entity_component.".concat(s,".name")),e.language)});if(c)return t("".concat(h,".cleared_device_class"),{device_class:d(t("component.binary_sensor.entity_component.".concat(s,".name")),e.language)});break;case"tamper":if(o)return t("".concat(h,".detected_tampering"));if(c)return t("".concat(h,".cleared_tampering"))}break;case"cover":switch(n){case"open":return t("".concat(h,".was_opened"));case"opening":return t("".concat(h,".is_opening"));case"closing":return t("".concat(h,".is_closing"));case"closed":return t("".concat(h,".was_closed"))}break;case"event":return t("".concat(h,".detected_event_no_type"));case"lock":switch(n){case"unlocked":return t("".concat(h,".was_unlocked"));case"locking":return t("".concat(h,".is_locking"));case"unlocking":return t("".concat(h,".is_unlocking"));case"locked":return t("".concat(h,".was_locked"));case"jammed":return t("".concat(h,".is_jammed"))}}return n===a.uo?t("".concat(h,".turned_on")):n===a.lC?t("".concat(h,".turned_off")):n===l.lz?t("".concat(h,".became_unknown")):n===l.nZ?t("".concat(h,".became_unavailable")):e.localize("".concat(h,".changed_to_state"),{state:r?e.formatEntityState(r,n):n})},m=function(e){return"sensor"!==(0,c.N)(e)||void 0===e.attributes.unit_of_measurement&&void 0===e.attributes.state_class}},97389:function(e,t,n){n.d(t,{U_:function(){return o},Zm:function(){return s},lj:function(){return a},mA:function(){return i},nV:function(){return c}});n(64777),n(76843),n(51467),n(85472),n(46798),n(9849),n(90126),n(65974);var r=n(43793),i=function(e,t,n,r){return e.callWS({type:"trace/get",domain:t,item_id:n,run_id:r})},a=function(e,t,n){return e.callWS({type:"trace/list",domain:t,item_id:n})},o=function(e,t,n){return e.callWS({type:"trace/contexts",domain:t,item_id:n})},c=function(e,t){for(var n=t.split("/").reverse(),r=e;n.length;){var i=n.pop(),a=Number(i);if(isNaN(a)){var o=r[i];if(!o&&"sequence"===i)continue;r=o}else if(Array.isArray(r))r=r[a];else if(0!==a)throw new Error("If config is not an array, can only return index 0")}return r},s=function(e){return"trigger"===e||(0,r.x)(e,"trigger/")}},44198:function(e,t,n){var r,i,a,o,c,s,d,l,h,u,v,f,g,p,k,y,b,m,_=n(88962),Z=n(33368),x=n(71650),C=n(82390),w=n(69205),L=n(70906),A=n(91808),V=(n(63789),n(24074),n(97393),n(51358),n(46798),n(98490),n(46349),n(70320),n(40271),n(22859),n(60163),n(56308),n(36513),n(41353),n(91989),n(2094),n(68144)),M=n(95260),H=n(83448),E=n(47501),I=n(7323),N=n(12198),P=n(49684),S=n(25516),T=n(47181),R=n(58831),z=n(83849),B=n(39258),D=(n(3143),n(31206),n(99282),n(42952),n(57266)),F=n(11654),O=n(46134),j=n(11254),W=n(5986),q=["script","automation"];(0,A.Z)([(0,M.Mo)("ha-logbook-renderer")],(function(e,t){var n=function(t){(0,w.Z)(r,t);var n=(0,L.Z)(r);function r(){var t;(0,x.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,C.Z)(t)),t}return(0,Z.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"userIdToName",value:function(){return{}}},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"traceContexts",value:function(){return{}}},{kind:"field",decorators:[(0,M.Cb)({attribute:!1})],key:"entries",value:function(){return[]}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,attribute:"narrow"})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,attribute:"virtualize",reflect:!0})],key:"virtualize",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,attribute:"show-indicator"})],key:"showIndicator",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,attribute:"no-icon"})],key:"noIcon",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,attribute:"no-name"})],key:"noName",value:function(){return!1}},{kind:"field",decorators:[(0,M.Cb)({type:Boolean,attribute:"relative-time"})],key:"relativeTime",value:function(){return!1}},{kind:"field",decorators:[(0,S.i)(".container")],key:"_savedScrollPos",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(!this.hasUpdated&&this.virtualize||e.has("virtualize")&&this.virtualize)&&(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("title"),(0,O.o)())}},{kind:"method",key:"shouldUpdate",value:function(e){var t=e.get("hass"),n=void 0===t||t.locale!==this.hass.locale;return e.has("entries")||e.has("traceContexts")||n}},{kind:"method",key:"render",value:function(){var e,t=this;return null!==(e=this.entries)&&void 0!==e&&e.length?(0,V.dy)(i||(i=(0,_.Z)([' <div class="container ha-scrollbar ','" @scroll="','"> '," </div> "])),(0,H.$)({narrow:this.narrow,"no-name":this.noName,"no-icon":this.noIcon}),this._saveScrollPos,this.virtualize?(0,V.dy)(a||(a=(0,_.Z)(['<lit-virtualizer @visibilityChanged="','" scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer>'])),this._visibilityChanged,this.entries,this._renderLogbookItem):this.entries.map((function(e,n){return t._renderLogbookItem(e,n)}))):(0,V.dy)(r||(r=(0,_.Z)([' <div class="container no-entries"> '," </div> "])),this.hass.localize("ui.components.logbook.entries_not_found"))}},{kind:"field",key:"_renderLogbookItem",value:function(){var e=this;return function(t,n){var r;if(!t||void 0===n)return V.Ld;var i=e.entries[n-1],a=[],h=t.entity_id?e.hass.states[t.entity_id]:void 0,u=h?(0,D.o1)(h,t.state):void 0,v=t.entity_id?(0,R.M)(t.entity_id):t.domain,f=u||t.icon||t.state||!v||!(0,I.p)(e.hass,v)?void 0:(0,j.X1)({domain:v,type:"icon",useFallback:!0,darkOptimized:null===(r=e.hass.themes)||void 0===r?void 0:r.darkMode}),g=q.includes(t.domain)&&t.context_id in e.traceContexts?e.traceContexts[t.context_id]:void 0,p=void 0!==g;return(0,V.dy)(o||(o=(0,_.Z)([' <div class="entry-container ','" .traceLink="','" @click="','"> ',' <div class="entry ','"> <div class="icon-message"> '," ",' <div class="message-relative_time"> <div class="message"> '," "," ",' </div> <div class="secondary"> <span>','</span> - <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '," "," </div> </div> </div> "," </div> </div> "])),(0,H.$)({clickable:p}),g?"/config/".concat(g.domain,"/trace/").concat(g.item_id,"?run_id=").concat(g.run_id):void 0,e._handleClick,0===n||null!=t&&t.when&&null!=i&&i.when&&new Date(1e3*t.when).toDateString()!==new Date(1e3*i.when).toDateString()?(0,V.dy)(c||(c=(0,_.Z)([' <h4 class="date"> '," </h4> "])),(0,N.p6)(new Date(1e3*t.when),e.hass.locale,e.hass.config)):V.Ld,(0,H.$)({"no-entity":!t.entity_id}),e.noIcon?"":(0,V.dy)(s||(s=(0,_.Z)([' <state-badge .hass="','" .overrideIcon="','" .overrideImage="','" .stateObj="','" .stateColor="','"></state-badge> '])),e.hass,t.icon,f,t.icon?void 0:u,!1),e.showIndicator?e._renderIndicator(t):"",e.noName?"":e._renderEntity(t.entity_id,t.name,p),e._renderMessage(t,a,v,u,p),e._renderContextMessage(t,a,p),(0,P.Vu)(new Date(1e3*t.when),e.hass.locale,e.hass.config),e.hass,1e3*t.when,t.context_user_id?(0,V.dy)(d||(d=(0,_.Z)(["",""])),e._renderUser(t)):"",p?"- ".concat(e.hass.localize("ui.components.logbook.show_trace")):"",p?(0,V.dy)(l||(l=(0,_.Z)(["<ha-icon-next></ha-icon-next>"]))):"")}}},{kind:"method",decorators:[(0,M.hO)({passive:!0})],key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{kind:"method",decorators:[(0,M.hO)({passive:!0})],key:"_visibilityChanged",value:function(e){(0,T.B)(this,"hass-logbook-live",{enable:0===e.first})}},{kind:"method",key:"_renderIndicator",value:function(e){var t=this.hass.states[e.entity_id],n=getComputedStyle(this),r={backgroundColor:void 0!==e.state?(0,B.U)(e.state,n,t):void 0};return(0,V.dy)(h||(h=(0,_.Z)([' <div class="indicator" style="','"></div> '])),(0,E.V)(r))}},{kind:"method",key:"_renderMessage",value:function(e,t,n,r,i){if(e.entity_id&&e.state)return r?(0,D.ri)(this.hass,this.hass.localize,e.state,r,n):e.state;var a=function(e){return e.context_event_type||e.context_state||e.context_message}(e),o=e.message;if(q.includes(n)&&e.source){if(a)return"";o=(0,D.hb)(this.hass.localize,e.source)}return o?this._formatMessageWithPossibleEntity(a?function(e,t){return t?e.replace(t," "):e}(o,e.context_entity_id):o,t,void 0,i):""}},{kind:"method",key:"_renderUser",value:function(e){var t=e.context_user_id&&this.userIdToName[e.context_user_id];return t?"- ".concat(t):""}},{kind:"method",key:"_renderUnseenContextSourceEntity",value:function(e,t,n){return!e.context_entity_id||t.includes(e.context_entity_id)?"":(0,V.dy)(u||(u=(0,_.Z)([" (",")"])),this._renderEntity(e.context_entity_id,e.context_entity_id_name,n))}},{kind:"method",key:"_renderContextMessage",value:function(e,t,n){if(e.context_state){var r=e.context_entity_id&&e.context_entity_id in this.hass.states?(0,D.o1)(this.hass.states[e.context_entity_id],e.context_state):void 0;return(0,V.dy)(v||(v=(0,_.Z)([""," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by_state_of"),this._renderEntity(e.context_entity_id,e.context_entity_id_name,n),r?(0,D.ri)(this.hass,this.hass.localize,e.context_state,r,(0,R.M)(e.context_entity_id)):e.context_state)}var i;if("call_service"===e.context_event_type)return(0,V.dy)(f||(f=(0,_.Z)([""," ",""])),this.hass.localize("ui.components.logbook.triggered_by_service"),e.context_domain&&e.context_service?"".concat((0,W.Lh)(this.hass.localize,e.context_domain),":\n      ").concat(this.hass.localize("component.".concat(e.context_domain,".services.").concat(e.context_service,".name"))||(null===(i=this.hass.services[e.context_domain])||void 0===i||null===(i=i[e.context_service])||void 0===i?void 0:i.name)||e.context_service):"");if(!e.context_message||t.includes(e.context_entity_id))return"";if("automation_triggered"===e.context_event_type||"script_started"===e.context_event_type){var a=e.context_source?e.context_source:e.context_message.replace("triggered by ",""),o=(0,D.hb)(this.hass.localize,a);return(0,V.dy)(g||(g=(0,_.Z)([""," "," ",""])),this.hass.localize("automation_triggered"===e.context_event_type?"ui.components.logbook.triggered_by_automation":"ui.components.logbook.triggered_by_script"),this._renderEntity(e.context_entity_id,e.context_entity_id_name,n),e.context_message?this._formatMessageWithPossibleEntity(o,t,void 0,n):"")}return(0,V.dy)(p||(p=(0,_.Z)([" "," "," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by"),e.context_name,this._formatMessageWithPossibleEntity(e.context_message,t,e.context_entity_id,n),this._renderUnseenContextSourceEntity(e,t,n))}},{kind:"method",key:"_renderEntity",value:function(e,t,n){var r=e&&e in this.hass.states,i=t||r&&this.hass.states[e].attributes.friendly_name||e;return r?n?i:(0,V.dy)(k||(k=(0,_.Z)(['<button class="link" @click="','" .entityId="','"> '," </button>"])),this._entityClicked,e,i):i}},{kind:"method",key:"_formatMessageWithPossibleEntity",value:function(e,t,n,r){if(-1!==e.indexOf("."))for(var i=e.split(" "),a=0,o=i.length;a<o;a++)if(i[a]in this.hass.states){var c=i[a];if(t.includes(c))return"";t.push(c);var s=i.splice(a);return s.shift(),(0,V.dy)(y||(y=(0,_.Z)([""," "," ",""])),i.join(" "),this._renderEntity(c,this.hass.states[c].attributes.friendly_name,r),s.join(" "))}if(n&&n in this.hass.states){var d=this.hass.states[n].attributes.friendly_name;if(d&&e.endsWith(d))return t.includes(n)?"":(t.push(n),e=e.substring(0,e.length-d.length),(0,V.dy)(b||(b=(0,_.Z)([""," ",""])),e,this._renderEntity(n,d,r)))}return e}},{kind:"method",key:"_entityClicked",value:function(e){var t=e.currentTarget.entityId;t&&(e.preventDefault(),e.stopPropagation(),(0,T.B)(this,"hass-more-info",{entityId:t}))}},{kind:"method",key:"_handleClick",value:function(e){e.currentTarget.traceLink&&((0,z.c)(e.currentTarget.traceLink),(0,T.B)(this,"closed"))}},{kind:"get",static:!0,key:"styles",value:function(){return[F.Qx,F.$c,F.k1,(0,V.iv)(m||(m=(0,_.Z)([":host([virtualize]){display:block;height:100%}.entry-container{width:100%}.entry{position:relative;display:flex;width:100%;line-height:2em;padding:8px 16px;box-sizing:border-box;border-top:1px solid var(--divider-color);justify-content:space-between;align-items:center}.indicator{background-color:var(--disabled-color);height:8px;width:8px;border-radius:4px;flex-shrink:0;margin-right:12px;margin-inline-start:initial;margin-inline-end:12px;direction:var(--direction)}ha-icon-next{color:var(--secondary-text-color)}.clickable{cursor:pointer}:not(.clickable) .entry.no-entity,:not(.clickable) .no-name .entry{cursor:default}.entry:hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.narrow:not(.no-icon) .time{margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;direction:var(--direction)}.message-relative_time{display:flex;flex-direction:column}.secondary{font-size:12px;line-height:1.7}.secondary a{color:var(--secondary-text-color)}.date{margin:8px 0;padding:0 16px}.icon-message{display:flex;align-items:center}.no-entries{text-align:center;color:var(--secondary-text-color)}state-badge{margin-right:16px;margin-inline-start:initial;flex-shrink:0;color:var(--state-icon-color);margin-inline-end:16px;direction:var(--direction)}.message{color:var(--primary-text-color)}.no-name .message:first-letter{text-transform:capitalize}a{color:var(--primary-color);text-decoration:none}button.link{color:var(--paper-item-icon-color);text-decoration:none}.container{max-height:var(--logbook-max-height)}.container,lit-virtualizer{height:100%}lit-virtualizer{contain:size layout!important}.narrow .entry{line-height:1.5}.narrow .icon-message state-badge{margin-left:0;margin-inline-start:0;margin-inline-end:8px;margin-right:8px;direction:var(--direction)}"])))]}}]}}),V.oi)}}]);
//# sourceMappingURL=61077.vYLy2zXLifI.js.map