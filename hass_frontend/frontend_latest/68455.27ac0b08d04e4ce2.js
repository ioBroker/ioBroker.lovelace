export const __webpack_ids__=["68455"];export const __webpack_modules__={98578:function(t,e,i){i.a(t,(async function(t,n){try{i.r(e),i.d(e,{HuiStatisticCard:()=>b,PERIOD_ENERGY:()=>p});var s=i(44249),o=i(72621),r=i(57243),a=i(15093),c=i(82393),h=i(36522),d=i(31064),u=i(50602),l=(i(99426),i(54977),i(51223)),f=i(1118),_=i(17705),g=i(81833),y=i(69223),v=i(93331),k=i(64830),m=t([l,f,u]);[l,f,u]=m.then?(await m)():m;const p="energy_date_selection";let b=(0,s.Z)([(0,a.Mo)("hui-statistic-card")],(function(t,e){class n extends e{constructor(...e){super(...e),t(this)}}return{F:n,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await i.e("46748").then(i.bind(i,61471)),document.createElement("hui-statistic-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,i){return{entity:(0,y.j)(t,1,e,i,["sensor"],(t=>"state_class"in t.attributes))[0]||"",period:{calendar:{period:"month"}}}}},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_value",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_metadata",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_error",value:void 0},{kind:"field",key:"_energySub",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_energyStart",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_energyEnd",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_footerElement",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(n,"disconnectedCallback",this,3)([]),this._unsubscribeEnergy(),clearInterval(this._interval)}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)(n,"connectedCallback",this,3)([]),this._config?.period===p?this._subscribeEnergy():this._setFetchStatisticTimer()}},{kind:"method",key:"_subscribeEnergy",value:function(){this._energySub||(this._energySub=(0,f.UB)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._energyStart=t.start,this._energyEnd=t.end,this._fetchStatistic()})))}},{kind:"method",key:"_unsubscribeEnergy",value:function(){this._energySub&&(this._energySub(),this._energySub=void 0),this._energyStart=void 0,this._energyEnd=void 0}},{kind:"method",key:"setConfig",value:function(t){if(!t.entity)throw new Error("Entity must be specified");if(!t.stat_type)throw new Error("Statistic type must be specified");if(!t.period)throw new Error("Period must be specified");if(t.entity&&!(0,_.Hs)(t.entity)&&!(0,d.T)(t.entity))throw new Error("Invalid entity");this._config=t,this._error=void 0,this._config.footer?this._footerElement=(0,k.t)(this._config.footer):this._footerElement&&(this._footerElement=void 0)}},{kind:"method",key:"getCardSize",value:async function(){let t=2;if(this._footerElement){const e=(0,g.N)(this._footerElement);t+=e instanceof Promise?await e:e}return t}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return r.Ld;if(this._error)return r.dy` <ha-alert alert-type="error">${this._error}</ha-alert> `;const t=this.hass.states[this._config.entity],e=this._config.name||(0,_.Kd)(this.hass,this._config.entity,this._metadata);return r.dy` <ha-card @click="${this._handleClick}" tabindex="0"> <div class="header"> <div class="name" .title="${e}">${e}</div> <div class="icon"> <ha-state-icon .icon="${this._config.icon}" .stateObj="${t}" .hass="${this.hass}"></ha-state-icon> </div> </div> <div class="info"> <span class="value">${void 0===this._value?"":null===this._value?"?":(0,u.uf)(this._value,this.hass.locale)}</span> <span class="measurement">${this._config.unit||(0,_.dO)(this.hass,this._config.entity,this._metadata)}</span> </div> ${this._footerElement} </ha-card> `}},{kind:"method",key:"shouldUpdate",value:function(t){return this._footerElement&&(this._footerElement.hass=this.hass),!!(t.has("_value")||t.has("_metadata")||t.has("_error")||t.has("_energyStart")||t.has("_energyEnd"))||(!this._config||(0,v.G2)(this,t))}},{kind:"method",key:"willUpdate",value:function(t){if((0,o.Z)(n,"willUpdate",this,3)([t]),!this._config||!t.has("_config"))return;const e=t.get("_config");if(this.hass){if(this._config.period===p&&!this._energySub)return void this._subscribeEnergy();if(this._config.period!==p&&this._energySub)return this._unsubscribeEnergy(),void this._setFetchStatisticTimer();this._config.period===p&&this._energySub&&t.has("_config")&&e?.collection_key!==this._config.collection_key&&(this._unsubscribeEnergy(),this._subscribeEnergy())}t.has("_config")&&e?.entity!==this._config.entity&&this._fetchMetadata().then((()=>{this._setFetchStatisticTimer()}))}},{kind:"method",key:"firstUpdated",value:function(){this._fetchStatistic(),this._fetchMetadata()}},{kind:"method",key:"updated",value:function(t){if((0,o.Z)(n,"updated",this,3)([t]),!this._config||!this.hass)return;const e=t.get("hass"),i=t.get("_config");e&&i&&e.themes===this.hass.themes&&i.theme===this._config.theme||(0,c.R)(this,this.hass.themes,this._config.theme)}},{kind:"method",key:"_setFetchStatisticTimer",value:function(){this._fetchStatistic(),clearInterval(this._interval),this._config?.period!==p&&(this._interval=window.setInterval((()=>this._fetchStatistic()),3e5))}},{kind:"method",key:"_fetchStatistic",value:async function(){if(this.hass&&this._config)try{const t=await(0,_._Y)(this.hass,this._config.entity,this._energyStart&&this._energyEnd?{fixed_period:{start:this._energyStart,end:this._energyEnd}}:"object"==typeof this._config?.period?this._config?.period:{});this._value=t[this._config.stat_type],this._error=void 0}catch(t){this._error=t.message}}},{kind:"method",key:"_fetchMetadata",value:async function(){if(this.hass&&this._config)try{this._metadata=(await(0,_.Py)(this.hass,[this._config.entity]))?.[0]}catch(t){this._error=t.message}}},{kind:"method",key:"_handleClick",value:function(){(0,h.B)(this,"hass-more-info",{entityId:this._config.entity})}},{kind:"method",key:"getGridOptions",value:function(){return{columns:6,rows:2,min_columns:6,min_rows:2}}},{kind:"get",static:!0,key:"styles",value:function(){return[r.iv`ha-card{height:100%;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;outline:0}.header{display:flex;padding:8px 16px 0;justify-content:space-between}.name{color:var(--secondary-text-color);line-height:40px;font-weight:500;font-size:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.icon{color:var(--state-icon-color,#44739e);line-height:40px}.info{padding:0px 16px 16px;margin-top:-4px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:28px}.value{font-size:28px;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}.measurement{font-size:18px;color:var(--secondary-text-color)}`]}}]}}),r.oi);n()}catch(t){n(t)}}))},32424:function(t,e,i){i.d(e,{E:()=>o});var n=i(53907),s=i(18112);function o(t,e,i){const o=(0,s.Q)(t,i?.in);return isNaN(e)?(0,n.L)(i?.in||t,NaN):e?(o.setDate(o.getDate()+e),o):o}},38836:function(t,e,i){i.d(e,{T:()=>o});var n=i(23711),s=i(76808);function o(t,e,i){return(0,n.n)(t,e*s.vh,i)}},23711:function(t,e,i){i.d(e,{n:()=>o});var n=i(53907),s=i(18112);function o(t,e,i){return(0,n.L)(i?.in||t,+(0,s.Q)(t)+e)}},23459:function(t,e,i){i.d(e,{z:()=>o});var n=i(53907),s=i(18112);function o(t,e,i){const o=(0,s.Q)(t,i?.in);if(isNaN(e))return(0,n.L)(i?.in||t,NaN);if(!e)return o;const r=o.getDate(),a=(0,n.L)(i?.in||t,o.getTime());a.setMonth(o.getMonth()+e+1,0);return r>=a.getDate()?a:(o.setFullYear(a.getFullYear(),a.getMonth(),r),o)}},2425:function(t,e,i){i.d(e,{U:()=>s});var n=i(18112);function s(t,e){const i=+(0,n.Q)(t)-+(0,n.Q)(e);return i<0?-1:i>0?1:i}},14276:function(t,e,i){i.d(e,{_:()=>s});var n=i(18112);function s(t,e){return+(0,n.Q)(t)-+(0,n.Q)(e)}},6542:function(t,e,i){i.d(e,{d:()=>a});var n=i(18492),s=i(2425);function o(t,e,i){const[s,o]=(0,n.d)(i?.in,t,e);return 12*(s.getFullYear()-o.getFullYear())+(s.getMonth()-o.getMonth())}var r=i(3938);function a(t,e,i){const[a,c,h]=(0,n.d)(i?.in,t,t,e),d=(0,s.U)(c,h),u=Math.abs(o(c,h));if(u<1)return 0;1===c.getMonth()&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-d*u);let l=(0,s.U)(c,h)===-d;(0,r.h)(a)&&1===u&&1===(0,s.U)(a,h)&&(l=!1);const f=d*(u-+l);return 0===f?0:f}},96500:function(t,e,i){i.d(e,{i:()=>s});var n=i(18112);function s(t,e){const i=(0,n.Q)(t,e?.in);return i.setHours(23,59,59,999),i}},2621:function(t,e,i){i.d(e,{V:()=>s});var n=i(18112);function s(t,e){const i=(0,n.Q)(t,e?.in),s=i.getMonth();return i.setFullYear(i.getFullYear(),s+1,0),i.setHours(23,59,59,999),i}},86319:function(t,e,i){i.d(e,{b:()=>s});var n=i(18112);function s(t,e){return 1===(0,n.Q)(t,e?.in).getDate()}},3938:function(t,e,i){i.d(e,{h:()=>r});var n=i(96500),s=i(2621),o=i(18112);function r(t,e){const i=(0,o.Q)(t,e?.in);return+(0,n.i)(i,e)==+(0,s.V)(i,e)}}};
//# sourceMappingURL=68455.27ac0b08d04e4ce2.js.map