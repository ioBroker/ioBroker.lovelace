"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_cards_hui-map-card_ts"],{

/***/ "./node_modules/date-fns/esm/isSameDay/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/esm/isSameDay/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isSameDay)\n/* harmony export */ });\n/* harmony import */ var _startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../startOfDay/index.js */ \"./node_modules/date-fns/esm/startOfDay/index.js\");\n/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_lib/requiredArgs/index.js */ \"./node_modules/date-fns/esm/_lib/requiredArgs/index.js\");\n\n\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day (and year and month)?\n *\n * @description\n * Are the given dates in the same day (and year and month)?\n *\n * @param {Date|Number} dateLeft - the first date to check\n * @param {Date|Number} dateRight - the second date to check\n * @returns {Boolean} the dates are in the same day (and year and month)\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n *\n * @example\n * // Are 4 September and 4 October in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))\n * //=> false\n *\n * @example\n * // Are 4 September, 2014 and 4 September, 2015 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))\n * //=> false\n */\nfunction isSameDay(dirtyDateLeft, dirtyDateRight) {\n  (0,_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(2, arguments);\n  var dateLeftStartOfDay = (0,_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dirtyDateLeft);\n  var dateRightStartOfDay = (0,_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dirtyDateRight);\n  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzPzllYmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/date-fns/esm/isSameDay/index.js\n");

/***/ }),

/***/ "./node_modules/date-fns/esm/isToday/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/esm/isToday/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isToday)\n/* harmony export */ });\n/* harmony import */ var _isSameDay_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../isSameDay/index.js */ \"./node_modules/date-fns/esm/isSameDay/index.js\");\n/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_lib/requiredArgs/index.js */ \"./node_modules/date-fns/esm/_lib/requiredArgs/index.js\");\n\n\n/**\n * @name isToday\n * @category Day Helpers\n * @summary Is the given date today?\n * @pure false\n *\n * @description\n * Is the given date today?\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is today\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // If today is 6 October 2014, is 6 October 14:00:00 today?\n * const result = isToday(new Date(2014, 9, 6, 14, 0))\n * //=> true\n */\nfunction isToday(dirtyDate) {\n  (0,_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(1, arguments);\n  return (0,_isSameDay_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dirtyDate, Date.now());\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanM/ZWIyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/date-fns/esm/isToday/index.js\n");

/***/ }),

/***/ "./src/common/util/parse-aspect-ratio.ts":
/*!***********************************************!*\
  !*** ./src/common/util/parse-aspect-ratio.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ parseAspectRatio)\n/* harmony export */ });\n// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = num => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\nfunction parseAspectRatio(input) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return {\n        w: 100,\n        h: parseOrThrow(input.substr(0, input.length - 1))\n      };\n    }\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n    return arr.length === 1 ? {\n      w: parseOrThrow(arr[0]),\n      h: 1\n    } : {\n      w: parseOrThrow(arr[0]),\n      h: parseOrThrow(arr[1])\n    };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdXRpbC9wYXJzZS1hc3BlY3QtcmF0aW8udHM/MWIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIYW5kbGUgMTZ4OSwgMTY6OSwgMS43OHgxLCAxLjc4OjEsIDEuNzhcbi8vIElnbm9yZSBldmVyeXRoaW5nIGVsc2VcbmNvbnN0IHBhcnNlT3JUaHJvdyA9IChudW0pID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChudW0pO1xuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtudW19IGlzIG5vdCBhIG51bWJlcmApO1xuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUFzcGVjdFJhdGlvKGlucHV0OiBzdHJpbmcpIHtcbiAgaWYgKCFpbnB1dCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKGlucHV0LmVuZHNXaXRoKFwiJVwiKSkge1xuICAgICAgcmV0dXJuIHsgdzogMTAwLCBoOiBwYXJzZU9yVGhyb3coaW5wdXQuc3Vic3RyKDAsIGlucHV0Lmxlbmd0aCAtIDEpKSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFyciA9IGlucHV0LnJlcGxhY2UoXCI6XCIsIFwieFwiKS5zcGxpdChcInhcIik7XG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBhcnIubGVuZ3RoID09PSAxXG4gICAgICA/IHsgdzogcGFyc2VPclRocm93KGFyclswXSksIGg6IDEgfVxuICAgICAgOiB7IHc6IHBhcnNlT3JUaHJvdyhhcnJbMF0pLCBoOiBwYXJzZU9yVGhyb3coYXJyWzFdKSB9O1xuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIC8vIElnbm9yZSB0aGUgZXJyb3JcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/util/parse-aspect-ratio.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/cards/hui-map-card.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-map-card.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_HOURS_TO_SHOW: () => (/* binding */ DEFAULT_HOURS_TO_SHOW),\n/* harmony export */   DEFAULT_ZOOM: () => (/* binding */ DEFAULT_ZOOM)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! date-fns */ \"./node_modules/date-fns/esm/isToday/index.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! memoize-one */ \"./node_modules/memoize-one/dist/memoize-one.esm.js\");\n/* harmony import */ var _common_color_colors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/color/colors */ \"./src/common/color/colors.ts\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/datetime/format_date_time */ \"./src/common/datetime/format_date_time.ts\");\n/* harmony import */ var _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/datetime/format_time */ \"./src/common/datetime/format_time.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ \"./src/common/util/parse-aspect-ratio.ts\");\n/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../components/ha-card */ \"./src/components/ha-card.ts\");\n/* harmony import */ var _components_ha_alert__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../components/ha-alert */ \"./src/components/ha-alert.ts\");\n/* harmony import */ var _components_ha_icon_button__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../components/ha-icon-button */ \"./src/components/ha-icon-button.ts\");\n/* harmony import */ var _components_map_ha_map__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../components/map/ha-map */ \"./src/components/map/ha-map.ts\");\n/* harmony import */ var _data_history__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../data/history */ \"./src/data/history.ts\");\n/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../common/has-changed */ \"./src/panels/lovelace/common/has-changed.ts\");\n/* harmony import */ var _common_find_entities__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../common/find-entities */ \"./src/panels/lovelace/common/find-entities.ts\");\n/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/process-config-entities */ \"./src/panels/lovelace/common/process-config-entities.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__, _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__, _data_history__WEBPACK_IMPORTED_MODULE_15__]);\n([_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__, _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__, _data_history__WEBPACK_IMPORTED_MODULE_15__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst mdiImageFilterCenterFocus = \"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_HOURS_TO_SHOW = 0;\nconst DEFAULT_ZOOM = 14;\nlet HuiMapCard = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.customElement)(\"hui-map-card\")], function (_initialize, _LitElement) {\n  class HuiMapCard extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HuiMapCard,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"isPanel\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_stateHistory\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.query)(\"ha-map\")],\n      key: \"_map\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_configEntities\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_colorDict\",\n      value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      key: \"_colorIndex\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_subscribed\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"setConfig\",\n      value: function setConfig(config) {\n        var _config$entities;\n        if (!config) {\n          throw new Error(\"Error in card configuration.\");\n        }\n        if (!((_config$entities = config.entities) !== null && _config$entities !== void 0 && _config$entities.length) && !config.geo_location_sources) {\n          throw new Error(\"Either entities or geo_location_sources must be specified\");\n        }\n        if (config.entities && !Array.isArray(config.entities)) {\n          throw new Error(\"Entities need to be an array\");\n        }\n        if (config.geo_location_sources && !Array.isArray(config.geo_location_sources)) {\n          throw new Error(\"Parameter geo_location_sources needs to be an array\");\n        }\n        this._config = config;\n        this._configEntities = (config.entities ? (0,_common_process_config_entities__WEBPACK_IMPORTED_MODULE_18__.processConfigEntities)(config.entities) : []).map(entity => entity.entity);\n      }\n    }, {\n      kind: \"method\",\n      key: \"getCardSize\",\n      value: function getCardSize() {\n        var _this$_config;\n        if (!((_this$_config = this._config) !== null && _this$_config !== void 0 && _this$_config.aspect_ratio)) {\n          return 7;\n        }\n        const ratio = (0,_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(this._config.aspect_ratio);\n        const ar = ratio && ratio.w > 0 && ratio.h > 0 ? `${(100 * ratio.h / ratio.w).toFixed(2)}` : \"100\";\n        return 1 + Math.floor(Number(ar) / 25) || 3;\n      }\n    }, {\n      kind: \"method\",\n      static: true,\n      key: \"getConfigElement\",\n      value: async function getConfigElement() {\n        await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_material_mwc-floating-label_mwc-floating-label-directive_js-node_modules-1233e4\"), __webpack_require__.e(\"vendors-node_modules_material_mwc-textfield_mwc-textfield_css_js\"), __webpack_require__.e(\"vendors-node_modules_material_mwc-textfield_mwc-textfield-base_js\"), __webpack_require__.e(\"vendors-node_modules_material_mwc-list_mwc-list-item-base_js-node_modules_material_mwc-list_m-c39ab1\"), __webpack_require__.e(\"vendors-node_modules_vaadin_combo-box_lit_js-node_modules_vaadin_combo-box_theme_material_vaa-9795ce\"), __webpack_require__.e(\"src_components_ha-combo-box_ts-node_modules_vaadin_vaadin-material-styles_font-icons_js-node_-a3c6e1\"), __webpack_require__.e(\"src_components_ha-selector_ha-selector_ts\"), __webpack_require__.e(\"src_components_entity_ha-entity-picker_ts-src_components_ha-textfield_ts\"), __webpack_require__.e(\"src_common_array_ensure-array_ts-src_components_ha-form_ha-form_ts-src_panels_lovelace_editor-6cfc76\"), __webpack_require__.e(\"src_panels_lovelace_editor_config-elements_hui-map-card-editor_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../editor/config-elements/hui-map-card-editor */ \"./src/panels/lovelace/editor/config-elements/hui-map-card-editor.ts\"));\n        return document.createElement(\"hui-map-card-editor\");\n      }\n    }, {\n      kind: \"method\",\n      static: true,\n      key: \"getStubConfig\",\n      value: function getStubConfig(hass, entities, entitiesFallback) {\n        const includeDomains = [\"device_tracker\"];\n        const maxEntities = 2;\n        const foundEntities = (0,_common_find_entities__WEBPACK_IMPORTED_MODULE_17__.findEntities)(hass, maxEntities, entities, entitiesFallback, includeDomains);\n        return {\n          type: \"map\",\n          entities: foundEntities\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$_config$default;\n        if (!this._config) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.nothing;\n        }\n        if (this._error) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.html`<ha-alert alert-type=\"error\">\n        ${this.hass.localize(\"ui.components.map.error\")}: ${this._error.message}\n        (${this._error.code})\n      </ha-alert>`;\n        }\n        return lit__WEBPACK_IMPORTED_MODULE_3__.html`\n      <ha-card id=\"card\" .header=${this._config.title}>\n        <div id=\"root\">\n          <ha-map\n            .hass=${this.hass}\n            .entities=${this._getEntities(this.hass.states, this._config, this._configEntities)}\n            .zoom=${(_this$_config$default = this._config.default_zoom) !== null && _this$_config$default !== void 0 ? _this$_config$default : DEFAULT_ZOOM}\n            .paths=${this._getHistoryPaths(this._config, this._stateHistory)}\n            .autoFit=${this._config.auto_fit}\n            .darkMode=${this._config.dark_mode}\n            interactiveZones\n            renderPassive\n          ></ha-map>\n          <ha-icon-button\n            .label=${this.hass.localize(\"ui.panel.lovelace.cards.map.reset_focus\")}\n            .path=${mdiImageFilterCenterFocus}\n            @click=${this._fitMap}\n            tabindex=\"0\"\n          ></ha-icon-button>\n        </div>\n      </ha-card>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        var _this$_config2, _this$_config3;\n        if (!changedProps.has(\"hass\") || changedProps.size > 1) {\n          return true;\n        }\n        const oldHass = changedProps.get(\"hass\");\n        if (!oldHass || !this._configEntities) {\n          return true;\n        }\n        if (oldHass.themes.darkMode !== this.hass.themes.darkMode) {\n          return true;\n        }\n        if (changedProps.has(\"_stateHistory\")) {\n          return true;\n        }\n        if ((_this$_config2 = this._config) !== null && _this$_config2 !== void 0 && _this$_config2.geo_location_sources) {\n          if (oldHass.states !== this.hass.states) {\n            return true;\n          }\n        }\n        return (_this$_config3 = this._config) !== null && _this$_config3 !== void 0 && _this$_config3.entities ? (0,_common_has_changed__WEBPACK_IMPORTED_MODULE_16__.hasConfigOrEntitiesChanged)(this, changedProps) : (0,_common_has_changed__WEBPACK_IMPORTED_MODULE_16__.hasConfigChanged)(this, changedProps);\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        var _this$_configEntities;\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiMapCard.prototype), \"connectedCallback\", this).call(this);\n        if (this.hasUpdated && (_this$_configEntities = this._configEntities) !== null && _this$_configEntities !== void 0 && _this$_configEntities.length) {\n          this._subscribeHistory();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiMapCard.prototype), \"disconnectedCallback\", this).call(this);\n        this._unsubscribeHistory();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_subscribeHistory\",\n      value: function _subscribeHistory() {\n        var _this$_config$hours_t, _this$_config4, _ref;\n        if (!(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_6__.isComponentLoaded)(this.hass, \"history\") || this._subscribed || !((_this$_config$hours_t = (_this$_config4 = this._config) === null || _this$_config4 === void 0 ? void 0 : _this$_config4.hours_to_show) !== null && _this$_config$hours_t !== void 0 ? _this$_config$hours_t : DEFAULT_HOURS_TO_SHOW)) {\n          return;\n        }\n        this._subscribed = (0,_data_history__WEBPACK_IMPORTED_MODULE_15__.subscribeHistoryStatesTimeWindow)(this.hass, combinedHistory => {\n          if (!this._subscribed) {\n            // Message came in before we had a chance to unload\n            return;\n          }\n          this._stateHistory = combinedHistory;\n        }, (_ref = this._config.hours_to_show) !== null && _ref !== void 0 ? _ref : DEFAULT_HOURS_TO_SHOW, this._configEntities, false, false, false).catch(err => {\n          this._subscribed = undefined;\n          this._error = err;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribeHistory\",\n      value: function _unsubscribeHistory() {\n        if (this._subscribed) {\n          this._subscribed.then(unsub => unsub === null || unsub === void 0 ? void 0 : unsub());\n          this._subscribed = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        var _this$_configEntities2;\n        if ((_this$_configEntities2 = this._configEntities) !== null && _this$_configEntities2 !== void 0 && _this$_configEntities2.length) {\n          if (!this._subscribed || changedProps.has(\"_config\")) {\n            this._unsubscribeHistory();\n            this._subscribeHistory();\n          }\n        } else {\n          this._unsubscribeHistory();\n        }\n        if (changedProps.has(\"_config\")) {\n          this._computePadding();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_computePadding\",\n      value: function _computePadding() {\n        const root = this.shadowRoot.getElementById(\"root\");\n        if (!this._config || this.isPanel || !root) {\n          return;\n        }\n        if (!this._config.aspect_ratio) {\n          root.style.paddingBottom = \"100%\";\n          return;\n        }\n        root.style.height = \"auto\";\n        const ratio = (0,_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(this._config.aspect_ratio);\n        root.style.paddingBottom = ratio && ratio.w > 0 && ratio.h > 0 ? `${(100 * ratio.h / ratio.w).toFixed(2)}%` : root.style.paddingBottom = \"100%\";\n      }\n    }, {\n      kind: \"method\",\n      key: \"_fitMap\",\n      value: function _fitMap() {\n        var _this$_map;\n        (_this$_map = this._map) === null || _this$_map === void 0 ? void 0 : _this$_map.fitMap();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getColor\",\n      value: function _getColor(entityId) {\n        let color = this._colorDict[entityId];\n        if (color) {\n          return color;\n        }\n        color = (0,_common_color_colors__WEBPACK_IMPORTED_MODULE_5__.getColorByIndex)(this._colorIndex);\n        this._colorIndex++;\n        this._colorDict[entityId] = color;\n        return color;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getEntities\",\n      value() {\n        return (0,memoize_one__WEBPACK_IMPORTED_MODULE_19__[\"default\"])((states, config, configEntities) => {\n          if (!states || !config) {\n            return undefined;\n          }\n          let entities = configEntities || [];\n          if (config.geo_location_sources) {\n            const geoEntities = [];\n            // Calculate visible geo location sources\n            const includesAll = config.geo_location_sources.includes(\"all\");\n            for (const stateObj of Object.values(states)) {\n              if ((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__.computeDomain)(stateObj.entity_id) === \"geo_location\" && (includesAll || config.geo_location_sources.includes(stateObj.attributes.source))) {\n                geoEntities.push(stateObj.entity_id);\n              }\n            }\n            entities = [...entities, ...geoEntities];\n          }\n          return entities.map(entity => ({\n            entity_id: entity,\n            color: this._getColor(entity)\n          }));\n        });\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getHistoryPaths\",\n      value() {\n        return (0,memoize_one__WEBPACK_IMPORTED_MODULE_19__[\"default\"])((config, history) => {\n          var _config$hours_to_show;\n          if (!history || !((_config$hours_to_show = config.hours_to_show) !== null && _config$hours_to_show !== void 0 ? _config$hours_to_show : DEFAULT_HOURS_TO_SHOW)) {\n            return undefined;\n          }\n          const paths = [];\n          for (const entityId of Object.keys(history)) {\n            if ((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__.computeDomain)(entityId) === \"zone\") {\n              continue;\n            }\n            const entityStates = history[entityId];\n            if (!(entityStates !== null && entityStates !== void 0 && entityStates.length)) {\n              continue;\n            }\n            // filter location data from states and remove all invalid locations\n            const points = [];\n            for (const entityState of entityStates) {\n              var _ref2;\n              const latitude = entityState.a.latitude;\n              const longitude = entityState.a.longitude;\n              if (!latitude || !longitude) {\n                continue;\n              }\n              const p = {};\n              p.point = [latitude, longitude];\n              const t = new Date(entityState.lu * 1000);\n              if (((_ref2 = config.hours_to_show) !== null && _ref2 !== void 0 ? _ref2 : DEFAULT_HOURS_TO_SHOW) > 144) {\n                // if showing > 6 days in the history trail, show the full\n                // date and time\n                p.tooltip = (0,_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__.formatDateTime)(t, this.hass.locale);\n              } else if ((0,date_fns__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(t)) {\n                p.tooltip = (0,_common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__.formatTimeWithSeconds)(t, this.hass.locale);\n              } else {\n                p.tooltip = (0,_common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__.formatTimeWeekday)(t, this.hass.locale);\n              }\n              points.push(p);\n            }\n            paths.push({\n              points,\n              color: this._getColor(entityId),\n              gradualOpacity: 0.8\n            });\n          }\n          return paths;\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_3__.css`\n      ha-card {\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: inherit;\n      }\n\n      ha-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 3px;\n        outline: none;\n      }\n\n      #root {\n        position: relative;\n        height: 100%;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_3__.LitElement);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1tYXAtY2FyZC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUdBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFJQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBeVhBO0FBQUE7QUFBQTtBQXpYQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLW1hcC1jYXJkLnRzPzQxMDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWRpSW1hZ2VGaWx0ZXJDZW50ZXJGb2N1cyB9IGZyb20gXCJAbWRpL2pzXCI7XG5pbXBvcnQgeyBpc1RvZGF5IH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgeyBIYXNzRW50aXRpZXMgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBMYXRMbmdUdXBsZSB9IGZyb20gXCJsZWFmbGV0XCI7XG5pbXBvcnQge1xuICBjc3MsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgbm90aGluZyxcbn0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHF1ZXJ5LCBzdGF0ZSB9IGZyb20gXCJsaXQvZGVjb3JhdG9yc1wiO1xuaW1wb3J0IG1lbW9pemVPbmUgZnJvbSBcIm1lbW9pemUtb25lXCI7XG5pbXBvcnQgeyBnZXRDb2xvckJ5SW5kZXggfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbG9yL2NvbG9yc1wiO1xuaW1wb3J0IHsgaXNDb21wb25lbnRMb2FkZWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbmZpZy9pc19jb21wb25lbnRfbG9hZGVkXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZGF0ZXRpbWUvZm9ybWF0X2RhdGVfdGltZVwiO1xuaW1wb3J0IHtcbiAgZm9ybWF0VGltZVdpdGhTZWNvbmRzLFxuICBmb3JtYXRUaW1lV2Vla2RheSxcbn0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfdGltZVwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgcGFyc2VBc3BlY3RSYXRpbyBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWNhcmRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtYWxlcnRcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtaWNvbi1idXR0b25cIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbWFwL2hhLW1hcFwiO1xuaW1wb3J0IHR5cGUge1xuICBIYU1hcCxcbiAgSGFNYXBQYXRoUG9pbnQsXG4gIEhhTWFwUGF0aHMsXG59IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL21hcC9oYS1tYXBcIjtcbmltcG9ydCB7XG4gIEhpc3RvcnlTdGF0ZXMsXG4gIHN1YnNjcmliZUhpc3RvcnlTdGF0ZXNUaW1lV2luZG93LFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9oaXN0b3J5XCI7XG5pbXBvcnQge1xuICBoYXNDb25maWdDaGFuZ2VkLFxuICBoYXNDb25maWdPckVudGl0aWVzQ2hhbmdlZCxcbn0gZnJvbSBcIi4uL2NvbW1vbi9oYXMtY2hhbmdlZFwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmluZEVudGl0aWVzIH0gZnJvbSBcIi4uL2NvbW1vbi9maW5kLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBwcm9jZXNzQ29uZmlnRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgTWFwQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0hPVVJTX1RPX1NIT1cgPSAwO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfWk9PTSA9IDE0O1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1tYXAtY2FyZFwiKVxuY2xhc3MgSHVpTWFwQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBoYXNzITogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCByZWZsZWN0OiB0cnVlIH0pXG4gIHB1YmxpYyBpc1BhbmVsID0gZmFsc2U7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfc3RhdGVIaXN0b3J5PzogSGlzdG9yeVN0YXRlcztcblxuICBAc3RhdGUoKVxuICBwcml2YXRlIF9jb25maWc/OiBNYXBDYXJkQ29uZmlnO1xuXG4gIEBxdWVyeShcImhhLW1hcFwiKVxuICBwcml2YXRlIF9tYXA/OiBIYU1hcDtcblxuICBwcml2YXRlIF9jb25maWdFbnRpdGllcz86IHN0cmluZ1tdO1xuXG4gIHByaXZhdGUgX2NvbG9yRGljdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gIHByaXZhdGUgX2NvbG9ySW5kZXggPSAwO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2Vycm9yPzogeyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZyB9O1xuXG4gIHByaXZhdGUgX3N1YnNjcmliZWQ/OiBQcm9taXNlPCgoKSA9PiBQcm9taXNlPHZvaWQ+KSB8IHZvaWQ+O1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBNYXBDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGluIGNhcmQgY29uZmlndXJhdGlvbi5cIik7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuZW50aXRpZXM/Lmxlbmd0aCAmJiAhY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRWl0aGVyIGVudGl0aWVzIG9yIGdlb19sb2NhdGlvbl9zb3VyY2VzIG11c3QgYmUgc3BlY2lmaWVkXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChjb25maWcuZW50aXRpZXMgJiYgIUFycmF5LmlzQXJyYXkoY29uZmlnLmVudGl0aWVzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXRpZXMgbmVlZCB0byBiZSBhbiBhcnJheVwiKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzICYmXG4gICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuZ2VvX2xvY2F0aW9uX3NvdXJjZXMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbWV0ZXIgZ2VvX2xvY2F0aW9uX3NvdXJjZXMgbmVlZHMgdG8gYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gKFxuICAgICAgY29uZmlnLmVudGl0aWVzXG4gICAgICAgID8gcHJvY2Vzc0NvbmZpZ0VudGl0aWVzPEVudGl0eUNvbmZpZz4oY29uZmlnLmVudGl0aWVzKVxuICAgICAgICA6IFtdXG4gICAgKS5tYXAoKGVudGl0eSkgPT4gZW50aXR5LmVudGl0eSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2FyZFNpemUoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX2NvbmZpZz8uYXNwZWN0X3JhdGlvKSB7XG4gICAgICByZXR1cm4gNztcbiAgICB9XG5cbiAgICBjb25zdCByYXRpbyA9IHBhcnNlQXNwZWN0UmF0aW8odGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpbyk7XG4gICAgY29uc3QgYXIgPVxuICAgICAgcmF0aW8gJiYgcmF0aW8udyA+IDAgJiYgcmF0aW8uaCA+IDBcbiAgICAgICAgPyBgJHsoKDEwMCAqIHJhdGlvLmgpIC8gcmF0aW8udykudG9GaXhlZCgyKX1gXG4gICAgICAgIDogXCIxMDBcIjtcblxuICAgIHJldHVybiAxICsgTWF0aC5mbG9vcihOdW1iZXIoYXIpIC8gMjUpIHx8IDM7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKSB7XG4gICAgYXdhaXQgaW1wb3J0KFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktbWFwLWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLW1hcC1jYXJkLWVkaXRvclwiKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3R1YkNvbmZpZyhcbiAgICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICAgIGVudGl0aWVzOiBzdHJpbmdbXSxcbiAgICBlbnRpdGllc0ZhbGxiYWNrOiBzdHJpbmdbXVxuICApOiBNYXBDYXJkQ29uZmlnIHtcbiAgICBjb25zdCBpbmNsdWRlRG9tYWlucyA9IFtcImRldmljZV90cmFja2VyXCJdO1xuICAgIGNvbnN0IG1heEVudGl0aWVzID0gMjtcbiAgICBjb25zdCBmb3VuZEVudGl0aWVzID0gZmluZEVudGl0aWVzKFxuICAgICAgaGFzcyxcbiAgICAgIG1heEVudGl0aWVzLFxuICAgICAgZW50aXRpZXMsXG4gICAgICBlbnRpdGllc0ZhbGxiYWNrLFxuICAgICAgaW5jbHVkZURvbWFpbnNcbiAgICApO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogXCJtYXBcIiwgZW50aXRpZXM6IGZvdW5kRW50aXRpZXMgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBub3RoaW5nO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgIHJldHVybiBodG1sYDxoYS1hbGVydCBhbGVydC10eXBlPVwiZXJyb3JcIj5cbiAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLm1hcC5lcnJvclwiKX06ICR7dGhpcy5fZXJyb3IubWVzc2FnZX1cbiAgICAgICAgKCR7dGhpcy5fZXJyb3IuY29kZX0pXG4gICAgICA8L2hhLWFsZXJ0PmA7XG4gICAgfVxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQgaWQ9XCJjYXJkXCIgLmhlYWRlcj0ke3RoaXMuX2NvbmZpZy50aXRsZX0+XG4gICAgICAgIDxkaXYgaWQ9XCJyb290XCI+XG4gICAgICAgICAgPGhhLW1hcFxuICAgICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgICAuZW50aXRpZXM9JHt0aGlzLl9nZXRFbnRpdGllcyhcbiAgICAgICAgICAgICAgdGhpcy5oYXNzLnN0YXRlcyxcbiAgICAgICAgICAgICAgdGhpcy5fY29uZmlnLFxuICAgICAgICAgICAgICB0aGlzLl9jb25maWdFbnRpdGllc1xuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIC56b29tPSR7dGhpcy5fY29uZmlnLmRlZmF1bHRfem9vbSA/PyBERUZBVUxUX1pPT019XG4gICAgICAgICAgICAucGF0aHM9JHt0aGlzLl9nZXRIaXN0b3J5UGF0aHModGhpcy5fY29uZmlnLCB0aGlzLl9zdGF0ZUhpc3RvcnkpfVxuICAgICAgICAgICAgLmF1dG9GaXQ9JHt0aGlzLl9jb25maWcuYXV0b19maXR9XG4gICAgICAgICAgICAuZGFya01vZGU9JHt0aGlzLl9jb25maWcuZGFya19tb2RlfVxuICAgICAgICAgICAgaW50ZXJhY3RpdmVab25lc1xuICAgICAgICAgICAgcmVuZGVyUGFzc2l2ZVxuICAgICAgICAgID48L2hhLW1hcD5cbiAgICAgICAgICA8aGEtaWNvbi1idXR0b25cbiAgICAgICAgICAgIC5sYWJlbD0ke3RoaXMuaGFzcyEubG9jYWxpemUoXG4gICAgICAgICAgICAgIFwidWkucGFuZWwubG92ZWxhY2UuY2FyZHMubWFwLnJlc2V0X2ZvY3VzXCJcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICAucGF0aD0ke21kaUltYWdlRmlsdGVyQ2VudGVyRm9jdXN9XG4gICAgICAgICAgICBAY2xpY2s9JHt0aGlzLl9maXRNYXB9XG4gICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgID48L2hhLWljb24tYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGEtY2FyZD5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgaWYgKCFjaGFuZ2VkUHJvcHMuaGFzKFwiaGFzc1wiKSB8fCBjaGFuZ2VkUHJvcHMuc2l6ZSA+IDEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKCFvbGRIYXNzIHx8ICF0aGlzLl9jb25maWdFbnRpdGllcykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKG9sZEhhc3MudGhlbWVzLmRhcmtNb2RlICE9PSB0aGlzLmhhc3MudGhlbWVzLmRhcmtNb2RlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9zdGF0ZUhpc3RvcnlcIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jb25maWc/Lmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICBpZiAob2xkSGFzcy5zdGF0ZXMgIT09IHRoaXMuaGFzcy5zdGF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZz8uZW50aXRpZXNcbiAgICAgID8gaGFzQ29uZmlnT3JFbnRpdGllc0NoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKVxuICAgICAgOiBoYXNDb25maWdDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5oYXNVcGRhdGVkICYmIHRoaXMuX2NvbmZpZ0VudGl0aWVzPy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZUhpc3RvcnkoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl91bnN1YnNjcmliZUhpc3RvcnkoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3N1YnNjcmliZUhpc3RvcnkoKSB7XG4gICAgaWYgKFxuICAgICAgIWlzQ29tcG9uZW50TG9hZGVkKHRoaXMuaGFzcyEsIFwiaGlzdG9yeVwiKSB8fFxuICAgICAgdGhpcy5fc3Vic2NyaWJlZCB8fFxuICAgICAgISh0aGlzLl9jb25maWc/LmhvdXJzX3RvX3Nob3cgPz8gREVGQVVMVF9IT1VSU19UT19TSE9XKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zdWJzY3JpYmVkID0gc3Vic2NyaWJlSGlzdG9yeVN0YXRlc1RpbWVXaW5kb3coXG4gICAgICB0aGlzLmhhc3MhLFxuICAgICAgKGNvbWJpbmVkSGlzdG9yeSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX3N1YnNjcmliZWQpIHtcbiAgICAgICAgICAvLyBNZXNzYWdlIGNhbWUgaW4gYmVmb3JlIHdlIGhhZCBhIGNoYW5jZSB0byB1bmxvYWRcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhdGVIaXN0b3J5ID0gY29tYmluZWRIaXN0b3J5O1xuICAgICAgfSxcbiAgICAgIHRoaXMuX2NvbmZpZyEuaG91cnNfdG9fc2hvdyEgPz8gREVGQVVMVF9IT1VSU19UT19TSE9XLFxuICAgICAgdGhpcy5fY29uZmlnRW50aXRpZXMhLFxuICAgICAgZmFsc2UsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlXG4gICAgKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICB0aGlzLl9zdWJzY3JpYmVkID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fZXJyb3IgPSBlcnI7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF91bnN1YnNjcmliZUhpc3RvcnkoKSB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmliZWQpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZWQudGhlbigodW5zdWIpID0+IHVuc3ViPy4oKSk7XG4gICAgICB0aGlzLl9zdWJzY3JpYmVkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY29uZmlnRW50aXRpZXM/Lmxlbmd0aCkge1xuICAgICAgaWYgKCF0aGlzLl9zdWJzY3JpYmVkIHx8IGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpKSB7XG4gICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlSGlzdG9yeSgpO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVIaXN0b3J5KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlSGlzdG9yeSgpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9jb25maWdcIikpIHtcbiAgICAgIHRoaXMuX2NvbXB1dGVQYWRkaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZVBhZGRpbmcoKTogdm9pZCB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc2hhZG93Um9vdCEuZ2V0RWxlbWVudEJ5SWQoXCJyb290XCIpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8IHRoaXMuaXNQYW5lbCB8fCAhcm9vdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fY29uZmlnLmFzcGVjdF9yYXRpbykge1xuICAgICAgcm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCIxMDAlXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcm9vdC5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIjtcblxuICAgIGNvbnN0IHJhdGlvID0gcGFyc2VBc3BlY3RSYXRpbyh0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvKTtcblxuICAgIHJvb3Quc3R5bGUucGFkZGluZ0JvdHRvbSA9XG4gICAgICByYXRpbyAmJiByYXRpby53ID4gMCAmJiByYXRpby5oID4gMFxuICAgICAgICA/IGAkeygoMTAwICogcmF0aW8uaCkgLyByYXRpby53KS50b0ZpeGVkKDIpfSVgXG4gICAgICAgIDogKHJvb3Quc3R5bGUucGFkZGluZ0JvdHRvbSA9IFwiMTAwJVwiKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZpdE1hcCgpIHtcbiAgICB0aGlzLl9tYXA/LmZpdE1hcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0Q29sb3IoZW50aXR5SWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IGNvbG9yID0gdGhpcy5fY29sb3JEaWN0W2VudGl0eUlkXTtcbiAgICBpZiAoY29sb3IpIHtcbiAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gICAgY29sb3IgPSBnZXRDb2xvckJ5SW5kZXgodGhpcy5fY29sb3JJbmRleCk7XG4gICAgdGhpcy5fY29sb3JJbmRleCsrO1xuICAgIHRoaXMuX2NvbG9yRGljdFtlbnRpdHlJZF0gPSBjb2xvcjtcbiAgICByZXR1cm4gY29sb3I7XG4gIH1cblxuICBwcml2YXRlIF9nZXRFbnRpdGllcyA9IG1lbW9pemVPbmUoXG4gICAgKFxuICAgICAgc3RhdGVzOiBIYXNzRW50aXRpZXMsXG4gICAgICBjb25maWc6IE1hcENhcmRDb25maWcsXG4gICAgICBjb25maWdFbnRpdGllcz86IHN0cmluZ1tdXG4gICAgKSA9PiB7XG4gICAgICBpZiAoIXN0YXRlcyB8fCAhY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGxldCBlbnRpdGllcyA9IGNvbmZpZ0VudGl0aWVzIHx8IFtdO1xuXG4gICAgICBpZiAoY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICAgIGNvbnN0IGdlb0VudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAvLyBDYWxjdWxhdGUgdmlzaWJsZSBnZW8gbG9jYXRpb24gc291cmNlc1xuICAgICAgICBjb25zdCBpbmNsdWRlc0FsbCA9IGNvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcy5pbmNsdWRlcyhcImFsbFwiKTtcbiAgICAgICAgZm9yIChjb25zdCBzdGF0ZU9iaiBvZiBPYmplY3QudmFsdWVzKHN0YXRlcykpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb21wdXRlRG9tYWluKHN0YXRlT2JqLmVudGl0eV9pZCkgPT09IFwiZ2VvX2xvY2F0aW9uXCIgJiZcbiAgICAgICAgICAgIChpbmNsdWRlc0FsbCB8fFxuICAgICAgICAgICAgICBjb25maWcuZ2VvX2xvY2F0aW9uX3NvdXJjZXMuaW5jbHVkZXMoc3RhdGVPYmouYXR0cmlidXRlcy5zb3VyY2UpKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZ2VvRW50aXRpZXMucHVzaChzdGF0ZU9iai5lbnRpdHlfaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVudGl0aWVzID0gWy4uLmVudGl0aWVzLCAuLi5nZW9FbnRpdGllc107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbnRpdGllcy5tYXAoKGVudGl0eSkgPT4gKHtcbiAgICAgICAgZW50aXR5X2lkOiBlbnRpdHksXG4gICAgICAgIGNvbG9yOiB0aGlzLl9nZXRDb2xvcihlbnRpdHkpLFxuICAgICAgfSkpO1xuICAgIH1cbiAgKTtcblxuICBwcml2YXRlIF9nZXRIaXN0b3J5UGF0aHMgPSBtZW1vaXplT25lKFxuICAgIChcbiAgICAgIGNvbmZpZzogTWFwQ2FyZENvbmZpZyxcbiAgICAgIGhpc3Rvcnk/OiBIaXN0b3J5U3RhdGVzXG4gICAgKTogSGFNYXBQYXRoc1tdIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGlmICghaGlzdG9yeSB8fCAhKGNvbmZpZy5ob3Vyc190b19zaG93ID8/IERFRkFVTFRfSE9VUlNfVE9fU0hPVykpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGF0aHM6IEhhTWFwUGF0aHNbXSA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIE9iamVjdC5rZXlzKGhpc3RvcnkpKSB7XG4gICAgICAgIGlmIChjb21wdXRlRG9tYWluKGVudGl0eUlkKSA9PT0gXCJ6b25lXCIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbnRpdHlTdGF0ZXMgPSBoaXN0b3J5W2VudGl0eUlkXTtcbiAgICAgICAgaWYgKCFlbnRpdHlTdGF0ZXM/Lmxlbmd0aCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbHRlciBsb2NhdGlvbiBkYXRhIGZyb20gc3RhdGVzIGFuZCByZW1vdmUgYWxsIGludmFsaWQgbG9jYXRpb25zXG4gICAgICAgIGNvbnN0IHBvaW50czogSGFNYXBQYXRoUG9pbnRbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eVN0YXRlIG9mIGVudGl0eVN0YXRlcykge1xuICAgICAgICAgIGNvbnN0IGxhdGl0dWRlID0gZW50aXR5U3RhdGUuYS5sYXRpdHVkZTtcbiAgICAgICAgICBjb25zdCBsb25naXR1ZGUgPSBlbnRpdHlTdGF0ZS5hLmxvbmdpdHVkZTtcbiAgICAgICAgICBpZiAoIWxhdGl0dWRlIHx8ICFsb25naXR1ZGUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwID0ge30gYXMgSGFNYXBQYXRoUG9pbnQ7XG4gICAgICAgICAgcC5wb2ludCA9IFtsYXRpdHVkZSwgbG9uZ2l0dWRlXSBhcyBMYXRMbmdUdXBsZTtcbiAgICAgICAgICBjb25zdCB0ID0gbmV3IERhdGUoZW50aXR5U3RhdGUubHUgKiAxMDAwKTtcbiAgICAgICAgICBpZiAoKGNvbmZpZy5ob3Vyc190b19zaG93ISA/PyBERUZBVUxUX0hPVVJTX1RPX1NIT1cpID4gMTQ0KSB7XG4gICAgICAgICAgICAvLyBpZiBzaG93aW5nID4gNiBkYXlzIGluIHRoZSBoaXN0b3J5IHRyYWlsLCBzaG93IHRoZSBmdWxsXG4gICAgICAgICAgICAvLyBkYXRlIGFuZCB0aW1lXG4gICAgICAgICAgICBwLnRvb2x0aXAgPSBmb3JtYXREYXRlVGltZSh0LCB0aGlzLmhhc3MubG9jYWxlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzVG9kYXkodCkpIHtcbiAgICAgICAgICAgIHAudG9vbHRpcCA9IGZvcm1hdFRpbWVXaXRoU2Vjb25kcyh0LCB0aGlzLmhhc3MubG9jYWxlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcC50b29sdGlwID0gZm9ybWF0VGltZVdlZWtkYXkodCwgdGhpcy5oYXNzLmxvY2FsZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBvaW50cy5wdXNoKHApO1xuICAgICAgICB9XG4gICAgICAgIHBhdGhzLnB1c2goe1xuICAgICAgICAgIHBvaW50cyxcbiAgICAgICAgICBjb2xvcjogdGhpcy5fZ2V0Q29sb3IoZW50aXR5SWQpLFxuICAgICAgICAgIGdyYWR1YWxPcGFjaXR5OiAwLjgsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhdGhzO1xuICAgIH1cbiAgKTtcblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHRHcm91cCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICBoYS1tYXAge1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiBpbmhlcml0O1xuICAgICAgfVxuXG4gICAgICBoYS1pY29uLWJ1dHRvbiB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA3NXB4O1xuICAgICAgICBsZWZ0OiAzcHg7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgICNyb290IHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLW1hcC1jYXJkXCI6IEh1aU1hcENhcmQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/panels/lovelace/cards/hui-map-card.ts\n");

/***/ })

}]);