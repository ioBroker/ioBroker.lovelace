export const __webpack_ids__=["79783"];export const __webpack_modules__={85746:function(e,t,n){n.d(t,{V:()=>s});var i=n(87733);const s=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,i.f)(e):e.toLocaleLowerCase(t)},6280:function(e,t,n){n.a(e,(async function(e,i){try{n.d(t,{Nu:()=>P,V3:()=>H,Vk:()=>_,YA:()=>$,xS:()=>m,zP:()=>j});n(92745),n(84283),n(9359),n(56475),n(1331),n(31526),n(70104),n(52924),n(92519),n(42179),n(89256),n(24931),n(88463),n(57449),n(19814);var s=n(73850),a=n(97547),o=n(47194),r=e([a]);a=(r.then?(await r)():r)[0];const c=["climate","humidifier","water_heater"],l=["climate","humidifier","input_datetime","thermostat","water_heater","person","device_tracker"],u=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],d=(e,t)=>!e.states[t]||l.includes((0,s.M)(t)),_=(e,t,n,i,s)=>{const a={type:"history/stream",entity_ids:s,start_time:n.toISOString(),end_time:i.toISOString(),minimal_response:!0,no_attributes:!s.some((t=>d(e,t)))},o=new h(e);return e.connection.subscribeMessage((e=>t(o.processMessage(e))),a)};class h{constructor(e,t){this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=e,this.hoursToShow=t,this.combinedHistory={}}processMessage(e){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=e.states,this.combinedHistory;if(!Object.keys(e.states).length)return this.combinedHistory;const t=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,n={};for(const e of Object.keys(this.combinedHistory))n[e]=[];for(const t of Object.keys(e.states))n[t]=[];for(const i of Object.keys(n)){if(i in this.combinedHistory&&i in e.states){const t=this.combinedHistory[i],s=t[t.length-1];n[i]=t.concat(e.states[i]),e.states[i][0].lu<s.lu&&(n[i]=n[i].sort(((e,t)=>e.lu-t.lu)))}else i in this.combinedHistory?n[i]=this.combinedHistory[i]:n[i]=e.states[i];if(t&&i in this.combinedHistory){const e=n[i].filter((e=>e.lu<t));if(!e.length)continue;if(n[i]=n[i].filter((e=>e.lu>=t)),n[i].length&&n[i][0].lu===t)continue;const s=e[e.length-1];s.lu=t,n[i].unshift(s)}}return this.combinedHistory=n,this.combinedHistory}}const m=(e,t,n,i,s,a=!0,o=!0)=>{const r={type:"history/stream",entity_ids:i,start_time:new Date((new Date).getTime()-3600*n*1e3).toISOString(),minimal_response:a,significant_changes_only:o,no_attributes:s??!i.some((t=>d(e,t)))},c=new h(e,n);return e.connection.subscribeMessage((e=>t(c.processMessage(e))),r)},b=(e,t)=>e.state===t.state&&(!e.attributes||!t.attributes||u.every((n=>e.attributes[n]===t.attributes[n]))),g=(e,t,n,i,s,r,c)=>{const l=[],u=r[0];for(const o of r){if(l.length>0&&o.s===l[l.length-1].state)continue;const r={};c?.attributes.device_class&&(r.device_class=c?.attributes.device_class),l.push({state_localize:(0,a.c)(e,t,[],n,i[s],s,{...o.a||u.a,...r},o.s),state:o.s,last_changed:1e3*(o.lc?o.lc:o.lu)})}return{name:(0,o.a)(s,c?.attributes||u.a),entity_id:s,data:l}},f=(e,t,n,i)=>{const a=[];return Object.keys(n).forEach((e=>{const t=n[e],r=t[0],l=(0,s.M)(e),d=[];for(const e of t){let t;if(c.includes(l)){t={state:e.s,last_changed:1e3*e.lu,attributes:{}};for(const n of u)n in e.a&&(t.attributes[n]=e.a[n])}else t={state:e.s,last_changed:1e3*(e.lc?e.lc:e.lu),attributes:{}};d.length>1&&b(t,d[d.length-1])&&b(t,d[d.length-2])||d.push(t)}const _=e in i?i[e].attributes:"friendly_name"in r.a?r.a:void 0;a.push({domain:l,name:(0,o.a)(e,_||{}),entity_id:e,states:d})})),{unit:e,device_class:t,identifier:Object.keys(n).join(""),data:a}},p=["counter","input_number","number"],y=e=>p.includes(e),v=e=>"unit_of_measurement"in e||"state_class"in e,w=(e,t)=>null!=e.attributes.device_class&&t.includes(e.attributes.device_class),k=" ",$=(e,t,n,i,s=!1)=>{const a={};n.forEach((e=>{e in t&&(a[e]=t[e])}));const o={};Object.entries(a).forEach((([e,t])=>{const n=t.map((e=>({s:null!=e.mean?e.mean.toString():e.state.toString(),lc:e.start/1e3,a:{},lu:e.start/1e3})));o[e]=n}));const r=P(e,o,[],e.localize,i,s,!0);return(r?.line||[]).forEach((e=>{e.data.forEach((e=>{e.statistics=e.states,e.states=[]}))})),r},P=(e,t,n,i,a,o=!1,r=!1)=>{const c={},l=[],u={};if(new Set([...n,...Object.keys(t)]).forEach((n=>{n in t?u[n]=t[n]:e.states[n]&&(u[n]=[{s:e.states[n].state,a:e.states[n].attributes,lu:new Date(e.states[n].last_updated).getTime()/1e3}])})),!u)return{line:[],timeline:[]};Object.keys(u).forEach((t=>{const n=u[t];if(0===n.length)return;const d=(0,s.M)(t),_=t in e.states?e.states[t]:void 0,h=_||y(d)?void 0:n.find((e=>e.a&&v(e.a)));let m;m=j(d,_,h,a,r)?_?.attributes.unit_of_measurement||h?.a.unit_of_measurement||k:{zone:i("ui.dialogs.more_info_control.zone.graph_unit"),climate:e.config.unit_system.temperature,humidifier:"%",water_heater:e.config.unit_system.temperature}[d];const b=S(m,{climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[d]||(_?.attributes||h?.a)?.device_class,o);m?b&&b in c&&t in c[b]?c[b][t].push(...n):b&&(b in c||(c[b]={}),c[b][t]=n):l.push(g(i,e.locale,e.config,e.entities,t,n,_))}));return{line:Object.keys(c).map((t=>{const n=t.split("_"),i=n[0],s=n[1]||void 0;return f(i,s,c[t],e.states)})),timeline:l}},S=(e,t,n)=>n?`${e}_${t||""}`:e,j=(e,t,n,i,s=!1)=>s||y(e)||null!=t&&v(t.attributes)||null!=t&&"sensor"===e&&w(t,i)||null!=n,H=(e,t,n=!0)=>{if(!t)return e;const i={...e,line:[]},s={};for(const t of e.line){const e=S(t.unit,t.device_class,n);e&&(s[e]={historyItem:t})}for(const e of t.line){const t=S(e.unit,e.device_class,n);t&&(t in s?s[t].ltsItem=e:s[t]={ltsItem:e})}for(const{historyItem:e,ltsItem:t}of Object.values(s)){if(!e||!t){i.line.push(e||t);continue}const n={...e,data:[]},s=new Set([...e.data.map((e=>e.entity_id)),...t.data.map((e=>e.entity_id))]);for(const i of s){const s=e.data.find((e=>e.entity_id===i)),a=t.data.find((e=>e.entity_id===i));if(!s||!a){n.data.push(s||a);continue}const o=s.states[0]?.last_changed||a.statistics[a.statistics.length-1].last_changed+1,r=[];for(const e of a.statistics){if(e.last_changed>=o)break;r.push(e)}n.data.push(0===r.length?s:{...s,statistics:r})}i.line.push(n)}return i};i()}catch(e){i(e)}}))},25433:function(e,t,n){n.d(t,{MY:()=>f,Yc:()=>h,hb:()=>b,jV:()=>l,o1:()=>m,ri:()=>g,sS:()=>d});var i=n(73358),s=n(73850),a=n(59847),o=n(85746),r=n(96194);const c="ui.components.logbook.messages",l=["counter","proximity","sensor","zone"],u={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"ioBroker stopping",triggered_by_homeassistant_starting:"ioBroker starting"},d=async(e,t,n)=>_(e,t,void 0,void 0,n),_=(e,t,n,i,s,a)=>{if((i||a)&&(!i||0===i.length)&&(!a||0===a.length))return Promise.resolve([]);const o={type:"logbook/get_events",start_time:t};return n&&(o.end_time=n),i?.length&&(o.entity_ids=i),a?.length&&(o.device_ids=a),s&&(o.context_id=s),e.callWS(o)},h=(e,t,n,i,s,a)=>{if((s||a)&&(!s||0===s.length)&&(!a||0===a.length))return Promise.reject("No entities or devices");const o={type:"logbook/event_stream",start_time:n,end_time:i};return s?.length&&(o.entity_ids=s),a?.length&&(o.device_ids=a),e.connection.subscribeMessage((e=>t(e)),o)},m=(e,t)=>({entity_id:e.entity_id,state:t,attributes:{device_class:e?.attributes.device_class,source_type:e?.attributes.source_type,has_date:e?.attributes.has_date,has_time:e?.attributes.has_time,entity_picture_local:i.iY.has((0,s.M)(e.entity_id))?void 0:e?.attributes.entity_picture_local,entity_picture:i.iY.has((0,s.M)(e.entity_id))?void 0:e?.attributes.entity_picture}}),b=(e,t)=>{for(const n of Object.keys(u)){const i=u[n];if(t.startsWith(i))return t.replace(i,`${e(`ui.components.logbook.${n}`)}`)}return t},g=(e,t,n,s,a)=>{switch(a){case"device_tracker":case"person":return"not_home"===n?t(`${c}.was_away`):"home"===n?t(`${c}.was_at_home`):t(`${c}.was_at_state`,{state:n});case"sun":return t("above_horizon"===n?`${c}.rose`:`${c}.set`);case"binary_sensor":{const a=n===i.uo,r=n===i.lC,l=s.attributes.device_class;if(l&&(a||r))return t(`${c}.${a?"detected_device_classes":"cleared_device_classes"}.${l}`,{device_class:(0,o.V)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)})||t(`${c}.${a?"detected_device_class":"cleared_device_class"}`,{device_class:(0,o.V)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)});break}case"cover":switch(n){case"open":return t(`${c}.was_opened`);case"opening":return t(`${c}.is_opening`);case"closing":return t(`${c}.is_closing`);case"closed":return t(`${c}.was_closed`)}break;case"event":return t(`${c}.detected_event_no_type`);case"lock":switch(n){case"unlocked":return t(`${c}.was_unlocked`);case"locking":return t(`${c}.is_locking`);case"unlocking":return t(`${c}.is_unlocking`);case"opening":return t(`${c}.is_opening`);case"open":return t(`${c}.is_opened`);case"locked":return t(`${c}.was_locked`);case"jammed":return t(`${c}.is_jammed`)}}return n===i.uo?t(`${c}.turned_on`):n===i.lC?t(`${c}.turned_off`):n===r.lz?t(`${c}.became_unknown`):n===r.nZ?t(`${c}.became_unavailable`):e.localize(`${c}.changed_to_state`,{state:s?e.formatEntityState(s,n):n})},f=e=>"sensor"!==(0,a.N)(e)||void 0===e.attributes.unit_of_measurement&&void 0===e.attributes.state_class},81530:function(e,t,n){n.a(e,(async function(e,i){try{n.d(t,{Fb:()=>v,Gt:()=>w,Og:()=>h,PG:()=>y,kh:()=>d,l:()=>g,oA:()=>_,tm:()=>f,uq:()=>b});var s=n(72344),a=n(73850),o=n(3582),r=n(25433),c=n(6280),l=n(49319),u=e([c]);c=(u.then?(await u)():u)[0];const d=["camera","configurator","weather"],_=["scene","automation"],h=["script"],m=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather"],b=["update"],g=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],f=["input_number","input_select","input_text","number","scene","select","text","update","event"],p=["camera","configurator"],y=(e,t)=>{if("weather"===(0,a.M)(t)){const n=e.states[t];if(n&&(0,l.M0)(n.state))return!1}return(0,s.p)(e,"history")&&!p.includes((0,a.M)(t))},v=(e,t,n=[])=>{if(!(0,s.p)(e,"logbook"))return!1;const i=e.states[t];if(!i)return!1;const o=(0,a.M)(t);return!(r.jV.includes(o)&&(0,c.zP)(o,i,void 0,n)||p.includes(o))&&("weather"!==o||!i||!(0,l.M0)(i.state))},w=e=>{const t=(0,a.M)(e.entity_id);if("group"===t){const t=(0,o.W)(e);return null!=t&&"group"!==t&&m.includes(t)}return m.includes(t)};i()}catch(e){i(e)}}))},88991:function(e,t,n){n.a(e,(async function(e,i){try{n.d(t,{S:()=>c,ST:()=>u,n3:()=>l});var s=n(59847),a=n(81530),o=e([a]);a=(o.then?(await o)():o)[0];const r={alarm_control_panel:()=>n.e("62410").then(n.bind(n,80875)),automation:()=>n.e("98368").then(n.bind(n,13592)),camera:()=>n.e("11569").then(n.bind(n,17712)),climate:()=>Promise.all([n.e("41258"),n.e("21728")]).then(n.bind(n,5192)),configurator:()=>Promise.all([n.e("46379"),n.e("2981"),n.e("16649")]).then(n.bind(n,10080)),conversation:()=>Promise.all([n.e("46379"),n.e("51229"),n.e("59176")]).then(n.bind(n,93726)),counter:()=>n.e("25510").then(n.bind(n,32441)),cover:()=>n.e("78402").then(n.bind(n,72869)),date:()=>Promise.all([n.e("46379"),n.e("41258"),n.e("3561"),n.e("64836")]).then(n.bind(n,6560)),datetime:()=>Promise.all([n.e("46379"),n.e("41258"),n.e("3134"),n.e("3561"),n.e("74040")]).then(n.bind(n,11348)),fan:()=>n.e("88973").then(n.bind(n,54764)),group:()=>Promise.all([n.e("46379"),n.e("41258"),n.e("99287"),n.e("1916"),n.e("81407")]).then(n.bind(n,96771)),humidifier:()=>n.e("66881").then(n.bind(n,9198)),image:()=>n.e("89870").then(n.bind(n,37093)),input_boolean:()=>n.e("64783").then(n.bind(n,85742)),input_datetime:()=>Promise.all([n.e("46379"),n.e("41258"),n.e("3561"),n.e("73561")]).then(n.bind(n,68377)),lawn_mower:()=>n.e("49").then(n.bind(n,31650)),light:()=>n.e("55815").then(n.bind(n,59031)),lock:()=>n.e("51539").then(n.bind(n,1563)),media_player:()=>Promise.all([n.e("41258"),n.e("8656")]).then(n.bind(n,99091)),person:()=>Promise.all([n.e("35637"),n.e("49554"),n.e("73565")]).then(n.bind(n,86554)),remote:()=>Promise.all([n.e("41258"),n.e("2600")]).then(n.bind(n,92081)),script:()=>Promise.all([n.e("46379"),n.e("24199"),n.e("27506"),n.e("99287"),n.e("78823"),n.e("13395")]).then(n.bind(n,74358)),siren:()=>n.e("34404").then(n.bind(n,86534)),sun:()=>n.e("8373").then(n.bind(n,55421)),switch:()=>n.e("50728").then(n.bind(n,56985)),time:()=>Promise.all([n.e("46379"),n.e("41258"),n.e("3561"),n.e("52137")]).then(n.bind(n,16347)),timer:()=>n.e("14597").then(n.bind(n,42971)),update:()=>Promise.all([n.e("5080"),n.e("2981"),n.e("49016"),n.e("79195"),n.e("9524")]).then(n.bind(n,51077)),vacuum:()=>Promise.all([n.e("41258"),n.e("29453")]).then(n.bind(n,61372)),valve:()=>n.e("60455").then(n.bind(n,20973)),water_heater:()=>n.e("80518").then(n.bind(n,60054)),weather:()=>Promise.all([n.e("99287"),n.e("15722"),n.e("85078")]).then(n.bind(n,95818))},c=e=>{const t=(0,s.N)(e);return l(t)},l=e=>a.l.includes(e)?e:a.tm.includes(e)?"hidden":"default",u=e=>{e in r&&r[e]()};i()}catch(e){i(e)}}))},12660:function(e,t,n){n.a(e,(async function(e,i){try{if(n.r(t),n.d(t,{createBadgeElement:()=>r.JE,createCardElement:()=>c.Z6,createHeaderFooterElement:()=>l.t,createHuiElement:()=>u.w,createRowElement:()=>d.m,importMoreInfoControl:()=>o.ST,showAlertDialog:()=>a.showAlertDialog,showConfirmationDialog:()=>a.showConfirmationDialog,showEnterCodeDialog:()=>s.t,showPromptDialog:()=>a.showPromptDialog}),99387==n.j)var s=n(17808);var a=n(76131),o=n(88991),r=n(27934),c=n(62037),l=n(64830),u=n(52032),d=n(46542),_=e([o,r,c,u,d]);[o,r,c,u,d]=_.then?(await _)():_,i()}catch(e){i(e)}}))}};
//# sourceMappingURL=79783.09559aaab809c2ee.js.map