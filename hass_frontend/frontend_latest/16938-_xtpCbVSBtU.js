"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[16938],{92306:(t,e,a)=>{a.d(e,{v:()=>s});const s=(t,e)=>{const a={};for(const s of t){const t=e(s);t in a?a[t].push(s):a[t]=[s]}return a}},81582:(t,e,a)=>{a.d(e,{DJ:()=>c,LZ:()=>s,Nn:()=>i,Ny:()=>_,Q4:()=>l,RQ:()=>r,SO:()=>o,T0:()=>u,iJ:()=>n,pB:()=>d});const s=32143==a.j?["migration_error","setup_error","setup_retry"]:null,l=32143==a.j?["not_loaded","loaded","setup_error","setup_retry"]:null,c=(t,e,a)=>{const s={type:"config_entries/subscribe"};return a&&a.type&&(s.type_filter=a.type),t.connection.subscribeMessage((t=>e(t)),s)},d=(t,e)=>{const a={};return e&&(e.type&&(a.type_filter=e.type),e.domain&&(a.domain=e.domain)),t.callWS({type:"config_entries/get",...a})},r=(t,e)=>t.callWS({type:"config_entries/get_single",entry_id:e}),o=(t,e,a)=>t.callWS({type:"config_entries/update",entry_id:e,...a}),n=(t,e)=>t.callApi("DELETE",`config/config_entries/entry/${e}`),i=(t,e)=>t.callApi("POST",`config/config_entries/entry/${e}/reload`),_=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:"user"}),u=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:null})},55424:(t,e,a)=>{a.d(e,{Bm:()=>g,Cj:()=>k,G9:()=>E,Jj:()=>P,KU:()=>w,P:()=>$,UB:()=>M,ZC:()=>W,_Z:()=>S,b:()=>z,gy:()=>K,iK:()=>p,jB:()=>R,o1:()=>f,rl:()=>v,vE:()=>V,xZ:()=>C,yH:()=>T});var s=a(24112),l=a(32182),c=a(79021),d=a(39244),r=a(27088),o=a(83008),n=a(70390),i=a(61334),_=a(59699),u=a(97330),h=a(92306),m=a(81582),y=a(38014);const b=[],g=()=>({stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),f=()=>({stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}),p=()=>({type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}),v=()=>({type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}),$=()=>({type:"battery",stat_energy_from:"",stat_energy_to:""}),w=()=>({type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),k=()=>({type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),C=t=>t.callWS({type:"energy/info"}),K=async t=>(await t.loadBackendTranslation("issues","energy"),t.callWS({type:"energy/validate"})),W=t=>t.callWS({type:"energy/get_prefs"}),S=async(t,e)=>{const a=t.callWS({type:"energy/save_prefs",...e});return Z(t),a},j=async(t,e,a,s,l,c="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:null==l?void 0:l.toISOString(),energy_statistic_ids:a,co2_statistic_id:s,period:c}),P=t=>(0,h.v)(t.energy_sources,(t=>t.type)),T=(t,e,a)=>{const s=[];for(const l of t.energy_sources)if(!a||a.includes(l.type))if("solar"!==l.type)if("gas"!==l.type&&"water"!==l.type)if("battery"!==l.type){for(const t of l.flow_from){s.push(t.stat_energy_from),t.stat_cost&&s.push(t.stat_cost);const a=e.cost_sensors[t.stat_energy_from];a&&s.push(a)}for(const t of l.flow_to){s.push(t.stat_energy_to),t.stat_compensation&&s.push(t.stat_compensation);const a=e.cost_sensors[t.stat_energy_to];a&&s.push(a)}}else s.push(l.stat_energy_from),s.push(l.stat_energy_to);else{s.push(l.stat_energy_from),l.stat_cost&&s.push(l.stat_cost);const t=e.cost_sensors[l.stat_energy_from];t&&s.push(t)}else s.push(l.stat_energy_from);return s},Z=t=>{b.forEach((e=>{const a=M(t,{key:e});a.clearPrefs(),a._active&&a.refresh()}))},M=(t,e={})=>{let a="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");a=`_${e.key}`}if(t.connection[a])return t.connection[a];b.push(e.key);const h=(0,u._)(t.connection,a,(async()=>{if(h.prefs||(h.prefs=await W(t)),h._refreshTimeout&&clearTimeout(h._refreshTimeout),h._active&&(!h.end||h.end>new Date)){const t=new Date;t.getMinutes()>=20&&t.setHours(t.getHours()+1),t.setMinutes(20,0,0),h._refreshTimeout=window.setTimeout((()=>h.refresh()),t.getTime()-Date.now())}return(async(t,e,a,r,o)=>{const[n,i]=await Promise.all([(0,m.pB)(t,{domain:"co2signal"}),C(t)]),_=n.length?n[0]:void 0;let u;if(_)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const a=t.states[e.entity_id];if(a&&"%"===a.attributes.unit_of_measurement){u=a.entity_id;break}}const h=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)h.push(e.stat_energy_from);const b=T(e,i,["grid","solar","battery","gas"]),g=T(e,i,["water"]),f=[...b,...g],p=(0,s.Z)(r||new Date,a),v=p>35?"month":p>2?"day":"hour",$=t.config.unit_system.length||"",w={energy:"kWh",volume:"km"===$?"m³":"ft³"},k={volume:"km"===$?"L":"gal"},K=b.length?(0,y.dL)(t,a,r,b,v,w,["change"]):{},W=g.length?(0,y.dL)(t,a,r,g,v,k,["change"]):{};let S,P,Z,M,R,x={},E={};o&&(P=p>27&&p<32?(0,l.Z)(a,-1):(0,c.Z)(a,-1*(p+1)),Z=(0,d.Z)(a,-1),b.length&&(x=(0,y.dL)(t,P,Z,b,v,w,["change"])),g.length&&(E=(0,y.dL)(t,P,Z,g,v,k,["change"]))),void 0!==u&&(M=j(t,a,h,u,r,p>35?"month":p>2?"day":"hour"),o&&(R=j(t,P,h,u,Z,p>35?"month":p>2?"day":"hour")));const V={},z=f.length?(0,y.Py)(t,f):[],[O,H,B,F,L,D,q]=await Promise.all([K,W,x,E,z,M,R]),J={...O,...H};return o&&(S={...B,...F}),f.length&&L.forEach((t=>{V[t.statistic_id]=t})),{start:a,end:r,startCompare:P,endCompare:Z,info:i,prefs:e,stats:J,statsMetadata:V,statsCompare:S,co2SignalConfigEntry:_,co2SignalEntity:u,fossilEnergyConsumption:D,fossilEnergyConsumptionCompare:q}})(t,h.prefs,h.start,h.end,h.compare)})),g=h.subscribe;h.subscribe=t=>{const e=g(t);return h._active++,()=>{h._active--,h._active<1&&(clearTimeout(h._refreshTimeout),h._refreshTimeout=void 0),e()}},h._active=0,h.prefs=e.prefs;const f=new Date;h.start=f.getHours()>0?(0,r.Z)():(0,o.Z)(),h.end=f.getHours()>0?(0,n.Z)():(0,i.Z)();const p=()=>{h._updatePeriodTimeout=window.setTimeout((()=>{h.start=(0,r.Z)(),h.end=(0,n.Z)(),p()}),(0,_.Z)((0,n.Z)(),1).getTime()-Date.now())};return p(),h.clearPrefs=()=>{h.prefs=void 0},h.setPeriod=(t,e)=>{var a;h.start=t,h.end=e,h.start.getTime()!==(0,r.Z)().getTime()||(null===(a=h.end)||void 0===a?void 0:a.getTime())!==(0,n.Z)().getTime()||h._updatePeriodTimeout?h._updatePeriodTimeout&&(clearTimeout(h._updatePeriodTimeout),h._updatePeriodTimeout=void 0):p()},h.setCompare=t=>{h.compare=t},h},R=t=>t.callWS({type:"energy/solar_forecast"}),x=["volume","energy"],E=(t,e={},a)=>{for(const s of t.energy_sources){if("gas"!==s.type)continue;if(a&&a===s.stat_energy_from)continue;const t=e[s.stat_energy_from];if(x.includes(null==t?void 0:t.unit_class))return t.unit_class}},V=(t,e,a={})=>{const s=E(e,a);if(void 0!==s)return"energy"===s?"kWh":"km"===t.config.unit_system.length?"m³":"ft³"},z=t=>"km"===t.config.unit_system.length?"L":"gal"},73826:(t,e,a)=>{a.d(e,{f:()=>r});var s=a(17463),l=a(34541),c=a(47838),d=a(79932);const r=t=>(0,s.Z)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,l.Z)((0,c.Z)(a.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,l.Z)((0,c.Z)(a.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,l.Z)((0,c.Z)(a.prototype),"updated",this).call(this,t),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((t=>void 0===this[t]))||(this.__unsubs=this.hassSubscribe())}}]}}),t)},16938:(t,e,a)=>{a.r(e),a.d(e,{HuiEnergySourcesTableCard:()=>m});var s=a(17463),l=a(40521),c=a(68144),d=a(79932),r=a(47501),o=a(15838),n=a(89525),i=a(18457),_=(a(22098),a(55424)),u=a(38014),h=a(73826);let m=(0,s.Z)([(0,d.Mo)("hui-energy-sources-table-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){var t;return[(0,_.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((t=>{this._data=t}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"render",value:function(){var t,e,a,s,l,d,h,m,y;if(!this.hass||!this._config)return c.Ld;if(!this._data)return c.dy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;let b=0,g=0,f=0,p=0,v=0,$=0,w=0,k=0,C=0,K=0,W=0,S=0,j=0,P=0,T=0,Z=0;const M=(0,_.Jj)(this._data.prefs),R=getComputedStyle(this),x=R.getPropertyValue("--energy-solar-color").trim(),E=R.getPropertyValue("--energy-battery-out-color").trim(),V=R.getPropertyValue("--energy-battery-in-color").trim(),z=R.getPropertyValue("--energy-grid-return-color").trim(),O=R.getPropertyValue("--energy-grid-consumption-color").trim(),H=R.getPropertyValue("--energy-gas-color").trim(),B=R.getPropertyValue("--energy-water-color").trim(),F=(null===(t=M.grid)||void 0===t?void 0:t[0].flow_from.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(e=M.grid)||void 0===e?void 0:e[0].flow_to.some((t=>t.stat_compensation||t.entity_energy_price||t.number_energy_price)))||(null===(a=M.gas)||void 0===a?void 0:a.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(s=M.water)||void 0===s?void 0:s.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))),L=(0,_.vE)(this.hass,this._data.prefs,this._data.statsMetadata)||"",D=(0,_.b)(this.hass)||"m³",q=void 0!==this._data.statsCompare;return c.dy` <ha-card> ${this._config.title?c.dy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="mdc-data-table"> <div class="mdc-data-table__table-container"> <table class="mdc-data-table__table" aria-label="Energy sources"> <thead> <tr class="mdc-data-table__header-row"> <th class="mdc-data-table__header-cell"></th> <th class="mdc-data-table__header-cell" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.source")} </th> ${q?c.dy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy")} </th> ${F?c.dy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost")} </th>`:""}`:""} <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.energy")} </th> ${F?c.dy` <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.cost")} </th>`:""} </tr> </thead> <tbody class="mdc-data-table__content"> ${null===(l=M.solar)||void 0===l?void 0:l.map(((t,e)=>{var a;const s=(0,u.Kj)(this._data.stats[t.stat_energy_from])||0;f+=s;const l=q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_from])||0;W+=l;const d=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(x)),e):(0,n.W)((0,o.Rw)((0,o.wK)(x)),e):void 0,_=d?(0,o.CO)((0,o.p3)(d)):x;return c.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:_,backgroundColor:_+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(l,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(s,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${M.solar?c.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.solar_total")} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(W,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(f,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(d=M.battery)||void 0===d?void 0:d.map(((t,e)=>{var a,s;const l=(0,u.Kj)(this._data.stats[t.stat_energy_from])||0,d=(0,u.Kj)(this._data.stats[t.stat_energy_to])||0;p+=l-d;const _=q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_from])||0,h=q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_to])||0;S+=_-h;const m=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(E)),e):(0,n.W)((0,o.Rw)((0,o.wK)(E)),e):void 0,y=m?(0,o.CO)((0,o.p3)(m)):E,b=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(V)),e):(0,n.W)((0,o.Rw)((0,o.wK)(V)),e):void 0,g=b?(0,o.CO)((0,o.p3)(b)):V;return c.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(_,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(l,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""} </tr> <tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:g,backgroundColor:g+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_to,null===(s=this._data)||void 0===s?void 0:s.statsMetadata[t.stat_energy_to])} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(-1*h,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(-1*d,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${M.battery?c.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.battery_total")} </th> ${q?c.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(S,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(p,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(h=M.grid)||void 0===h?void 0:h.map((t=>c.dy`${t.flow_from.map(((t,e)=>{var a;const s=(0,u.Kj)(this._data.stats[t.stat_energy_from])||0;b+=s;const l=q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_from])||0;C+=l;const d=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],_=d?(0,u.Kj)(this._data.stats[d])||0:null;null!==_&&(g+=_);const h=q&&d?(0,u.Kj)(this._data.statsCompare[d])||0:null;null!==h&&(K+=h);const m=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(O)),e):(0,n.W)((0,o.Rw)((0,o.wK)(O)),e):void 0,y=m?(0,o.CO)((0,o.p3)(m)):O;return c.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(l,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,i.uf)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(s,this.hass.locale)} kWh </td> ${F?c.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==_?(0,i.uf)(_,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${t.flow_to.map(((t,e)=>{var a;const s=-1*((0,u.Kj)(this._data.stats[t.stat_energy_to])||0);b+=s;const l=t.stat_compensation||this._data.info.cost_sensors[t.stat_energy_to],d=l?-1*((0,u.Kj)(this._data.stats[l])||0):null;null!==d&&(g+=d);const _=-1*(q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_to])||0);C+=_;const h=q&&l?-1*((0,u.Kj)(this._data.statsCompare[l])||0):null;null!==h&&(K+=h);const m=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(z)),e):(0,n.W)((0,o.Rw)((0,o.wK)(z)),e):void 0,y=m?(0,o.CO)((0,o.p3)(m)):z;return c.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_to,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_to])} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(_,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,i.uf)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(s,this.hass.locale)} kWh </td> ${F?c.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==d?(0,i.uf)(d,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))}`))} ${M.grid?c.dy` <tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.grid_total")} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(C,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(K,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(b,this.hass.locale)} kWh </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(g,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} </tr>`:""} ${null===(m=M.gas)||void 0===m?void 0:m.map(((t,e)=>{var a;const s=(0,u.Kj)(this._data.stats[t.stat_energy_from])||0;v+=s;const l=q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_from])||0;j+=l;const d=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],_=d?(0,u.Kj)(this._data.stats[d])||0:null;null!==_&&($+=_);const h=q&&d?(0,u.Kj)(this._data.statsCompare[d])||0:null;null!==h&&(P+=h);const m=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(H)),e):(0,n.W)((0,o.Rw)((0,o.wK)(H)),e):void 0,y=m?(0,o.CO)((0,o.p3)(m)):H;return c.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${q?c.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(l,this.hass.locale)} ${L} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,i.uf)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(s,this.hass.locale)} ${L} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==_?(0,i.uf)(_,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${M.gas?c.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.gas_total")} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(j,this.hass.locale)} ${L} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(P,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(v,this.hass.locale)} ${L} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)($,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} </tr>`:""} ${null===(y=M.water)||void 0===y?void 0:y.map(((t,e)=>{var a;const s=(0,u.Kj)(this._data.stats[t.stat_energy_from])||0;w+=s;const l=q&&(0,u.Kj)(this._data.statsCompare[t.stat_energy_from])||0;T+=l;const d=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],_=d?(0,u.Kj)(this._data.stats[d])||0:null;null!==_&&(k+=_);const h=q&&d?(0,u.Kj)(this._data.statsCompare[d])||0:null;null!==h&&(Z+=h);const m=e>0?this.hass.themes.darkMode?(0,n.C)((0,o.Rw)((0,o.wK)(B)),e):(0,n.W)((0,o.Rw)((0,o.wK)(B)),e):void 0,y=m?(0,o.CO)((0,o.p3)(m)):B;return c.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,r.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,u.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${q?c.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(l,this.hass.locale)} ${D} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,i.uf)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(s,this.hass.locale)} ${D} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==_?(0,i.uf)(_,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${M.water?c.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.water_total")} </th> ${q?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(T,this.hass.locale)} ${D} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(Z,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(w,this.hass.locale)} ${D} </td> ${F?c.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(k,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} </tr>`:""} ${[$,k,g].filter(Boolean).length>1?c.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.total_costs")} </th> ${q?c.dy`${F?c.dy`<td class="mdc-data-table__cell"></td>`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)(P+K+Z,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} <td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,i.uf)($+g+k,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td> </tr>`:""} </tbody> </table> </div> </div> </ha-card>`}},{kind:"get",static:!0,key:"styles",value:function(){return c.iv`${(0,c.$m)(l)} .mdc-data-table{width:100%;border:0}.mdc-data-table__cell,.mdc-data-table__header-cell{color:var(--primary-text-color);border-bottom-color:var(--divider-color);text-align:var(--float-start)}.mdc-data-table__row:not(.mdc-data-table__row--selected):hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.total{--mdc-typography-body2-font-weight:500}.total .mdc-data-table__cell{border-top:1px solid var(--divider-color)}ha-card{height:100%;overflow:hidden}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.cell-bullet{width:32px;padding-right:0;padding-inline-end:0;padding-inline-start:16px;direction:var(--direction)}.bullet{border-width:1px;border-style:solid;border-radius:4px;height:16px;width:32px}.mdc-data-table__cell--numeric{direction:ltr}`}}]}}),(0,h.f)(c.oi))}}]);
//# sourceMappingURL=16938-_xtpCbVSBtU.js.map