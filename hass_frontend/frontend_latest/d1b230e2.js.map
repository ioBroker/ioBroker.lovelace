{"version":3,"file":"d1b230e2.js","mappings":";;AAuFA;AACA;AAIA;AAGA;;AAQA;;AArBA;;;;;;;;;;;;;;AA5DA","sources":["webpack://home-assistant-frontend/./src/panels/lovelace/cards/hui-picture-card.ts"],"sourcesContent":["import {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { ifDefined } from \"lit/directives/if-defined\";\nimport { applyThemesOnElement } from \"../../../common/dom/apply_themes_on_element\";\nimport \"../../../components/ha-card\";\nimport { ActionHandlerEvent } from \"../../../data/lovelace\";\nimport { HomeAssistant } from \"../../../types\";\nimport { actionHandler } from \"../common/directives/action-handler-directive\";\nimport { handleAction } from \"../common/handle-action\";\nimport { hasAction } from \"../common/has-action\";\nimport { LovelaceCard, LovelaceCardEditor } from \"../types\";\nimport { PictureCardConfig } from \"./types\";\n\n@customElement(\"hui-picture-card\")\nexport class HuiPictureCard extends LitElement implements LovelaceCard {\n  public static async getConfigElement(): Promise<LovelaceCardEditor> {\n    await import(\"../editor/config-elements/hui-picture-card-editor\");\n    return document.createElement(\"hui-picture-card-editor\");\n  }\n\n  public static getStubConfig(): PictureCardConfig {\n    return {\n      type: \"picture\",\n      image: \"https://demo.home-assistant.io/stub_config/t-shirt-promo.png\",\n      tap_action: { action: \"none\" },\n      hold_action: { action: \"none\" },\n    };\n  }\n\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @property() protected _config?: PictureCardConfig;\n\n  public getCardSize(): number {\n    return 5;\n  }\n\n  public setConfig(config: PictureCardConfig): void {\n    if (!config || !config.image) {\n      throw new Error(\"Image required\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    if (changedProps.size === 1 && changedProps.has(\"hass\")) {\n      return !changedProps.get(\"hass\");\n    }\n    return true;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    super.updated(changedProps);\n    if (!this._config || !this.hass) {\n      return;\n    }\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    const oldConfig = changedProps.get(\"_config\") as\n      | PictureCardConfig\n      | undefined;\n\n    if (\n      !oldHass ||\n      !oldConfig ||\n      oldHass.themes !== this.hass.themes ||\n      oldConfig.theme !== this._config.theme\n    ) {\n      applyThemesOnElement(this, this.hass.themes, this._config.theme);\n    }\n  }\n\n  protected render(): TemplateResult {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    return html`\n      <ha-card\n        @action=${this._handleAction}\n        .actionHandler=${actionHandler({\n          hasHold: hasAction(this._config!.hold_action),\n          hasDoubleClick: hasAction(this._config!.double_tap_action),\n        })}\n        tabindex=${ifDefined(\n          hasAction(this._config.tap_action) ? \"0\" : undefined\n        )}\n        class=${classMap({\n          clickable: Boolean(\n            this._config.tap_action ||\n              this._config.hold_action ||\n              this._config.double_tap_action\n          ),\n        })}\n      >\n        <img src=${this.hass.hassUrl(this._config.image)} />\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      ha-card {\n        overflow: hidden;\n        height: 100%;\n      }\n\n      ha-card.clickable {\n        cursor: pointer;\n      }\n\n      img {\n        display: block;\n        width: 100%;\n      }\n    `;\n  }\n\n  private _handleAction(ev: ActionHandlerEvent) {\n    handleAction(this, this.hass!, this._config!, ev.detail.action!);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-picture-card\": HuiPictureCard;\n  }\n}\n"],"names":[],"sourceRoot":""}