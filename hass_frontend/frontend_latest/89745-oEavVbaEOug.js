/*! For license information please see 89745-oEavVbaEOug.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[89745],{66695:(e,t,i)=>{i.d(t,{V:()=>a});const n=Symbol("selection controller");class o{constructor(){this.selected=null,this.ordered=null,this.set=new Set}}class a{constructor(e){this.sets={},this.focusedSet=null,this.mouseIsDown=!1,this.updating=!1,e.addEventListener("keydown",(e=>{this.keyDownHandler(e)})),e.addEventListener("mousedown",(()=>{this.mousedownHandler()})),e.addEventListener("mouseup",(()=>{this.mouseupHandler()}))}static getController(e){const t=!("global"in e)||"global"in e&&e.global?document:e.getRootNode();let i=t[n];return void 0===i&&(i=new a(t),t[n]=i),i}keyDownHandler(e){const t=e.target;"checked"in t&&this.has(t)&&("ArrowRight"==e.key||"ArrowDown"==e.key?this.selectNext(t):"ArrowLeft"!=e.key&&"ArrowUp"!=e.key||this.selectPrevious(t))}mousedownHandler(){this.mouseIsDown=!0}mouseupHandler(){this.mouseIsDown=!1}has(e){return this.getSet(e.name).set.has(e)}selectPrevious(e){const t=this.getOrdered(e),i=t.indexOf(e),n=t[i-1]||t[t.length-1];return this.select(n),n}selectNext(e){const t=this.getOrdered(e),i=t.indexOf(e),n=t[i+1]||t[0];return this.select(n),n}select(e){e.click()}focus(e){if(this.mouseIsDown)return;const t=this.getSet(e.name),i=this.focusedSet;this.focusedSet=t,i!=t&&t.selected&&t.selected!=e&&t.selected.focus()}isAnySelected(e){const t=this.getSet(e.name);for(const e of t.set)if(e.checked)return!0;return!1}getOrdered(e){const t=this.getSet(e.name);return t.ordered||(t.ordered=Array.from(t.set),t.ordered.sort(((e,t)=>e.compareDocumentPosition(t)==Node.DOCUMENT_POSITION_PRECEDING?1:0))),t.ordered}getSet(e){return this.sets[e]||(this.sets[e]=new o),this.sets[e]}register(e){const t=e.name||e.getAttribute("name")||"",i=this.getSet(t);i.set.add(e),i.ordered=null}unregister(e){const t=this.getSet(e.name);t.set.delete(e),t.ordered=null,t.selected==e&&(t.selected=null)}update(e){if(this.updating)return;this.updating=!0;const t=this.getSet(e.name);if(e.checked){for(const i of t.set)i!=e&&(i.checked=!1);t.selected=e}if(this.isAnySelected(e))for(const e of t.set){if(void 0===e.formElementTabIndex)break;e.formElementTabIndex=e.checked?0:-1}this.updating=!1}}},73366:(e,t,i)=>{var n=i(17463),o=i(34541),a=i(47838),s=i(61092),r=i(96762),c=i(68144),l=i(79932);(0,n.Z)([(0,l.Mo)("ha-list-item")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,o.Z)((0,a.Z)(i.prototype),"renderRipple",this).call(this)}},{kind:"get",static:!0,key:"styles",value:function(){return[r.W,c.iv`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`]}}]}}),s.K)},41886:(e,t,i)=>{i.d(t,{HL:()=>o,S7:()=>n});const n=(e,t)=>e.callWS({type:"config/core/update",...t}),o=e=>e.callWS({type:"config/core/detect"})},89513:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.r(t);var o=i(17463),a=i(34541),s=i(47838),r=(i(14271),i(68144)),c=i(79932),l=i(14516),d=i(47181),u=(i(9381),i(95250)),h=i(56250),g=(i(83927),i(4159)),m=(i(33220),i(3555),i(8693),i(48456),i(41886)),_=i(76307),f=i(69906),y=e([u,h,g]);[u,h,g]=y.then?(await y)():y;const v=[52.3731339,4.8903147],p=matchMedia("(prefers-color-scheme: dark)"),k="location";(0,o.Z)([(0,c.Mo)("onboarding-core-config")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)()],key:"onboardingLocalize",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_working",value:()=>!1},{kind:"field",decorators:[(0,c.SB)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_location",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_elevation",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_unitSystem",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_currency",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_timeZone",value(){var e,t,i,n;return null===(e=(t=Intl).DateTimeFormat)||void 0===e||null===(i=(n=e.call(t)).resolvedOptions)||void 0===i?void 0:i.call(n).timeZone}},{kind:"field",decorators:[(0,c.SB)()],key:"_language",value:()=>(0,f.sS)()},{kind:"field",decorators:[(0,c.SB)()],key:"_country",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,c.IO)("ha-locations-editor",!0)],key:"map",value:void 0},{kind:"method",key:"render",value:function(){return r.dy` ${this._error?r.dy`<ha-alert alert-type="error">${this._error}</ha-alert>`:r.Ld} <p> ${this.onboardingLocalize("ui.panel.page-onboarding.core-config.intro","name",this.hass.user.name)} </p> <ha-textfield .label="${this.onboardingLocalize("ui.panel.page-onboarding.core-config.location_name")}" name="name" .disabled="${this._working}" .value="${this._nameValue}" @change="${this._handleChange}"></ha-textfield> <div class="middle-text"> <p> ${this.onboardingLocalize("ui.panel.page-onboarding.core-config.intro_location")} </p> <div class="row"> <div> ${this.onboardingLocalize("ui.panel.page-onboarding.core-config.intro_location_detect")} </div> <mwc-button @click="${this._detect}"> ${this.onboardingLocalize("ui.panel.page-onboarding.core-config.button_detect")} </mwc-button> </div> </div> <div class="row"> <ha-locations-editor class="flex" .hass="${this.hass}" .locations="${this._markerLocation(this._locationValue)}" zoom="14" .darkMode="${p.matches}" @location-updated="${this._locationChanged}"></ha-locations-editor> </div> <div class="row"> <ha-country-picker class="flex" .language="${this.hass.locale.language}" .label="${this.hass.localize("ui.panel.config.core.section.core.core_config.country")||"Country"}" name="country" required .disabled="${this._working}" .value="${this._countryValue}" @value-changed="${this._handleValueChanged}"> </ha-country-picker> <ha-language-picker class="flex" .hass="${this.hass}" nativeName .label="${this.hass.localize("ui.panel.config.core.section.core.core_config.language")}" name="language" required .value="${this._languageValue}" .disabled="${this._working}" @value-changed="${this._handleValueChanged}"> </ha-language-picker> </div> <div class="row"> <ha-timezone-picker class="flex" .label="${this.hass.localize("ui.panel.config.core.section.core.core_config.time_zone")}" name="timeZone" .disabled="${this._working}" .value="${this._timeZoneValue}" @value-changed="${this._handleValueChanged}"> </ha-timezone-picker> <ha-textfield class="flex" .label="${this.hass.localize("ui.panel.config.core.section.core.core_config.elevation")}" name="elevation" type="number" .disabled="${this._working}" .value="${this._elevationValue}" .suffix="${this.hass.localize("ui.panel.config.core.section.core.core_config.elevation_meters")}" @change="${this._handleChange}"> </ha-textfield> </div> <div class="row"> <div class="flex"> ${this.hass.localize("ui.panel.config.core.section.core.core_config.unit_system")} </div> <div class="radio-group"> <ha-formfield .label="${r.dy`${this.hass.localize("ui.panel.config.core.section.core.core_config.unit_system_metric")} <div class="secondary"> ${this.hass.localize("ui.panel.config.core.section.core.core_config.metric_example")} </div>`}"> <ha-radio name="unit_system" value="metric" .checked="${"metric"===this._unitSystemValue}" @change="${this._unitSystemChanged}" .disabled="${this._working}"></ha-radio> </ha-formfield> <ha-formfield .label="${r.dy`${this.hass.localize("ui.panel.config.core.section.core.core_config.unit_system_us_customary")} <div class="secondary"> ${this.hass.localize("ui.panel.config.core.section.core.core_config.us_customary_example")} </div>`}"> <ha-radio name="unit_system" value="us_customary" .checked="${"us_customary"===this._unitSystemValue}" @change="${this._unitSystemChanged}" .disabled="${this._working}"></ha-radio> </ha-formfield> </div> </div> <div class="row"> <div class="flex"> ${this.hass.localize("ui.panel.config.core.section.core.core_config.currency")}<br> <a href="https://en.wikipedia.org/wiki/ISO_4217#Active_codes" target="_blank" rel="noopener noreferrer">${this.hass.localize("ui.panel.config.core.section.core.core_config.find_currency_value")}</a> </div> <ha-currency-picker class="flex" .label="${this.hass.localize("ui.panel.config.core.section.core.core_config.currency")}" name="currency" .disabled="${this._working}" .value="${this._currencyValue}" @value-changed="${this._handleValueChanged}"> </ha-currency-picker> </div>  <div class="footer"> <mwc-button @click="${this._save}" .disabled="${this._working}"> ${this.onboardingLocalize("ui.panel.page-onboarding.core-config.finish")} </mwc-button> </div> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,a.Z)((0,s.Z)(i.prototype),"firstUpdated",this).call(this,e),setTimeout((()=>this.renderRoot.querySelector("ha-textfield").focus()),100),this.addEventListener("keypress",(e=>{"Enter"===e.key&&this._save(e)}))}},{kind:"get",key:"_nameValue",value:function(){return void 0!==this._name?this._name:this.onboardingLocalize("ui.panel.page-onboarding.core-config.location_name_default")}},{kind:"get",key:"_locationValue",value:function(){return this._location||v}},{kind:"get",key:"_elevationValue",value:function(){return void 0!==this._elevation?this._elevation:0}},{kind:"get",key:"_timeZoneValue",value:function(){return this._timeZone||""}},{kind:"get",key:"_languageValue",value:function(){return this._language||""}},{kind:"get",key:"_countryValue",value:function(){return this._country||""}},{kind:"get",key:"_unitSystemValue",value:function(){return void 0!==this._unitSystem?this._unitSystem:"metric"}},{kind:"get",key:"_currencyValue",value:function(){return void 0!==this._currency?this._currency:""}},{kind:"field",key:"_markerLocation",value:()=>(0,l.Z)((e=>[{id:k,latitude:e[0],longitude:e[1],location_editable:!0}]))},{kind:"method",key:"_handleValueChanged",value:function(e){this[`_${e.currentTarget.getAttribute("name")}`]=e.detail.value}},{kind:"method",key:"_handleChange",value:function(e){const t=e.currentTarget;this[`_${t.name}`]=t.value}},{kind:"method",key:"_locationChanged",value:function(e){this._location=e.detail.location}},{kind:"method",key:"_unitSystemChanged",value:function(e){this._unitSystem=e.target.value}},{kind:"method",key:"_detect",value:async function(){this._working=!0;try{const e=await(0,m.HL)(this.hass);e.latitude&&e.longitude&&(this.map.addEventListener("markers-updated",(()=>{this.map.fitMarker(k)}),{once:!0}),this._location=[Number(e.latitude),Number(e.longitude)]),e.elevation&&(this._elevation=String(e.elevation)),e.unit_system&&(this._unitSystem=e.unit_system),e.time_zone&&(this._timeZone=e.time_zone),e.currency&&(this._currency=e.currency),e.country&&(this._country=e.country),this._language=(0,f.sS)()}catch(e){this._error=`Failed to detect location information: ${e.message}`}finally{this._working=!1}}},{kind:"method",key:"_save",value:async function(e){e.preventDefault(),this._working=!0;try{const e=this._locationValue;await(0,m.S7)(this.hass,{location_name:this._nameValue,latitude:e[0],longitude:e[1],elevation:Number(this._elevationValue),unit_system:this._unitSystemValue,time_zone:this._timeZoneValue||"UTC",currency:this._currencyValue||"EUR",country:this._countryValue,language:this._languageValue});const t=await(0,_.Rj)(this.hass);(0,d.B)(this,"onboarding-step",{type:"core_config",result:t})}catch(e){this._working=!1,this._error=e.message}}},{kind:"get",static:!0,key:"styles",value:function(){return r.iv`.row{display:flex;flex-direction:row;margin:0 -8px;align-items:center;--ha-select-min-width:100px}.secondary{color:var(--secondary-text-color)}ha-textfield{display:block}ha-locations-editor{height:200px}.flex{flex:1}.middle-text{margin:16px 0}.row{margin-top:16px}.row>*{margin:0 8px}.radio-group{display:flex;flex-direction:column;flex:1}.footer{margin-top:16px;text-align:right}a{color:var(--primary-color)}`}}]}}),r.oi);n()}catch(e){n(e)}}))}}]);
//# sourceMappingURL=89745-oEavVbaEOug.js.map