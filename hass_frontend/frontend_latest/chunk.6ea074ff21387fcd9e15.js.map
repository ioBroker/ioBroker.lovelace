{"version":3,"sources":["webpack:///./node_modules/@polymer/iron-input/iron-input.js","webpack:///./node_modules/@polymer/neon-animation/neon-animatable-behavior.js","webpack:///./node_modules/@polymer/neon-animation/neon-animation-runner-behavior.js","webpack:///./node_modules/@polymer/iron-selector/iron-multi-selectable.js","webpack:///./node_modules/@polymer/iron-menu-behavior/iron-menu-behavior.js","webpack:///./node_modules/@polymer/paper-listbox/paper-listbox.js","webpack:///./node_modules/@polymer/iron-dropdown/iron-dropdown.js","webpack:///./node_modules/@polymer/neon-animation/neon-animation-behavior.js","webpack:///./node_modules/@polymer/neon-animation/animations/fade-in-animation.js","webpack:///./node_modules/@polymer/neon-animation/animations/fade-out-animation.js","webpack:///./node_modules/@polymer/paper-menu-button/paper-menu-button-animations.js","webpack:///./node_modules/@polymer/paper-menu-button/paper-menu-button.js","webpack:///./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu-icons.js","webpack:///./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu-shared-styles.js","webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/components/ha-icon.ts","webpack:///./src/common/entity/compute_state_domain.ts","webpack:///./src/components/entity/state-badge.ts","webpack:///./node_modules/@polymer/paper-item/paper-icon-item.js","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///src/observer.ts","webpack:///src/utils.ts","webpack:///src/base-element.ts","webpack:///./src/components/entity/ha-entity-picker.ts","webpack:///./node_modules/@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js","webpack:///./node_modules/@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js","webpack:///./src/common/entity/valid_entity_id.ts","webpack:///./node_modules/@polymer/paper-icon-button/paper-icon-button-light.js","webpack:///./src/components/entity/ha-entities-picker.ts","webpack:///../src/blocking-elements.ts","webpack:///./node_modules/wicg-inert/src/inert.js","webpack:///events.ts","webpack:///constants.ts","webpack:///foundation.ts","webpack:///ponyfill.ts","webpack:///../src/lib/directive.ts","webpack:///../src/lib/dom.ts","webpack:///../src/lib/part.ts","webpack:///../src/lib/template.ts","webpack:///../src/lib/template-instance.ts","webpack:///../src/lib/template-result.ts","webpack:///../src/lib/parts.ts","webpack:///../src/lib/default-template-processor.ts","webpack:///../src/lib/template-factory.ts","webpack:///../src/lib/render.ts","webpack:///src/lit-html.ts","webpack:///../src/directives/class-map.ts","webpack:///src/mwc-dialog-base.ts","webpack:///src/mwc-dialog-css.ts","webpack:///src/mwc-dialog.ts","webpack:///./src/components/user/ha-user-picker.ts","webpack:///./src/panels/config/person/dialog-person-detail.ts","webpack:///./node_modules/@polymer/paper-input/paper-input.js","webpack:///./node_modules/@polymer/iron-selector/iron-selection.js","webpack:///./node_modules/@polymer/iron-selector/iron-selectable.js","webpack:///./node_modules/@polymer/iron-a11y-announcer/iron-a11y-announcer.js"],"names":["__webpack_require__","_polymer_iron_a11y_announcer_iron_a11y_announcer_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_iron_validatable_behavior_iron_validatable_behavior_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_4__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","Polymer","_template","html","is","behaviors","IronValidatableBehavior","properties","bindValue","type","String","value","computed","allowedPattern","autoValidate","Boolean","_inputElement","Object","observers","listeners","input","keypress","created","IronA11yAnnouncer","requestAvailability","this","_previousValidInput","_patternAlreadyChecked","attached","_observer","dom","observeNodes","info","_initSlottedInput","bind","detached","unobserveNodes","inputElement","getEffectiveChildren","fire","_patternRegExp","pattern","RegExp","_bindValueChanged","undefined","validate","_onInput","_checkPatternValidity","_announceInvalidCharacter","_isPrintable","event","anyNonPrintable","keyCode","mozNonPrintable","charCode","_onKeypress","regexp","metaKey","ctrlKey","altKey","thisChar","fromCharCode","test","preventDefault","i","length","invalid","valid","checkValidity","required","hasValidator","call","message","text","_computeValue","NeonAnimatableBehavior","animationConfig","entryAnimation","observer","exitAnimation","_entryAnimationChanged","name","node","_exitAnimationChanged","_copyProperties","config1","config2","property","_cloneConfig","config","clone","isClone","_getAnimationConfigRecursive","map","allConfigs","thisConfig","_warn","_logf","Array","isArray","index","animatable","id","cachedConfig","push","getAnimationConfig","key","d","__webpack_exports__","NeonAnimationRunnerBehavior","_configureAnimations","configs","results","resultsToPlay","neonAnimation","document","createElement","isNeonAnimation","result","configure","console","warn","cancel","timeline","play","e","animation","_shouldComplete","activeEntries","finished","playState","_complete","complete","playAnimation","cookie","_active","onfinish","bubbles","cancelAnimation","k","entries","j","IronMultiSelectableBehaviorImpl","multi","selectedValues","notify","selectedItems","readOnly","select","_toggleSelected","selected","multiChanged","_selection","_updateSelected","_shouldUpdateSelection","_updateAttrForSelected","selectedItem","_indexToValue","indexOf","filter","unfilteredValue","IronSelectableBehavior","apply","_selectMulti","_selectSelected","values","_valuesToItems","item","clear","setItemSelected","fallbackSelection","get","_valueToItem","_selectionChange","s","_setSelectedItems","_setSelectedItem","splice","IronMultiSelectableBehavior","IronMenuBehaviorImpl","IronMenuBehavior","focusedItem","attrForItemTitle","disabled","_MODIFIER_KEYS","_SEARCH_RESET_TIMEOUT_MS","_previousTabIndex","hostAttributes","role","focus","keydown","iron-items-changed","keyBindings","up","down","esc","shift+tab:keydown","_resetTabindices","_defaultFocusAsync","cancelAsync","hasAttribute","_setFocusedItem","arguments","firstSelectedItem","items","forEach","setAttribute","isSelected","_updateMultiselectable","removeAttribute","_focusWithKeyboardEvent","cancelDebouncer","searchText","_searchText","searchLength","toLocaleLowerCase","attr","title","getAttribute","trim","slice","debounce","_clearSearchText","_focusPrevious","curFocusIndex","Number","owner","getOwnerRoot","activeElement","_focusNext","_applySelection","_focusedItemChanged","old","_onIronItemsChanged","detail","addedNodes","_onShiftTabDown","oldTabIndex","_shiftTabPressed","async","_onFocus","rootTarget","tabIndex","isLightDescendant","_onUpKey","keyboardEvent","_onDownKey","_onEscKey","blur","_onKeydown","keyboardEventMatchesKeys","stopPropagation","_activateHandler","_disabledChanged","IronA11yKeysBehavior","_polymer_iron_menu_behavior_iron_menu_behavior_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_4__","IronControlState","IronOverlayBehavior","horizontalAlign","reflectToAttribute","verticalAlign","openAnimationConfig","closeAnimationConfig","focusTarget","noAnimations","allowOutsideScroll","neon-animation-finish","containedElement","nodes","$","content","getDistributedNodes","l","nodeType","Node","ELEMENT_NODE","ready","scrollAction","_readied","sizingTarget","_openedChanged","opened","_updateAnimationConfig","IronOverlayBehaviorImpl","_renderOpened","open","contentWrapper","classList","add","_renderClosed","close","_onNeonAnimationFinish","remove","_finishRenderOpened","_finishRenderClosed","animationNode","animations","concat","_updateOverlayPosition","isAttached","notifyResize","_allowOutsideScrollChanged","_applyFocus","noAutoFocus","NeonAnimationBehavior","animationTiming","duration","easing","fill","body","animate","timingFromConfig","timing","setPrefixedProperty","prefix","prefixes","transform","transformOrigin","style","_effect","KeyframeEffect","opacity","height","getBoundingClientRect","width","ANIMATION_CUBIC_BEZIER","MAX_ANIMATION_TIME_MS","PaperMenuButton","dynamicAlign","horizontalOffset","verticalOffset","noOverlap","ignoreSelect","closeOnActivate","delay","restoreFocusOnClose","_dropdownContent","aria-haspopup","iron-activate","iron-select","contentElement","toggle","dropdown","_onIronSelect","_onIronActivate","oldOpened","__onIronOverlayCanceled","uiEvent","trigger","path","keys","$_documentContainer","innerHTML","head","appendChild","computeStateName","_compute_object_id__WEBPACK_IMPORTED_MODULE_0__","stateObj","attributes","friendly_name","computeObjectId","entity_id","replace","domainIcon","_const__WEBPACK_IMPORTED_MODULE_0__","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","counter","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","persistent_notification","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","zone","domain","state","DEFAULT_DOMAIN_ICON","ironIconClass","customElements","loaded","HaIcon","[object Object]","args","super","listen","eventName","methodName","_iconsetName","then","define","computeStateDomain","_compute_domain__WEBPACK_IMPORTED_MODULE_0__","computeDomain","StateBadge","_LitElement","_initialize","query","overrideIcon","stateIcon","changedProps","has","iconStyle","color","hostStyle","backgroundImage","entity_picture","overrideImage","imageUrl","hass","hassUrl","display","hs_color","hue","sat","brightness","errorMessage","assign","_icon","css","LitElement","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__","_paper_item_behavior_js__WEBPACK_IMPORTED_MODULE_6__","PaperItemBehavior","entityId","substr","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","domainIcons","binary_sensor","activated","device_class","cover","dclass","battery","isNaN","batteryRound","Math","round","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","icon","proto","propName","constructor","_observers","hasOwnProperty","Map","v","set","userUpdated","updated","changedProperties","addHasRemoveClass","element","addClass","className","removeClass","hasClass","contains","supportsPassive","fn","optionsBlock","passive","addEventListener","removeEventListener","base_element_BaseElement","lit_element","mdcFoundation","destroy","mdcFoundationClass","createAdapter","init","createFoundation","HaEntityPicker","attribute","memoizeOne","includeDomains","excludeDomains","entityFilter","includeDeviceClasses","states","entityIds","eid","includes","sort","_get","_getPrototypeOf","prototype","_opened","_hass","_getStates","_value","allowCustomEntity","root","_owner","model","firstElementChild","querySelector","textContent","_valueChanged","autofocus","label","localize","_clearValue","ev","_setValue","newValue","setTimeout","fireEvent","_polymer_iron_behaviors_iron_button_state_js__WEBPACK_IMPORTED_MODULE_7__","_polymer_iron_behaviors_iron_control_state_js__WEBPACK_IMPORTED_MODULE_8__","_polymer_iron_form_element_behavior_iron_form_element_behavior_js__WEBPACK_IMPORTED_MODULE_9__","_polymer_iron_validatable_behavior_iron_validatable_behavior_js__WEBPACK_IMPORTED_MODULE_10__","_polymer_paper_behaviors_paper_ripple_behavior_js__WEBPACK_IMPORTED_MODULE_11__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_12__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_13__","_polymer_polymer_lib_utils_gestures_js__WEBPACK_IMPORTED_MODULE_14__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_15__","IronButtonState","PaperRippleBehavior","IronFormElementBehavior","selectedItemLabel","placeholder","noLabelFloat","alwaysFloatLabel","hasContent","tap","up down","tabindex","aria-autocomplete","menuButton","_onIronDeselect","_onTap","gestures","_selectedItemChanged","_setSelectedItemLabel","_computeMenuVerticalOffset","opt_verticalOffset","_getValidity","openState","_computeLabelClass","cls","_setHasContent","IronScrollTargetBehavior","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_1__","scrollTarget","HTMLElement","_defaultScrollTarget","_shouldHaveListener","_scrollTargetChanged","_oldScrollTarget","_toggleScrollListener","_doc","domHost","ownerDocument","_isValidScrollTarget","_scrollHandler","documentElement","_scrollTop","window","pageYOffset","scrollTop","_scrollLeft","pageXOffset","scrollLeft","top","scrollTo","left","scroll","leftOrOptions","_scrollTargetWidth","innerWidth","offsetWidth","_scrollTargetHeight","innerHeight","offsetHeight","yes","eventTarget","_boundScrollHandler","toggleScrollListener","isValidEntityId","createValidEntityId","validEntityId","toLowerCase","registered","afterNextRender","_rippleDown","_rippleUp","button","_rippleContainer","getRipple","uiDownAction","uiUpAction","ensureRipple","var_args","lastRipple","_ripple","center","customElement","currentEntities","_currentEntities","_entityFilter","pickedEntityLabel","_entityChanged","pickEntityLabel","_addEntity","entities","curValue","currentTarget","_updateEntities","ent","toAdd","_blockingElements","Symbol","_alreadyInertElements","_topElParents","_siblingsToRestore","_parentMO","_topChanged","_swapInertedSibling","_inertSiblings","_restoreInertedSiblings","_getParents","_getDistributedChildren","_isInertable","_handleMutations","$blockingElements","_a","_b","_c","Set","elems","newTop","toKeepInert","oldParents","newParents","parentNode","Error","toSkip","oldInert","newInert","siblingsToRestore","inert","delete","elements","disconnect","siblings","sibling","parent","children","inertedSiblings","mo","MutationObserver","parentToObserve","maybeShadyRoot","__shady","host","observe","childList","mutations","parents","mutation","target","idx","inertedChild","removedNodes","pop","localName","current","assignedSlot","shadowRoot","slots","querySelectorAll","assignedNodes","flatten","matches","Element","msMatchesSelector","_focusableElementsString","join","InertRoot","rootElement","inertManager","_inertManager","_rootElement","_managedNodes","_savedAriaHidden","_makeSubtreeUnfocusable","_onMutation","subtree","destructor","inertNode","_unmanageNode","managedNodes","hasSavedAriaHidden","savedAriaHidden","ariaHidden","startNode","composedTreeWalk","_visitNode","DOCUMENT_FRAGMENT_NODE","_adoptInertRoot","_manageNode","register","deregister","_unmanageSubtree","inertSubroot","getInertRoot","setInert","savedInertNode","records","self","record","attributeName","managedNode","InertNode","inertRoot","_node","_overrodeFocusMethod","_inertRoots","_savedTabIndex","_destroyed","ensureUntabbable","_throwIfDestroyed","destroyed","hasSavedTabIndex","savedTabIndex","addInertRoot","removeInertRoot","size","callback","shadowRootAncestor","distributedNodes","slot","child","firstChild","nextSibling","addInertStyle","_document","_watchForInert","readyState","_onDocumentLoaded","inertElement","_this","inertElements","unshift","defineProperty","enumerable","supportsPassive_","cssClasses","CLOSING","OPEN","OPENING","SCROLLABLE","SCROLL_LOCK","STACKED","constants_strings","ACTION_ATTRIBUTE","BUTTON_DEFAULT_ATTRIBUTE","BUTTON_SELECTOR","CLOSED_EVENT","CLOSE_ACTION","CLOSING_EVENT","CONTAINER_SELECTOR","CONTENT_SELECTOR","DESTROY_ACTION","INITIAL_FOCUS_ATTRIBUTE","OPENED_EVENT","OPENING_EVENT","SCRIM_SELECTOR","SUPPRESS_DEFAULT_PRESS_SELECTOR","SURFACE_SELECTOR","numbers","DIALOG_ANIMATION_CLOSE_TIME_MS","DIALOG_ANIMATION_OPEN_TIME_MS","MDCFoundation","adapter","adapter_","dialog_foundation","_super","MDCDialogFoundation","tslib_es6","defaultAdapter","isOpen_","animationFrame_","animationTimer_","layoutFrame_","escapeKeyAction_","scrimClickAction_","autoStackButtons_","areButtonsStacked_","addBodyClass","areButtonsStacked","clickDefaultButton","eventTargetMatches","getActionFromEvent","getInitialFocusEl","isContentScrollable","notifyClosed","notifyClosing","notifyOpened","notifyOpening","releaseFocus","removeBodyClass","reverseButtons","trapFocus","setAutoStackButtons","clearTimeout","handleAnimationTimerEnd_","cancelAnimationFrame","runNextAnimationFrame_","layout","action","isOpen","getEscapeKeyAction","setEscapeKeyAction","getScrimClickAction","setScrimClickAction","getAutoStackButtons","autoStack","requestAnimationFrame","layoutInternal_","handleClick","evt","handleKeydown","isEnter","isDefault","handleDocumentKeydown","detectStackedButtons_","detectScrollableContent_","applyPassive","globalObj","forceRefresh","isSupported_1","selector","webkitMatchesSelector","directives","WeakMap","isDirective","o","isCEPolyfill","polyfillWrapFlushCallback","removeNodes","container","start","end","n","removeChild","noChange","nothing","marker","random","nodeMarker","boundAttributeSuffix","isTemplatePartActive","part","createMarker","createComment","lastAttributeNameRegex","template_instance_TemplateInstance","template","processor","options","__parts","setValue","commit","fragment","cloneNode","importNode","stack","parts","walker","createTreeWalker","partIndex","nodeIndex","nextNode","nodeName","currentNode","handleTextExpression","insertAfterNode","previousSibling","handleAttributeExpressions","strings","adoptNode","upgrade","commentMarker","template_result_TemplateResult","isCommentBinding","commentOpen","lastIndexOf","attributeMatch","exec","getHTML","isPrimitive","isIterable","iterator","AttributeCommitter","dirty","_createPart","parts_AttributePart","t","_getValue","committer","directive","parts_NodePart","__pendingValue","endNode","ref","__insert","__commitText","__commitTemplateResult","__commitNode","__commitIterable","insertBefore","valueAsString","data","createTextNode","templateFactory","update","instance","_clone","itemParts","itemPart","appendIntoPart","insertAfterPart","parts_BooleanAttributePart","PropertyCommitter","single","PropertyPart","eventOptionsSupported","capture","_e","parts_EventPart","eventContext","__boundHandleEvent","handleEvent","newListener","oldListener","shouldRemoveListener","once","shouldAddListener","__options","getOptions","classMapCache","classMap","f","directive_directive","classInfo","oldInfo","blockingElements","mwc_dialog_base_DialogBase","base_element","hideActions","stacked","scrimClickAction","escapeKeyAction","defaultAction","actionAttribute","initialFocusAttribute","boundLayout","boundHandleClick","boundHandleKeydown","boundHandleDocumentKeydown","primaryButton","primarySlot","CustomEvent","dispatchEvent","mdcRoot","overflow","primary","click","closest","el","parentElement","scrollHeight","emitNotification","classes","actionsClasses","mdc-dialog__actions","firstUpdated","disconnectedCallback","removeEventListeners","initialFocusEl","activeEl","getRootNode","Document","forceLayout","newAction","reflect","setEventListeners","currentAction","mwc_dialog_Dialog","styles","HaUserPicker","users","user","system_generated","a","b","compare","_userChanged","_sortedUsers","fetchUsers","dataset","userId","DialogPersonDetail","some","params","_params","_error","entry","_name","_userId","user_id","_deviceTrackers","device_trackers","updateComplete","nameInvalid","_close","_nameChanged","_deviceTrackersAvailable","_deviceTrackersChanged","_closeDialog","_deleteEntry","_submitting","_updateEntry","updateEntry","createEntry","err","removeEntry","_polymer_iron_form_element_behavior_iron_form_element_behavior_js__WEBPACK_IMPORTED_MODULE_5__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_7__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_8__","_paper_input_behavior_js__WEBPACK_IMPORTED_MODULE_9__","PaperInputBehavior","_focusableElement","iron-input-ready","_onIronInputReady","nativeInput","$$","_typesThatHaveText","_handleValueAndAutoValidate","IronSelection","selectCallback","selection","excludes","attrForSelected","activateEvent","selectable","selectedClass","selectedAttribute","_excludedLocalNames","dom-bind","dom-if","dom-repeat","_bindFilterItem","_filterItem","_observeItems","_addListener","_removeListener","selectPrevious","_valueToIndex","selectNext","selectIndex","forceSynchronousItemUpdate","flush","_updateItems","_checkFallback","unlisten","_activateEventChanged","queryDistributedElements","_setItems","_valueForItem","propValue","dashToCamelCase","toggleClass","toggleAttribute","cancelable","_itemActivate","defaultPrevented","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","mode","_text","_onIronAnnounce","announce"],"mappings":";0FAAAA,EAAA,OAAAC,EAAAD,EAAA,IAAAE,EAAAF,EAAA,IAAAG,EAAAH,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAA,GAoGAM,YAAQ,CACNC,UAAWC;;;;;;;EASXC,GAAI,aACJC,UAAW,CAACC,KAQZC,WAAY,CAOVC,UAAW,CAACC,KAAMC,OAAQC,MAAO,IAOjCA,MAAO,CAACF,KAAMC,OAAQE,SAAU,4BAqBhCC,eAAgB,CAACJ,KAAMC,QAKvBI,aAAc,CAACL,KAAMM,QAASJ,OAAO,GAKrCK,cAAeC,QAGjBC,UAAW,CAAC,+CACZC,UAAW,CAACC,MAAS,WAAYC,SAAY,eAE7CC,QAAS,WACPC,IAAkBC,sBAClBC,KAAKC,oBAAsB,GAC3BD,KAAKE,wBAAyB,GAGhCC,SAAU,WAERH,KAAKI,UAAYC,YAAIL,MAAMM,aAAa,SAASC,GAC/CP,KAAKQ,qBACLC,KAAKT,QAGTU,SAAU,WACJV,KAAKI,YACPC,YAAIL,MAAMW,eAAeX,KAAKI,WAC9BJ,KAAKI,UAAY,OAOrBQ,mBACE,OAAOZ,KAAKT,eAGdiB,kBAAmB,WACjBR,KAAKT,cAAgBS,KAAKa,uBAAuB,GAE7Cb,KAAKY,cAAgBZ,KAAKY,aAAa1B,QACzCc,KAAKjB,UAAYiB,KAAKY,aAAa1B,OAGrCc,KAAKc,KAAK,qBAGZC,qBACE,IAAIC,EACJ,GAAIhB,KAAKZ,eACP4B,EAAU,IAAIC,OAAOjB,KAAKZ,qBAE1B,OAAQY,KAAKY,aAAa5B,MACxB,IAAK,SACHgC,EAAU,YAIhB,OAAOA,GAMTE,kBAAmB,SAASnC,EAAW6B,GAGhCA,SAIaO,IAAdpC,EACF6B,EAAa1B,MAAQ,KACZH,IAAc6B,EAAa1B,QACpCc,KAAKY,aAAa1B,MAAQH,GAGxBiB,KAAKX,cACPW,KAAKoB,WAIPpB,KAAKc,KAAK,qBAAsB,CAAC5B,MAAOH,MAG1CsC,SAAU,WAGJrB,KAAKZ,iBAAmBY,KAAKE,yBACnBF,KAAKsB,0BAEftB,KAAKuB,0BACD,6CACJvB,KAAKY,aAAa1B,MAAQc,KAAKC,sBAGnCD,KAAKjB,UAAYiB,KAAKC,oBAAsBD,KAAKY,aAAa1B,MAC9Dc,KAAKE,wBAAyB,GAGhCsB,aAAc,SAASC,GAcrB,IAAIC,EAAoC,GAAjBD,EAAME,SACP,GAAjBF,EAAME,SACW,IAAjBF,EAAME,SACW,IAAjBF,EAAME,QAGPC,EAAoC,IAAjBH,EAAME,SACP,IAAjBF,EAAME,SACW,IAAjBF,EAAME,SACW,IAAjBF,EAAME,SACW,KAAjBF,EAAME,SACW,KAAjBF,EAAME,SACNF,EAAME,QAAU,IAChBF,EAAME,QAAU,IAChBF,EAAME,QAAU,KAAOF,EAAME,QAAU,IAE5C,QAAQD,GAAuC,GAAlBD,EAAMI,UAAiBD,IAGtDE,YAAa,SAASL,GACpB,GAAKzB,KAAKZ,gBAA6C,WAA3BY,KAAKY,aAAa5B,KAA9C,CAGA,IAAI+C,EAAS/B,KAAKe,eAClB,GAAKgB,KAKDN,EAAMO,SAAWP,EAAMQ,SAAWR,EAAMS,QAA5C,CAKAlC,KAAKE,wBAAyB,EAE9B,IAAIiC,EAAWlD,OAAOmD,aAAaX,EAAMI,UACrC7B,KAAKwB,aAAaC,KAAWM,EAAOM,KAAKF,KAC3CV,EAAMa,iBACNtC,KAAKuB,0BACD,qBAAuBY,EAAW,qBAI1Cb,sBAAuB,WACrB,IAAIS,EAAS/B,KAAKe,eAClB,IAAKgB,EACH,OAAO,EAET,IAAK,IAAIQ,EAAI,EAAGA,EAAIvC,KAAKY,aAAa1B,MAAMsD,OAAQD,IAClD,IAAKR,EAAOM,KAAKrC,KAAKY,aAAa1B,MAAMqD,IACvC,OAAO,EAGX,OAAO,GAQTnB,SAAU,WACR,IAAKpB,KAAKY,aAER,OADAZ,KAAKyC,SAAU,GACR,EAIT,IAAIC,EAAQ1C,KAAKY,aAAa+B,gBAc9B,OAXID,IAEE1C,KAAK4C,UAA+B,KAAnB5C,KAAKjB,UACxB2D,GAAQ,EACC1C,KAAK6C,iBACdH,EAAQ7D,IAAwBuC,SAAS0B,KAAK9C,KAAMA,KAAKjB,aAI7DiB,KAAKyC,SAAWC,EAChB1C,KAAKc,KAAK,uBACH4B,GAGTnB,0BAA2B,SAASwB,GAClC/C,KAAKc,KAAK,gBAAiB,CAACkC,KAAMD,KAGpCE,cAAe,SAASlE,GACtB,OAAOA,4CC3VJ,MAAMmE,EAAyB,CAEpCpE,WAAY,CAKVqE,gBAAiB,CAACnE,KAAMQ,QAOxB4D,eAAgB,CACdC,SAAU,yBACVrE,KAAMC,QAQRqE,cAAe,CACbD,SAAU,wBACVrE,KAAMC,SAKVsE,uBAAwB,WACtBvD,KAAKmD,gBAAkBnD,KAAKmD,iBAAmB,GAC/CnD,KAAKmD,gBAAL,MAAgC,CAAC,CAACK,KAAMxD,KAAKoD,eAAgBK,KAAMzD,QAGrE0D,sBAAuB,WACrB1D,KAAKmD,gBAAkBnD,KAAKmD,iBAAmB,GAC/CnD,KAAKmD,gBAAL,KAA+B,CAAC,CAACK,KAAMxD,KAAKsD,cAAeG,KAAMzD,QAGnE2D,gBAAiB,SAASC,EAASC,GAEjC,IAAK,IAAIC,KAAYD,EACnBD,EAAQE,GAAYD,EAAQC,IAIhCC,aAAc,SAASC,GACrB,IAAIC,EAAQ,CAACC,SAAS,GAEtB,OADAlE,KAAK2D,gBAAgBM,EAAOD,GACrBC,GAGTE,6BAA8B,SAASnF,EAAMoF,EAAKC,GAchD,IAAIC,EAbJ,GAAKtE,KAAKmD,gBAIV,GAAInD,KAAKmD,gBAAgBjE,OACiB,mBAA/Bc,KAAKmD,gBAAgBjE,MAC9Bc,KAAKuE,MAAMvE,KAAKwE,MACZ,gBACA,8GAiBN,GAVEF,EADEtF,EACWgB,KAAKmD,gBAAgBnE,GAErBgB,KAAKmD,gBAGfsB,MAAMC,QAAQJ,KACjBA,EAAa,CAACA,IAIZA,EACF,IAAK,IAAIN,EAAQW,EAAQ,EAAGX,EAASM,EAAWK,GAAQA,IACtD,GAAIX,EAAOY,WACTZ,EAAOY,WAAWT,6BACdH,EAAOhF,MAAQA,EAAMoF,EAAKC,QAE9B,GAAIL,EAAOa,GAAI,CACb,IAAIC,EAAeV,EAAIJ,EAAOa,IAC1BC,GAEGA,EAAaZ,UAChBE,EAAIJ,EAAOa,IAAM7E,KAAK+D,aAAae,GACnCA,EAAeV,EAAIJ,EAAOa,KAE5B7E,KAAK2D,gBAAgBmB,EAAcd,IAGnCI,EAAIJ,EAAOa,IAAMb,OAGnBK,EAAWU,KAAKf,IAc1BgB,mBAAoB,SAAShG,GAC3B,IAAIoF,EAAM,GACNC,EAAa,GAGjB,IAAK,IAAIY,KAFTjF,KAAKmE,6BAA6BnF,EAAMoF,EAAKC,GAE7BD,EACdC,EAAWU,KAAKX,EAAIa,IAEtB,OAAOZ,IC5IXnG,EAAAgH,EAAAC,EAAA,sBAAAC,IAmBO,MAwIMA,EACT,CAAClC,EAzI0C,CAE7CmC,qBAAsB,SAASC,GAC7B,IAAIC,EAAU,GACVC,EAAgB,GAEpB,GAAIF,EAAQ9C,OAAS,EACnB,IAAK,IAAIwB,EAAQW,EAAQ,EAAGX,EAASsB,EAAQX,GAAQA,IAAS,CAC5D,IAAIc,EAAgBC,SAASC,cAAc3B,EAAOR,MAElD,GAAIiC,EAAcG,gBAAiB,CACjC,IAAIC,EAAS,KAGRJ,EAAcK,YAKjBL,EAAcK,UAAY,SAAS9B,GACjC,OAAO,OAIX6B,EAASJ,EAAcK,UAAU9B,GACjCwB,EAAcT,KAAK,CACjBc,OAAQA,EACR7B,OAAQA,EACRyB,cAAeA,SAGjBM,QAAQC,KAAKhG,KAAKrB,GAAK,IAAKqF,EAAOR,KAAM,cAK/C,IAAK,IAAIjB,EAAI,EAAGA,EAAIiD,EAAchD,OAAQD,IAAK,CAC7C,IAAIsD,EAASL,EAAcjD,GAAGsD,OAC1B7B,EAASwB,EAAcjD,GAAGyB,OAC1ByB,EAAgBD,EAAcjD,GAAGkD,cAErC,IAE8B,mBAAjBI,EAAOI,SAChBJ,EAASH,SAASQ,SAASC,KAAKN,IAElC,MAAOO,GACPP,EAAS,KACTE,QAAQC,KAAK,eAAgB,IAAKhC,EAAOR,KAAM,KAAM4C,GAGnDP,GACFN,EAAQR,KAAK,CACXU,cAAeA,EACfzB,OAAQA,EACRqC,UAAWR,IAKjB,OAAON,GAGTe,gBAAiB,SAASC,GAExB,IADA,IAAIC,GAAW,EACNjE,EAAI,EAAGA,EAAIgE,EAAc/D,OAAQD,IACxC,GAA4C,YAAxCgE,EAAchE,GAAG8D,UAAUI,UAAyB,CACtDD,GAAW,EACX,MAGJ,OAAOA,GAGTE,UAAW,SAASH,GAClB,IAAK,IAAIhE,EAAI,EAAGA,EAAIgE,EAAc/D,OAAQD,IACxCgE,EAAchE,GAAGkD,cAAckB,SAASJ,EAAchE,GAAGyB,QAE3D,IAASzB,EAAI,EAAGA,EAAIgE,EAAc/D,OAAQD,IACxCgE,EAAchE,GAAG8D,UAAUJ,UAS/BW,cAAe,SAAS5H,EAAM6H,GAC5B,IAAIvB,EAAUtF,KAAKgF,mBAAmBhG,GACtC,GAAKsG,EAAL,CAGAtF,KAAK8G,QAAU9G,KAAK8G,SAAW,GAC3B9G,KAAK8G,QAAQ9H,KACfgB,KAAK0G,UAAU1G,KAAK8G,QAAQ9H,WACrBgB,KAAK8G,QAAQ9H,IAGtB,IAAIuH,EAAgBvG,KAAKqF,qBAAqBC,GAE9C,GAA4B,GAAxBiB,EAAc/D,OAAlB,CAKAxC,KAAK8G,QAAQ9H,GAAQuH,EAErB,IAAK,IAAIhE,EAAI,EAAGA,EAAIgE,EAAc/D,OAAQD,IACxCgE,EAAchE,GAAG8D,UAAUU,SAAW,WAChC/G,KAAKsG,gBAAgBC,KACvBvG,KAAK0G,UAAUH,UACRvG,KAAK8G,QAAQ9H,GACpBgB,KAAKc,KAAK,wBAAyB+F,EAAQ,CAACG,SAAS,MAEvDvG,KAAKT,WAbPA,KAAKc,KAAK,wBAAyB+F,EAAQ,CAACG,SAAS,MAoBzDC,gBAAiB,WACf,IAAK,IAAIC,KAAKlH,KAAK8G,QAAS,CAC1B,IAAIK,EAAUnH,KAAK8G,QAAQI,GAEb,IAAK,IAAIE,KAAKD,EAC1BA,EAAQC,GAAGf,UAAUJ,SAIzBjG,KAAK8G,QAAU,iECrIZ,MAAMO,EAAkC,CAC7CvI,WAAY,CAKVwI,MAAO,CAACtI,KAAMM,QAASJ,OAAO,EAAOmE,SAAU,gBAM/CkE,eAAgB,CACdvI,KAAMyF,MACN+C,QAAQ,EACRtI,MAAO,WACL,MAAO,KAOXuI,cAAe,CACbzI,KAAMyF,MACNiD,UAAU,EACVF,QAAQ,EACRtI,MAAO,WACL,MAAO,MAMbO,UAAW,CAAC,2CAUZkI,OAAQ,SAASzI,GACXc,KAAKsH,MACPtH,KAAK4H,gBAAgB1I,GAErBc,KAAK6H,SAAW3I,GAIpB4I,aAAc,SAASR,GACrBtH,KAAK+H,WAAWT,MAAQA,EACxBtH,KAAKgI,mBAIPC,6BACE,OAAwB,MAAjBjI,KAAK6H,UACgB,MAAvB7H,KAAKuH,gBAA0BvH,KAAKuH,eAAe/E,QAG1D0F,uBAAwB,WACjBlI,KAAKsH,MAECtH,KAAKyH,eAAiBzH,KAAKyH,cAAcjF,OAAS,IAC3DxC,KAAKuH,eACDvH,KAAKyH,cACArD,IACG,SAAS+D,GACP,OAAOnI,KAAKoI,cAAcpI,KAAKqI,QAAQF,KAEzCnI,MACHsI,OAAO,SAASC,GACf,OAA0B,MAAnBA,GACNvI,OAXXwI,IAAuBN,uBAAuBO,MAAMzI,OAexDgI,gBAAiB,WACXhI,KAAKsH,MACPtH,KAAK0I,aAAa1I,KAAKuH,gBAEvBvH,KAAK2I,gBAAgB3I,KAAK6H,WAI9Ba,aAAc,SAASE,GACrBA,EAASA,GAAU,GAEnB,IAAInB,GACCzH,KAAK6I,eAAeD,IAAW,IAAIN,OAAO,SAASQ,GAClD,OAAOA,UAIb9I,KAAK+H,WAAWgB,MAAMtB,GAGtB,IAAK,IAAIlF,EAAI,EAAGA,EAAIkF,EAAcjF,OAAQD,IACxCvC,KAAK+H,WAAWiB,gBAAgBvB,EAAclF,IAAI,GAIhDvC,KAAKiJ,oBAAsBjJ,KAAK+H,WAAWmB,MAAM1G,SACpCxC,KAAKmJ,aAAanJ,KAAKiJ,oBAEpCjJ,KAAK2H,OAAO3H,KAAKiJ,qBAKvBG,iBAAkB,WAChB,IAAIC,EAAIrJ,KAAK+H,WAAWmB,MACpBlJ,KAAKsH,OACPtH,KAAKsJ,kBAAkBD,GACvBrJ,KAAKuJ,iBAAiBF,EAAE7G,OAAS6G,EAAE,GAAK,OAEpCA,SACFrJ,KAAKsJ,kBAAkB,CAACD,IACxBrJ,KAAKuJ,iBAAiBF,KAEtBrJ,KAAKsJ,kBAAkB,IACvBtJ,KAAKuJ,iBAAiB,QAK5B3B,gBAAiB,SAAS1I,GACxB,IAAIqD,EAAIvC,KAAKuH,eAAec,QAAQnJ,GACnBqD,EAAI,EAEnBvC,KAAK+E,KAAK,iBAAkB7F,GAE5Bc,KAAKwJ,OAAO,iBAAkBjH,EAAG,IAIrCsG,eAAgB,SAASD,GACvB,OAAkB,MAAVA,EAAkB,KAAOA,EAAOxE,IAAI,SAASlF,GACnD,OAAOc,KAAKmJ,aAAajK,IACxBc,QAKMyJ,EACT,CAACjB,IAAwBnB,cCrK7BnJ,EAAAgH,EAAAC,EAAA,sBAAAuE,IAAAxL,EAAAgH,EAAAC,EAAA,sBAAAwE,IAuBO,MAAMD,EAAuB,CAElC5K,WAAY,CAMV8K,YACI,CAACvG,SAAU,sBAAuBqE,UAAU,EAAM1I,KAAMQ,QAO5DqK,iBAAkB,CAAC7K,KAAMC,QAKzB6K,SAAU,CACR9K,KAAMM,QACNJ,OAAO,EACPmE,SAAU,qBASd0G,eAAgB,CACd,MACA,WACA,WACA,UACA,KACA,SACA,QACA,OACA,UACA,KACA,aACA,QACA,QACA,SACA,cAIFC,yBAA0B,IAG1BC,kBAAmB,EAEnBC,eAAgB,CACdC,KAAQ,QAGV1K,UAAW,CAAC,iCAEZC,UAAW,CACT0K,MAAS,WACTC,QAAW,aACXC,qBAAsB,uBAMxBC,YAAa,CACXC,GAAM,WACNC,KAAQ,aACRC,IAAO,YACPC,oBAAqB,mBAGvBxK,SAAU,WACRH,KAAK4K,oBAUPjD,OAAQ,SAASzI,GAGXc,KAAK6K,qBACP7K,KAAK8K,YAAY9K,KAAK6K,oBACtB7K,KAAK6K,mBAAqB,MAE5B,IAAI/B,EAAO9I,KAAKmJ,aAAajK,GACzB4J,GAAQA,EAAKiC,aAAa,cAE9B/K,KAAKgL,gBAAgBlC,GACrBzB,EAAgCM,OAAOc,MAAMzI,KAAMiL,aAUrDL,iBAAkB,WAChB,IAAIM,EAAoBlL,KAAKsH,MACxBtH,KAAKyH,eAAiBzH,KAAKyH,cAAc,GAC1CzH,KAAKmI,aAETnI,KAAKmL,MAAMC,QAAQ,SAAStC,GAC1BA,EAAKuC,aAAa,WAAYvC,IAASoC,EAAoB,IAAM,MACjEpC,EAAKuC,aAAa,gBAAiBrL,KAAK+H,WAAWuD,WAAWxC,KAC7D9I,OASLuL,uBAAwB,SAASjE,GAC3BA,EACFtH,KAAKqL,aAAa,uBAAwB,QAE1CrL,KAAKwL,gBAAgB,yBAUzBC,wBAAyB,SAAShK,GAIhC,IAAgD,IAA5CzB,KAAK+J,eAAe1B,QAAQ5G,EAAMwD,KAAtC,CAGAjF,KAAK0L,gBAAgB,oBAUrB,IARA,IAQgB5C,EARZ6C,EAAa3L,KAAK4L,aAAe,GAMjCC,GAFJF,IAHUlK,EAAMwD,KAA2B,GAApBxD,EAAMwD,IAAIzC,OAC7Bf,EAAMwD,IACNhG,OAAOmD,aAAaX,EAAME,UACZmK,qBAEYtJ,OAErBD,EAAI,EAASuG,EAAO9I,KAAKmL,MAAM5I,GAAIA,IAC1C,IAAIuG,EAAKiC,aAAa,YAAtB,CAIA,IAAIgB,EAAO/L,KAAK6J,kBAAoB,cAChCmC,GAASlD,EAAKiD,IAASjD,EAAKmD,aAAaF,IAAS,IAAIG,OAE1D,KAAIF,EAAMxJ,OAASqJ,IAIfG,EAAMG,MAAM,EAAGN,GAAcC,qBAAuBH,EAAY,CAClE3L,KAAKgL,gBAAgBlC,GACrB,OAIJ9I,KAAK4L,YAAcD,EACnB3L,KAAKoM,SACD,mBACApM,KAAKqM,iBACLrM,KAAKgK,4BAGXqC,iBAAkB,WAChBrM,KAAK4L,YAAc,IAQrBU,eAAgB,WAId,IAHA,IAAI9J,EAASxC,KAAKmL,MAAM3I,OACpB+J,EAAgBC,OAAOxM,KAAKqI,QAAQrI,KAAK4J,cAEpCrH,EAAI,EAAGA,EAAIC,EAAS,EAAGD,IAAK,CACnC,IAAIuG,EAAO9I,KAAKmL,OAAOoB,EAAgBhK,EAAIC,GAAUA,GACrD,IAAKsG,EAAKiC,aAAa,YAAa,CAClC,IAAI0B,EAAQpM,YAAIyI,GAAM4D,gBAAkBhH,SAKxC,GAJA1F,KAAKgL,gBAAgBlC,GAIjBzI,YAAIoM,GAAOE,eAAiB7D,EAC9B,UAWR8D,WAAY,WAIV,IAHA,IAAIpK,EAASxC,KAAKmL,MAAM3I,OACpB+J,EAAgBC,OAAOxM,KAAKqI,QAAQrI,KAAK4J,cAEpCrH,EAAI,EAAGA,EAAIC,EAAS,EAAGD,IAAK,CACnC,IAAIuG,EAAO9I,KAAKmL,OAAOoB,EAAgBhK,GAAKC,GAC5C,IAAKsG,EAAKiC,aAAa,YAAa,CAClC,IAAI0B,EAAQpM,YAAIyI,GAAM4D,gBAAkBhH,SAKxC,GAJA1F,KAAKgL,gBAAgBlC,GAIjBzI,YAAIoM,GAAOE,eAAiB7D,EAC9B,UAcR+D,gBAAiB,SAAS/D,EAAMwC,GAC1BA,EACFxC,EAAKuC,aAAa,gBAAiB,QAEnCvC,EAAKuC,aAAa,gBAAiB,SAErC7C,IAAuBqE,gBAAgBpE,MAAMzI,KAAMiL,YAWrD6B,oBAAqB,SAASlD,EAAamD,GACzCA,GAAOA,EAAI1B,aAAa,WAAY,OAChCzB,GAAgBA,EAAYmB,aAAa,aACxC/K,KAAK8J,WACRF,EAAYyB,aAAa,WAAY,KACrCzB,EAAYQ,UAWhB4C,oBAAqB,SAASvL,GACxBA,EAAMwL,OAAOC,WAAW1K,QAC1BxC,KAAK4K,oBASTuC,gBAAiB,SAAS1L,GACxB,IAAI2L,EAAcpN,KAAKiM,aAAa,YAEpCvC,EAAqB2D,kBAAmB,EAExCrN,KAAKgL,gBAAgB,MAErBhL,KAAKqL,aAAa,WAAY,MAE9BrL,KAAKsN,MAAM,WACTtN,KAAKqL,aAAa,WAAY+B,GAC9B1D,EAAqB2D,kBAAmB,GAEvC,IAQLE,SAAU,SAAS9L,GACjB,IAAIiI,EAAqB2D,iBAAzB,CAOA,IAAIG,EAC6BnN,YAAIoB,GAAO+L,YACxCA,IAAexN,WAAuC,IAAxBwN,EAAWC,UACxCzN,KAAK0N,kBAAkBF,MAK5BxN,KAAK6K,mBAAqB7K,KAAKsN,MAAM,WAGnC,IAAIpC,EAAoBlL,KAAKsH,MACxBtH,KAAKyH,eAAiBzH,KAAKyH,cAAc,GAC1CzH,KAAKmI,aAETnI,KAAKgL,gBAAgB,MAEjBE,EACFlL,KAAKgL,gBAAgBE,GACZlL,KAAKmL,MAAM,IAEpBnL,KAAK4M,kBAUXe,SAAU,SAASlM,GAEjBzB,KAAKsM,iBACL7K,EAAMwL,OAAOW,cAActL,kBAQ7BuL,WAAY,SAASpM,GACnBzB,KAAK4M,aACLnL,EAAMwL,OAAOW,cAActL,kBAQ7BwL,UAAW,SAASrM,GAClB,IAAImI,EAAc5J,KAAK4J,YACnBA,GACFA,EAAYmE,QAShBC,WAAY,SAASvM,GACdzB,KAAKiO,yBAAyBxM,EAAO,gBAExCzB,KAAKyL,wBAAwBhK,GAE/BA,EAAMyM,mBAIRC,iBAAkB,SAAS1M,GACzB+G,IAAuB2F,iBAAiBrL,KAAK9C,KAAMyB,GACnDA,EAAMyM,mBAORE,iBAAkB,SAAStE,GACrBA,GACF9J,KAAKiK,kBACDjK,KAAK+K,aAAa,YAAc/K,KAAKyN,SAAW,EACpDzN,KAAKwL,gBACD,aACMxL,KAAK+K,aAAa,aAC5B/K,KAAKqL,aAAa,WAAYrL,KAAKiK,oBAKzCP,kBAAwC,GAG3BC,EACT,CAACF,EAA6B4E,IAAsB3E,qCCtbxDxL,EAAA,GAAAA,EAAA,QAAAoQ,EAAApQ,EAAA,KAAAG,EAAAH,EAAA,GAAAqQ,EAAArQ,EAAA,GAoEAM,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;EAgBXC,GAAI,gBACJC,UAAW,CAAC+K,KAGZO,eAAgB,CAACC,KAAM,8GC5CzB3L,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;;;;;;EAqBXC,GAAI,gBAEJC,UAAW,CACT4P,IACAH,IACAI,IACArJ,KAGFtG,WAAY,CAMV4P,gBAAiB,CAAC1P,KAAMC,OAAQC,MAAO,OAAQyP,oBAAoB,GAOnEC,cAAe,CAAC5P,KAAMC,OAAQC,MAAO,MAAOyP,oBAAoB,GAQhEE,oBAAqB,CAAC7P,KAAMQ,QAQ5BsP,qBAAsB,CAAC9P,KAAMQ,QAM7BuP,YAAa,CAAC/P,KAAMQ,QAMpBwP,aAAc,CAAChQ,KAAMM,QAASJ,OAAO,GAUrC+P,mBACI,CAACjQ,KAAMM,QAASJ,OAAO,EAAOmE,SAAU,+BAG9C3D,UAAW,CAACwP,wBAAyB,0BAErCzP,UAAW,CACT,4GAMF0P,uBAGE,IADA,IAAIC,EAAQ/O,YAAIL,KAAKqP,EAAEC,SAASC,sBACvBhN,EAAI,EAAGiN,EAAIJ,EAAM5M,OAAQD,EAAIiN,EAAGjN,IACvC,GAAI6M,EAAM7M,GAAGkN,WAAaC,KAAKC,aAC7B,OAAOP,EAAM7M,IAKnBqN,MAAO,WAEA5P,KAAK6P,eACR7P,KAAK6P,aAAe7P,KAAKiP,mBAAqB,QAAU,QAE1DjP,KAAK8P,UAAW,GAGlB3P,SAAU,WACHH,KAAK+P,cAAgB/P,KAAK+P,eAAiB/P,OAC9CA,KAAK+P,aAAe/P,KAAKmP,kBAAoBnP,OAIjDU,SAAU,WACRV,KAAKiH,mBAOP+I,eAAgB,WACVhQ,KAAKiQ,QAAUjQ,KAAK8J,SACtB9J,KAAKiG,UAELjG,KAAKiH,kBACLjH,KAAKkQ,yBACLC,IAAwBH,eAAevH,MAAMzI,KAAMiL,aAOvDmF,cAAe,YACRpQ,KAAKgP,cAAgBhP,KAAKmD,gBAAgBkN,MAC7CrQ,KAAKqP,EAAEiB,eAAeC,UAAUC,IAAI,aACpCxQ,KAAK4G,cAAc,SAEnBuJ,IAAwBC,cAAc3H,MAAMzI,KAAMiL,YAOtDwF,cAAe,YACRzQ,KAAKgP,cAAgBhP,KAAKmD,gBAAgBuN,OAC7C1Q,KAAKqP,EAAEiB,eAAeC,UAAUC,IAAI,aACpCxQ,KAAK4G,cAAc,UAEnBuJ,IAAwBM,cAAchI,MAAMzI,KAAMiL,YAUtD0F,uBAAwB,WACtB3Q,KAAKqP,EAAEiB,eAAeC,UAAUK,OAAO,aACnC5Q,KAAKiQ,OACPjQ,KAAK6Q,sBAEL7Q,KAAK8Q,uBAQTZ,uBAAwB,WAKtB,IAHA,IAAIa,EAAgB/Q,KAAKmP,iBACrB6B,EAAa,GAAGC,OAAOjR,KAAK6O,qBAAuB,IACjCoC,OAAOjR,KAAK8O,sBAAwB,IACjDvM,EAAI,EAAGA,EAAIyO,EAAWxO,OAAQD,IACrCyO,EAAWzO,GAAGkB,KAAOsN,EAEvB/Q,KAAKmD,gBAAkB,CACrBkN,KAAMrQ,KAAK6O,oBACX6B,MAAO1Q,KAAK8O,uBAQhBoC,uBAAwB,WAClBlR,KAAKmR,YAGPnR,KAAKoR,gBAQTC,2BAA4B,SAASpC,GAE9BjP,KAAK8P,WAGLb,EAEOjP,KAAK6P,cAAsC,SAAtB7P,KAAK6P,eACpC7P,KAAK6P,aAAe,SAFpB7P,KAAK6P,aAAe,SASxByB,YAAa,WACX,IAAIvC,EAAc/O,KAAK+O,aAAe/O,KAAKmP,iBACvCJ,GAAe/O,KAAKiQ,SAAWjQ,KAAKuR,YACtCxC,EAAY3E,QAEZ+F,IAAwBmB,YAAY7I,MAAMzI,KAAMiL,cCnQ/C,MAAMuG,EAAwB,CAEnC1S,WAAY,CAKV2S,gBAAiB,CACfzS,KAAMQ,OACNN,MAAO,WACL,MAAO,CACLwS,SAAU,IAAKC,OAAQ,+BAAgCC,KAAM,WAUrEhM,iBAAiB,EAQjB/F,QAAS,WACF6F,SAASmM,KAAKC,SACjB/L,QAAQC,KACJ,kGASR+L,iBAAkB,SAAS/N,GACzB,GAAIA,EAAOgO,OACT,IAAK,IAAIlO,KAAYE,EAAOgO,OAC1BhS,KAAKyR,gBAAgB3N,GAAYE,EAAOgO,OAAOlO,GAGnD,OAAO9D,KAAKyR,iBAOdQ,oBAAqB,SAASxO,EAAMK,EAAU5E,GAM5C,IALA,IAKSgT,EADLC,EAJM,CACRC,UAAa,CAAC,mBACdC,gBAAmB,CAAC,qBAAsB,0BAEzBvO,GACFa,EAAQ,EAAGuN,EAASC,EAASxN,GAAQA,IACpDlB,EAAK6O,MAAMJ,GAAUhT,EAEvBuE,EAAK6O,MAAMxO,GAAY5E,GAMzByH,SAAU,SAAS3C,MC3DrBxF,YAAQ,CAENG,GAAI,oBAEJC,UAAW,CAAC4S,GAEZ1L,UAAW,SAAS9B,GAClB,IAAIP,EAAOO,EAAOP,KAKlB,OAJAzD,KAAKuS,QAAU,IAAIC,eACf/O,EACA,CAAC,CAACgP,QAAW,KAAM,CAACA,QAAW,MAC/BzS,KAAK+R,iBAAiB/N,IACnBhE,KAAKuS,WCZhB/T,YAAQ,CAENG,GAAI,qBAEJC,UAAW,CAAC4S,GAEZ1L,UAAW,SAAS9B,GAClB,IAAIP,EAAOO,EAAOP,KAQlB,OAPAzD,KAAKuS,QAAU,IAAIC,eACf/O,EACA,CACE,CAACgP,QAAW,KACZ,CAACA,QAAW,MAEdzS,KAAK+R,iBAAiB/N,IACnBhE,KAAKuS,uBC3BhB/T,YAAQ,CACNG,GAAI,mCAEJC,UAAW,CAAC4S,GAEZ1L,UAAW,SAAS9B,GAClB,IAAIP,EAAOO,EAAOP,KAEdiP,EADOjP,EAAKkP,wBACED,OAOlB,OALA1S,KAAKuS,QAAU,IAAIC,eACf/O,EACA,CAAC,CAACiP,OAASA,EAAS,EAAK,MAAO,CAACA,OAAQA,EAAS,OAClD1S,KAAK+R,iBAAiB/N,IAEnBhE,KAAKuS,WAIhB/T,YAAQ,CACNG,GAAI,kCAEJC,UAAW,CAAC4S,GAEZ1L,UAAW,SAAS9B,GAClB,IAAIP,EAAOO,EAAOP,KAEdmP,EADOnP,EAAKkP,wBACCC,MAOjB,OALA5S,KAAKuS,QAAU,IAAIC,eACf/O,EACA,CAAC,CAACmP,MAAQA,EAAQ,EAAK,MAAO,CAACA,MAAOA,EAAQ,OAC9C5S,KAAK+R,iBAAiB/N,IAEnBhE,KAAKuS,WAIhB/T,YAAQ,CACNG,GAAI,oCAEJC,UAAW,CAAC4S,GAEZ1L,UAAW,SAAS9B,GAClB,IAAIP,EAAOO,EAAOP,KAEdmP,EADOnP,EAAKkP,wBACCC,MAOjB,OALA5S,KAAKuS,QAAU,IAAIC,eACf/O,EACA,CAAC,CAACmP,MAAOA,EAAQ,MAAO,CAACA,MAAOA,EAASA,EAAQ,GAAM,OACvD5S,KAAK+R,iBAAiB/N,IAEnBhE,KAAKuS,WAIhB/T,YAAQ,CACNG,GAAI,qCAEJC,UAAW,CAAC4S,GAEZ1L,UAAW,SAAS9B,GAClB,IAAIP,EAAOO,EAAOP,KAEdiP,EADOjP,EAAKkP,wBACED,OAYlB,OAVA1S,KAAKiS,oBAAoBxO,EAAM,kBAAmB,OAElDzD,KAAKuS,QAAU,IAAIC,eACf/O,EACA,CACE,CAACiP,OAAQA,EAAS,KAAMN,UAAW,iBACnC,CAACM,OAAQA,EAAS,EAAI,KAAMN,UAAW,sBAEzCpS,KAAK+R,iBAAiB/N,IAEnBhE,KAAKuS,WCnEhB,IAAIvO,EAAS,CACX6O,uBAAwB,4BACxBC,sBAAuB,KA6ClB,MAAMC,EAAkBvU,YAAQ,CACrCC,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA4DXC,GAAI,oBAcJC,UAAW,CAACyP,IAAsBG,KAElC1P,WAAY,CAIVmR,OACI,CAACjR,KAAMM,QAASJ,OAAO,EAAOsI,QAAQ,EAAMnE,SAAU,kBAM1DqL,gBAAiB,CAAC1P,KAAMC,OAAQC,MAAO,OAAQyP,oBAAoB,GAMnEC,cAAe,CAAC5P,KAAMC,OAAQC,MAAO,MAAOyP,oBAAoB,GAQhEqE,aAAc,CAAChU,KAAMM,SAOrB2T,iBAAkB,CAACjU,KAAMwN,OAAQtN,MAAO,EAAGsI,QAAQ,GAOnD0L,eAAgB,CAAClU,KAAMwN,OAAQtN,MAAO,EAAGsI,QAAQ,GAMjD2L,UAAW,CAACnU,KAAMM,SAMlB0P,aAAc,CAAChQ,KAAMM,QAASJ,OAAO,GAMrCkU,aAAc,CAACpU,KAAMM,QAASJ,OAAO,GAMrCmU,gBAAiB,CAACrU,KAAMM,QAASJ,OAAO,GAMxC2P,oBAAqB,CACnB7P,KAAMQ,OACNN,MAAO,WACL,MAAO,CACL,CAACsE,KAAM,oBAAqBwO,OAAQ,CAACsB,MAAO,IAAK5B,SAAU,MAC3D,CACElO,KAAM,kCACNwO,OAAQ,CACNsB,MAAO,IACP5B,SAAU,IACVC,OAAQ3N,EAAO6O,yBAGnB,CACErP,KAAM,mCACNwO,OAAQ,CACNsB,MAAO,IACP5B,SAAU,IACVC,OAAQ3N,EAAO6O,4BAWzB/D,qBAAsB,CACpB9P,KAAMQ,OACNN,MAAO,WACL,MAAO,CACL,CAACsE,KAAM,qBAAsBwO,OAAQ,CAACN,SAAU,MAChD,CACElO,KAAM,oCACNwO,OAAQ,CACNsB,MAAO,IACP5B,SAAU,GACVC,OAAQ3N,EAAO6O,yBAGnB,CACErP,KAAM,qCACNwO,OAAQ,CAACN,SAAU,IAAKC,OAAQ,eAYxC1C,mBAAoB,CAACjQ,KAAMM,QAASJ,OAAO,GAK3CqU,oBAAqB,CAACvU,KAAMM,QAASJ,OAAO,GAM5CsU,iBAAkB,CAACxU,KAAMQ,SAG3B0K,eAAgB,CAACC,KAAM,QAASsJ,gBAAiB,QAEjD/T,UACI,CAACgU,gBAAiB,kBAAmBC,cAAe,iBAKxDC,qBAGE,IADA,IAAIxE,EAAQ/O,YAAIL,KAAKqP,EAAEC,SAASC,sBACvBhN,EAAI,EAAGiN,EAAIJ,EAAM5M,OAAQD,EAAIiN,EAAGjN,IACvC,GAAI6M,EAAM7M,GAAGkN,WAAaC,KAAKC,aAC7B,OAAOP,EAAM7M,IAQnBsR,OAAQ,WACF7T,KAAKiQ,OACPjQ,KAAK0Q,QAEL1Q,KAAKqQ,QAQTA,KAAM,WACArQ,KAAK8J,UAIT9J,KAAKqP,EAAEyE,SAASzD,QAMlBK,MAAO,WACL1Q,KAAKqP,EAAEyE,SAASpD,SAUlBqD,cAAe,SAAStS,GACjBzB,KAAKoT,cACRpT,KAAK0Q,SAUTsD,gBAAiB,SAASvS,GACpBzB,KAAKqT,iBACPrT,KAAK0Q,SAWTV,eAAgB,SAASC,EAAQgE,GAC3BhE,GAMFjQ,KAAKwT,iBAAmBxT,KAAK4T,eAC7B5T,KAAKc,KAAK,wBACY,MAAbmT,GACTjU,KAAKc,KAAK,yBAUdsN,iBAAkB,SAAStE,GACzB0E,IAAiBJ,iBAAiB3F,MAAMzI,KAAMiL,WAC1CnB,GAAY9J,KAAKiQ,QACnBjQ,KAAK0Q,SAITwD,wBAAyB,SAASzS,GAChC,IAAI0S,EAAU1S,EAAMwL,OAChBmH,EAAUpU,KAAKqP,EAAE+E,QACV/T,YAAI8T,GAASE,KAEfhM,QAAQ+L,IAAY,GAC3B3S,EAAMa,oBAKZ9C,OAAO8U,KAAKtQ,GAAQoH,QAAQ,SAASnG,GACnC8N,EAAgB9N,GAAOjB,EAAOiB,uCCtZhC/G,EAAA,IAWA,MAAMqW,EAAsB7O,SAASC,cAAc,YACnD4O,EAAoBlJ,aAAa,QAAS,kBAE1CkJ,EAAoBC,UACf,yKAML9O,SAAS+O,KAAKC,YAAYH,EAAoBjF,2CCrB9CpR,EAAA,IAWA,MAAMqW,EAAsB7O,SAASC,cAAc,YACnD4O,EAAoBlJ,aAAa,QAAS,kBAE1CkJ,EAAoBC,UACf,88CAmEL9O,SAAS+O,KAAKC,YAAYH,EAAoBjF,2CCjF9CpR,EAAAgH,EAAAC,EAAA,sBAAAwP,IAAA,IAAAC,EAAA1W,EAAA,KAEO,MAAMyW,EAAoBE,QACc1T,IAAtC0T,EAASC,WAAWC,cACvBC,YAAgBH,EAASI,WAAWC,QAAQ,KAAM,KAClDL,EAASC,WAAWC,eAAiB,qCCN3C7W,EAAAgH,EAAAC,EAAA,sBAAAgQ,IAAA,IAAAC,EAAAlX,EAAA,KAOA,MAAMmX,EAAa,CACjBC,MAAO,aACPC,MAAO,oBACPC,WAAY,qBACZC,SAAU,gBACVC,OAAQ,aACRC,QAAS,kBACTC,aAAc,gBACdC,aAAc,sBACdC,QAAS,eACTC,eAAgB,eAChBC,IAAK,WACLC,iBAAkB,wBAClBC,MAAO,kCACPC,cAAe,kBACfC,cAAe,sBACfC,QAAS,uBACTC,iBAAkB,2BAClBC,cAAe,eACfC,eAAgB,sBAChBC,aAAc,kBACdC,aAAc,4BACdC,WAAY,eACZC,MAAO,iBACPC,QAAS,eACTrP,OAAQ,qBACRsP,wBAAyB,YACzBC,OAAQ,eACRC,MAAO,cACPC,UAAW,oBACXC,OAAQ,cACRC,MAAO,oBACPC,OAAQ,qBACRC,OAAQ,WACRC,aAAc,YACdC,IAAK,2BACLC,OAAQ,aACRC,MAAO,aACPC,QAAS,oBACTC,OAAQ,oBACRC,aAAc,mBACdC,QAAS,sBACTC,QAAS,mBACTC,KAAM,mBAGK5C,EAAa,CAAC6C,EAAgBC,KACzC,GAAID,KAAU3C,EACZ,OAAOA,EAAW2C,GAGpB,OAAQA,GACN,IAAK,sBACH,OAAQC,GACN,IAAK,aACH,MAAO,iBACT,IAAK,cACH,MAAO,kBACT,IAAK,WACH,MAAO,oBACT,IAAK,YACH,MAAO,iBACT,QACE,MAAO,YAGb,IAAK,gBACH,OAAOA,GAAmB,QAAVA,EACZ,sBACA,8BAEN,IAAK,QACH,MAAiB,WAAVA,EAAqB,qBAAuB,mBAErD,IAAK,OACH,OAAOA,GAAmB,aAAVA,EAAuB,iBAAmB,YAE5D,IAAK,eACH,OAAOA,GAAmB,QAAVA,GAA6B,SAAVA,EAC/B,sBACA,YAEN,IAAK,QACH,OAAQA,GACN,IAAK,OACH,MAAO,qBACT,IAAK,WACH,MAAO,aACT,IAAK,eACH,MAAO,kBACT,QACE,MAAO,cAGb,QAKE,OAHAlS,QAAQC,KACN,kCAAoCgS,EAAS,KAAOC,EAAQ,KAEvDC,+ECnGb,MAAMC,EAAgBC,eAAelP,IAAI,aAIzC,IAAImP,GAAS,EAEN,MAAMC,UAAeH,EAAcI,eAAAC,aAAAC,SAAAD,UAAA,yBAAAxY,4FAGjC0Y,OACLjV,EACAkV,EACAC,GAEAH,MAAMC,OAAOjV,EAAMkV,EAAWC,GAEzBP,GAAgC,QAAtBrY,KAAK6Y,eAClBR,GAAS,EACTna,EAAAkI,EAAA,IAAA0S,KAAA5a,EAAAuC,KAAA,aAWN2X,eAAeW,OAAO,UAAWT,qCCnCjCpa,EAAAgH,EAAAC,EAAA,sBAAA6T,IAAA,IAAAC,EAAA/a,EAAA,KAEO,MAAM8a,EAAsBnE,GAC1BqE,YAAcrE,EAASI,4xCCe1BkE,22LAAN,cAAAC,EAAoCb,eAAAC,GAAAC,SAAAD,GAAAa,EAAArZ,4EAEjC8D,sEACAA,0EACAA,2EACAwV,YAAM,wEAEP,WACE,MAAMzE,EAAW7U,KAAK6U,SAEtB,OAAKA,EAIEnW;;;sBAGWsa,YAAmBnE;qBACpBA,EAASoD;gBACdjY,KAAKuZ,cAAgBC,YAAU3E;;MARlCnW,2CAaX,SAAkB+a,GAChB,IAAKA,EAAaC,IAAI,cAAgB1Z,KAAK6U,SACzC,OAEF,MAAMA,EAAW7U,KAAK6U,SAEhB8E,EAA0C,CAC9CC,MAAO,GACPtR,OAAQ,IAEJuR,EAA0C,CAC9CC,gBAAiB,IAEnB,GAAIjF,EAEF,GACGA,EAASC,WAAWiF,iBAAmB/Z,KAAKuZ,cAC7CvZ,KAAKga,cACL,CACA,IAAIC,EAAWja,KAAKga,eAAiBnF,EAASC,WAAWiF,eACrD/Z,KAAKka,OACPD,EAAWja,KAAKka,KAAKC,QAAQF,IAE/BJ,EAAUC,uBAAyBG,KACnCN,EAAUS,QAAU,WACf,CACL,GAAIvF,EAASC,WAAWuF,SAAU,CAChC,MAAMC,EAAMzF,EAASC,WAAWuF,SAAS,GACnCE,EAAM1F,EAASC,WAAWuF,SAAS,GACrCE,EAAM,KACRZ,EAAUC,aAAeU,YAAc,IAAMC,EAAM,OAGvD,GAAI1F,EAASC,WAAW0F,WAAY,CAClC,MAAMA,EAAa3F,EAASC,WAAW0F,WACvC,GAA0B,iBAAfA,EAAyB,CAClC,MAAMC,0DACJ5F,EAASI,6CACyBuF,MAAeA,KAEnDzU,QAAQC,KAAKyU,GAGfd,EAAUrR,sBAAwBkS,EAAa,KAAO,OAI5Dhb,OAAOkb,OAAO1a,KAAK2a,MAAMrI,MAAOqH,GAChCna,OAAOkb,OAAO1a,KAAKsS,MAAOuH,8CAG5B,WACE,OAAOe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA5EcC,KAqHzBzC,eAAeW,OAAO,cAAeI,qCCxIrCjb,EAAA,GAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,SAAA4c,EAAA5c,EAAA,GAAAK,EAAAL,EAAA,GAAA6c,EAAA7c,EAAA,KAqDAM,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;EA2BXC,GAAI,kBACJC,UAAW,CAACoc,yCClFd9c,EAAAgH,EAAAC,EAAA,sBAAA6P,IACO,MAAMA,EAAmBiG,GACvBA,EAASC,OAAOD,EAAS5S,QAAQ,KAAO,wECE1C,MCCD8S,EAAwB,CAC5BC,SAAU,qBACVC,YAAa,oBACbC,YAAa,mBACbC,SAAU,aACVC,MAAO,aACPC,gBAAiB,aCXnBvd,EAAAgH,EAAAC,EAAA,sBAAAqU,IAWA,MAAMkC,EAAc,CAClBC,cCR+B1D,IAC/B,MAAM2D,EAAY3D,EAAMA,OAAyB,QAAhBA,EAAMA,MACvC,OAAQA,EAAMnD,WAAW+G,cACvB,IAAK,UACH,OAAOD,EAAY,eAAiB,uBACtC,IAAK,OACH,OAAOA,EAAY,mBAAqB,iBAC1C,IAAK,eACH,OAAOA,EAAY,0BAA4B,sBACjD,IAAK,OACH,OAAOA,EAAY,mBAAqB,iBAC1C,IAAK,cACH,OAAOA,EAAY,cAAgB,mBACrC,IAAK,MACL,IAAK,QACL,IAAK,UACL,IAAK,SACL,IAAK,QACH,OAAOA,EAAY,oBAAsB,aAC3C,IAAK,OACH,OAAOA,EAAY,mBAAqB,YAC1C,IAAK,QACH,OAAOA,EAAY,oBAAsB,oBAC3C,IAAK,OACH,OAAOA,EAAY,YAAc,iBACnC,IAAK,WACH,OAAOA,EAAY,iBAAmB,aACxC,IAAK,SACH,OAAOA,EAAY,YAAc,WACnC,IAAK,YACH,OAAOA,EAAY,oBAAsB,YAC3C,IAAK,UACH,OAAOA,EAAY,cAAgB,sBACrC,IAAK,OACH,OAAOA,EAAY,sBAAwB,kBAC7C,IAAK,WACH,OAAOA,EAAY,oBAAsB,YAC3C,IAAK,QACH,OAAOA,EAAY,sBAAwB,kBAC7C,IAAK,YACH,OAAOA,EAAY,qBAAuB,eAC5C,IAAK,SACH,OAAOA,EAAY,qBAAuB,mBAC5C,QACE,OAAOA,EAAY,sBAAwB,gCDnC/CE,MFTwB7D,IACxB,MAAM5H,EAAuB,WAAhB4H,EAAMA,MACnB,OAAQA,EAAMnD,WAAW+G,cACvB,IAAK,SACH,OAAOxL,EAAO,mBAAqB,cACrC,IAAK,OACH,OAAOA,EAAO,iBAAmB,mBACnC,IAAK,UACH,OAAOA,EAAO,2BAA6B,sBAC7C,IAAK,QACH,OAAOA,EAAO,mBAAqB,cACrC,IAAK,SACH,OAAOA,EAAO,mBAAqB,qBACrC,QACE,OAAO8E,YAAW,QAAS8C,EAAMA,SEJrCZ,ODAyBY,IACzB,MAAM8D,EAAS9D,EAAMnD,WAAW+G,aAEhC,GAAIE,GAAUA,KAAUZ,EACtB,OAAOA,EAAsBY,GAE/B,GAAe,YAAXA,EAAsB,CACxB,MAAMC,EAAUxP,OAAOyL,EAAMA,OAC7B,GAAIgE,MAAMD,GACR,MAAO,uBAET,MAAME,EAA0C,GAA3BC,KAAKC,MAAMJ,EAAU,IAC1C,OAAIE,GAAgB,IACX,eAELA,GAAgB,EACX,qCAamBA,IAG9B,MAAMG,EAAOpE,EAAMnD,WAAWwH,oBAC9B,OAAID,IAASE,KAAUF,IAASG,IACvB,mBAEFrH,YAAW,WCnClBqB,eEXgCyB,GAC3BA,EAAMnD,WAAW2H,SAGjBxE,EAAMnD,WAAW4H,SAGfvH,YAAW,kBAFT,gBAHA,cFYEqE,EAAavB,IACxB,IAAKA,EACH,OAAOC,IAET,GAAID,EAAMnD,WAAW6H,KACnB,OAAO1E,EAAMnD,WAAW6H,KAG1B,MAAM3E,EAASkB,YAAcjB,EAAMhD,WAEnC,OAAI+C,KAAU0D,EACLA,EAAY1D,GAAQC,GAEtB9C,YAAW6C,EAAQC,EAAMA,qDGR3B,MAAM5U,EAAYA,GAErB,CAACuZ,EAAYC,KAEX,GAAKD,EAAME,YAAYC,YAahB,IAAKH,EAAME,YAAYE,eAAe,cAAe,CAC1D,MAAMvd,EAAYmd,EAAME,YAAYC,WACpCH,EAAME,YAAYC,WAAa,IAAIE,IACnCxd,EAAU2L,QAEN,CAAC8R,EAAQhW,IAAmB0V,EAAME,YAAYC,WAAWI,IAAIjW,EAAGgW,SAlBnC,CACjCN,EAAME,YAAYC,WAAa,IAAIE,IACnC,MAAMG,EAAcR,EAAMS,QAC1BT,EAAMS,QAAU,SAASC,GACvBF,EAAYta,KAAK9C,KAAMsd,GACvBA,EAAkBlS,QAAQ,CAAC8R,EAAGhW,KAC5B,MAAM7D,EAAWrD,KAAK8c,YAAYC,WAAW7T,IAAIhC,QAChC/F,IAAbkC,GACFA,EAASP,KAAK9C,KAAMA,KAAKkH,GAAIgW,MAarCN,EAAME,YAAYC,WAAWI,IAAIN,EAAUxZ,ICT3C,SAAUka,EAAkBC,GAChC,MAAO,CACLC,SAAWC,IACTF,EAAQjN,UAAUC,IAAIkN,IAExBC,YAAcD,IACZF,EAAQjN,UAAUK,OAAO8M,IAE3BE,SAAWF,GAAsBF,EAAQjN,UAAUsN,SAASH,IAIhE,IAAII,GAAkB,EACtB,MAAMC,EAAK,OACLC,EAAwC,CAC5CC,cAEE,OADAH,GAAkB,GACX,IAGXpY,SAASwY,iBAAiB,IAAKH,EAAIC,GACnCtY,SAASyY,oBAAoB,IAAKJ,GC5DlC7f,EAAAgH,EAAAC,EAAA,sBAAAiZ,IAAAlgB,EAAAgH,EAAAC,EAAA,sBAAA9B,IAAAnF,EAAAgH,EAAAC,EAAA,sBAAAoY,IAyBM,MAAgBa,UAAoBC,EAAA,EAkC9B9F,wBACmBpX,IAAvBnB,KAAKse,eACPte,KAAKse,cAAcC,UAErBve,KAAKse,cAAgB,IAAIte,KAAKwe,mBAAmBxe,KAAKye,iBACtDze,KAAKse,cAAcI,OAGXnG,eACRvY,KAAK2e,iwDCbHC,k2LAAN,MAAMA,UAANxF,EAAwCb,eAAAC,GAAAC,SAAAD,GAAAa,EAAArZ,gBAAlC4e,+BACH9a,YAAS,CAAE9E,KAAMM,mEACjBwE,YAAS,CAAE9E,KAAMM,kEACjBwE,YAAS,CAAE9E,KAAMM,QAASuf,UAAW,yFAErC/a,kEACAA,mEACAA,mEAMAA,YAAS,CAAE9E,KAAMyF,MAAOoa,UAAW,kFAOnC/a,YAAS,CAAE9E,KAAMyF,MAAOoa,UAAW,kFAOnC/a,YAAS,CAAE9E,KAAMyF,MAAOoa,UAAW,+FAEnC/a,0EACAA,YAAS,CAAE9E,KAAMM,iEACjBwE,uFAEoBgb,YACnB,CACE5E,EACA6E,EACAC,EACAC,EACAC,KAEA,IAAIC,EAAuB,GAE3B,IAAKjF,EACH,MAAO,GAET,IAAIkF,EAAY5f,OAAO8U,KAAK4F,EAAKiF,QAkCjC,OAhCIJ,IACFK,EAAYA,EAAU9W,OAAQ+W,GAC5BN,EAAeO,SAASpG,YAAcmG,MAItCL,IACFI,EAAYA,EAAU9W,OACnB+W,IAASL,EAAeM,SAASpG,YAAcmG,MAIpDF,EAASC,EAAUG,OAAOnb,IAAKa,GAAQiV,EAAMiF,OAAOla,IAEhDia,IACFC,EAASA,EAAO7W,OACbuM,GAECA,EAASI,YAAcjV,KAAKd,OAC3B2V,EAASC,WAAW+G,cACnBqD,EAAqBI,SAASzK,EAASC,WAAW+G,gBAItDoD,IACFE,EAASA,EAAO7W,OACbuM,GAECA,EAASI,YAAcjV,KAAKd,OAAS+f,EAAcpK,KAIlDsK,yCAIX,SAAkB1F,GAChB+F,EAAAC,EArFEb,EAqFFc,WAAA,UAAA1f,MAAA8C,KAAA9C,KAAcyZ,GAEVA,EAAaC,IAAI,UAAY1Z,KAAK2f,UACpC3f,KAAK4f,MAAQ5f,KAAKka,0CAItB,WACE,MAAMiF,EAASnf,KAAK6f,WAClB7f,KAAK4f,MACL5f,KAAK+e,eACL/e,KAAKgf,eACLhf,KAAKif,aACLjf,KAAKkf,sBAGP,OAAOxgB;;;;iBAIMygB;iBACAnf,KAAK8f;4BACM9f,KAAK+f;oBAvIb,CAClBC,EACAC,EACAC,KAEKF,EAAKG,oBACRH,EAAKxL,UAAa,qbAiBpBwL,EAAKI,cAAc,eAAgBvL,SAAWqL,EAAMpX,KACpDkX,EAAKI,cAAc,SAAUC,YAAc1L,YAAiBuL,EAAMpX,MAClEkX,EAAKI,cAAc,eAAgBC,YAAcH,EAAMpX,KAAKmM;0BAgHpCjV,KAAKgQ;yBACNhQ,KAAKsgB;;;uBAGPtgB,KAAKugB;wBACMpf,IAAfnB,KAAKwgB,OAAuBxgB,KAAK4f,MACtC5f,KAAK4f,MAAMa,SAAS,6CACpBzgB,KAAKwgB;mBACAxgB,KAAK8f;sBACF9f,KAAK8J;;;;;;;YAOf9J,KAAKd,MACHR;;+BAEiBsB,KAAKka,KAAMuG,SACtB;;;;2BAKOzgB,KAAK0gB;;;;;gBAMlB;YACFvB,EAAO3c,OAAS,EACd9D;;+BAEiBsB,KAAKka,KAAMuG,SACtB;;;0BAIMzgB,KAAK2f,QAAU,eAAiB;;;;gBAK5C;;;+CAMZ,SAAoBgB,GAClBA,EAAGzS,kBACHlO,KAAK4gB,UAAU,qCAGjB,WACE,OAAO5gB,KAAKd,OAAS,+CAGvB,SAAuByhB,GACrB3gB,KAAK2f,QAAUgB,EAAG1T,OAAO/N,iDAG3B,SAAsByhB,GACpB,MAAME,EAAWF,EAAG1T,OAAO/N,MACvB2hB,IAAa7gB,KAAK8f,QACpB9f,KAAK4gB,UAAUC,0CAInB,SAAkB3hB,GAChBc,KAAKd,MAAQA,EACb4hB,WAAW,KACTC,YAAU/gB,KAAM,gBAAiB,CAAEd,UACnC6hB,YAAU/gB,KAAM,WACf,8CAGL,WACE,OAAO4a;;;;;;;;;;WA7LkBC,KA2M7BzC,eAAeW,OAAO,mBAAoB6F,qCClQ1C1gB,EAAA,GAAAA,EAAA,IAAAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,IAAAA,EAAA,KAAAA,EAAA,SAAA8iB,EAAA9iB,EAAA,IAAA+iB,EAAA/iB,EAAA,IAAAgjB,EAAAhjB,EAAA,IAAAijB,EAAAjjB,EAAA,IAAAkjB,EAAAljB,EAAA,IAAAmjB,EAAAnjB,EAAA,GAAAojB,EAAApjB,EAAA,GAAAqjB,EAAArjB,EAAA,IAAAsjB,EAAAtjB,EAAA,GAsGAM,YAAQ,CACNC,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAiMXC,GAAI,4BAEJC,UAAW,CACT6iB,IACAjT,IACAkT,IACAC,IACA9iB,KAGFC,WAAY,CAMV8iB,kBAAmB,CAAC5iB,KAAMC,OAAQuI,QAAQ,EAAME,UAAU,GAS1DS,aAAc,CAACnJ,KAAMQ,OAAQgI,QAAQ,EAAME,UAAU,GAOrDxI,MAAO,CACLF,KAAMC,OACNuI,QAAQ,EACRnE,SAAU,iBAMZmd,MAAO,CAACxhB,KAAMC,QAKd4iB,YAAa,CAAC7iB,KAAMC,QAKpBgR,OACI,CAACjR,KAAMM,QAASkI,QAAQ,EAAMtI,OAAO,EAAOmE,SAAU,kBAQ1D4L,mBAAoB,CAACjQ,KAAMM,QAASJ,OAAO,GAM3C4iB,aAAc,CAAC9iB,KAAMM,QAASJ,OAAO,EAAOyP,oBAAoB,GAMhEoT,iBAAkB,CAAC/iB,KAAMM,QAASJ,OAAO,GAMzC8P,aAAc,CAAChQ,KAAMM,QAASJ,OAAO,GAMrCwP,gBAAiB,CAAC1P,KAAMC,OAAQC,MAAO,SAMvC0P,cAAe,CAAC5P,KAAMC,OAAQC,MAAO,OAMrCgU,eAAgB1G,OAEhBwV,WAAY,CAAChjB,KAAMM,QAASoI,UAAU,IAGxChI,UAAW,CAACuiB,IAAO,UAKnB1X,YAAa,CAAC2X,UAAW,OAAQxX,IAAO,SAExCR,eAAgB,CACdiY,SAAU,EACVhY,KAAM,WACNiY,oBAAqB,OACrB3O,gBAAiB,QAGnBhU,UAAW,CAAC,sCAEZU,SAAU,WAKR,IAAIyT,EAAiB5T,KAAK4T,eACtBA,GAAkBA,EAAezL,cACnCnI,KAAKuJ,iBAAiBqK,EAAezL,eAOzCyL,qBAGE,IADA,IAAIxE,EAAQ/O,YAAIL,KAAKqP,EAAEC,SAASC,sBACvBhN,EAAI,EAAGiN,EAAIJ,EAAM5M,OAAQD,EAAIiN,EAAGjN,IACvC,GAAI6M,EAAM7M,GAAGkN,WAAaC,KAAKC,aAC7B,OAAOP,EAAM7M,IAQnB8N,KAAM,WACJrQ,KAAKqP,EAAEgT,WAAWhS,QAMpBK,MAAO,WACL1Q,KAAKqP,EAAEgT,WAAW3R,SAQpBqD,cAAe,SAAStS,GACtBzB,KAAKuJ,iBAAiB9H,EAAMwL,OAAOnE,OAQrCwZ,gBAAiB,SAAS7gB,GACxBzB,KAAKuJ,iBAAiB,OAQxBgZ,OAAQ,SAAS9gB,GACX+gB,IAA4B/gB,KAAWzB,MACzCA,KAAKqQ,QAUToS,qBAAsB,SAASta,GAC7B,IAAIjJ,EAAQ,GAIVA,EAHGiJ,EAGKA,EAAaqY,OAASrY,EAAa8D,aAAa,UACpD9D,EAAakY,YAAYnU,OAHrB,GAMVlM,KAAKd,MAAQA,EACbc,KAAK0iB,sBAAsBxjB,IAW7ByjB,2BAA4B,SAASb,EAAcc,GAEjD,OAAIA,IAQGd,GAAgB,EAAI,IAU7Be,aAAc,SAAS/C,GACrB,OAAO9f,KAAK8J,WAAa9J,KAAK4C,UAAa5C,KAAK4C,YAAc5C,KAAKd,OAGrE8Q,eAAgB,WACd,IAAI8S,EAAY9iB,KAAKiQ,OAAS,OAAS,QACnC7J,EAAIpG,KAAK4T,eACTxN,GACFA,EAAEiF,aAAa,gBAAiByX,IAIpCC,mBAAoB,SAASjB,EAAcC,EAAkBC,GAC3D,IAAIgB,EAAM,GACV,OAAqB,IAAjBlB,EACKE,EAAa,kBAAoB,KAGtCA,IAAmC,IAArBD,KAChBiB,GAAO,sBAEFA,IAGT1C,cAAe,WAETtgB,KAAKqP,EAAE1P,OAASK,KAAKqP,EAAE1P,MAAM0gB,cAAgBrgB,KAAKd,QACpDc,KAAKqP,EAAE1P,MAAM0gB,YAAcrgB,KAAKd,OAElCc,KAAKijB,iBAAiBjjB,KAAKd,4CC5iB/BhB,EAAAgH,EAAAC,EAAA,sBAAA+d,IAAAhlB,EAAA,OAAAilB,EAAAjlB,EAAA,GAyBO,MAAMglB,EAA2B,CAEtCpkB,WAAY,CAqCVskB,aAAc,CACZpkB,KAAMqkB,YACNnkB,MAAO,WACL,OAAOc,KAAKsjB,wBAKlB7jB,UAAW,CAAC,kDAKZ8jB,qBAAqB,EAErBC,qBAAsB,SAASJ,EAAcjS,GAO3C,GAJInR,KAAKyjB,mBACPzjB,KAAK0jB,uBAAsB,EAAO1jB,KAAKyjB,kBACvCzjB,KAAKyjB,iBAAmB,MAErBtS,EAIL,GAAqB,aAAjBiS,EACFpjB,KAAKojB,aAAepjB,KAAK2jB,UAEpB,GAA4B,iBAAjBP,EAA2B,CAC3C,IAAIQ,EAAU5jB,KAAK4jB,QAEnB5jB,KAAKojB,aAAeQ,GAAWA,EAAQvU,EACnCuU,EAAQvU,EAAE+T,GACV/iB,YAAIL,KAAK6jB,eAAezD,cAAc,IAAMgD,QAEvCpjB,KAAK8jB,yBACd9jB,KAAKyjB,iBAAmBL,EACxBpjB,KAAK0jB,sBAAsB1jB,KAAKujB,oBAAqBH,KAUzDW,eAAgB,aAQhBT,2BACE,OAAOtjB,KAAK2jB,MAQdA,WACE,OAAO3jB,KAAK6jB,cAAcG,iBAS5BC,iBACE,OAAIjkB,KAAK8jB,uBACA9jB,KAAKojB,eAAiBpjB,KAAK2jB,KAAOO,OAAOC,YACPnkB,KAAKojB,aAAagB,UAEtD,GASTC,kBACE,OAAIrkB,KAAK8jB,uBACA9jB,KAAKojB,eAAiBpjB,KAAK2jB,KAAOO,OAAOI,YACPtkB,KAAKojB,aAAamB,WAEtD,GASTN,eAAeO,GACTxkB,KAAKojB,eAAiBpjB,KAAK2jB,KAC7BO,OAAOO,SAASP,OAAOI,YAAaE,GAC3BxkB,KAAK8jB,yBACd9jB,KAAKojB,aAAagB,UAAYI,IAUlCH,gBAAgBK,GACV1kB,KAAKojB,eAAiBpjB,KAAK2jB,KAC7BO,OAAOO,SAASC,EAAMR,OAAOC,aACpBnkB,KAAK8jB,yBACd9jB,KAAKojB,aAAamB,WAAaG,IAYnCC,OAAQ,SAASC,EAAeJ,GAC9B,IAAIE,EAEyB,iBAAlBE,GACTF,EAAOE,EAAcF,KACrBF,EAAMI,EAAcJ,KAEpBE,EAAOE,EAGTF,EAAOA,GAAQ,EACfF,EAAMA,GAAO,EACTxkB,KAAKojB,eAAiBpjB,KAAK2jB,KAC7BO,OAAOO,SAASC,EAAMF,GACbxkB,KAAK8jB,yBACd9jB,KAAKojB,aAAamB,WAAaG,EAC/B1kB,KAAKojB,aAAagB,UAAYI,IASlCK,yBACE,OAAI7kB,KAAK8jB,uBACA9jB,KAAKojB,eAAiBpjB,KAAK2jB,KAAOO,OAAOY,WACP9kB,KAAKojB,aAAa2B,YAEtD,GAQTC,0BACE,OAAIhlB,KAAK8jB,uBACA9jB,KAAKojB,eAAiBpjB,KAAK2jB,KAAOO,OAAOe,YACPjlB,KAAKojB,aAAa8B,aAEtD,GAQTpB,qBAAsB,WACpB,OAAO9jB,KAAKojB,wBAAwBC,aAGtCK,sBAAuB,SAASyB,EAAK/B,GACnC,IAAIgC,EAAchC,IAAiBpjB,KAAK2jB,KAAOO,OAASd,EACpD+B,EACGnlB,KAAKqlB,sBACRrlB,KAAKqlB,oBAAsBrlB,KAAK+jB,eAAetjB,KAAKT,MACpDolB,EAAYlH,iBAAiB,SAAUle,KAAKqlB,sBAG1CrlB,KAAKqlB,sBACPD,EAAYjH,oBAAoB,SAAUne,KAAKqlB,qBAC/CrlB,KAAKqlB,oBAAsB,OAUjCC,qBAAsB,SAASH,GAC7BnlB,KAAKujB,oBAAsB4B,EAC3BnlB,KAAK0jB,sBAAsByB,EAAKnlB,KAAKojB,kDClRzCllB,EAAAgH,EAAAC,EAAA,sBAAAogB,IAAArnB,EAAAgH,EAAAC,EAAA,sBAAAqgB,IAAA,MAAMC,EAAgB,iBAETF,EAAmBtK,GAC9BwK,EAAcpjB,KAAK4Y,GAERuK,EAAuB7lB,GAClCA,EACG+lB,cACAxQ,QAAQ,SAAU,KAClBA,QAAQ,MAAO,IACfA,QAAQ,SAAU,KAClBA,QAAQ,KAAM,sFCwCnB1W,YAAQ,CACNG,GAAI,0BAEJF,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwCXE,UAAW,CAAC8iB,KAEZiE,WAAY,WACV3lB,KAAKvB,UAAU4M,aAAa,mBAAoB,KAGlDuE,MAAO,WACLgW,YAAgB5lB,KAAM,KAEpBA,KAAKke,iBAAiB,OAAQle,KAAK6lB,YAAYplB,KAAKT,OACpDA,KAAKke,iBAAiB,KAAMle,KAAK8lB,UAAUrlB,KAAKT,OAGhD,IAAI+lB,EAAS/lB,KAAKa,uBAAuB,GACzCb,KAAKgmB,iBAAmBD,EAIxBA,EAAO7H,iBAAiB,QAASle,KAAK6lB,YAAYplB,KAAKT,OACvD+lB,EAAO7H,iBAAiB,OAAQle,KAAK8lB,UAAUrlB,KAAKT,UAGxD6lB,YAAa,WACX7lB,KAAKimB,YAAYC,gBAEnBJ,UAAW,WACT9lB,KAAKimB,YAAYE,cAKnBC,aAAc,SAASC,GACrB,IAAIC,EAAatmB,KAAKumB,QACtB7E,IAAoB0E,aAAa3d,MAAMzI,KAAMiL,WACzCjL,KAAKumB,SAAWvmB,KAAKumB,UAAYD,IACnCtmB,KAAKumB,QAAQC,QAAS,EACtBxmB,KAAKumB,QAAQhW,UAAUC,IAAI,ujOC9GhCiW,YAAc,8CAAf,cAAArN,EAC+Cb,eAAAC,GAAAC,SAAAD,GAAAa,EAAArZ,qCAC5C8D,kEACAA,mEAMAA,YAAS,CAAE9E,KAAMyF,MAAOoa,UAAW,kFAOnC/a,YAAS,CAAE9E,KAAMyF,MAAOoa,UAAW,kFAEnC/a,YAAS,CAAE+a,UAAW,yFAEtB/a,YAAS,CAAE+a,UAAW,6FAEvB,WACE,IAAK7e,KAAKka,KACR,OAGF,MAAMwM,EAAkB1mB,KAAK2mB,iBAC7B,OAAOjoB;QACHgoB,EAAgBtiB,IACf6W,GAAavc;;;;0BAIIuc;sBACJjb,KAAKka;gCACKla,KAAK+e;gCACL/e,KAAKgf;8BACPhf,KAAK4mB;uBACZ3L;uBACAjb,KAAK6mB;+BACG7mB,KAAK8mB;;;;;;kBAOlB9mB,KAAKka;4BACKla,KAAK+e;4BACL/e,KAAKgf;0BACPhf,KAAK4mB;mBACZ5mB,KAAK+mB;2BACG/mB,KAAKgnB;;;yDAO5BnS,IACI7U,KAAKd,QAAUc,KAAKd,MAAMogB,SAASzK,EAASI,sDAElD,WACE,OAAOjV,KAAKd,OAAS,gDAGvBoO,eAA8B2Z,GAC5BlG,YAAU/gB,KAAM,gBAAiB,CAC/Bd,MAAO+nB,IAGTjnB,KAAKd,MAAQ+nB,8CAGf,SAAuBxlB,GACrBA,EAAMyM,kBACN,MAAMgZ,EAAYzlB,EAAM0lB,cAAsBD,SACxCrG,EAAWpf,EAAMwL,OAAO/N,MAE5B2hB,IAAaqG,GACC,KAAbrG,IAAoB0E,YAAgB1E,KAItB,KAAbA,EACF7gB,KAAKonB,gBACHpnB,KAAK2mB,iBAAiBre,OAAQ+e,GAAQA,IAAQH,IAGhDlnB,KAAKonB,gBACHpnB,KAAK2mB,iBAAiBviB,IAAKijB,GAASA,IAAQH,EAAWrG,EAAWwG,6CAKxE/Z,eAAyB7L,GACvBA,EAAMyM,kBACN,MAAMoZ,EAAQ7lB,EAAMwL,OAAO/N,MAE3B,GADCuC,EAAM0lB,cAAsBjoB,MAAQ,IAChCooB,EACH,OAEF,MAAMZ,EAAkB1mB,KAAK2mB,iBACzBD,EAAgBpH,SAASgI,IAI7BtnB,KAAKonB,gBAAgB,IAAIV,EAAiBY,SA3GVzM,wBCuCpC,gBAEE,MAAM0M,EAAoBC,SACpBC,EAAwBD,SACxBE,EAAgBF,SAChBG,EAAqBH,SACrBI,EAAYJ,SAGZK,EAAcL,SACdM,EAAsBN,SACtBO,EAAiBP,SACjBQ,EAA0BR,SAC1BS,EAAcT,SACdU,EAA0BV,SAC1BW,EAAeX,SACfY,EAAmBZ,SAuWxB9hB,SAA0C2iB,kBACvC,IAlVJ,MAAA9P,cAISvY,KAAAsoB,GAA+C,GAQ/CtoB,KAAAuoB,GAAsC,GAMtCvoB,KAAAwoB,GAA0B,IAAIC,IAErClQ,aAEEvY,KAAKgoB,GAAyBhoB,KAAK0nB,IAKlB1nB,KAKRunB,GAAqB,KALbvnB,KAMR0nB,GAAiB,KANT1nB,KAORynB,GAAyB,KAGpCjD,UACE,MAAMkE,EAAQ1oB,KAAKunB,GACnB,OAAOmB,EAAMA,EAAMlmB,OAAS,IAAM,KAGpC+V,KAAKiF,GACEA,GAAWA,IAAYxd,KAAKwkB,MAIjCxkB,KAAK4Q,OAAO4M,GACZxd,KAAK6nB,GAAarK,GAClBxd,KAAKunB,GAAmBxiB,KAAKyY,IAG/BjF,OAAOiF,GACL,MAAMjb,EAAIvC,KAAKunB,GAAmBlf,QAAQmV,GAC1C,OAAW,IAAPjb,IAGJvC,KAAKunB,GAAmB/d,OAAOjH,EAAG,GAE9BA,IAAMvC,KAAKunB,GAAmB/kB,QAChCxC,KAAK6nB,GAAa7nB,KAAKwkB,MAElB,GAGTjM,MACE,MAAMiM,EAAMxkB,KAAKwkB,IAEjB,OADAA,GAAOxkB,KAAK4Q,OAAO4T,GACZA,EAGTjM,IAAIiF,GACF,OAAqD,IAA9Cxd,KAAKunB,GAAmBlf,QAAQmV,GAOlCjF,EAAA+P,EA3ECf,EAAiBgB,EAQjBb,EAAac,EAMbf,EA6DAI,IAAac,GACnB,MAAMC,EAAc5oB,KAAKynB,GACnBoB,EAAa7oB,KAAK0nB,GAExB,IAAKiB,EAIH,OAHA3oB,KAAKgoB,GAAyBa,GAC9BD,EAAY7f,aACZ/I,KAAK0nB,GAAiB,IAIxB,MAAMoB,EAAa9oB,KAAKioB,GAAaU,GAErC,GAAIG,EAAWA,EAAWtmB,OAAS,GAAGumB,aAAerjB,SAASmM,KAC5D,MAAMmX,MAAM,sDAIdhpB,KAAK0nB,GAAiBoB,EAEtB,MAAMG,EAASjpB,KAAKkoB,GAAyBS,GAG7C,IAAKE,EAAWrmB,OAEd,YADAxC,KAAK+nB,GAAgBe,EAAYG,EAAQL,GAI3C,IAAIrmB,EAAIsmB,EAAWrmB,OAAS,EACxB4E,EAAI0hB,EAAWtmB,OAAS,EAE5B,KAAOD,EAAI,GAAK6E,EAAI,GAAKyhB,EAAWtmB,KAAOumB,EAAW1hB,IACpD7E,IACA6E,IAIEyhB,EAAWtmB,KAAOumB,EAAW1hB,IAC/BpH,KAAK8nB,GAAqBe,EAAWtmB,GAAIumB,EAAW1hB,IAGtD7E,EAAI,GAAKvC,KAAKgoB,GAAyBa,EAAW1c,MAAM,EAAG5J,IAE3D6E,EAAI,GAAKpH,KAAK+nB,GAAgBe,EAAW3c,MAAM,EAAG/E,GAAI6hB,EAAQ,MASzD1Q,CAACuP,GACJoB,EAA4BC,GAC9B,MAAMC,EAAoBF,EAASvB,GAG/B3nB,KAAKmoB,GAAce,KAAcA,EAASG,QAC5CH,EAASG,OAAQ,EACjBD,EAAkB5Y,IAAI0Y,IAIpBE,EAAkB1P,IAAIyP,KACxBA,EAASE,OAAQ,EACjBD,EAAkBE,OAAOH,IAE3BA,EAASvB,GAAasB,EAAStB,GAC/BuB,EAASxB,GAAsByB,EAC9BF,EAAmCtB,QAAazmB,EAChD+nB,EAAmCvB,QAAsBxmB,EASrDoX,CAACyP,GAAyBuB,GAC/B,IAAK,MAAM/L,KAAW+L,EAAU,CACnB/L,EAAQoK,GAChB4B,aACFhM,EAAkCoK,QAAazmB,EAChD,MAAMsoB,EAAWjM,EAAQmK,GACzB,IAAK,MAAM+B,KAAWD,EACpBC,EAAQL,OAAQ,EAEjB7L,EAAkCmK,QAAsBxmB,GAYtDoX,CAACwP,GACJwB,EAAmCN,EACnCL,GACF,IAAK,MAAMpL,KAAW+L,EAAU,CAE9B,MAAMI,EAASnM,EAAQuL,WACjBa,EAAWD,EAAOC,SAClBC,EAAkB,IAAIpB,IAC5B,IAAK,IAAIrhB,EAAI,EAAGA,EAAIwiB,EAASpnB,OAAQ4E,IAAK,CACxC,MAAMsiB,EAAUE,EAASxiB,GAErBsiB,IAAYlM,IAAYxd,KAAKmoB,GAAcuB,IAC1CT,GAAUA,EAAOvP,IAAIgQ,KAItBd,GAAec,EAAQL,MACzBT,EAAYpY,IAAIkZ,IAEhBA,EAAQL,OAAQ,EAChBQ,EAAgBrZ,IAAIkZ,KAIxBlM,EAAQmK,GAAsBkC,EAE9B,MAAMC,EAAK,IAAIC,iBAAiB/pB,KAAKooB,GAAkB3nB,KAAKT,OAC5Dwd,EAAQoK,GAAakC,EACrB,IAAIE,EAAkBL,EAItB,MAAMM,EAAiBD,EACnBC,EAAeC,SAAWD,EAAeE,OAC3CH,EAAkBC,EAAeE,MAEnCL,EAAGM,QAAQJ,EAAiB,CAC1BK,WAAW,KAUV9R,CAAC6P,GAAkBkC,GACxB,MAAMC,EAAUvqB,KAAK0nB,GACfkB,EAAc5oB,KAAKynB,GACzB,IAAK,MAAM+C,KAAYF,EAAW,CAGhC,MAAMG,EAAUD,EAASC,OAAsBN,MAAQK,EAASC,OAC1DC,EAAMD,IAAW/kB,SAASmM,KAC5B0Y,EAAQ/nB,OACR+nB,EAAQliB,QAAQoiB,GACdE,EAAeJ,EAAQG,EAAM,GAC7Bb,EAAkBc,EAAahD,GAGrC,IAAK,IAAIplB,EAAI,EAAGA,EAAIioB,EAASI,aAAapoB,OAAQD,IAAK,CACrD,MAAMmnB,EAAUc,EAASI,aAAaroB,GACtC,GAAImnB,IAAYiB,EAGd,OAFA5kB,QAAQxF,KAAK,sDACbP,KAAK6qB,MAGHhB,EAAgBnQ,IAAIgQ,KACtBA,EAAQL,OAAQ,EAChBQ,EAAgBP,OAAOI,IAK3B,IAAK,IAAInnB,EAAI,EAAGA,EAAIioB,EAAStd,WAAW1K,OAAQD,IAAK,CACnD,MAAMmnB,EAAUc,EAAStd,WAAW3K,GAC/BvC,KAAKmoB,GAAcuB,KAGpBd,GAAec,EAAQL,MACzBT,EAAYpY,IAAIkZ,IAEhBA,EAAQL,OAAQ,EAChBQ,EAAgBrZ,IAAIkZ,OASrBnR,CAAC4P,GAAc3K,GACpB,OAAO,IAAU,4BAA4Bnb,KAAKmb,EAAQsN,WAOrDvS,CAAC0P,GAAazK,GACnB,MAAM+M,EAAU,GAChB,IAAIQ,EAAsCvN,EAE1C,KAAOuN,GAAWA,IAAYrlB,SAASmM,MAMrC,GAJIkZ,EAAQtb,WAAaC,KAAKC,cAC5B4a,EAAQxlB,KAAKgmB,GAGXA,EAAQC,aAAZ,CAEE,KAAOD,EAAUA,EAAQC,cACvBT,EAAQxlB,KAAKgmB,GAGfA,EAAUR,EAAQM,WAGpBE,EAAUA,EAAQhC,YACbgC,EAA+BZ,KAEtC,OAAOI,EAOFhS,CAAC2P,GAAyB1K,GAE/B,MAAMyN,EAAazN,EAAQyN,WAC3B,IAAKA,EACH,OAAO,KAET,MAAMplB,EAAS,IAAI4iB,IACnB,IAAIlmB,EACA6E,EACAgI,EACJ,MAAM8b,EAAQD,EAAWE,iBAAiB,QAC1C,GAAID,EAAM1oB,QAAU0oB,EAAM,GAAGE,cAC3B,IAAK7oB,EAAI,EAAGA,EAAI2oB,EAAM1oB,OAAQD,IAI5B,IAHA6M,EAAQ8b,EAAM3oB,GAAG6oB,cAAc,CAC7BC,SAAS,IAENjkB,EAAI,EAAGA,EAAIgI,EAAM5M,OAAQ4E,IACxBgI,EAAMhI,GAAGqI,WAAaC,KAAKC,cAC7B9J,EAAO2K,IAAIpB,EAAMhI,IAMzB,OAAOvB,KAnXb,sBCrDA,MAAMsG,EAAQ1H,MAAMib,UAAUvT,MAMxBmf,EACFC,QAAQ7L,UAAU4L,SAAWC,QAAQ7L,UAAU8L,kBAG7CC,EAA2B,CAAC,UACA,aACA,wBACA,yBACA,2BACA,yBACA,SACA,SACA,QACA,qBAAqBC,KAAK,KAkB5D,MAAMC,EAKJ7O,YAAY8O,EAAaC,GAEvB7rB,KAAK8rB,cAAgBD,EAGrB7rB,KAAK+rB,aAAeH,EAMpB5rB,KAAKgsB,cAAgB,IAAIvD,IAGrBzoB,KAAK+rB,aAAahhB,aAAa,eAEjC/K,KAAKisB,iBAAmBjsB,KAAK+rB,aAAa9f,aAAa,eAEvDjM,KAAKisB,iBAAmB,KAE1BjsB,KAAK+rB,aAAa1gB,aAAa,cAAe,QAG9CrL,KAAKksB,wBAAwBlsB,KAAK+rB,cAOlC/rB,KAAKI,UAAY,IAAI2pB,iBAAiB/pB,KAAKmsB,YAAY1rB,KAAKT,OAC5DA,KAAKI,UAAUgqB,QAAQpqB,KAAK+rB,aAAc,CAACjX,YAAY,EAAMuV,WAAW,EAAM+B,SAAS,IAOzFC,aACErsB,KAAKI,UAAUopB,aAEXxpB,KAAK+rB,eACuB,OAA1B/rB,KAAKisB,iBACPjsB,KAAK+rB,aAAa1gB,aAAa,cAAerL,KAAKisB,kBAEnDjsB,KAAK+rB,aAAavgB,gBAAgB,gBAItCxL,KAAKgsB,cAAc5gB,QAAQ,SAASkhB,GAClCtsB,KAAKusB,cAAcD,EAAU7oB,OAC5BzD,MAQHA,KAAKI,UAA8B,KACnCJ,KAAK+rB,aAAiC,KACtC/rB,KAAKgsB,cAAkC,KACvChsB,KAAK8rB,cAAkC,KAMzCU,mBACE,OAAO,IAAI/D,IAAIzoB,KAAKgsB,eAItBS,yBACE,OAAiC,OAA1BzsB,KAAKisB,iBAIdS,oBAAoBC,GAClB3sB,KAAKisB,iBAAmBU,EAI1BD,sBACE,OAAO1sB,KAAKisB,iBAMdC,wBAAwBU,GACtBC,EAAiBD,EAAYnpB,GAASzD,KAAK8sB,WAAWrpB,IAEtD,IAAIkJ,EAAgBjH,SAASiH,cAE7B,IAAKjH,SAASmM,KAAKgM,SAAS+O,GAAY,CAEtC,IAAInpB,EAAOmpB,EAEP5M,OAAO7e,EACX,KAAOsC,GAAM,CACX,GAAIA,EAAKgM,WAAaC,KAAKqd,uBAAwB,CACjD/M,EAAmCvc,EACnC,MAEFA,EAAOA,EAAKslB,WAEV/I,IACFrT,EAAgBqT,EAAKrT,eAGrBigB,EAAU/O,SAASlR,KACrBA,EAAcoB,OAIVpB,IAAkBjH,SAASiH,eAC7BjH,SAASmM,KAAKzH,SAQpB0iB,WAAWrpB,GACT,GAAIA,EAAKgM,WAAaC,KAAKC,aACzB,OAEF,MAAM6N,EAAmC/Z,EAIrC+Z,IAAYxd,KAAK+rB,cAAgBvO,EAAQzS,aAAa,UACxD/K,KAAKgtB,gBAAgBxP,IAGnB8N,EAAQxoB,KAAK0a,EAASiO,IAA6BjO,EAAQzS,aAAa,cAC1E/K,KAAKitB,YAAYzP,GAQrByP,YAAYxpB,GACV,MAAM6oB,EAAYtsB,KAAK8rB,cAAcoB,SAASzpB,EAAMzD,MACpDA,KAAKgsB,cAAcxb,IAAI8b,GAOzBC,cAAc9oB,GACZ,MAAM6oB,EAAYtsB,KAAK8rB,cAAcqB,WAAW1pB,EAAMzD,MAClDssB,GACFtsB,KAAKgsB,cAAc1C,OAAOgD,GAQ9Bc,iBAAiBR,GACfC,EAAiBD,EAAYnpB,GAASzD,KAAKusB,cAAc9oB,IAO3DupB,gBAAgBvpB,GACd,IAAI4pB,EAAertB,KAAK8rB,cAAcwB,aAAa7pB,GAI9C4pB,IACHrtB,KAAK8rB,cAAcyB,SAAS9pB,GAAM,GAClC4pB,EAAertB,KAAK8rB,cAAcwB,aAAa7pB,IAGjD4pB,EAAab,aAAaphB,QAAQ,SAASoiB,GACzCxtB,KAAKitB,YAAYO,EAAe/pB,OAC/BzD,MAQLmsB,YAAYsB,EAASC,GACnBD,EAAQriB,QAAQ,SAASuiB,GACvB,MAAMlD,EAAkCkD,EAAOlD,OAC/C,GAAoB,cAAhBkD,EAAO3uB,KAETmN,EAAMrJ,KAAK6qB,EAAOzgB,YAAY9B,QAAQ,SAAS3H,GAC7CzD,KAAKksB,wBAAwBzoB,IAC5BzD,MAGHmM,EAAMrJ,KAAK6qB,EAAO/C,cAAcxf,QAAQ,SAAS3H,GAC/CzD,KAAKotB,iBAAiB3pB,IACrBzD,WACE,GAAoB,eAAhB2tB,EAAO3uB,KAChB,GAA6B,aAAzB2uB,EAAOC,cAET5tB,KAAKitB,YAAYxC,QACZ,GAAIA,IAAWzqB,KAAK+rB,cACS,UAAzB4B,EAAOC,eACPnD,EAAO1f,aAAa,SAAU,CAGvC/K,KAAKgtB,gBAAgBvC,GACrB,MAAM4C,EAAertB,KAAK8rB,cAAcwB,aAAa7C,GACrDzqB,KAAKgsB,cAAc5gB,QAAQ,SAASyiB,GAC9BpD,EAAO5M,SAASgQ,EAAYpqB,OAC9B4pB,EAAaJ,YAAYY,EAAYpqB,UAK5CzD,OAkBP,MAAM8tB,EAKJhR,YAAYrZ,EAAMsqB,GAEhB/tB,KAAKguB,MAAQvqB,EAGbzD,KAAKiuB,sBAAuB,EAM5BjuB,KAAKkuB,YAAc,IAAIzF,IAAI,CAACsF,IAG5B/tB,KAAKmuB,eAAiB,KAGtBnuB,KAAKouB,YAAa,EAGlBpuB,KAAKquB,mBAOPhC,aAGE,GAFArsB,KAAKsuB,oBAEDtuB,KAAKguB,OAAShuB,KAAKguB,MAAMve,WAAaC,KAAKC,aAAc,CAC3D,MAAM6N,EAAmCxd,KAAKguB,MAClB,OAAxBhuB,KAAKmuB,eACP3Q,EAAQnS,aAAa,WAAYrL,KAAKmuB,gBAEtC3Q,EAAQhS,gBAAgB,YAItBxL,KAAKiuB,6BACAzQ,EAAQpT,MAKnBpK,KAAKguB,MAA0B,KAC/BhuB,KAAKkuB,YAAgC,KACrCluB,KAAKouB,YAAa,EAOpBG,gBACE,OAAkCvuB,KAAlC,WAMFsuB,oBACE,GAAItuB,KAAKuuB,UACP,MAAM,IAAIvF,MAAM,wCAKpBwF,uBACE,OAA+B,OAAxBxuB,KAAKmuB,eAId1qB,WAEE,OADAzD,KAAKsuB,oBACEtuB,KAAKguB,MAIdS,kBAAkBhhB,GAChBzN,KAAKsuB,oBACLtuB,KAAKmuB,eAAiB1gB,EAIxBghB,oBAEE,OADAzuB,KAAKsuB,oBACEtuB,KAAKmuB,eAIdE,mBACE,GAAIruB,KAAKyD,KAAKgM,WAAaC,KAAKC,aAC9B,OAEF,MAAM6N,EAAmCxd,KAAKyD,KAC9C,GAAI6nB,EAAQxoB,KAAK0a,EAASiO,GAA2B,CACnD,IAAwD,IAAvBjO,EAAS/P,UACtCzN,KAAKwuB,iBACP,OAGEhR,EAAQzS,aAAa,cACvB/K,KAAKmuB,eAA8C3Q,EAAS/P,UAE9D+P,EAAQnS,aAAa,WAAY,MAC7BmS,EAAQ/N,WAAaC,KAAKC,eAC5B6N,EAAQpT,MAAQ,aAChBpK,KAAKiuB,sBAAuB,QAErBzQ,EAAQzS,aAAa,cAC9B/K,KAAKmuB,eAA8C3Q,EAAS/P,SAC5D+P,EAAQhS,gBAAgB,aAQ5BkjB,aAAaX,GACX/tB,KAAKsuB,oBACLtuB,KAAKkuB,YAAY1d,IAAIud,GASvBY,gBAAgBZ,GACd/tB,KAAKsuB,oBACLtuB,KAAKkuB,YAAY5E,OAAOyE,GACM,IAA1B/tB,KAAKkuB,YAAYU,MACnB5uB,KAAKqsB,cA0MX,SAASQ,EAAiBppB,EAAMorB,EAAUC,GACxC,GAAIrrB,EAAKgM,UAAYC,KAAKC,aAAc,CACtC,MAAM6N,EAAmC/Z,EACrCorB,GACFA,EAASrR,GAOX,MAAMyN,EAA0CzN,EAASyN,WACzD,GAAIA,EAEF,YADA4B,EAAiB5B,EAAY4D,EAAU5D,GAOzC,GAAyB,WAArBzN,EAAQsN,UAAwB,CAClC,MAAMxb,EAA8CkO,EAE9CuR,EAAmBzf,EAAQC,oBAC/BD,EAAQC,sBAAwB,GAClC,IAAK,IAAIhN,EAAI,EAAGA,EAAIwsB,EAAiBvsB,OAAQD,IAC3CsqB,EAAiBkC,EAAiBxsB,GAAIssB,EAAUC,GAElD,OAMF,GAAyB,QAArBtR,EAAQsN,UAAqB,CAC/B,MAAMkE,EAAwCxR,EAExCuR,EAAmBC,EAAK5D,cAC5B4D,EAAK5D,cAAc,CAACC,SAAS,IAAS,GACxC,IAAK,IAAI9oB,EAAI,EAAGA,EAAIwsB,EAAiBvsB,OAAQD,IAC3CsqB,EAAiBkC,EAAiBxsB,GAAIssB,EAAUC,GAElD,QAMJ,IAAIG,EAAQxrB,EAAKyrB,WACjB,KAAgB,MAATD,GACLpC,EAAiBoC,EAAOJ,EAAUC,GAClCG,EAAQA,EAAME,YAQlB,SAASC,EAAc3rB,GACrB,GAAIA,EAAK2c,cAAc,qBACrB,OAEF,MAAM9N,EAAQ5M,SAASC,cAAc,SACrC2M,EAAMjH,aAAa,KAAM,eACzBiH,EAAM+N,YAAc,oMAYpB5c,EAAKiR,YAAYpC,GAInB,MAAMuZ,EAAe,IA7QrB,MAIE/O,YAAYpX,GACV,IAAKA,EACH,MAAM,IAAIsjB,MAAM,qEAIlBhpB,KAAKqvB,UAAY3pB,EAMjB1F,KAAKgsB,cAAgB,IAAI/O,IAMzBjd,KAAKkuB,YAAc,IAAIjR,IAMvBjd,KAAKI,UAAY,IAAI2pB,iBAAiB/pB,KAAKsvB,eAAe7uB,KAAKT,OAG/DovB,EAAc1pB,EAAS+O,MAAQ/O,EAASmM,MAAQnM,EAASse,iBAG7B,YAAxBte,EAAS6pB,WACX7pB,EAASwY,iBAAiB,mBAAoBle,KAAKwvB,kBAAkB/uB,KAAKT,OAE1EA,KAAKwvB,oBASTjC,SAASvN,EAAMqJ,GACb,GAAIA,EAAO,CACT,GAAIrpB,KAAKkuB,YAAYxU,IAAIsG,GACvB,OAGF,MAAM+N,EAAY,IAAIpC,EAAU3L,EAAMhgB,MAKtC,GAJAggB,EAAK3U,aAAa,QAAS,IAC3BrL,KAAKkuB,YAAY/Q,IAAI6C,EAAM+N,IAGtB/tB,KAAKqvB,UAAUxd,KAAKgM,SAASmC,GAAO,CACvC,IAAI2J,EAAS3J,EAAK+I,WAClB,KAAOY,GACmB,KAApBA,EAAOla,UACT2f,EAAczF,GAEhBA,EAASA,EAAOZ,gBAGf,CACL,IAAK/oB,KAAKkuB,YAAYxU,IAAIsG,GACxB,OAGgBhgB,KAAKkuB,YAAYhlB,IAAI8W,GAC7BqM,aACVrsB,KAAKkuB,YAAY5E,OAAOtJ,GACxBA,EAAKxU,gBAAgB,UASzB8hB,aAAa9P,GACX,OAAOxd,KAAKkuB,YAAYhlB,IAAIsU,GAW9B0P,SAASzpB,EAAMsqB,GACb,IAAIzB,EAAYtsB,KAAKgsB,cAAc9iB,IAAIzF,GASvC,YARkBtC,IAAdmrB,EACFA,EAAUoC,aAAaX,GAEvBzB,EAAY,IAAIwB,EAAUrqB,EAAMsqB,GAGlC/tB,KAAKgsB,cAAc7O,IAAI1Z,EAAM6oB,GAEtBA,EAYTa,WAAW1pB,EAAMsqB,GACf,MAAMzB,EAAYtsB,KAAKgsB,cAAc9iB,IAAIzF,GACzC,OAAK6oB,GAILA,EAAUqC,gBAAgBZ,GACtBzB,EAAUiC,WACZvuB,KAAKgsB,cAAc1C,OAAO7lB,GAGrB6oB,GARE,KAcXkD,oBAEwBrjB,EAAMrJ,KAAK9C,KAAKqvB,UAAUlE,iBAAiB,YACnD/f,QAAQ,SAASqkB,GAC7BzvB,KAAKutB,SAASkC,GAAc,IAC3BzvB,MAGHA,KAAKI,UAAUgqB,QAAQpqB,KAAKqvB,UAAUxd,KAAM,CAACiD,YAAY,EAAMsX,SAAS,EAAM/B,WAAW,IAQ3FiF,eAAe7B,EAASC,GACtB,MAAMgC,EAAQ1vB,KACdytB,EAAQriB,QAAQ,SAASuiB,GACvB,OAAQA,EAAO3uB,MACf,IAAK,YACHmN,EAAMrJ,KAAK6qB,EAAOzgB,YAAY9B,QAAQ,SAAS3H,GAC7C,GAAIA,EAAKgM,WAAaC,KAAKC,aACzB,OAEF,MAAMggB,EAAgBxjB,EAAMrJ,KAAKW,EAAK0nB,iBAAiB,YACnDG,EAAQxoB,KAAKW,EAAM,YACrBksB,EAAcC,QAAQnsB,GAExBksB,EAAcvkB,QAAQ,SAASqkB,GAC7BzvB,KAAKutB,SAASkC,GAAc,IAC3BC,IACFA,GACH,MACF,IAAK,aACH,GAA6B,UAAzB/B,EAAOC,cACT,OAEF,MAAMnD,EAAkCkD,EAAOlD,OACzCpB,EAAQoB,EAAO1f,aAAa,SAClC2kB,EAAMnC,SAAS9C,EAAQpB,KAGxBrpB,QA4F+B0F,UAEjC6lB,QAAQ7L,UAAU1C,eAAe,UACpCxd,OAAOqwB,eAAetE,QAAQ7L,UAAW,QAAS,CAChDoQ,YAAY,EAEZ5mB,IAAK,WACH,OAAOlJ,KAAK+K,aAAa,UAG3BoS,IAAK,SAASkM,GACZwC,EAAa0B,SAASvtB,KAAMqpB,mDC3rB9B0G,wCCJSC,iBAAa,CACxBC,QAAS,sBACTC,KAAM,mBACNC,QAAS,sBACTC,WAAY,yBACZC,YAAa,yBACbC,QAAS,wBAGEC,EAAU,CACrBC,iBAAkB,yBAClBC,yBAA0B,iCAC1BC,gBAAiB,sBACjBC,aAAc,mBACdC,aAAc,QACdC,cAAe,oBACfC,mBAAoB,yBACpBC,iBAAkB,uBAClBC,eAAgB,UAChBC,wBAAyB,gCACzBC,aAAc,mBACdC,cAAe,oBACfC,eAAgB,qBAChBC,gCAAiC,CAC/B,WACA,4BACA3F,KAAK,MACP4F,iBAAkB,wBAGPC,EAAU,CACrBC,+BAAgC,GAChCC,8BAA+B,KChCjCC,EAAA,WA4BE,SAAAA,EAAYC,QAAA,IAAAA,MAAuB,IACjC3xB,KAAK4xB,SAAWD,EAUpB,OAtCEnyB,OAAAqwB,eAAW6B,EAAA,aAAU,KAArB,WAGE,MAAO,oCAGTlyB,OAAAqwB,eAAW6B,EAAA,UAAO,KAAlB,WAGE,MAAO,oCAGTlyB,OAAAqwB,eAAW6B,EAAA,UAAO,KAAlB,WAGE,MAAO,oCAGTlyB,OAAAqwB,eAAW6B,EAAA,iBAAc,KAAzB,WAIE,MAAO,oCASTA,EAAAhS,UAAAhB,KAAA,aAIAgT,EAAAhS,UAAAnB,QAAA,aAGFmT,EAvCA,GAyPeG,EArPf,SAAAC,GA6CE,SAAAC,EAAYJ,GAAZ,IAAAjC,EACEoC,EAAAhvB,KAAA9C,KAAAgyB,EAAA,KAAUD,EAAoBE,eAAmBN,KAAS3xB,YAVpD0vB,EAAAwC,SAAU,EACVxC,EAAAyC,gBAAkB,EAClBzC,EAAA0C,gBAAkB,EAClB1C,EAAA2C,aAAe,EACf3C,EAAA4C,iBAAmB/B,EAAQK,aAC3BlB,EAAA6C,kBAAoBhC,EAAQK,aAC5BlB,EAAA8C,mBAAoB,EACpB9C,EAAA+C,oBAAqB,IAuM/B,OAlPyCT,EAAA,EAAAD,EAAAD,GACvCtyB,OAAAqwB,eAAWkC,EAAA,aAAU,KAArB,WACE,OAAO/B,mCAGTxwB,OAAAqwB,eAAWkC,EAAA,UAAO,KAAlB,WACE,OAAOxB,mCAGT/wB,OAAAqwB,eAAWkC,EAAA,UAAO,KAAlB,WACE,OAAOR,mCAGT/xB,OAAAqwB,eAAWkC,EAAA,iBAAc,KAAzB,WACE,MAAO,CACLW,aAAc,aACdjV,SAAU,aACVkV,kBAAmB,WAAM,UACzBC,mBAAoB,aACpBC,mBAAoB,WAAM,UAC1BC,mBAAoB,WAAM,UAC1BC,kBAAmB,WAAM,aACzBnV,SAAU,WAAM,UAChBoV,oBAAqB,WAAM,UAC3BC,aAAc,aACdC,cAAe,aACfC,aAAc,aACdC,cAAe,aACfC,aAAc,aACdC,gBAAiB,aACjB3V,YAAa,aACb4V,eAAgB,aAChBC,UAAW,+CAiBfzB,EAAArS,UAAAhB,KAAA,WACM1e,KAAK4xB,SAAShU,SAASoS,EAAWM,UACpCtwB,KAAKyzB,qBAAoB,IAI7B1B,EAAArS,UAAAnB,QAAA,WACMve,KAAKkyB,SACPlyB,KAAK0Q,MAAM6f,EAAQS,gBAGjBhxB,KAAKoyB,kBACPsB,aAAa1zB,KAAKoyB,iBAClBpyB,KAAK2zB,4BAGH3zB,KAAKqyB,eACPuB,qBAAqB5zB,KAAKqyB,cAC1BryB,KAAKqyB,aAAe,IAIxBN,EAAArS,UAAArP,KAAA,eAAAqf,EAAA1vB,KACEA,KAAKkyB,SAAU,EACflyB,KAAK4xB,SAASwB,gBACdpzB,KAAK4xB,SAASnU,SAASuS,EAAWG,SAGlCnwB,KAAK6zB,uBAAuB,WAC1BnE,EAAKkC,SAASnU,SAASuS,EAAWE,MAClCR,EAAKkC,SAASc,aAAa1C,EAAWK,aAEtCX,EAAKoE,SAELpE,EAAK0C,gBAAkBtR,WAAW,WAChC4O,EAAKiE,2BACLjE,EAAKkC,SAAS4B,UAAU9D,EAAKkC,SAASmB,qBACtCrD,EAAKkC,SAASuB,gBACb5B,EAAQE,kCAIfM,EAAArS,UAAAhP,MAAA,SAAMqjB,GAAN,IAAArE,EAAA1vB,UAAM,IAAA+zB,MAAA,IACC/zB,KAAKkyB,UAKVlyB,KAAKkyB,SAAU,EACflyB,KAAK4xB,SAASsB,cAAca,GAC5B/zB,KAAK4xB,SAASnU,SAASuS,EAAWC,SAClCjwB,KAAK4xB,SAASjU,YAAYqS,EAAWE,MACrClwB,KAAK4xB,SAAS0B,gBAAgBtD,EAAWK,aAEzCuD,qBAAqB5zB,KAAKmyB,iBAC1BnyB,KAAKmyB,gBAAkB,EAEvBuB,aAAa1zB,KAAKoyB,iBAClBpyB,KAAKoyB,gBAAkBtR,WAAW,WAChC4O,EAAKkC,SAASyB,eACd3D,EAAKiE,2BACLjE,EAAKkC,SAASqB,aAAac,IAC1BxC,EAAQC,kCAGbO,EAAArS,UAAAsU,OAAA,WACE,OAAOh0B,KAAKkyB,SAGdH,EAAArS,UAAAuU,mBAAA,WACE,OAAOj0B,KAAKsyB,kBAGdP,EAAArS,UAAAwU,mBAAA,SAAmBH,GACjB/zB,KAAKsyB,iBAAmByB,GAG1BhC,EAAArS,UAAAyU,oBAAA,WACE,OAAOn0B,KAAKuyB,mBAGdR,EAAArS,UAAA0U,oBAAA,SAAoBL,GAClB/zB,KAAKuyB,kBAAoBwB,GAG3BhC,EAAArS,UAAA2U,oBAAA,WACE,OAAOr0B,KAAKwyB,mBAGdT,EAAArS,UAAA+T,oBAAA,SAAoBa,GAClBt0B,KAAKwyB,kBAAoB8B,GAG3BvC,EAAArS,UAAAoU,OAAA,eAAApE,EAAA1vB,KACMA,KAAKqyB,cACPuB,qBAAqB5zB,KAAKqyB,cAE5BryB,KAAKqyB,aAAekC,sBAAsB,WACxC7E,EAAK8E,kBACL9E,EAAK2C,aAAe,KAKxBN,EAAArS,UAAA+U,YAAA,SAAYC,GAGV,GAFgB10B,KAAK4xB,SAASiB,mBAAmB6B,EAAIjK,OAAQ8F,EAAQa,iBAE3B,KAA3BpxB,KAAKuyB,kBAClBvyB,KAAK0Q,MAAM1Q,KAAKuyB,uBACX,CACL,IAAMwB,EAAS/zB,KAAK4xB,SAASkB,mBAAmB4B,GAC5CX,GACF/zB,KAAK0Q,MAAMqjB,KAMjBhC,EAAArS,UAAAiV,cAAA,SAAcD,GACZ,IAAME,EAAsB,UAAZF,EAAIzvB,KAAmC,KAAhByvB,EAAI/yB,QAC3C,GAAKizB,IAGU50B,KAAK4xB,SAASkB,mBAAmB4B,GAChD,CAMA,IAAMG,GAAa70B,KAAK4xB,SAASiB,mBAC7B6B,EAAIjK,OAAQ8F,EAAQc,iCACpBuD,GAAWC,GACb70B,KAAK4xB,SAASgB,uBAKlBb,EAAArS,UAAAoV,sBAAA,SAAsBJ,IACS,WAAZA,EAAIzvB,KAAoC,KAAhByvB,EAAI/yB,UACH,KAA1B3B,KAAKsyB,kBACnBtyB,KAAK0Q,MAAM1Q,KAAKsyB,mBAIZP,EAAArS,UAAA8U,gBAAR,WACMx0B,KAAKwyB,mBACPxyB,KAAK+0B,wBAEP/0B,KAAKg1B,4BAGCjD,EAAArS,UAAAiU,yBAAR,WACE3zB,KAAKoyB,gBAAkB,EACvBpyB,KAAK4xB,SAASjU,YAAYqS,EAAWG,SACrCnwB,KAAK4xB,SAASjU,YAAYqS,EAAWC,UAM/B8B,EAAArS,UAAAmU,uBAAR,SAA+BhF,GAA/B,IAAAa,EAAA1vB,KACE4zB,qBAAqB5zB,KAAKmyB,iBAC1BnyB,KAAKmyB,gBAAkBoC,sBAAsB,WAC3C7E,EAAKyC,gBAAkB,EACvBuB,aAAahE,EAAK0C,iBAClB1C,EAAK0C,gBAAkBtR,WAAW+N,EAAU,MAIxCkD,EAAArS,UAAAqV,sBAAR,WAEE/0B,KAAK4xB,SAASjU,YAAYqS,EAAWM,SAErC,IAAMqC,EAAoB3yB,KAAK4xB,SAASe,oBAEpCA,GACF3yB,KAAK4xB,SAASnU,SAASuS,EAAWM,SAGhCqC,IAAsB3yB,KAAKyyB,qBAC7BzyB,KAAK4xB,SAAS2B,iBACdvzB,KAAKyyB,mBAAqBE,IAItBZ,EAAArS,UAAAsV,yBAAR,WAEEh1B,KAAK4xB,SAASjU,YAAYqS,EAAWI,YACjCpwB,KAAK4xB,SAASoB,uBAChBhzB,KAAK4xB,SAASnU,SAASuS,EAAWI,aAGxC2B,EAlPA,CAAyCL,GFMnC,SAAUuD,EAAaC,EAA4BC,GAEvD,QAF2B,IAAAD,MAAAhR,aAA4B,IAAAiR,OAAA,QAE9Bh0B,IAArB4uB,GAAkCoF,EAAc,CAClD,IAAIC,GAAc,EAClB,IACEF,EAAUxvB,SAASwY,iBAAiB,OAAQ,aAAiB,CAC3DD,cAEE,OADAmX,GAAc,KAIlB,MAAOhvB,IAGT2pB,EAAmBqF,EAGrB,QAAOrF,GAAmB,CAAC9R,SAAS,GGPhC,SAAUqN,EAAQ9N,EAAkB6X,GAIxC,OAHsB7X,EAAQ8N,SACvB9N,EAAQ8X,uBACR9X,EAAQgO,mBACM1oB,KAAK0a,EAAS6X,gBC3BrC,MAAME,EAAa,IAAIC,QAsDVC,EAAeC,GACN,mBAANA,GAAoBH,EAAW7b,IAAIgc,GClDtCC,OAAyCx0B,IAA1B+iB,OAAO9L,qBAE3BjX,IADH+iB,OAAO9L,eAAqCwd,0BAwBpCC,EACT,CAACC,EAAiBC,EAAkBC,EAAiB,QACnD,KAAOD,IAAUC,GAAK,CACpB,MAAMC,EAAIF,EAAO5G,YACjB2G,EAAUI,YAAYH,GACtBA,EAAQE,ICPHE,EAAW,GAKXC,EAAU,GC7BVC,WAAkBp3B,OAAOkd,KAAKma,UAAUnqB,MAAM,OAM9CoqB,YAAoBF,UAOpBG,GALc,IAAIv1B,UAAUo1B,KAAUE,KAKf,SA6JpC,MA0BaE,EAAwBC,IAAuC,IAAhBA,EAAK/xB,MAIpDgyB,EAAe,IAAMjxB,SAASkxB,cAAc,IA4B5CC,EACT,8ICjOE,MAAOC,EAMXve,YACIwe,EAAoBC,EACpBC,GAPaj3B,KAAAk3B,QAAiC,GAQhDl3B,KAAK+2B,SAAWA,EAChB/2B,KAAKg3B,UAAYA,EACjBh3B,KAAKi3B,QAAUA,EAGjB1e,OAAO3P,GACL,IAAIrG,EAAI,EACR,IAAK,MAAMm0B,KAAQ12B,KAAKk3B,aACT/1B,IAATu1B,GACFA,EAAKS,SAASvuB,EAAOrG,IAEvBA,IAEF,IAAK,MAAMm0B,KAAQ12B,KAAKk3B,aACT/1B,IAATu1B,GACFA,EAAKU,SAKX7e,SAuCE,MAAM8e,EAAW1B,EACb31B,KAAK+2B,SAASvZ,QAAQlO,QAAQgoB,WAAU,GACxC5xB,SAAS6xB,WAAWv3B,KAAK+2B,SAASvZ,QAAQlO,SAAS,GAEjDkoB,EAAgB,GAChBC,EAAQz3B,KAAK+2B,SAASU,MAEtBC,EAAShyB,SAASiyB,iBACpBN,EACA,IACA,MACA,GACJ,IAEIX,EAFAkB,EAAY,EACZC,EAAY,EAEZp0B,EAAOi0B,EAAOI,WAElB,KAAOF,EAAYH,EAAMj1B,QAEvB,GADAk0B,EAAOe,EAAMG,GACRnB,EAAqBC,GAA1B,CASA,KAAOmB,EAAYnB,EAAK/xB,OACtBkzB,IACuB,aAAnBp0B,EAAMs0B,WACRP,EAAMzyB,KAAKtB,GACXi0B,EAAOM,YAAev0B,EAA6B6L,SAElB,QAA9B7L,EAAOi0B,EAAOI,cAKjBJ,EAAOM,YAAcR,EAAM3M,MAC3BpnB,EAAOi0B,EAAOI,YAKlB,GAAkB,SAAdpB,EAAK13B,KAAiB,CACxB,MAAM03B,EAAO12B,KAAKg3B,UAAUiB,qBAAqBj4B,KAAKi3B,SACtDP,EAAKwB,gBAAgBz0B,EAAM00B,iBAC3Bn4B,KAAKk3B,QAAQnyB,KAAK2xB,QAElB12B,KAAKk3B,QAAQnyB,QAAQ/E,KAAKg3B,UAAUoB,2BAChC30B,EAAiBizB,EAAKlzB,KAAMkzB,EAAK2B,QAASr4B,KAAKi3B,UAErDW,SAjCE53B,KAAKk3B,QAAQnyB,UAAK5D,GAClBy2B,IAuCJ,OAJIjC,IACFjwB,SAAS4yB,UAAUjB,GACnBjf,eAAemgB,QAAQlB,IAElBA,GCtIX,MAAMmB,MAAoBnC,KAMpB,MAAOoC,EAMXlgB,YACI8f,EAA+BzvB,EAC/B5J,EAAcg4B,GAChBh3B,KAAKq4B,QAAUA,EACfr4B,KAAK4I,OAASA,EACd5I,KAAKhB,KAAOA,EACZgB,KAAKg3B,UAAYA,EAMnBze,UACE,MAAM/I,EAAIxP,KAAKq4B,QAAQ71B,OAAS,EAChC,IAAI9D,EAAO,GACPg6B,GAAmB,EAEvB,IAAK,IAAIn2B,EAAI,EAAGA,EAAIiN,EAAGjN,IAAK,CAC1B,MAAM8G,EAAIrJ,KAAKq4B,QAAQ91B,GAkBjBo2B,EAActvB,EAAEuvB,YAAY,WAIlCF,GAAoBC,GAAe,GAAKD,KACG,IAAvCrvB,EAAEhB,QAAQ,SAAOswB,EAAc,GAInC,MAAME,EAAiBhC,EAAuBiC,KAAKzvB,GAOjD3K,GANqB,OAAnBm6B,EAMMxvB,GAAKqvB,EAAmBF,EAAgBjC,GAKxCltB,EAAE6R,OAAO,EAAG2d,EAAel0B,OAASk0B,EAAe,GACvDA,EAAe,GAAKrC,EAAuBqC,EAAe,GAC1DxC,EAIR,OADA33B,GAAQsB,KAAKq4B,QAAQ7oB,GAIvB+I,qBACE,MAAMwe,EAAWrxB,SAASC,cAAc,YAExC,OADAoxB,EAASviB,UAAYxU,KAAK+4B,UACnBhC,GC3EJ,MAAMiC,EAAe95B,GAEZ,OAAVA,KACmB,iBAAVA,GAAuC,mBAAVA,GAE/B+5B,EAAc/5B,GAClBuF,MAAMC,QAAQxF,OAEdA,IAAUA,EAAcsoB,OAAO0R,WAQlC,MAAOC,EAOX5gB,YAAYiF,EAAkBha,EAAc60B,GAF5Cr4B,KAAAo5B,OAAQ,EAGNp5B,KAAKwd,QAAUA,EACfxd,KAAKwD,KAAOA,EACZxD,KAAKq4B,QAAUA,EACfr4B,KAAKy3B,MAAQ,GACb,IAAK,IAAIl1B,EAAI,EAAGA,EAAI81B,EAAQ71B,OAAS,EAAGD,IACrCvC,KAAKy3B,MAA0Bl1B,GAAKvC,KAAKq5B,cAOpC9gB,cACR,OAAO,IAAI+gB,EAAct5B,MAGjBuY,YACR,MAAM8f,EAAUr4B,KAAKq4B,QACf7oB,EAAI6oB,EAAQ71B,OAAS,EAC3B,IAAIQ,EAAO,GAEX,IAAK,IAAIT,EAAI,EAAGA,EAAIiN,EAAGjN,IAAK,CAC1BS,GAAQq1B,EAAQ91B,GAChB,MAAMm0B,EAAO12B,KAAKy3B,MAAMl1B,GACxB,QAAapB,IAATu1B,EAAoB,CACtB,MAAMxZ,EAAIwZ,EAAKx3B,MACf,GAAI85B,EAAY9b,KAAO+b,EAAW/b,GAChCla,GAAqB,iBAANka,EAAiBA,EAAIje,OAAOie,QAE3C,IAAK,MAAMqc,KAAKrc,EACdla,GAAqB,iBAANu2B,EAAiBA,EAAIt6B,OAAOs6B,IAOnD,OADAv2B,GAAQq1B,EAAQ7oB,GAIlB+I,SACMvY,KAAKo5B,QACPp5B,KAAKo5B,OAAQ,EACbp5B,KAAKwd,QAAQnS,aAAarL,KAAKwD,KAAMxD,KAAKw5B,eAQ1C,MAAOF,EAIX/gB,YAAYkhB,GAFZz5B,KAAAd,WAAiBiC,EAGfnB,KAAKy5B,UAAYA,EAGnBlhB,SAASrZ,GACHA,IAAUi3B,GAAc6C,EAAY95B,IAAUA,IAAUc,KAAKd,QAC/Dc,KAAKd,MAAQA,EAIRu2B,EAAYv2B,KACfc,KAAKy5B,UAAUL,OAAQ,IAK7B7gB,SACE,KAAOkd,EAAYz1B,KAAKd,QAAQ,CAC9B,MAAMw6B,EAAY15B,KAAKd,MACvBc,KAAKd,MAAQi3B,EACbuD,EAAU15B,MAERA,KAAKd,QAAUi3B,GAGnBn2B,KAAKy5B,UAAUrC,UAYb,MAAOuC,EAOXphB,YAAY0e,GAHZj3B,KAAAd,WAAiBiC,EACTnB,KAAA45B,oBAA0Bz4B,EAGhCnB,KAAKi3B,QAAUA,EAQjB1e,WAAWud,GACT91B,KAAK4sB,UAAYkJ,EAAUphB,YAAYiiB,KACvC32B,KAAK65B,QAAU/D,EAAUphB,YAAYiiB,KAUvCpe,gBAAgBuhB,GACd95B,KAAK4sB,UAAYkN,EACjB95B,KAAK65B,QAAUC,EAAI3K,YAQrB5W,eAAeme,GACbA,EAAKqD,SAAS/5B,KAAK4sB,UAAY+J,KAC/BD,EAAKqD,SAAS/5B,KAAK65B,QAAUlD,KAQ/Bpe,gBAAgBuhB,GACdA,EAAIC,SAAS/5B,KAAK4sB,UAAY+J,KAC9B32B,KAAK65B,QAAUC,EAAID,QACnBC,EAAID,QAAU75B,KAAK4sB,UAGrBrU,SAASrZ,GACPc,KAAK45B,eAAiB16B,EAGxBqZ,SACE,KAAOkd,EAAYz1B,KAAK45B,iBAAiB,CACvC,MAAMF,EAAY15B,KAAK45B,eACvB55B,KAAK45B,eAAiBzD,EACtBuD,EAAU15B,MAEZ,MAAMd,EAAQc,KAAK45B,eACf16B,IAAUi3B,IAGV6C,EAAY95B,GACVA,IAAUc,KAAKd,OACjBc,KAAKg6B,aAAa96B,GAEXA,aAAiBu5B,EAC1Bz4B,KAAKi6B,uBAAuB/6B,GACnBA,aAAiBwQ,KAC1B1P,KAAKk6B,aAAah7B,GACT+5B,EAAW/5B,GACpBc,KAAKm6B,iBAAiBj7B,GACbA,IAAUk3B,GACnBp2B,KAAKd,MAAQk3B,EACbp2B,KAAK+I,SAGL/I,KAAKg6B,aAAa96B,IAIdqZ,SAAS9U,GACfzD,KAAK65B,QAAQ9Q,WAAYqR,aAAa32B,EAAMzD,KAAK65B,SAG3CthB,aAAarZ,GACfc,KAAKd,QAAUA,IAGnBc,KAAK+I,QACL/I,KAAK+5B,SAAS76B,GACdc,KAAKd,MAAQA,GAGPqZ,aAAarZ,GACnB,MAAMuE,EAAOzD,KAAK4sB,UAAUuC,YAItBkL,EACe,iBAJrBn7B,EAAiB,MAATA,EAAgB,GAAKA,GAIGA,EAAQD,OAAOC,GAC3CuE,IAASzD,KAAK65B,QAAQ1B,iBACJ,IAAlB10B,EAAKgM,SAINhM,EAAc62B,KAAOD,EAEtBr6B,KAAKk6B,aAAax0B,SAAS60B,eAAeF,IAE5Cr6B,KAAKd,MAAQA,EAGPqZ,uBAAuBrZ,GAC7B,MAAM63B,EAAW/2B,KAAKi3B,QAAQuD,gBAAgBt7B,GAC9C,GAAIc,KAAKd,iBAAiB43B,GACtB92B,KAAKd,MAAM63B,WAAaA,EAC1B/2B,KAAKd,MAAMu7B,OAAOv7B,EAAM0J,YACnB,CAKL,MAAM8xB,EACF,IAAI5D,EAAiBC,EAAU73B,EAAM83B,UAAWh3B,KAAKi3B,SACnDI,EAAWqD,EAASC,SAC1BD,EAASD,OAAOv7B,EAAM0J,QACtB5I,KAAKk6B,aAAa7C,GAClBr3B,KAAKd,MAAQw7B,GAITniB,iBAAiBrZ,GAWlBuF,MAAMC,QAAQ1E,KAAKd,SACtBc,KAAKd,MAAQ,GACbc,KAAK+I,SAKP,MAAM6xB,EAAY56B,KAAKd,MACvB,IACI27B,EADAjD,EAAY,EAGhB,IAAK,MAAM9uB,KAAQ5J,OAKAiC,KAHjB05B,EAAWD,EAAUhD,MAInBiD,EAAW,IAAIlB,EAAS35B,KAAKi3B,SAC7B2D,EAAU71B,KAAK81B,GACG,IAAdjD,EACFiD,EAASC,eAAe96B,MAExB66B,EAASE,gBAAgBH,EAAUhD,EAAY,KAGnDiD,EAAS1D,SAASruB,GAClB+xB,EAASzD,SACTQ,IAGEA,EAAYgD,EAAUp4B,SAExBo4B,EAAUp4B,OAASo1B,EACnB53B,KAAK+I,MAAM8xB,GAAYA,EAAShB,UAIpCthB,MAAMqU,EAAkB5sB,KAAK4sB,WAC3BiJ,EACI71B,KAAK4sB,UAAU7D,WAAa6D,EAAUuC,YAAcnvB,KAAK65B,UAW3D,MAAOmB,EAOXziB,YAAYiF,EAAkBha,EAAc60B,GAC1C,GAJFr4B,KAAAd,WAAiBiC,EACTnB,KAAA45B,oBAA0Bz4B,EAGT,IAAnBk3B,EAAQ71B,QAA+B,KAAf61B,EAAQ,IAA4B,KAAfA,EAAQ,GACvD,MAAM,IAAIrP,MACN,2DAENhpB,KAAKwd,QAAUA,EACfxd,KAAKwD,KAAOA,EACZxD,KAAKq4B,QAAUA,EAGjB9f,SAASrZ,GACPc,KAAK45B,eAAiB16B,EAGxBqZ,SACE,KAAOkd,EAAYz1B,KAAK45B,iBAAiB,CACvC,MAAMF,EAAY15B,KAAK45B,eACvB55B,KAAK45B,eAAiBzD,EACtBuD,EAAU15B,MAEZ,GAAIA,KAAK45B,iBAAmBzD,EAC1B,OAEF,MAAMj3B,IAAUc,KAAK45B,eACjB55B,KAAKd,QAAUA,IACbA,EACFc,KAAKwd,QAAQnS,aAAarL,KAAKwD,KAAM,IAErCxD,KAAKwd,QAAQhS,gBAAgBxL,KAAKwD,MAEpCxD,KAAKd,MAAQA,GAEfc,KAAK45B,eAAiBzD,GAapB,MAAO8E,UAA0B9B,EAGrC5gB,YAAYiF,EAAkBha,EAAc60B,GAC1C5f,MAAM+E,EAASha,EAAM60B,GACrBr4B,KAAKk7B,OACmB,IAAnB7C,EAAQ71B,QAA+B,KAAf61B,EAAQ,IAA4B,KAAfA,EAAQ,GAGlD9f,cACR,OAAO,IAAI4iB,EAAan7B,MAGhBuY,YACR,OAAIvY,KAAKk7B,OACAl7B,KAAKy3B,MAAM,GAAGv4B,MAEhBuZ,MAAM+gB,YAGfjhB,SACMvY,KAAKo5B,QACPp5B,KAAKo5B,OAAQ,EAEZp5B,KAAKwd,QAAgBxd,KAAKwD,MAAQxD,KAAKw5B,cAKxC,MAAO2B,UAAqB7B,GAMlC,IAAI8B,GAAwB,EAE5B,IACE,MAAMnE,EAAU,CACdoE,cAEE,OADAD,GAAwB,GACjB,IAIXlX,OAAOhG,iBAAiB,OAAQ+Y,EAAgBA,GAEhD/S,OAAO/F,oBAAoB,OAAQ8Y,EAAgBA,GACnD,MAAOqE,KAMH,MAAOC,EASXhjB,YAAYiF,EAAkB7E,EAAmB6iB,GALjDx7B,KAAAd,WAA2CiC,EAEnCnB,KAAA45B,oBAAoDz4B,EAI1DnB,KAAKwd,QAAUA,EACfxd,KAAK2Y,UAAYA,EACjB3Y,KAAKw7B,aAAeA,EACpBx7B,KAAKy7B,mBAAsBr1B,GAAMpG,KAAK07B,YAAYt1B,GAGpDmS,SAASrZ,GACPc,KAAK45B,eAAiB16B,EAGxBqZ,SACE,KAAOkd,EAAYz1B,KAAK45B,iBAAiB,CACvC,MAAMF,EAAY15B,KAAK45B,eACvB55B,KAAK45B,eAAiBzD,EACtBuD,EAAU15B,MAEZ,GAAIA,KAAK45B,iBAAmBzD,EAC1B,OAGF,MAAMwF,EAAc37B,KAAK45B,eACnBgC,EAAc57B,KAAKd,MACnB28B,EAAsC,MAAfF,GACV,MAAfC,IACKD,EAAYN,UAAYO,EAAYP,SACpCM,EAAYG,OAASF,EAAYE,MACjCH,EAAY1d,UAAY2d,EAAY3d,SACvC8d,EACa,MAAfJ,IAAuC,MAAfC,GAAuBC,GAE/CA,GACF77B,KAAKwd,QAAQW,oBACTne,KAAK2Y,UAAW3Y,KAAKy7B,mBAAoBz7B,KAAKg8B,WAEhDD,IACF/7B,KAAKg8B,UAAYC,EAAWN,GAC5B37B,KAAKwd,QAAQU,iBACTle,KAAK2Y,UAAW3Y,KAAKy7B,mBAAoBz7B,KAAKg8B,YAEpDh8B,KAAKd,MAAQy8B,EACb37B,KAAK45B,eAAiBzD,EAGxB5d,YAAY9W,GACgB,mBAAfzB,KAAKd,MACdc,KAAKd,MAAM4D,KAAK9C,KAAKw7B,cAAgBx7B,KAAKwd,QAAS/b,GAElDzB,KAAKd,MAA8Bw8B,YAAYj6B,IAQtD,MAAMw6B,EAAcvG,GAAyCA,IACxD0F,EACI,CAACC,QAAS3F,EAAE2F,QAASpd,QAASyX,EAAEzX,QAAS6d,KAAMpG,EAAEoG,MACjDpG,EAAE2F,SCvc6B,IApClC,MAUJ9iB,2BACIiF,EAAkBha,EAAc60B,EAChCpB,GACF,MAAM/kB,EAAS1O,EAAK,GACpB,MAAe,MAAX0O,EACgB,IAAI+oB,EAAkBzd,EAASha,EAAK2I,MAAM,GAAIksB,GAC/CZ,MAEJ,MAAXvlB,EACK,CAAC,IAAIqpB,EAAU/d,EAASha,EAAK2I,MAAM,GAAI8qB,EAAQuE,eAEzC,MAAXtpB,EACK,CAAC,IAAI8oB,EAAqBxd,EAASha,EAAK2I,MAAM,GAAIksB,IAEzC,IAAIc,EAAmB3b,EAASha,EAAM60B,GACvCZ,MAMnBlf,qBAAqB0e,GACnB,OAAO,IAAI0C,EAAS1C,KCqCM,IAAIha,ICxEb,IAAIuY,SCmCxBtR,OAAM,kBAAwBA,OAAM,gBAAsB,KAAKnf,KAAK,SAM9D,MCvCDm3B,EAAgB,IAAI1G,QAYb2G,EX8ByCC,IACjD,IAAI5jB,KACH,MAAMtT,EAAIk3B,KAAK5jB,GAEf,OADA+c,EAAWpY,IAAIjY,GAAG,GACXA,GWlCWm3B,CAAWC,GAA0B5F,IAC3D,KAAMA,aAAgB4C,IAAmB5C,aAAgByE,GAC7B,UAAxBzE,EAAK+C,UAAUj2B,MAAoBkzB,EAAK+C,UAAUhC,MAAMj1B,OAAS,EACnE,MAAM,IAAIwmB,MACN,8GAIN,MAAMyQ,UAACA,GAAa/C,GACdlZ,QAACA,GAAWic,EAGbyC,EAAcxiB,IAAIgd,KACrBlZ,EAAQE,UAAY+b,EAAUpB,QAAQ3M,KAAK,MAG7C,MAAMnb,UAACA,GAAaiN,EAGd+e,EAAUL,EAAchzB,IAAIwtB,GAClC,IAAK,MAAMlzB,KAAQ+4B,EACX/4B,KAAQ84B,GACZ/rB,EAAUK,OAAOpN,GAKrB,IAAK,MAAMA,KAAQ84B,EAAW,CAC5B,MAAMp9B,EAAQo9B,EAAU94B,GACxB,IAAK+4B,GAAWr9B,IAAUq9B,EAAQ/4B,GAAO,CAIvC+M,EADerR,EAAQ,MAAQ,UACbsE,IAGtB04B,EAAc/e,IAAIuZ,EAAM4F,KC1CpBE,EACD92B,SAA0C2iB,kBAEzC,MAAOoU,UAAmBC,EAAA,EAAhCnkB,kCAmB6BvY,KAAA28B,aAAc,EAMzC38B,KAAA48B,SAAU,EAEgB58B,KAAAgM,MAAQ,GAMlChM,KAAA68B,iBAAmB,QAMnB78B,KAAA88B,gBAAkB,QAkBlB98B,KAAAqQ,MAAO,EAEKrQ,KAAA+8B,cAAgB,QAChB/8B,KAAAg9B,gBAAkB,eAClBh9B,KAAAi9B,sBAAwB,qBAU1Bj9B,KAAAwe,mBAAqBqT,EAErB7xB,KAAAk9B,YAAiC,KACjCl9B,KAAAm9B,iBAAoD,KACpDn9B,KAAAo9B,mBAAyD,KACzDp9B,KAAAq9B,2BAC+B,KAdzCC,oBACE,IAAIlS,EAAiBprB,KAAKu9B,YAAgCnS,gBAE1D,MAAMrF,GADNqF,EAAgBA,EAAc9iB,OAAQ7E,GAASA,aAAgB4f,cAClC,GAC7B,OAAO0C,GAAkB,KAYjBxN,iBAAiB/U,EAAcuwB,GACvC,MACMpT,EAAK,IAAI6c,YAAYh6B,EADG,CAACyJ,OAAQ8mB,EAAS,CAACA,UAAU,KAE3D/zB,KAAKy9B,cAAc9c,GAGXpI,oBACR,OAAOvY,KAAKogB,kBAAkBpgB,KAAKi9B,0BAG3B1kB,gBACR,OAAA/Y,OAAAkb,OAAAlb,OAAAkb,OAAA,GACKlb,OAAAk9B,EAAA,EAAAl9B,CAAkBQ,KAAK09B,UAAQ,CAClChL,aAAc,IAAMhtB,SAASmM,KAAKS,MAAMqrB,SAAW,SACnDrK,gBAAiB,IAAM5tB,SAASmM,KAAKS,MAAMqrB,SAAW,GACtDhL,kBAAmB,IAAM3yB,KAAK48B,QAC9BhK,mBAAoB,KAClB,MAAMgL,EAAU59B,KAAKs9B,cACjBM,GACFA,EAAQC,SAGZhL,mBAAoB,CAACpI,EAAQ4K,MACzB5K,GAASa,EAAQb,EAAmB4K,GACxCvC,mBAAqB1sB,IACnB,IAAKA,EAAEqkB,OACL,MAAO,GAGT,MAAMjN,EblHR,SAAkBA,EAAkB6X,GACxC,GAAI7X,EAAQsgB,QACV,OAAOtgB,EAAQsgB,QAAQzI,GAIzB,IADA,IAAI0I,EAAqBvgB,EAClBugB,GAAI,CACT,GAAIzS,EAAQyS,EAAI1I,GACd,OAAO0I,EAETA,EAAKA,EAAGC,cAEV,OAAO,KauGGF,CAAQ13B,EAAEqkB,WAAuBzqB,KAAKg9B,oBAE1C,OADexf,GAAWA,EAAQvR,aAAajM,KAAKg9B,kBAGtDjK,kBAAmB,IACV/yB,KAAK+yB,oBAEdC,oBAAqB,KACnB,MAAM+K,EAAK/9B,KAAK4T,eAChB,QAAOmqB,GAAKA,EAAGE,aAAeF,EAAG7Y,cAEnC+N,aAAec,GAAW/zB,KAAKk+B,iBAAiB,SAAUnK,GAC1Db,cAAgBa,IACd/zB,KAAKqQ,MAAO,EACZrQ,KAAKk+B,iBAAiB,UAAWnK,IAEnCZ,aAAc,IAAMnzB,KAAKk+B,iBAAiB,UAC1C9K,cAAe,KACbpzB,KAAKqQ,MAAO,EACZrQ,KAAKk+B,iBAAiB,YAExB3K,eAAgB,OAChBF,aAAc,KACZmJ,EAAiB5rB,OAAO5Q,OAE1BwzB,UAAYuK,IACVvB,EAAiBz3B,KAAK/E,MAClB+9B,GACFA,EAAG3zB,WAMDmO,SACR,MAAM4lB,EAAU,CACd5lB,CAACyX,EAAWM,SAAUtwB,KAAK48B,SAG7B,IAAI5wB,EAAQqS,EAAA,IAERre,KAAKgM,QACPA,EAAQqS,EAAA,kCAAqCre,KAAKgM,cAGpD,MAAMoyB,EAAiB,CACrBC,uBAAwBr+B,KAAK28B,aAG/B,OAAOte,EAAA;6BACkB8d,EAASgC;;;;;;;YAO1BnyB;;;;;;uBAMWmwB,EAASiC;;;;;;;;;;;YAc9B7lB,eACEE,MAAM6lB,eACNt+B,KAAKse,cAAcmV,qBAAoB,GAGzClb,uBACEE,MAAM8lB,uBACNv+B,KAAKw+B,uBAGPjmB,cACEvY,KAAKse,cAAcwV,SAGrBvb,QACE,MAAMkmB,EAAiBz+B,KAAK+yB,oBAC5B0L,GAAkBA,EAAer0B,QAGnCmO,OACE,IAAKvY,KAAKirB,WACR,OAGF,MAAMyT,EAAW1+B,KAAKirB,WAAWte,cACjC,GAAI+xB,EACEA,aAAoBrb,aACtBqb,EAAS3wB,WAEN,CACL,MAAMiS,EAAOhgB,KAAK2+B,cACZD,EAAW1e,aAAgB4e,SAAW5e,EAAKrT,cAAgB,KAC7D+xB,aAAoBrb,aACtBqb,EAAS3wB,QAKLwK,oBACRvY,KAAKm9B,iBAAmBn9B,KAAKse,cAAcmW,YAAYh0B,KAC3BT,KAAKse,eACjCte,KAAKk9B,YAAc,KACbl9B,KAAKqQ,MACPrQ,KAAKse,cAAcwV,OAAOrzB,KAAKT,KAAKse,gBAGxCte,KAAKo9B,mBAAqBp9B,KAAKse,cAAcqW,cAAcl0B,KAC7BT,KAAKse,eACnCte,KAAKq9B,2BACDr9B,KAAKse,cAAcwW,sBAAsBr0B,KAAKT,KAAKse,eAGvDte,KAAK09B,QAAQxf,iBAAiB,QAASle,KAAKm9B,kBAC5CjZ,OAAOhG,iBAAiB,SAAUle,KAAKk9B,YAAajI,KACpD/Q,OAAOhG,iBACH,oBAAqBle,KAAKk9B,YAAajI,KAC3Cj1B,KAAKke,iBAAiB,UAAWle,KAAKo9B,mBAAoBnI,KAC1DvvB,SAASwY,iBACL,UAAWle,KAAKq9B,2BAA4BpI,KAGxC1c,uBACJvY,KAAKm9B,kBACPn9B,KAAK09B,QAAQvf,oBAAoB,QAASne,KAAKm9B,kBAG7Cn9B,KAAKk9B,cACPhZ,OAAO/F,oBAAoB,SAAUne,KAAKk9B,aAC1ChZ,OAAO/F,oBAAoB,oBAAqBne,KAAKk9B,cAGnDl9B,KAAKo9B,oBACPp9B,KAAK09B,QAAQvf,oBAAoB,UAAWne,KAAKo9B,oBAG/Cp9B,KAAKq9B,4BACPr9B,KAAK09B,QAAQvf,oBACT,UAAWne,KAAKq9B,6BAtQF79B,OAAAwyB,EAAA,EAAAxyB,CAAA,CAArBA,OAAA6e,EAAA,EAAA7e,CAAM,8CAM8BA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAApCA,OAAA6e,EAAA,EAAA7e,CAAM,iEAMgCA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAAtCA,OAAA6e,EAAA,EAAA7e,CAAM,qEAEwBA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAA9BA,OAAA6e,EAAA,EAAA7e,CAAM,8DAEkBA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAAxBA,OAAA6e,EAAA,EAAA7e,CAAM,0DAEoBA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAA1BA,OAAA6e,EAAA,EAAA7e,CAAS,CAACR,KAAMM,6CAMjBE,OAAAwyB,EAAA,EAAAxyB,CAAA,CAJCA,OAAA6e,EAAA,EAAA7e,CAAS,CAACR,KAAMM,UAChBE,OAAAk9B,EAAA,EAAAl9B,CAAS,WACRQ,KAAK6+B,+CAImBr/B,OAAAwyB,EAAA,EAAAxyB,CAAA,CAAzBA,OAAA6e,EAAA,EAAA7e,CAAS,CAACR,KAAMC,sCAMjBO,OAAAwyB,EAAA,EAAAxyB,CAAA,CAJCA,OAAA6e,EAAA,EAAA7e,CAAS,CAACR,KAAMC,SAChBO,OAAAk9B,EAAA,EAAAl9B,CAAS,SAA2Bs/B,GACnC9+B,KAAKse,cAAc8V,oBAAoB0K,6CAQzCt/B,OAAAwyB,EAAA,EAAAxyB,CAAA,CAJCA,OAAA6e,EAAA,EAAA7e,CAAS,CAACR,KAAMC,SAChBO,OAAAk9B,EAAA,EAAAl9B,CAAS,SAA2Bs/B,GACnC9+B,KAAKse,cAAc4V,mBAAmB4K,4CAoBxCt/B,OAAAwyB,EAAA,EAAAxyB,CAAA,CAhBCA,OAAA6e,EAAA,EAAA7e,CAAS,CAACR,KAAMM,QAASy/B,SAAS,IAClCv/B,OAAAk9B,EAAA,EAAAl9B,CAAS,SAA2Bw0B,GAC/BA,EACEh0B,KAAKse,gBACPte,KAAKg/B,oBAELh/B,KAAKse,cAAcjO,QAGjBrQ,KAAKse,gBACPte,KAAKw+B,uBACLx+B,KAAKse,cAAc5N,MAAM1Q,KAAKi/B,eAAiBj/B,KAAK+8B,eACpD/8B,KAAKi/B,mBAAgB99B,iCAMf3B,OAAAwyB,EAAA,EAAAxyB,CAAA,CAAXA,OAAA6e,EAAA,EAAA7e,wCACWA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAAXA,OAAA6e,EAAA,EAAA7e,0CACWA,OAAAwyB,EAAA,EAAAxyB,CAAA,CAAXA,OAAA6e,EAAA,EAAA7e,gDC7EI,MAAM8S,EAAQ+L,EAAA,urLCUrB,IAAa6gB,EAAb,cAA4BzC,IACnByC,EAAAC,OAAS7sB,EADL4sB,EAAM1/B,OAAAwyB,EAAA,EAAAxyB,CAAA,CADlBA,OAAA6e,EAAA,EAAA7e,CAAc,eACF0/B,osDCRPE,s2LAAN,MAAMA,UAANhmB,EAAsCb,eAAAC,GAAAC,SAAAD,GAAAa,EAAArZ,gBAAhCo/B,sEAEHt7B,mEACAA,mEACAA,oFAEsBgb,YAAYugB,GAC5BA,EAIEA,EACJ/2B,OAAQg3B,IAAUA,EAAKC,kBACvBhgB,KAAK,CAACigB,EAAGC,IAAMC,YAAQF,EAAEh8B,KAAMi8B,EAAEj8B,OAL3B,uCAQX,WACE,OAAO9E;0CAC+BsB,KAAKwgB;;;sBAGzBxgB,KAAK8f;;yBAEF9f,KAAK2/B;;;;;YAKlB3/B,KAAK4/B,aAAa5/B,KAAKq/B,OAAOj7B,IAC7Bk7B,GAAS5gC;8CACwB4gC,EAAKz6B;uCACZy6B;kBACrBA,EAAK97B;;;;;uCASrB,WACE,OAAOxD,KAAKd,OAAS,6CAGvB,SAAuBua,GACrB+F,GAAAC,GA9CE2f,EA8CF1f,WAAA,eAAA1f,MAAA8C,KAAA9C,KAAmByZ,QACAtY,IAAfnB,KAAKq/B,OACPQ,YAAW7/B,KAAKka,MAAOpB,KAAMumB,IAC3Br/B,KAAKq/B,MAAQA,8CAKnB,SAAqB1e,GACnB,MAAME,EAAWF,EAAG1T,OAAOnE,KAAKg3B,QAAQC,OAEpClf,IAAa7gB,KAAK8f,SACpB9f,KAAKd,MAAQyhB,EAAG1T,OAAO/N,MACvB4hB,WAAW,KACTC,YAAU/gB,KAAM,gBAAiB,CAAEd,MAAO2hB,IAC1CE,YAAU/gB,KAAM,WACf,+CAIP,WACE,OAAO4a;;;;;;;;;;;;;WAnEgBC,itCAoF3BzC,eAAeW,OAAO,iBAAkBqmB,QCnFlCY,w3LAAN,cAAA5mB,EAA4Cb,eAAAC,GAAAC,SAAAD,GAAAa,EAAArZ,qCACzC8D,kEACAA,mEACAA,qEACAA,6EACAA,oEACAA,qEACAA,4CAA0C,0DAERgb,YAAY5E,GACtC1a,OAAO8U,KAAK4F,EAAKiF,QAAQ8gB,KAC7BhlB,GAC+C,mBAA9CA,EAASC,OAAO,EAAGD,EAAS5S,QAAQ,+CAI1CiF,eAAwB4yB,GACtBlgC,KAAKmgC,QAAUD,EACflgC,KAAKogC,YAASj/B,EACVnB,KAAKmgC,QAAQE,OACfrgC,KAAKsgC,MAAQtgC,KAAKmgC,QAAQE,MAAM78B,MAAQ,GACxCxD,KAAKugC,QAAUvgC,KAAKmgC,QAAQE,MAAMG,cAAWr/B,EAC7CnB,KAAKygC,gBAAkBzgC,KAAKmgC,QAAQE,MAAMK,iBAAmB,KAE7D1gC,KAAKsgC,MAAQ,GACbtgC,KAAKugC,aAAUp/B,EACfnB,KAAKygC,gBAAkB,UAEnBzgC,KAAK2gC,mDAGb,WACE,IAAK3gC,KAAKmgC,QACR,OAAOzhC,MAET,MAAMkiC,EAAoC,KAAtB5gC,KAAKsgC,MAAMp0B,OAC/B,OAAOxN;;;oBAGSsB,KAAK6gC;iBACR7gC,KAAKmgC,QAAQE,MAClBrgC,KAAKmgC,QAAQE,MAAM78B,KACnBxD,KAAKka,KAAMuG,SAAS;;;YAGpBzgB,KAAKogC,OACH1hC;qCACuBsB,KAAKogC;gBAE5B;;;uBAGSpgC,KAAKsgC;+BACGtgC,KAAK8gC;uBACb9gC,KAAKka,KAAMuG,SAClB;+BAEezgB,KAAKka,KAAMuG,SAC1B;yBAESmgB;;;uBAGF5gC,KAAKka,KAAMuG,SAClB;sBAEMzgB,KAAKka;uBACJla,KAAKugC;uBACLvgC,KAAKmgC,QAAQd;+BACLr/B,KAAK2/B;;cAEtB3/B,KAAK+gC,yBAAyB/gC,KAAKka,MACjCxb;;sBAEMsB,KAAKka,KAAKuG,SACV;;;4BAIMzgB,KAAKka;6BACJla,KAAKygC;;yCAEOzgC,KAAKka,KAAKuG,SAC7B;uCAEiBzgB,KAAKka,KAAKuG,SAC3B;qCAEezgB,KAAKghC;;;kBAI1BtiC;;sBAEMsB,KAAKka,KAAMuG,SACX;;;;;;;2BAQKzgB,KAAKka,KAAMuG,SACZ;;;;;kCAMQzgB,KAAKihC;;;0BAGbjhC,KAAKka,KAAMuG,SACX;;;;;;;UAQhBzgB,KAAKmgC,QAAQE,MACX3hC;;;;0BAIcsB,KAAKkhC;4BACHlhC,KAAKmhC;;kBAEfnhC,KAAKka,KAAMuG,SAAS;;cAG1B/hB;;;oBAGQsB,KAAKohC;sBACHR,GAAe5gC,KAAKmhC;;YAE9BnhC,KAAKmgC,QAAQE,MACXrgC,KAAKka,KAAMuG,SAAS,wCACpBzgB,KAAKka,KAAMuG,SAAS;;;gDAMhC,WACEzgB,KAAKmgC,aAAUh/B,4CAGjB,SAAqBwf,GACnB3gB,KAAKogC,YAASj/B,EACdnB,KAAKsgC,MAAQ3f,EAAG1T,OAAO/N,gDAGzB,SAAqByhB,GACnB3gB,KAAKogC,YAASj/B,EACdnB,KAAKugC,QAAU5f,EAAG1T,OAAO/N,0DAG3B,SAA+ByhB,GAC7B3gB,KAAKogC,YAASj/B,EACdnB,KAAKygC,gBAAkB9f,EAAG1T,OAAO/N,gDAGnCoO,iBACEtN,KAAKmhC,aAAc,EACnB,IACE,MAAMv4B,EAA8B,CAClCpF,KAAMxD,KAAKsgC,MAAMp0B,OACjBw0B,gBAAiB1gC,KAAKygC,gBACtBD,QAASxgC,KAAKugC,SAAW,MAEvBvgC,KAAKmgC,QAASE,YACVrgC,KAAKmgC,QAASkB,YAAYz4B,SAE1B5I,KAAKmgC,QAASmB,YAAY14B,GAElC5I,KAAKmgC,aAAUh/B,EACf,MAAOogC,GACPvhC,KAAKogC,OAASmB,EAAMA,EAAIx+B,QAAU,gBAbpC,QAeE/C,KAAKmhC,aAAc,6CAIvB7zB,iBACEtN,KAAKmhC,aAAc,EACnB,UACYnhC,KAAKmgC,QAASqB,gBACtBxhC,KAAKmgC,aAAUh/B,GAFnB,QAKEnB,KAAKmhC,aAAc,uCAIvB,WACEnhC,KAAKmgC,aAAUh/B,6CAGjB,WACE,MAAO,CACLyZ;;;;;;;;;;;;;;;;;;;;cA5M2BC,KA2OjCzC,eAAeW,OAAO,uBAAwBinB,qCChQ9C9hC,EAAA,GAAAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,SAAAujC,EAAAvjC,EAAA,IAAAwjC,GAAAxjC,EAAA,IAAAA,EAAA,IAAAyjC,EAAAzjC,EAAA,GAAA0jC,EAAA1jC,EAAA,IA+EAM,YAAQ,CACNG,GAAI,cAEJF,UAAWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0GXE,UAAW,CAACijC,IAAoBlgB,KAEhC7iB,WAAY,CACVI,MAAO,CAELF,KAAMC,SAUV6iC,wBACE,OAAO9hC,KAAKY,aAAarB,eAM3BG,UAAW,CAACqiC,mBAAoB,qBAEhCC,kBAAmB,WAGZhiC,KAAKqP,EAAE4yB,cACVjiC,KAAKqP,EAAE4yB,YAAcjiC,KAAKkiC,GAAG,UAE3BliC,KAAKY,eACyD,IAA9DZ,KAAKmiC,mBAAmB95B,QAAQrI,KAAKqP,EAAE4yB,YAAYjjC,QACrDgB,KAAK+hB,kBAAmB,GAIpB/hB,KAAKY,aAAa7B,WACtBiB,KAAKqP,EAAEymB,UAAUsM,4BAA4BpiC,KAAKY,0ECrNjD,MAAMyhC,EAKXvlB,YAAYwlB,GACVtiC,KAAKuiC,UAAY,GACjBviC,KAAKsiC,eAAiBA,EAUxBp5B,MACE,OAAOlJ,KAAKsH,MAAQtH,KAAKuiC,UAAUp2B,QAAUnM,KAAKuiC,UAAU,GAQ9Dx5B,MAAMy5B,GACJxiC,KAAKuiC,UAAUp2B,QAAQf,QAAQ,SAAStC,KACjC05B,GAAYA,EAASn6B,QAAQS,GAAQ,IACxC9I,KAAKgJ,gBAAgBF,GAAM,IAE5B9I,MASLsL,WAAWxC,GACT,OAAO9I,KAAKuiC,UAAUl6B,QAAQS,IAAS,EASzCE,gBAAgBF,EAAMwC,GACpB,GAAY,MAARxC,GACEwC,IAAetL,KAAKsL,WAAWxC,GAAO,CAGxC,GAAIwC,EACFtL,KAAKuiC,UAAUx9B,KAAK+D,OACf,CACL,IAAIvG,EAAIvC,KAAKuiC,UAAUl6B,QAAQS,GAC3BvG,GAAK,GACPvC,KAAKuiC,UAAU/4B,OAAOjH,EAAG,GAGzBvC,KAAKsiC,gBACPtiC,KAAKsiC,eAAex5B,EAAMwC,IAalC3D,OAAOmB,GACD9I,KAAKsH,MACPtH,KAAK6T,OAAO/K,GACH9I,KAAKkJ,QAAUJ,IACxB9I,KAAKgJ,gBAAgBhJ,KAAKkJ,OAAO,GACjClJ,KAAKgJ,gBAAgBF,GAAM,IAS/B+K,OAAO/K,GACL9I,KAAKgJ,gBAAgBF,GAAO9I,KAAKsL,WAAWxC,KCxGhD5K,EAAAgH,EAAAC,EAAA,sBAAAqD,IAoBO,MAAMA,EAAyB,CA8BpC1J,WAAY,CAYV2jC,gBAAiB,CAACzjC,KAAMC,OAAQC,MAAO,MAOvC2I,SAAU,CAAC7I,KAAMC,OAAQuI,QAAQ,GAOjCW,aAAc,CAACnJ,KAAMQ,OAAQkI,UAAU,EAAMF,QAAQ,GAOrDk7B,cACI,CAAC1jC,KAAMC,OAAQC,MAAO,MAAOmE,SAAU,yBAM3Cs/B,WAAY1jC,OAKZ2jC,cAAe,CAAC5jC,KAAMC,OAAQC,MAAO,iBAKrC2jC,kBAAmB,CAAC7jC,KAAMC,OAAQC,MAAO,MAMzC+J,kBAAmB,CAACjK,KAAMC,OAAQC,MAAO,MAKzCiM,MAAO,CACLnM,KAAMyF,MACNiD,UAAU,EACVF,QAAQ,EACRtI,MAAO,WACL,MAAO,KAUX4jC,oBAAqB,CACnB9jC,KAAMQ,OACNN,MAAO,WACL,MAAO,CACL63B,SAAY,EACZgM,WAAY,EACZC,SAAU,EACVC,aAAc,MAMtBxjC,UAAW,CACT,0CACA,4BACA,qCAGFI,QAAS,WACPG,KAAKkjC,gBAAkBljC,KAAKmjC,YAAY1iC,KAAKT,MAC7CA,KAAK+H,WAAa,IAAIs6B,EAAcriC,KAAK6M,gBAAgBpM,KAAKT,QAGhEG,SAAU,WACRH,KAAKI,UAAYJ,KAAKojC,cAAcpjC,MACpCA,KAAKqjC,aAAarjC,KAAK0iC,gBAGzBhiC,SAAU,WACJV,KAAKI,WACPC,YAAIL,MAAMW,eAAeX,KAAKI,WAEhCJ,KAAKsjC,gBAAgBtjC,KAAK0iC,gBAU5Br6B,QAAS,SAASS,GAChB,OAAO9I,KAAKmL,MAAQnL,KAAKmL,MAAM9C,QAAQS,IAAS,GASlDnB,OAAQ,SAASzI,GACfc,KAAK6H,SAAW3I,GAQlBqkC,eAAgB,WACd,IAAI/gC,EAASxC,KAAKmL,MAAM3I,OACpBmC,EAAQnC,EAAS,OACCrB,IAAlBnB,KAAK6H,WACPlD,GAAS6H,OAAOxM,KAAKwjC,cAAcxjC,KAAK6H,WAAa,EAAIrF,GAAUA,GAErExC,KAAK6H,SAAW7H,KAAKoI,cAAczD,IAQrC8+B,WAAY,WACV,IAAI9+B,EAAQ,OACUxD,IAAlBnB,KAAK6H,WACPlD,GACK6H,OAAOxM,KAAKwjC,cAAcxjC,KAAK6H,WAAa,GAAK7H,KAAKmL,MAAM3I,QAEnExC,KAAK6H,SAAW7H,KAAKoI,cAAczD,IAQrC++B,YAAa,SAAS/+B,GACpB3E,KAAK2H,OAAO3H,KAAKoI,cAAczD,KAejCg/B,2BAA4B,WACtB3jC,KAAKI,WAA6C,mBAAzBJ,KAAKI,UAAUwjC,MAO1C5jC,KAAKI,UAAUwjC,QAEf5jC,KAAK6jC,gBAKT57B,6BACE,OAAwB,MAAjBjI,KAAK6H,UAGdi8B,eAAgB,WACd9jC,KAAKgI,mBAGPq7B,aAAc,SAAS1qB,GACrB3Y,KAAK0Y,OAAO1Y,KAAM2Y,EAAW,qBAG/B2qB,gBAAiB,SAAS3qB,GACxB3Y,KAAK+jC,SAAS/jC,KAAM2Y,EAAW,qBAGjCqrB,sBAAuB,SAASrrB,EAAW5L,GACzC/M,KAAKsjC,gBAAgBv2B,GACrB/M,KAAKqjC,aAAa1qB,IAGpBkrB,aAAc,WACZ,IAAIz0B,EAAQ/O,YAAIL,MAAMikC,yBAAyBjkC,KAAK2iC,YAAc,KAClEvzB,EAAQ3K,MAAMib,UAAUpX,OAAOxF,KAAKsM,EAAOpP,KAAKkjC,iBAChDljC,KAAKkkC,UAAU90B,IAGjBlH,uBAAwB,WAClBlI,KAAKmI,eACPnI,KAAK6H,SAAW7H,KAAKmkC,cAAcnkC,KAAKmI,gBAI5CH,gBAAiB,WACfhI,KAAK2I,gBAAgB3I,KAAK6H,WAG5Bc,gBAAiB,SAASd,GACxB,GAAK7H,KAAKmL,MAAV,CAIA,IAAIrC,EAAO9I,KAAKmJ,aAAanJ,KAAK6H,UAC9BiB,EACF9I,KAAK+H,WAAWJ,OAAOmB,GAEvB9I,KAAK+H,WAAWgB,QAId/I,KAAKiJ,mBAAqBjJ,KAAKmL,MAAM3I,aACVrB,IAA1BnB,KAAK+H,WAAWmB,QACnBlJ,KAAK6H,SAAW7H,KAAKiJ,qBAIzBk6B,YAAa,SAAS1/B,GACpB,OAAQzD,KAAK8iC,oBAAoBr/B,EAAKqnB,YAGxC3hB,aAAc,SAASjK,GACrB,OAAiB,MAATA,EAAiB,KAAOc,KAAKmL,MAAMnL,KAAKwjC,cAActkC,KAGhEskC,cAAe,SAAStkC,GACtB,IAAIc,KAAKyiC,gBAOP,OAAOj2B,OAAOtN,GANd,IAAK,IAAW4J,EAAPvG,EAAI,EAASuG,EAAO9I,KAAKmL,MAAM5I,GAAIA,IAC1C,GAAIvC,KAAKmkC,cAAcr7B,IAAS5J,EAC9B,OAAOqD,GAQf6F,cAAe,SAASzD,GACtB,IAAI3E,KAAKyiC,gBAMP,OAAO99B,EALP,IAAImE,EAAO9I,KAAKmL,MAAMxG,GACtB,OAAImE,EACK9I,KAAKmkC,cAAcr7B,QAD5B,GAQJq7B,cAAe,SAASr7B,GACtB,IAAKA,EACH,OAAO,KAET,IAAK9I,KAAKyiC,gBAAiB,CACzB,IAAIlgC,EAAIvC,KAAKqI,QAAQS,GACrB,OAAc,IAAPvG,EAAW,KAAOA,EAE3B,IAAI6hC,EAAYt7B,EAAKu7B,YAAgBrkC,KAAKyiC,kBAC1C,OAAoBthC,MAAbijC,EAAyBA,EACAt7B,EAAKmD,aAAajM,KAAKyiC,kBAGzD51B,gBAAiB,SAAS/D,EAAMwC,GAC1BtL,KAAK4iC,eACP5iC,KAAKskC,YAAYtkC,KAAK4iC,cAAet3B,EAAYxC,GAE/C9I,KAAK6iC,mBACP7iC,KAAKukC,gBAAgBvkC,KAAK6iC,kBAAmBv3B,EAAYxC,GAE3D9I,KAAKoJ,mBACLpJ,KAAKc,KAAK,SAAWwK,EAAa,SAAW,YAAa,CAACxC,KAAMA,KAGnEM,iBAAkB,WAChBpJ,KAAKuJ,iBAAiBvJ,KAAK+H,WAAWmB,QAIxCk6B,cAAe,SAAS3/B,GACtB,OAAOpD,YAAIoD,GAAMnD,aAAa,SAASkqB,GACrCxqB,KAAK6jC,eACL7jC,KAAKgI,kBAILhI,KAAKc,KACD,qBAAsB0pB,EAAU,CAACxjB,SAAS,EAAOw9B,YAAY,OAIrEr2B,iBAAkB,SAAS/H,GAGzB,IAFA,IAAImzB,EAAInzB,EAAEqkB,OACNtf,EAAQnL,KAAKmL,MACVouB,GAAKA,GAAKv5B,MAAM,CACrB,IAAIuC,EAAI4I,EAAM9C,QAAQkxB,GACtB,GAAIh3B,GAAK,EAAG,CACV,IAAIrD,EAAQc,KAAKoI,cAAc7F,GAE/B,YADAvC,KAAKykC,cAAcvlC,EAAOq6B,GAG5BA,EAAIA,EAAExQ,aAIV0b,cAAe,SAASvlC,EAAO4J,GACxB9I,KAAKc,KAAK,gBAAiB,CAAC+G,SAAU3I,EAAO4J,KAAMA,GAAO,CACpD07B,YAAY,IAEbE,kBACR1kC,KAAK2H,OAAOzI,sCC1YlBhB,EAAAgH,EAAAC,EAAA,sBAAArF,IAAA5B,EAAA,OAAAymC,EAAAzmC,EAAA,GAAA0mC,EAAA1mC,EAAA,GAgDO,MAAM4B,EAAoBtB,YAAQ,CACvCC,UAAWC;;;;;;;;;EAWXC,GAAI,sBAEJG,WAAY,CAOV+lC,KAAM,CAAC7lC,KAAMC,OAAQC,MAAO,UAE5B4lC,MAAO,CAAC9lC,KAAMC,OAAQC,MAAO,KAG/BW,QAAS,WACFC,EAAkB46B,WACrB56B,EAAkB46B,SAAW16B,MAG/B0F,SAASmM,KAAKqM,iBACV,gBAAiBle,KAAK+kC,gBAAgBtkC,KAAKT,QAQjDglC,SAAU,SAAShiC,GACjBhD,KAAK8kC,MAAQ,GACb9kC,KAAKsN,MAAM,WACTtN,KAAK8kC,MAAQ9hC,GACZ,MAGL+hC,gBAAiB,SAAStjC,GACpBA,EAAMwL,QAAUxL,EAAMwL,OAAOjK,MAC/BhD,KAAKglC,SAASvjC,EAAMwL,OAAOjK,SAKjClD,EAAkB46B,SAAW,KAE7B56B,EAAkBC,oBAAsB,WACjCD,EAAkB46B,WACrB56B,EAAkB46B,SAAWh1B,SAASC,cAAc,wBAGtDD,SAASmM,KAAK6C,YAAY5U,EAAkB46B","file":"chunk.6ea074ff21387fcd9e15.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yAnnouncer} from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`<iron-input>` is a wrapper to a native `<input>` element, that adds two-way\nbinding and prevention of invalid input. To use it, you must distribute a native\n`<input>` yourself. You can continue to use the native `input` as you would\nnormally:\n\n    <iron-input>\n      <input>\n    </iron-input>\n\n    <iron-input>\n      <input type=\"email\" disabled>\n    </iron-input>\n\n### Two-way binding\n\nBy default you can only get notified of changes to a native `<input>`'s `value`\ndue to user input:\n\n    <input value=\"{{myValue::input}}\">\n\nThis means that if you imperatively set the value (i.e. `someNativeInput.value =\n'foo'`), no events will be fired and this change cannot be observed.\n\n`iron-input` adds the `bind-value` property that mirrors the native `input`'s\n'`value` property; this property can be used for two-way data binding.\n`bind-value` will notify if it is changed either by user input or by script.\n\n    <iron-input bind-value=\"{{myValue}}\">\n      <input>\n    </iron-input>\n\nNote: this means that if you want to imperatively set the native `input`'s, you\n_must_ set `bind-value` instead, so that the wrapper `iron-input` can be\nnotified.\n\n### Validation\n\n`iron-input` uses the native `input`'s validation. For simplicity, `iron-input`\nhas a `validate()` method (which internally just checks the distributed\n`input`'s validity), which sets an `invalid` attribute that can also be used for\nstyling.\n\nTo validate automatically as you type, you can use the `auto-validate`\nattribute.\n\n`iron-input` also fires an `iron-input-validate` event after `validate()` is\ncalled. You can use it to implement a custom validator:\n\n    var CatsOnlyValidator = {\n      validate: function(ironInput) {\n        var valid = !ironInput.bindValue || ironInput.bindValue === 'cat';\n        ironInput.invalid = !valid;\n        return valid;\n      }\n    }\n    ironInput.addEventListener('iron-input-validate', function() {\n      CatsOnly.validate(input2);\n    });\n\nYou can also use an element implementing an\n[`IronValidatorBehavior`](/element/PolymerElements/iron-validatable-behavior).\nThis example can also be found in the demo for this element:\n\n    <iron-input validator=\"cats-only\">\n      <input>\n    </iron-input>\n\n### Preventing invalid input\n\nIt may be desirable to only allow users to enter certain characters. You can use\nthe `allowed-pattern` attribute to accomplish this. This feature is separate\nfrom validation, and `allowed-pattern` does not affect how the input is\nvalidated.\n\n    // Only allow typing digits, but a valid input has exactly 5 digits.\n    <iron-input allowed-pattern=\"[0-9]\">\n      <input pattern=\"\\d{5}\">\n    </iron-input>\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n    </style>\n    <slot id=\"content\"></slot>\n`,\n\n  is: 'iron-input',\n  behaviors: [IronValidatableBehavior],\n\n  /**\n   * Fired whenever `validate()` is called.\n   *\n   * @event iron-input-validate\n   */\n\n  properties: {\n\n    /**\n     * Use this property instead of `value` for two-way data binding, or to\n     * set a default value for the input. **Do not** use the distributed\n     * input's `value` property to set a default value.\n     */\n    bindValue: {type: String, value: ''},\n\n    /**\n     * Computed property that echoes `bindValue` (mostly used for Polymer 1.0\n     * backcompatibility, if you were one-way binding to the Polymer 1.0\n     * `input is=\"iron-input\"` value attribute).\n     */\n    value: {type: String, computed: '_computeValue(bindValue)'},\n\n    /**\n     * Regex-like list of characters allowed as input; all characters not in the\n     * list will be rejected. The recommended format should be a list of allowed\n     * characters, for example, `[a-zA-Z0-9.+-!;:]`.\n     *\n     * This pattern represents the allowed characters for the field; as the user\n     * inputs text, each individual character will be checked against the\n     * pattern (rather than checking the entire value as a whole). If a\n     * character is not a match, it will be rejected.\n     *\n     * Pasted input will have each character checked individually; if any\n     * character doesn't match `allowedPattern`, the entire pasted string will\n     * be rejected.\n     *\n     * Note: if you were using `iron-input` in 1.0, you were also required to\n     * set `prevent-invalid-input`. This is no longer needed as of Polymer 2.0,\n     * and will be set automatically for you if an `allowedPattern` is provided.\n     *\n     */\n    allowedPattern: {type: String},\n\n    /**\n     * Set to true to auto-validate the input value as you type.\n     */\n    autoValidate: {type: Boolean, value: false},\n\n    /**\n     * The native input element.\n     */\n    _inputElement: Object,\n  },\n\n  observers: ['_bindValueChanged(bindValue, _inputElement)'],\n  listeners: {'input': '_onInput', 'keypress': '_onKeypress'},\n\n  created: function() {\n    IronA11yAnnouncer.requestAvailability();\n    this._previousValidInput = '';\n    this._patternAlreadyChecked = false;\n  },\n\n  attached: function() {\n    // If the input is added at a later time, update the internal reference.\n    this._observer = dom(this).observeNodes(function(info) {\n      this._initSlottedInput();\n    }.bind(this));\n  },\n\n  detached: function() {\n    if (this._observer) {\n      dom(this).unobserveNodes(this._observer);\n      this._observer = null;\n    }\n  },\n\n  /**\n   * Returns the distributed input element.\n   */\n  get inputElement() {\n    return this._inputElement;\n  },\n\n  _initSlottedInput: function() {\n    this._inputElement = this.getEffectiveChildren()[0];\n\n    if (this.inputElement && this.inputElement.value) {\n      this.bindValue = this.inputElement.value;\n    }\n\n    this.fire('iron-input-ready');\n  },\n\n  get _patternRegExp() {\n    var pattern;\n    if (this.allowedPattern) {\n      pattern = new RegExp(this.allowedPattern);\n    } else {\n      switch (this.inputElement.type) {\n        case 'number':\n          pattern = /[0-9.,e-]/;\n          break;\n      }\n    }\n    return pattern;\n  },\n\n  /**\n   * @suppress {checkTypes}\n   */\n  _bindValueChanged: function(bindValue, inputElement) {\n    // The observer could have run before attached() when we have actually\n    // initialized this property.\n    if (!inputElement) {\n      return;\n    }\n\n    if (bindValue === undefined) {\n      inputElement.value = null;\n    } else if (bindValue !== inputElement.value) {\n      this.inputElement.value = bindValue;\n    }\n\n    if (this.autoValidate) {\n      this.validate();\n    }\n\n    // manually notify because we don't want to notify until after setting value\n    this.fire('bind-value-changed', {value: bindValue});\n  },\n\n  _onInput: function() {\n    // Need to validate each of the characters pasted if they haven't\n    // been validated inside `_onKeypress` already.\n    if (this.allowedPattern && !this._patternAlreadyChecked) {\n      var valid = this._checkPatternValidity();\n      if (!valid) {\n        this._announceInvalidCharacter(\n            'Invalid string of characters not entered.');\n        this.inputElement.value = this._previousValidInput;\n      }\n    }\n    this.bindValue = this._previousValidInput = this.inputElement.value;\n    this._patternAlreadyChecked = false;\n  },\n\n  _isPrintable: function(event) {\n    // What a control/printable character is varies wildly based on the browser.\n    // - most control characters (arrows, backspace) do not send a `keypress`\n    // event\n    //   in Chrome, but the *do* on Firefox\n    // - in Firefox, when they do send a `keypress` event, control chars have\n    //   a charCode = 0, keyCode = xx (for ex. 40 for down arrow)\n    // - printable characters always send a keypress event.\n    // - in Firefox, printable chars always have a keyCode = 0. In Chrome, the\n    // keyCode\n    //   always matches the charCode.\n    // None of this makes any sense.\n\n    // For these keys, ASCII code == browser keycode.\n    var anyNonPrintable = (event.keyCode == 8) ||  // backspace\n        (event.keyCode == 9) ||                    // tab\n        (event.keyCode == 13) ||                   // enter\n        (event.keyCode == 27);                     // escape\n\n    // For these keys, make sure it's a browser keycode and not an ASCII code.\n    var mozNonPrintable = (event.keyCode == 19) ||  // pause\n        (event.keyCode == 20) ||                    // caps lock\n        (event.keyCode == 45) ||                    // insert\n        (event.keyCode == 46) ||                    // delete\n        (event.keyCode == 144) ||                   // num lock\n        (event.keyCode == 145) ||                   // scroll lock\n        (event.keyCode > 32 &&\n         event.keyCode < 41) ||  // page up/down, end, home, arrows\n        (event.keyCode > 111 && event.keyCode < 124);  // fn keys\n\n    return !anyNonPrintable && !(event.charCode == 0 && mozNonPrintable);\n  },\n\n  _onKeypress: function(event) {\n    if (!this.allowedPattern && this.inputElement.type !== 'number') {\n      return;\n    }\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return;\n    }\n\n    // Handle special keys and backspace\n    if (event.metaKey || event.ctrlKey || event.altKey) {\n      return;\n    }\n\n    // Check the pattern either here or in `_onInput`, but not in both.\n    this._patternAlreadyChecked = true;\n\n    var thisChar = String.fromCharCode(event.charCode);\n    if (this._isPrintable(event) && !regexp.test(thisChar)) {\n      event.preventDefault();\n      this._announceInvalidCharacter(\n          'Invalid character ' + thisChar + ' not entered.');\n    }\n  },\n\n  _checkPatternValidity: function() {\n    var regexp = this._patternRegExp;\n    if (!regexp) {\n      return true;\n    }\n    for (var i = 0; i < this.inputElement.value.length; i++) {\n      if (!regexp.test(this.inputElement.value[i])) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Returns true if `value` is valid. The validator provided in `validator`\n   * will be used first, then any constraints.\n   * @return {boolean} True if the value is valid.\n   */\n  validate: function() {\n    if (!this.inputElement) {\n      this.invalid = false;\n      return true;\n    }\n\n    // Use the nested input's native validity.\n    var valid = this.inputElement.checkValidity();\n\n    // Only do extra checking if the browser thought this was valid.\n    if (valid) {\n      // Empty, required input is invalid\n      if (this.required && this.bindValue === '') {\n        valid = false;\n      } else if (this.hasValidator()) {\n        valid = IronValidatableBehavior.validate.call(this, this.bindValue);\n      }\n    }\n\n    this.invalid = !valid;\n    this.fire('iron-input-validate');\n    return valid;\n  },\n\n  _announceInvalidCharacter: function(message) {\n    this.fire('iron-announce', {text: message});\n  },\n\n  _computeValue: function(bindValue) {\n    return bindValue;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\n/**\n * `NeonAnimatableBehavior` is implemented by elements containing\n * animations for use with elements implementing\n * `NeonAnimationRunnerBehavior`.\n * @polymerBehavior\n */\nexport const NeonAnimatableBehavior = {\n\n  properties: {\n\n    /**\n     * Animation configuration. See README for more info.\n     */\n    animationConfig: {type: Object},\n\n    /**\n     * Convenience property for setting an 'entry' animation. Do not set\n     * `animationConfig.entry` manually if using this. The animated node is set\n     * to `this` if using this property.\n     */\n    entryAnimation: {\n      observer: '_entryAnimationChanged',\n      type: String,\n    },\n\n    /**\n     * Convenience property for setting an 'exit' animation. Do not set\n     * `animationConfig.exit` manually if using this. The animated node is set\n     * to `this` if using this property.\n     */\n    exitAnimation: {\n      observer: '_exitAnimationChanged',\n      type: String,\n    },\n\n  },\n\n  _entryAnimationChanged: function() {\n    this.animationConfig = this.animationConfig || {};\n    this.animationConfig['entry'] = [{name: this.entryAnimation, node: this}];\n  },\n\n  _exitAnimationChanged: function() {\n    this.animationConfig = this.animationConfig || {};\n    this.animationConfig['exit'] = [{name: this.exitAnimation, node: this}];\n  },\n\n  _copyProperties: function(config1, config2) {\n    // shallowly copy properties from config2 to config1\n    for (var property in config2) {\n      config1[property] = config2[property];\n    }\n  },\n\n  _cloneConfig: function(config) {\n    var clone = {isClone: true};\n    this._copyProperties(clone, config);\n    return clone;\n  },\n\n  _getAnimationConfigRecursive: function(type, map, allConfigs) {\n    if (!this.animationConfig) {\n      return;\n    }\n\n    if (this.animationConfig.value &&\n        typeof this.animationConfig.value === 'function') {\n      this._warn(this._logf(\n          'playAnimation',\n          'Please put \\'animationConfig\\' inside of your components \\'properties\\' object instead of outside of it.'));\n      return;\n    }\n\n    // type is optional\n    var thisConfig;\n    if (type) {\n      thisConfig = this.animationConfig[type];\n    } else {\n      thisConfig = this.animationConfig;\n    }\n\n    if (!Array.isArray(thisConfig)) {\n      thisConfig = [thisConfig];\n    }\n\n    // iterate animations and recurse to process configurations from child nodes\n    if (thisConfig) {\n      for (var config, index = 0; config = thisConfig[index]; index++) {\n        if (config.animatable) {\n          config.animatable._getAnimationConfigRecursive(\n              config.type || type, map, allConfigs);\n        } else {\n          if (config.id) {\n            var cachedConfig = map[config.id];\n            if (cachedConfig) {\n              // merge configurations with the same id, making a clone lazily\n              if (!cachedConfig.isClone) {\n                map[config.id] = this._cloneConfig(cachedConfig);\n                cachedConfig = map[config.id];\n              }\n              this._copyProperties(cachedConfig, config);\n            } else {\n              // put any configs with an id into a map\n              map[config.id] = config;\n            }\n          } else {\n            allConfigs.push(config);\n          }\n        }\n      }\n    }\n  },\n\n  /**\n   * An element implementing `NeonAnimationRunnerBehavior` calls this\n   * method to configure an animation with an optional type. Elements\n   * implementing `NeonAnimatableBehavior` should define the property\n   * `animationConfig`, which is either a configuration object or a map of\n   * animation type to array of configuration objects.\n   */\n  getAnimationConfig: function(type) {\n    var map = {};\n    var allConfigs = [];\n    this._getAnimationConfigRecursive(type, map, allConfigs);\n    // append the configurations saved in the map to the array\n    for (var key in map) {\n      allConfigs.push(map[key]);\n    }\n    return allConfigs;\n  }\n\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {NeonAnimatableBehavior} from './neon-animatable-behavior.js';\n\n/**\n * `NeonAnimationRunnerBehavior` adds a method to run animations.\n *\n * @polymerBehavior NeonAnimationRunnerBehavior\n */\nexport const NeonAnimationRunnerBehaviorImpl = {\n\n  _configureAnimations: function(configs) {\n    var results = [];\n    var resultsToPlay = [];\n\n    if (configs.length > 0) {\n      for (let config, index = 0; config = configs[index]; index++) {\n        let neonAnimation = document.createElement(config.name);\n        // is this element actually a neon animation?\n        if (neonAnimation.isNeonAnimation) {\n          let result = null;\n          // Closure compiler does not work well with a try / catch here.\n          // .configure needs to be explicitly defined\n          if (!neonAnimation.configure) {\n            /**\n             * @param {Object} config\n             * @return {AnimationEffectReadOnly}\n             */\n            neonAnimation.configure = function(config) {\n              return null;\n            }\n          }\n\n          result = neonAnimation.configure(config);\n          resultsToPlay.push({\n            result: result,\n            config: config,\n            neonAnimation: neonAnimation,\n          });\n        } else {\n          console.warn(this.is + ':', config.name, 'not found!');\n        }\n      }\n    }\n\n    for (var i = 0; i < resultsToPlay.length; i++) {\n      let result = resultsToPlay[i].result;\n      let config = resultsToPlay[i].config;\n      let neonAnimation = resultsToPlay[i].neonAnimation;\n      // configuration or play could fail if polyfills aren't loaded\n      try {\n        // Check if we have an Effect rather than an Animation\n        if (typeof result.cancel != 'function') {\n          result = document.timeline.play(result);\n        }\n      } catch (e) {\n        result = null;\n        console.warn('Couldnt play', '(', config.name, ').', e);\n      }\n\n      if (result) {\n        results.push({\n          neonAnimation: neonAnimation,\n          config: config,\n          animation: result,\n        });\n      }\n    }\n\n    return results;\n  },\n\n  _shouldComplete: function(activeEntries) {\n    var finished = true;\n    for (var i = 0; i < activeEntries.length; i++) {\n      if (activeEntries[i].animation.playState != 'finished') {\n        finished = false;\n        break;\n      }\n    }\n    return finished;\n  },\n\n  _complete: function(activeEntries) {\n    for (var i = 0; i < activeEntries.length; i++) {\n      activeEntries[i].neonAnimation.complete(activeEntries[i].config);\n    }\n    for (var i = 0; i < activeEntries.length; i++) {\n      activeEntries[i].animation.cancel();\n    }\n  },\n\n  /**\n   * Plays an animation with an optional `type`.\n   * @param {string=} type\n   * @param {!Object=} cookie\n   */\n  playAnimation: function(type, cookie) {\n    var configs = this.getAnimationConfig(type);\n    if (!configs) {\n      return;\n    }\n    this._active = this._active || {};\n    if (this._active[type]) {\n      this._complete(this._active[type]);\n      delete this._active[type];\n    }\n\n    var activeEntries = this._configureAnimations(configs);\n\n    if (activeEntries.length == 0) {\n      this.fire('neon-animation-finish', cookie, {bubbles: false});\n      return;\n    }\n\n    this._active[type] = activeEntries;\n\n    for (var i = 0; i < activeEntries.length; i++) {\n      activeEntries[i].animation.onfinish = function() {\n        if (this._shouldComplete(activeEntries)) {\n          this._complete(activeEntries);\n          delete this._active[type];\n          this.fire('neon-animation-finish', cookie, {bubbles: false});\n        }\n      }.bind(this);\n    }\n  },\n\n  /**\n   * Cancels the currently running animations.\n   */\n  cancelAnimation: function() {\n    for (var k in this._active) {\n      var entries = this._active[k]\n\n                    for (var j in entries) {\n        entries[j].animation.cancel();\n      }\n    }\n\n    this._active = {};\n  }\n};\n\n/** @polymerBehavior */\nexport const NeonAnimationRunnerBehavior =\n    [NeonAnimatableBehavior, NeonAnimationRunnerBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronSelectableBehavior} from './iron-selectable.js';\n\n/**\n * @polymerBehavior IronMultiSelectableBehavior\n */\nexport const IronMultiSelectableBehaviorImpl = {\n  properties: {\n\n    /**\n     * If true, multiple selections are allowed.\n     */\n    multi: {type: Boolean, value: false, observer: 'multiChanged'},\n\n    /**\n     * Gets or sets the selected elements. This is used instead of `selected`\n     * when `multi` is true.\n     */\n    selectedValues: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    },\n\n    /**\n     * Returns an array of currently selected items.\n     */\n    selectedItems: {\n      type: Array,\n      readOnly: true,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    },\n\n  },\n\n  observers: ['_updateSelected(selectedValues.splices)'],\n\n  /**\n   * Selects the given value. If the `multi` property is true, then the selected\n   * state of the `value` will be toggled; otherwise the `value` will be\n   * selected.\n   *\n   * @method select\n   * @param {string|number} value the value to select.\n   */\n  select: function(value) {\n    if (this.multi) {\n      this._toggleSelected(value);\n    } else {\n      this.selected = value;\n    }\n  },\n\n  multiChanged: function(multi) {\n    this._selection.multi = multi;\n    this._updateSelected();\n  },\n\n  // UNUSED, FOR API COMPATIBILITY\n  get _shouldUpdateSelection() {\n    return this.selected != null ||\n        (this.selectedValues != null && this.selectedValues.length);\n  },\n\n  _updateAttrForSelected: function() {\n    if (!this.multi) {\n      IronSelectableBehavior._updateAttrForSelected.apply(this);\n    } else if (this.selectedItems && this.selectedItems.length > 0) {\n      this.selectedValues =\n          this.selectedItems\n              .map(\n                  function(selectedItem) {\n                    return this._indexToValue(this.indexOf(selectedItem));\n                  },\n                  this)\n              .filter(function(unfilteredValue) {\n                return unfilteredValue != null;\n              }, this);\n    }\n  },\n\n  _updateSelected: function() {\n    if (this.multi) {\n      this._selectMulti(this.selectedValues);\n    } else {\n      this._selectSelected(this.selected);\n    }\n  },\n\n  _selectMulti: function(values) {\n    values = values || [];\n\n    var selectedItems =\n        (this._valuesToItems(values) || []).filter(function(item) {\n          return item !== null && item !== undefined;\n        });\n\n    // clear all but the current selected items\n    this._selection.clear(selectedItems);\n\n    // select only those not selected yet\n    for (var i = 0; i < selectedItems.length; i++) {\n      this._selection.setItemSelected(selectedItems[i], true);\n    }\n\n    // Check for items, since this array is populated only when attached\n    if (this.fallbackSelection && !this._selection.get().length) {\n      var fallback = this._valueToItem(this.fallbackSelection);\n      if (fallback) {\n        this.select(this.fallbackSelection);\n      }\n    }\n  },\n\n  _selectionChange: function() {\n    var s = this._selection.get();\n    if (this.multi) {\n      this._setSelectedItems(s);\n      this._setSelectedItem(s.length ? s[0] : null);\n    } else {\n      if (s !== null && s !== undefined) {\n        this._setSelectedItems([s]);\n        this._setSelectedItem(s);\n      } else {\n        this._setSelectedItems([]);\n        this._setSelectedItem(null);\n      }\n    }\n  },\n\n  _toggleSelected: function(value) {\n    var i = this.selectedValues.indexOf(value);\n    var unselected = i < 0;\n    if (unselected) {\n      this.push('selectedValues', value);\n    } else {\n      this.splice('selectedValues', i, 1);\n    }\n  },\n\n  _valuesToItems: function(values) {\n    return (values == null) ? null : values.map(function(value) {\n      return this._valueToItem(value);\n    }, this);\n  }\n};\n\n/** @polymerBehavior */\nexport const IronMultiSelectableBehavior =\n    [IronSelectableBehavior, IronMultiSelectableBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yKeysBehavior} from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport {IronMultiSelectableBehavior, IronMultiSelectableBehaviorImpl} from '@polymer/iron-selector/iron-multi-selectable.js';\nimport {IronSelectableBehavior} from '@polymer/iron-selector/iron-selectable.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `IronMenuBehavior` implements accessible menu behavior.\n *\n * @demo demo/index.html\n * @polymerBehavior IronMenuBehavior\n */\nexport const IronMenuBehaviorImpl = {\n\n  properties: {\n\n    /**\n     * Returns the currently focused item.\n     * @type {?Object}\n     */\n    focusedItem:\n        {observer: '_focusedItemChanged', readOnly: true, type: Object},\n\n    /**\n     * The attribute to use on menu items to look up the item title. Typing the\n     * first letter of an item when the menu is open focuses that item. If\n     * unset, `textContent` will be used.\n     */\n    attrForItemTitle: {type: String},\n\n    /**\n     * @type {boolean}\n     */\n    disabled: {\n      type: Boolean,\n      value: false,\n      observer: '_disabledChanged',\n    },\n  },\n\n  /**\n   * The list of keys has been taken from\n   * https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\n   * @private\n   */\n  _MODIFIER_KEYS: [\n    'Alt',\n    'AltGraph',\n    'CapsLock',\n    'Control',\n    'Fn',\n    'FnLock',\n    'Hyper',\n    'Meta',\n    'NumLock',\n    'OS',\n    'ScrollLock',\n    'Shift',\n    'Super',\n    'Symbol',\n    'SymbolLock'\n  ],\n\n  /** @private */\n  _SEARCH_RESET_TIMEOUT_MS: 1000,\n\n  /** @private */\n  _previousTabIndex: 0,\n\n  hostAttributes: {\n    'role': 'menu',\n  },\n\n  observers: ['_updateMultiselectable(multi)'],\n\n  listeners: {\n    'focus': '_onFocus',\n    'keydown': '_onKeydown',\n    'iron-items-changed': '_onIronItemsChanged'\n  },\n\n  /**\n   * @type {!Object}\n   */\n  keyBindings: {\n    'up': '_onUpKey',\n    'down': '_onDownKey',\n    'esc': '_onEscKey',\n    'shift+tab:keydown': '_onShiftTabDown'\n  },\n\n  attached: function() {\n    this._resetTabindices();\n  },\n\n  /**\n   * Selects the given value. If the `multi` property is true, then the selected\n   * state of the `value` will be toggled; otherwise the `value` will be\n   * selected.\n   *\n   * @param {string|number} value the value to select.\n   */\n  select: function(value) {\n    // Cancel automatically focusing a default item if the menu received focus\n    // through a user action selecting a particular item.\n    if (this._defaultFocusAsync) {\n      this.cancelAsync(this._defaultFocusAsync);\n      this._defaultFocusAsync = null;\n    }\n    var item = this._valueToItem(value);\n    if (item && item.hasAttribute('disabled'))\n      return;\n    this._setFocusedItem(item);\n    IronMultiSelectableBehaviorImpl.select.apply(this, arguments);\n  },\n\n  /**\n   * Resets all tabindex attributes to the appropriate value based on the\n   * current selection state. The appropriate value is `0` (focusable) for\n   * the default selected item, and `-1` (not keyboard focusable) for all\n   * other items. Also sets the correct initial values for aria-selected\n   * attribute, true for default selected item and false for others.\n   */\n  _resetTabindices: function() {\n    var firstSelectedItem = this.multi ?\n        (this.selectedItems && this.selectedItems[0]) :\n        this.selectedItem;\n\n    this.items.forEach(function(item) {\n      item.setAttribute('tabindex', item === firstSelectedItem ? '0' : '-1');\n      item.setAttribute('aria-selected', this._selection.isSelected(item));\n    }, this);\n  },\n\n  /**\n   * Sets appropriate ARIA based on whether or not the menu is meant to be\n   * multi-selectable.\n   *\n   * @param {boolean} multi True if the menu should be multi-selectable.\n   */\n  _updateMultiselectable: function(multi) {\n    if (multi) {\n      this.setAttribute('aria-multiselectable', 'true');\n    } else {\n      this.removeAttribute('aria-multiselectable');\n    }\n  },\n\n  /**\n   * Given a KeyboardEvent, this method will focus the appropriate item in the\n   * menu (if there is a relevant item, and it is possible to focus it).\n   *\n   * @param {KeyboardEvent} event A KeyboardEvent.\n   */\n  _focusWithKeyboardEvent: function(event) {\n    // Make sure that the key pressed is not a modifier key.\n    // getModifierState is not being used, as it is not available in Safari\n    // earlier than 10.0.2 (https://trac.webkit.org/changeset/206725/webkit)\n    if (this._MODIFIER_KEYS.indexOf(event.key) !== -1)\n      return;\n\n    this.cancelDebouncer('_clearSearchText');\n\n    var searchText = this._searchText || '';\n    var key = event.key && event.key.length == 1 ?\n        event.key :\n        String.fromCharCode(event.keyCode);\n    searchText += key.toLocaleLowerCase();\n\n    var searchLength = searchText.length;\n\n    for (var i = 0, item; item = this.items[i]; i++) {\n      if (item.hasAttribute('disabled')) {\n        continue;\n      }\n\n      var attr = this.attrForItemTitle || 'textContent';\n      var title = (item[attr] || item.getAttribute(attr) || '').trim();\n\n      if (title.length < searchLength) {\n        continue;\n      }\n\n      if (title.slice(0, searchLength).toLocaleLowerCase() == searchText) {\n        this._setFocusedItem(item);\n        break;\n      }\n    }\n\n    this._searchText = searchText;\n    this.debounce(\n        '_clearSearchText',\n        this._clearSearchText,\n        this._SEARCH_RESET_TIMEOUT_MS);\n  },\n\n  _clearSearchText: function() {\n    this._searchText = '';\n  },\n\n  /**\n   * Focuses the previous item (relative to the currently focused item) in the\n   * menu, disabled items will be skipped.\n   * Loop until length + 1 to handle case of single item in menu.\n   */\n  _focusPrevious: function() {\n    var length = this.items.length;\n    var curFocusIndex = Number(this.indexOf(this.focusedItem));\n\n    for (var i = 1; i < length + 1; i++) {\n      var item = this.items[(curFocusIndex - i + length) % length];\n      if (!item.hasAttribute('disabled')) {\n        var owner = dom(item).getOwnerRoot() || document;\n        this._setFocusedItem(item);\n\n        // Focus might not have worked, if the element was hidden or not\n        // focusable. In that case, try again.\n        if (dom(owner).activeElement == item) {\n          return;\n        }\n      }\n    }\n  },\n\n  /**\n   * Focuses the next item (relative to the currently focused item) in the\n   * menu, disabled items will be skipped.\n   * Loop until length + 1 to handle case of single item in menu.\n   */\n  _focusNext: function() {\n    var length = this.items.length;\n    var curFocusIndex = Number(this.indexOf(this.focusedItem));\n\n    for (var i = 1; i < length + 1; i++) {\n      var item = this.items[(curFocusIndex + i) % length];\n      if (!item.hasAttribute('disabled')) {\n        var owner = dom(item).getOwnerRoot() || document;\n        this._setFocusedItem(item);\n\n        // Focus might not have worked, if the element was hidden or not\n        // focusable. In that case, try again.\n        if (dom(owner).activeElement == item) {\n          return;\n        }\n      }\n    }\n  },\n\n  /**\n   * Mutates items in the menu based on provided selection details, so that\n   * all items correctly reflect selection state.\n   *\n   * @param {Element} item An item in the menu.\n   * @param {boolean} isSelected True if the item should be shown in a\n   * selected state, otherwise false.\n   */\n  _applySelection: function(item, isSelected) {\n    if (isSelected) {\n      item.setAttribute('aria-selected', 'true');\n    } else {\n      item.setAttribute('aria-selected', 'false');\n    }\n    IronSelectableBehavior._applySelection.apply(this, arguments);\n  },\n\n  /**\n   * Discretely updates tabindex values among menu items as the focused item\n   * changes.\n   *\n   * @param {Element} focusedItem The element that is currently focused.\n   * @param {?Element} old The last element that was considered focused, if\n   * applicable.\n   */\n  _focusedItemChanged: function(focusedItem, old) {\n    old && old.setAttribute('tabindex', '-1');\n    if (focusedItem && !focusedItem.hasAttribute('disabled') &&\n        !this.disabled) {\n      focusedItem.setAttribute('tabindex', '0');\n      focusedItem.focus();\n    }\n  },\n\n  /**\n   * A handler that responds to mutation changes related to the list of items\n   * in the menu.\n   *\n   * @param {CustomEvent} event An event containing mutation records as its\n   * detail.\n   */\n  _onIronItemsChanged: function(event) {\n    if (event.detail.addedNodes.length) {\n      this._resetTabindices();\n    }\n  },\n\n  /**\n   * Handler that is called when a shift+tab keypress is detected by the menu.\n   *\n   * @param {CustomEvent} event A key combination event.\n   */\n  _onShiftTabDown: function(event) {\n    var oldTabIndex = this.getAttribute('tabindex');\n\n    IronMenuBehaviorImpl._shiftTabPressed = true;\n\n    this._setFocusedItem(null);\n\n    this.setAttribute('tabindex', '-1');\n\n    this.async(function() {\n      this.setAttribute('tabindex', oldTabIndex);\n      IronMenuBehaviorImpl._shiftTabPressed = false;\n      // NOTE(cdata): polymer/polymer#1305\n    }, 1);\n  },\n\n  /**\n   * Handler that is called when the menu receives focus.\n   *\n   * @param {FocusEvent} event A focus event.\n   */\n  _onFocus: function(event) {\n    if (IronMenuBehaviorImpl._shiftTabPressed) {\n      // do not focus the menu itself\n      return;\n    }\n\n    // Do not focus the selected tab if the deepest target is part of the\n    // menu element's local DOM and is focusable.\n    var rootTarget =\n        /** @type {?HTMLElement} */ (dom(event).rootTarget);\n    if (rootTarget !== this && typeof rootTarget.tabIndex !== 'undefined' &&\n        !this.isLightDescendant(rootTarget)) {\n      return;\n    }\n\n    // clear the cached focus item\n    this._defaultFocusAsync = this.async(function() {\n      // focus the selected item when the menu receives focus, or the first item\n      // if no item is selected\n      var firstSelectedItem = this.multi ?\n          (this.selectedItems && this.selectedItems[0]) :\n          this.selectedItem;\n\n      this._setFocusedItem(null);\n\n      if (firstSelectedItem) {\n        this._setFocusedItem(firstSelectedItem);\n      } else if (this.items[0]) {\n        // We find the first none-disabled item (if one exists)\n        this._focusNext();\n      }\n    });\n  },\n\n  /**\n   * Handler that is called when the up key is pressed.\n   *\n   * @param {CustomEvent} event A key combination event.\n   */\n  _onUpKey: function(event) {\n    // up and down arrows moves the focus\n    this._focusPrevious();\n    event.detail.keyboardEvent.preventDefault();\n  },\n\n  /**\n   * Handler that is called when the down key is pressed.\n   *\n   * @param {CustomEvent} event A key combination event.\n   */\n  _onDownKey: function(event) {\n    this._focusNext();\n    event.detail.keyboardEvent.preventDefault();\n  },\n\n  /**\n   * Handler that is called when the esc key is pressed.\n   *\n   * @param {CustomEvent} event A key combination event.\n   */\n  _onEscKey: function(event) {\n    var focusedItem = this.focusedItem;\n    if (focusedItem) {\n      focusedItem.blur();\n    }\n  },\n\n  /**\n   * Handler that is called when a keydown event is detected.\n   *\n   * @param {KeyboardEvent} event A keyboard event.\n   */\n  _onKeydown: function(event) {\n    if (!this.keyboardEventMatchesKeys(event, 'up down esc')) {\n      // all other keys focus the menu item starting with that character\n      this._focusWithKeyboardEvent(event);\n    }\n    event.stopPropagation();\n  },\n\n  // override _activateHandler\n  _activateHandler: function(event) {\n    IronSelectableBehavior._activateHandler.call(this, event);\n    event.stopPropagation();\n  },\n\n  /**\n   * Updates this element's tab index when it's enabled/disabled.\n   * @param {boolean} disabled\n   */\n  _disabledChanged: function(disabled) {\n    if (disabled) {\n      this._previousTabIndex =\n          this.hasAttribute('tabindex') ? this.tabIndex : 0;\n      this.removeAttribute(\n          'tabindex');  // No tabindex means not tab-able or select-able.\n    } else if (!this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', this._previousTabIndex);\n    }\n  }\n};\n\nIronMenuBehaviorImpl._shiftTabPressed = false;\n\n/** @polymerBehavior */\nexport const IronMenuBehavior =\n    [IronMultiSelectableBehavior, IronA11yKeysBehavior, IronMenuBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {IronMenuBehavior} from '@polymer/iron-menu-behavior/iron-menu-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Menus](https://www.google.com/design/spec/components/menus.html)\n\n`<paper-listbox>` implements an accessible listbox control with Material Design\nstyling. The focused item is highlighted, and the selected item has bolded text.\n\n    <paper-listbox>\n      <paper-item>Item 1</paper-item>\n      <paper-item>Item 2</paper-item>\n    </paper-listbox>\n\nAn initial selection can be specified with the `selected` attribute.\n\n    <paper-listbox selected=\"0\">\n      <paper-item>Item 1</paper-item>\n      <paper-item>Item 2</paper-item>\n    </paper-listbox>\n\nMake a multi-select listbox with the `multi` attribute. Items in a multi-select\nlistbox can be deselected, and multiple item can be selected.\n\n    <paper-listbox multi>\n      <paper-item>Item 1</paper-item>\n      <paper-item>Item 2</paper-item>\n    </paper-listbox>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-listbox-background-color`   | Menu background color |\n`--primary-background-color`\n`--paper-listbox-color`              | Menu foreground color |\n`--primary-text-color`\n`--paper-listbox`                    | Mixin applied to the listbox | `{}`\n\n### Accessibility\n\n`<paper-listbox>` has `role=\"listbox\"` by default. A multi-select listbox will\nalso have `aria-multiselectable` set. It implements key bindings to navigate\nthrough the listbox with the up and down arrow keys, esc to exit the listbox,\nand enter to activate a listbox item. Typing the first letter of a listbox item\nwill also focus it.\n\n@group Paper Elements\n@element paper-listbox\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        padding: 8px 0;\n\n        background: var(--paper-listbox-background-color, var(--primary-background-color));\n        color: var(--paper-listbox-color, var(--primary-text-color));\n\n        @apply --paper-listbox;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-listbox',\n  behaviors: [IronMenuBehavior],\n\n  /** @private */\n  hostAttributes: {role: 'listbox'}\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronA11yKeysBehavior} from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {IronOverlayBehavior, IronOverlayBehaviorImpl} from '@polymer/iron-overlay-behavior/iron-overlay-behavior.js';\nimport {NeonAnimationRunnerBehavior} from '@polymer/neon-animation/neon-animation-runner-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`<iron-dropdown>` is a generalized element that is useful when you have\nhidden content (`dropdown-content`) that is revealed due to some change in\nstate that should cause it to do so.\n\nNote that this is a low-level element intended to be used as part of other\ncomposite elements that cause dropdowns to be revealed.\n\nExamples of elements that might be implemented using an `iron-dropdown`\ninclude comboboxes, menubuttons, selects. The list goes on.\n\nThe `<iron-dropdown>` element exposes attributes that allow the position\nof the `dropdown-content` relative to the `dropdown-trigger` to be\nconfigured.\n\n    <iron-dropdown horizontal-align=\"right\" vertical-align=\"top\">\n      <div slot=\"dropdown-content\">Hello!</div>\n    </iron-dropdown>\n\nIn the above example, the `<div>` assigned to the `dropdown-content` slot will\nbe hidden until the dropdown element has `opened` set to true, or when the\n`open` method is called on the element.\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: fixed;\n      }\n\n      #contentWrapper ::slotted(*) {\n        overflow: auto;\n      }\n\n      #contentWrapper.animating ::slotted(*) {\n        overflow: hidden;\n        pointer-events: none;\n      }\n    </style>\n\n    <div id=\"contentWrapper\">\n      <slot id=\"content\" name=\"dropdown-content\"></slot>\n    </div>\n`,\n\n  is: 'iron-dropdown',\n\n  behaviors: [\n    IronControlState,\n    IronA11yKeysBehavior,\n    IronOverlayBehavior,\n    NeonAnimationRunnerBehavior\n  ],\n\n  properties: {\n    /**\n     * The orientation against which to align the dropdown content\n     * horizontally relative to the dropdown trigger.\n     * Overridden from `Polymer.IronFitBehavior`.\n     */\n    horizontalAlign: {type: String, value: 'left', reflectToAttribute: true},\n\n    /**\n     * The orientation against which to align the dropdown content\n     * vertically relative to the dropdown trigger.\n     * Overridden from `Polymer.IronFitBehavior`.\n     */\n    verticalAlign: {type: String, value: 'top', reflectToAttribute: true},\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * opening of the dropdown. Pass an Array for multiple animations.\n     * See `neon-animation` documentation for more animation configuration\n     * details.\n     */\n    openAnimationConfig: {type: Object},\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * closing of the dropdown. Pass an Array for multiple animations.\n     * See `neon-animation` documentation for more animation configuration\n     * details.\n     */\n    closeAnimationConfig: {type: Object},\n\n    /**\n     * If provided, this will be the element that will be focused when\n     * the dropdown opens.\n     */\n    focusTarget: {type: Object},\n\n    /**\n     * Set to true to disable animations when opening and closing the\n     * dropdown.\n     */\n    noAnimations: {type: Boolean, value: false},\n\n    /**\n     * By default, the dropdown will constrain scrolling on the page\n     * to itself when opened.\n     * Set to true in order to prevent scroll from being constrained\n     * to the dropdown when it opens.\n     * This property is a shortcut to set `scrollAction` to lock or refit.\n     * Prefer directly setting the `scrollAction` property.\n     */\n    allowOutsideScroll:\n        {type: Boolean, value: false, observer: '_allowOutsideScrollChanged'}\n  },\n\n  listeners: {'neon-animation-finish': '_onNeonAnimationFinish'},\n\n  observers: [\n    '_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)'\n  ],\n\n  /**\n   * The element that is contained by the dropdown, if any.\n   */\n  get containedElement() {\n    // Polymer 2.x returns slot.assignedNodes which can contain text nodes.\n    var nodes = dom(this.$.content).getDistributedNodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      if (nodes[i].nodeType === Node.ELEMENT_NODE) {\n        return nodes[i];\n      }\n    }\n  },\n\n  ready: function() {\n    // Ensure scrollAction is set.\n    if (!this.scrollAction) {\n      this.scrollAction = this.allowOutsideScroll ? 'refit' : 'lock';\n    }\n    this._readied = true;\n  },\n\n  attached: function() {\n    if (!this.sizingTarget || this.sizingTarget === this) {\n      this.sizingTarget = this.containedElement || this;\n    }\n  },\n\n  detached: function() {\n    this.cancelAnimation();\n  },\n\n  /**\n   * Called when the value of `opened` changes.\n   * Overridden from `IronOverlayBehavior`\n   */\n  _openedChanged: function() {\n    if (this.opened && this.disabled) {\n      this.cancel();\n    } else {\n      this.cancelAnimation();\n      this._updateAnimationConfig();\n      IronOverlayBehaviorImpl._openedChanged.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Overridden from `IronOverlayBehavior`.\n   */\n  _renderOpened: function() {\n    if (!this.noAnimations && this.animationConfig.open) {\n      this.$.contentWrapper.classList.add('animating');\n      this.playAnimation('open');\n    } else {\n      IronOverlayBehaviorImpl._renderOpened.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Overridden from `IronOverlayBehavior`.\n   */\n  _renderClosed: function() {\n    if (!this.noAnimations && this.animationConfig.close) {\n      this.$.contentWrapper.classList.add('animating');\n      this.playAnimation('close');\n    } else {\n      IronOverlayBehaviorImpl._renderClosed.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Called when animation finishes on the dropdown (when opening or\n   * closing). Responsible for \"completing\" the process of opening or\n   * closing the dropdown by positioning it or setting its display to\n   * none.\n   */\n  _onNeonAnimationFinish: function() {\n    this.$.contentWrapper.classList.remove('animating');\n    if (this.opened) {\n      this._finishRenderOpened();\n    } else {\n      this._finishRenderClosed();\n    }\n  },\n\n  /**\n   * Constructs the final animation config from different properties used\n   * to configure specific parts of the opening and closing animations.\n   */\n  _updateAnimationConfig: function() {\n    // Update the animation node to be the containedElement.\n    var animationNode = this.containedElement;\n    var animations = [].concat(this.openAnimationConfig || [])\n                         .concat(this.closeAnimationConfig || []);\n    for (var i = 0; i < animations.length; i++) {\n      animations[i].node = animationNode;\n    }\n    this.animationConfig = {\n      open: this.openAnimationConfig,\n      close: this.closeAnimationConfig\n    };\n  },\n\n  /**\n   * Updates the overlay position based on configured horizontal\n   * and vertical alignment.\n   */\n  _updateOverlayPosition: function() {\n    if (this.isAttached) {\n      // This triggers iron-resize, and iron-overlay-behavior will call refit if\n      // needed.\n      this.notifyResize();\n    }\n  },\n\n  /**\n   * Sets scrollAction according to the value of allowOutsideScroll.\n   * Prefer setting directly scrollAction.\n   */\n  _allowOutsideScrollChanged: function(allowOutsideScroll) {\n    // Wait until initial values are all set.\n    if (!this._readied) {\n      return;\n    }\n    if (!allowOutsideScroll) {\n      this.scrollAction = 'lock';\n    } else if (!this.scrollAction || this.scrollAction === 'lock') {\n      this.scrollAction = 'refit';\n    }\n  },\n\n  /**\n   * Apply focus to focusTarget or containedElement\n   */\n  _applyFocus: function() {\n    var focusTarget = this.focusTarget || this.containedElement;\n    if (focusTarget && this.opened && !this.noAutoFocus) {\n      focusTarget.focus();\n    } else {\n      IronOverlayBehaviorImpl._applyFocus.apply(this, arguments);\n    }\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\n/**\n * Use `NeonAnimationBehavior` to implement an animation.\n * @polymerBehavior\n */\nexport const NeonAnimationBehavior = {\n\n  properties: {\n\n    /**\n     * Defines the animation timing.\n     */\n    animationTiming: {\n      type: Object,\n      value: function() {\n        return {\n          duration: 500, easing: 'cubic-bezier(0.4, 0, 0.2, 1)', fill: 'both'\n        }\n      }\n    }\n\n  },\n\n  /**\n   * Can be used to determine that elements implement this behavior.\n   */\n  isNeonAnimation: true,\n\n  /**\n   * Do any animation configuration here.\n   */\n  // configure: function(config) {\n  // },\n\n  created: function() {\n    if (!document.body.animate) {\n      console.warn(\n          'No web animations detected. This element will not' +\n          ' function without a web animations polyfill.');\n    }\n  },\n\n  /**\n   * Returns the animation timing by mixing in properties from `config` to the\n   * defaults defined by the animation.\n   */\n  timingFromConfig: function(config) {\n    if (config.timing) {\n      for (var property in config.timing) {\n        this.animationTiming[property] = config.timing[property];\n      }\n    }\n    return this.animationTiming;\n  },\n\n  /**\n   * Sets `transform` and `transformOrigin` properties along with the prefixed\n   * versions.\n   */\n  setPrefixedProperty: function(node, property, value) {\n    var map = {\n      'transform': ['webkitTransform'],\n      'transformOrigin': ['mozTransformOrigin', 'webkitTransformOrigin']\n    };\n    var prefixes = map[property];\n    for (var prefix, index = 0; prefix = prefixes[index]; index++) {\n      node.style[prefix] = value;\n    }\n    node.style[property] = value;\n  },\n\n  /**\n   * Called when the animation finishes.\n   */\n  complete: function(config) {}\n\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {NeonAnimationBehavior} from '../neon-animation-behavior.js';\n/*\n`<fade-in-animation>` animates the opacity of an element from 0 to 1.\n\nConfiguration:\n```\n{\n  name: 'fade-in-animation',\n  node: <node>\n  timing: <animation-timing>\n}\n```\n*/\nPolymer({\n\n  is: 'fade-in-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    this._effect = new KeyframeEffect(\n        node,\n        [{'opacity': '0'}, {'opacity': '1'}],\n        this.timingFromConfig(config));\n    return this._effect;\n  }\n\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {NeonAnimationBehavior} from '../neon-animation-behavior.js';\n/*\n`<fade-out-animation>` animates the opacity of an element from 1 to 0.\n\nConfiguration:\n```\n{\n  name: 'fade-out-animation',\n  node: <node>\n  timing: <animation-timing>\n}\n```\n*/\nPolymer({\n\n  is: 'fade-out-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    this._effect = new KeyframeEffect(\n        node,\n        [\n          {'opacity': '1'},\n          {'opacity': '0'},\n        ],\n        this.timingFromConfig(config));\n    return this._effect;\n  }\n\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {NeonAnimationBehavior} from '@polymer/neon-animation/neon-animation-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nPolymer({\n  is: 'paper-menu-grow-height-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var height = rect.height;\n\n    this._effect = new KeyframeEffect(\n        node,\n        [{height: (height / 2) + 'px'}, {height: height + 'px'}],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n\nPolymer({\n  is: 'paper-menu-grow-width-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var width = rect.width;\n\n    this._effect = new KeyframeEffect(\n        node,\n        [{width: (width / 2) + 'px'}, {width: width + 'px'}],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n\nPolymer({\n  is: 'paper-menu-shrink-width-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var width = rect.width;\n\n    this._effect = new KeyframeEffect(\n        node,\n        [{width: width + 'px'}, {width: width - (width / 20) + 'px'}],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n\nPolymer({\n  is: 'paper-menu-shrink-height-animation',\n\n  behaviors: [NeonAnimationBehavior],\n\n  configure: function(config) {\n    var node = config.node;\n    var rect = node.getBoundingClientRect();\n    var height = rect.height;\n\n    this.setPrefixedProperty(node, 'transformOrigin', '0 0');\n\n    this._effect = new KeyframeEffect(\n        node,\n        [\n          {height: height + 'px', transform: 'translateY(0)'},\n          {height: height / 2 + 'px', transform: 'translateY(-20px)'}\n        ],\n        this.timingFromConfig(config));\n\n    return this._effect;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-dropdown/iron-dropdown.js';\nimport '@polymer/neon-animation/animations/fade-in-animation.js';\nimport '@polymer/neon-animation/animations/fade-out-animation.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/shadow.js';\nimport './paper-menu-button-animations.js';\n\nimport {IronA11yKeysBehavior} from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nvar config = {\n  ANIMATION_CUBIC_BEZIER: 'cubic-bezier(.3,.95,.5,1)',\n  MAX_ANIMATION_TIME_MS: 400\n};\n\n/**\nMaterial design: [Dropdown\nbuttons](https://www.google.com/design/spec/components/buttons.html#buttons-dropdown-buttons)\n\n`paper-menu-button` allows one to compose a designated \"trigger\" element with\nanother element that represents \"content\", to create a dropdown menu that\ndisplays the \"content\" when the \"trigger\" is clicked.\n\nThe child element assigned to the `dropdown-trigger` slot will be used as the\n\"trigger\" element. The child element assigned to the `dropdown-content` slot\nwill be used as the \"content\" element.\n\nThe `paper-menu-button` is sensitive to its content's `iron-select` events. If\nthe \"content\" element triggers an `iron-select` event, the `paper-menu-button`\nwill close automatically.\n\nExample:\n\n    <paper-menu-button>\n      <paper-icon-button icon=\"menu\"\nslot=\"dropdown-trigger\"></paper-icon-button> <paper-listbox\nslot=\"dropdown-content\"> <paper-item>Share</paper-item>\n        <paper-item>Settings</paper-item>\n        <paper-item>Help</paper-item>\n      </paper-listbox>\n    </paper-menu-button>\n\n### Styling\n\nThe following custom properties and mixins are also available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-menu-button-dropdown-background` | Background color of the paper-menu-button dropdown | `--primary-background-color`\n`--paper-menu-button` | Mixin applied to the paper-menu-button | `{}`\n`--paper-menu-button-disabled` | Mixin applied to the paper-menu-button when disabled | `{}`\n`--paper-menu-button-dropdown` | Mixin applied to the paper-menu-button dropdown | `{}`\n`--paper-menu-button-content` | Mixin applied to the paper-menu-button content | `{}`\n\n@hero hero.svg\n@demo demo/index.html\n*/\nexport const PaperMenuButton = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        padding: 8px;\n        outline: none;\n\n        @apply --paper-menu-button;\n      }\n\n      :host([disabled]) {\n        cursor: auto;\n        color: var(--disabled-text-color);\n\n        @apply --paper-menu-button-disabled;\n      }\n\n      iron-dropdown {\n        @apply --paper-menu-button-dropdown;\n      }\n\n      .dropdown-content {\n        @apply --shadow-elevation-2dp;\n\n        position: relative;\n        border-radius: 2px;\n        background-color: var(--paper-menu-button-dropdown-background, var(--primary-background-color));\n\n        @apply --paper-menu-button-content;\n      }\n\n      :host([vertical-align=\"top\"]) .dropdown-content {\n        margin-bottom: 20px;\n        margin-top: -10px;\n        top: 10px;\n      }\n\n      :host([vertical-align=\"bottom\"]) .dropdown-content {\n        bottom: 10px;\n        margin-bottom: -10px;\n        margin-top: 20px;\n      }\n\n      #trigger {\n        cursor: pointer;\n      }\n    </style>\n\n    <div id=\"trigger\" on-tap=\"toggle\">\n      <slot name=\"dropdown-trigger\"></slot>\n    </div>\n\n    <iron-dropdown id=\"dropdown\" opened=\"{{opened}}\" horizontal-align=\"[[horizontalAlign]]\" vertical-align=\"[[verticalAlign]]\" dynamic-align=\"[[dynamicAlign]]\" horizontal-offset=\"[[horizontalOffset]]\" vertical-offset=\"[[verticalOffset]]\" no-overlap=\"[[noOverlap]]\" open-animation-config=\"[[openAnimationConfig]]\" close-animation-config=\"[[closeAnimationConfig]]\" no-animations=\"[[noAnimations]]\" focus-target=\"[[_dropdownContent]]\" allow-outside-scroll=\"[[allowOutsideScroll]]\" restore-focus-on-close=\"[[restoreFocusOnClose]]\" on-iron-overlay-canceled=\"__onIronOverlayCanceled\">\n      <div slot=\"dropdown-content\" class=\"dropdown-content\">\n        <slot id=\"content\" name=\"dropdown-content\"></slot>\n      </div>\n    </iron-dropdown>\n`,\n\n  is: 'paper-menu-button',\n\n  /**\n   * Fired when the dropdown opens.\n   *\n   * @event paper-dropdown-open\n   */\n\n  /**\n   * Fired when the dropdown closes.\n   *\n   * @event paper-dropdown-close\n   */\n\n  behaviors: [IronA11yKeysBehavior, IronControlState],\n\n  properties: {\n    /**\n     * True if the content is currently displayed.\n     */\n    opened:\n        {type: Boolean, value: false, notify: true, observer: '_openedChanged'},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * horizontally relative to the dropdown trigger.\n     */\n    horizontalAlign: {type: String, value: 'left', reflectToAttribute: true},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * vertically relative to the dropdown trigger.\n     */\n    verticalAlign: {type: String, value: 'top', reflectToAttribute: true},\n\n    /**\n     * If true, the `horizontalAlign` and `verticalAlign` properties will\n     * be considered preferences instead of strict requirements when\n     * positioning the dropdown and may be changed if doing so reduces\n     * the area of the dropdown falling outside of `fitInto`.\n     */\n    dynamicAlign: {type: Boolean},\n\n    /**\n     * A pixel value that will be added to the position calculated for the\n     * given `horizontalAlign`. Use a negative value to offset to the\n     * left, or a positive value to offset to the right.\n     */\n    horizontalOffset: {type: Number, value: 0, notify: true},\n\n    /**\n     * A pixel value that will be added to the position calculated for the\n     * given `verticalAlign`. Use a negative value to offset towards the\n     * top, or a positive value to offset towards the bottom.\n     */\n    verticalOffset: {type: Number, value: 0, notify: true},\n\n    /**\n     * If true, the dropdown will be positioned so that it doesn't overlap\n     * the button.\n     */\n    noOverlap: {type: Boolean},\n\n    /**\n     * Set to true to disable animations when opening and closing the\n     * dropdown.\n     */\n    noAnimations: {type: Boolean, value: false},\n\n    /**\n     * Set to true to disable automatically closing the dropdown after\n     * a selection has been made.\n     */\n    ignoreSelect: {type: Boolean, value: false},\n\n    /**\n     * Set to true to enable automatically closing the dropdown after an\n     * item has been activated, even if the selection did not change.\n     */\n    closeOnActivate: {type: Boolean, value: false},\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * opening of the dropdown.\n     */\n    openAnimationConfig: {\n      type: Object,\n      value: function() {\n        return [\n          {name: 'fade-in-animation', timing: {delay: 100, duration: 200}},\n          {\n            name: 'paper-menu-grow-width-animation',\n            timing: {\n              delay: 100,\n              duration: 150,\n              easing: config.ANIMATION_CUBIC_BEZIER\n            }\n          },\n          {\n            name: 'paper-menu-grow-height-animation',\n            timing: {\n              delay: 100,\n              duration: 275,\n              easing: config.ANIMATION_CUBIC_BEZIER\n            }\n          }\n        ];\n      }\n    },\n\n    /**\n     * An animation config. If provided, this will be used to animate the\n     * closing of the dropdown.\n     */\n    closeAnimationConfig: {\n      type: Object,\n      value: function() {\n        return [\n          {name: 'fade-out-animation', timing: {duration: 150}},\n          {\n            name: 'paper-menu-shrink-width-animation',\n            timing: {\n              delay: 100,\n              duration: 50,\n              easing: config.ANIMATION_CUBIC_BEZIER\n            }\n          },\n          {\n            name: 'paper-menu-shrink-height-animation',\n            timing: {duration: 200, easing: 'ease-in'}\n          }\n        ];\n      }\n    },\n\n    /**\n     * By default, the dropdown will constrain scrolling on the page\n     * to itself when opened.\n     * Set to true in order to prevent scroll from being constrained\n     * to the dropdown when it opens.\n     */\n    allowOutsideScroll: {type: Boolean, value: false},\n\n    /**\n     * Whether focus should be restored to the button when the menu closes.\n     */\n    restoreFocusOnClose: {type: Boolean, value: true},\n\n    /**\n     * This is the element intended to be bound as the focus target\n     * for the `iron-dropdown` contained by `paper-menu-button`.\n     */\n    _dropdownContent: {type: Object}\n  },\n\n  hostAttributes: {role: 'group', 'aria-haspopup': 'true'},\n\n  listeners:\n      {'iron-activate': '_onIronActivate', 'iron-select': '_onIronSelect'},\n\n  /**\n   * The content element that is contained by the menu button, if any.\n   */\n  get contentElement() {\n    // Polymer 2.x returns slot.assignedNodes which can contain text nodes.\n    var nodes = dom(this.$.content).getDistributedNodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      if (nodes[i].nodeType === Node.ELEMENT_NODE) {\n        return nodes[i];\n      }\n    }\n  },\n\n  /**\n   * Toggles the dropdown content between opened and closed.\n   */\n  toggle: function() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  },\n\n  /**\n   * Make the dropdown content appear as an overlay positioned relative\n   * to the dropdown trigger.\n   */\n  open: function() {\n    if (this.disabled) {\n      return;\n    }\n\n    this.$.dropdown.open();\n  },\n\n  /**\n   * Hide the dropdown content.\n   */\n  close: function() {\n    this.$.dropdown.close();\n  },\n\n  /**\n   * When an `iron-select` event is received, the dropdown should\n   * automatically close on the assumption that a value has been chosen.\n   *\n   * @param {CustomEvent} event A CustomEvent instance with type\n   * set to `\"iron-select\"`.\n   */\n  _onIronSelect: function(event) {\n    if (!this.ignoreSelect) {\n      this.close();\n    }\n  },\n\n  /**\n   * Closes the dropdown when an `iron-activate` event is received if\n   * `closeOnActivate` is true.\n   *\n   * @param {CustomEvent} event A CustomEvent of type 'iron-activate'.\n   */\n  _onIronActivate: function(event) {\n    if (this.closeOnActivate) {\n      this.close();\n    }\n  },\n\n  /**\n   * When the dropdown opens, the `paper-menu-button` fires `paper-open`.\n   * When the dropdown closes, the `paper-menu-button` fires `paper-close`.\n   *\n   * @param {boolean} opened True if the dropdown is opened, otherwise false.\n   * @param {boolean} oldOpened The previous value of `opened`.\n   */\n  _openedChanged: function(opened, oldOpened) {\n    if (opened) {\n      // TODO(cdata): Update this when we can measure changes in distributed\n      // children in an idiomatic way.\n      // We poke this property in case the element has changed. This will\n      // cause the focus target for the `iron-dropdown` to be updated as\n      // necessary:\n      this._dropdownContent = this.contentElement;\n      this.fire('paper-dropdown-open');\n    } else if (oldOpened != null) {\n      this.fire('paper-dropdown-close');\n    }\n  },\n\n  /**\n   * If the dropdown is open when disabled becomes true, close the\n   * dropdown.\n   *\n   * @param {boolean} disabled True if disabled, otherwise false.\n   */\n  _disabledChanged: function(disabled) {\n    IronControlState._disabledChanged.apply(this, arguments);\n    if (disabled && this.opened) {\n      this.close();\n    }\n  },\n\n  __onIronOverlayCanceled: function(event) {\n    var uiEvent = event.detail;\n    var trigger = this.$.trigger;\n    var path = dom(uiEvent).path;\n\n    if (path.indexOf(trigger) > -1) {\n      event.preventDefault();\n    }\n  }\n});\n\nObject.keys(config).forEach(function(key) {\n  PaperMenuButton[key] = config[key];\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/iron-iconset-svg/iron-iconset-svg.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML =\n    `<iron-iconset-svg name=\"paper-dropdown-menu\" size=\"24\">\n<svg><defs>\n<g id=\"arrow-drop-down\"><path d=\"M7 10l5 5 5-5z\"></path></g>\n</defs></svg>\n</iron-iconset-svg>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/paper-styles/default-theme.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML =\n    `<dom-module id=\"paper-dropdown-menu-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        text-align: left;\n\n        /* NOTE(cdata): Both values are needed, since some phones require the\n         * value to be \\`transparent\\`.\n         */\n        -webkit-tap-highlight-color: rgba(0,0,0,0);\n        -webkit-tap-highlight-color: transparent;\n\n        --paper-input-container-input: {\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          max-width: 100%;\n          box-sizing: border-box;\n          cursor: pointer;\n        };\n\n        @apply --paper-dropdown-menu;\n      }\n\n      :host([disabled]) {\n        @apply --paper-dropdown-menu-disabled;\n      }\n\n      :host([noink]) paper-ripple {\n        display: none;\n      }\n\n      :host([no-label-float]) paper-ripple {\n        top: 8px;\n      }\n\n      paper-ripple {\n        top: 12px;\n        left: 0px;\n        bottom: 8px;\n        right: 0px;\n\n        @apply --paper-dropdown-menu-ripple;\n      }\n\n      paper-menu-button {\n        display: block;\n        padding: 0;\n\n        @apply --paper-dropdown-menu-button;\n      }\n\n      paper-input {\n        @apply --paper-dropdown-menu-input;\n      }\n\n      iron-icon {\n        color: var(--disabled-text-color);\n\n        @apply --paper-dropdown-menu-icon;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateName = (stateObj: HassEntity): string => {\n  return stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n};\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:playlist-play\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  counter: \"hass:counter\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  persistent_notification: \"hass:bell\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:google-pages\",\n  script: \"hass:file-document\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n  zone: \"hass:map-marker\",\n};\n\nexport const domainIcon = (domain: string, state?: string): string => {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n};\n","import { Constructor } from \"../types\";\n\nimport \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { IronIconElement } from \"@polymer/iron-icon/iron-icon\";\n\nconst ironIconClass = customElements.get(\"iron-icon\") as Constructor<\n  IronIconElement\n>;\n\nlet loaded = false;\n\nexport class HaIcon extends ironIconClass {\n  private _iconsetName?: string;\n\n  public listen(\n    node: EventTarget | null,\n    eventName: string,\n    methodName: string\n  ): void {\n    super.listen(node, eventName, methodName);\n\n    if (!loaded && this._iconsetName === \"mdi\") {\n      loaded = true;\n      import(/* webpackChunkName: \"mdi-icons\" */ \"../resources/mdi-icons\");\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n\ncustomElements.define(\"ha-icon\", HaIcon);\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport const computeStateDomain = (stateObj: HassEntity) => {\n  return computeDomain(stateObj.entity_id);\n};\n","import {\n  LitElement,\n  TemplateResult,\n  css,\n  CSSResult,\n  html,\n  property,\n  PropertyValues,\n  query,\n} from \"lit-element\";\nimport \"../ha-icon\";\nimport { computeStateDomain } from \"../../common/entity/compute_state_domain\";\nimport { stateIcon } from \"../../common/entity/state_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"../ha-icon\";\nimport { HomeAssistant } from \"../../types\";\n\nclass StateBadge extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public stateObj?: HassEntity;\n  @property() public overrideIcon?: string;\n  @property() public overrideImage?: string;\n  @query(\"ha-icon\") private _icon!: HaIcon;\n\n  protected render(): TemplateResult | void {\n    const stateObj = this.stateObj;\n\n    if (!stateObj) {\n      return html``;\n    }\n\n    return html`\n      <ha-icon\n        id=\"icon\"\n        data-domain=${computeStateDomain(stateObj)}\n        data-state=${stateObj.state}\n        .icon=${this.overrideIcon || stateIcon(stateObj)}\n      ></ha-icon>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (!changedProps.has(\"stateObj\") || !this.stateObj) {\n      return;\n    }\n    const stateObj = this.stateObj;\n\n    const iconStyle: Partial<CSSStyleDeclaration> = {\n      color: \"\",\n      filter: \"\",\n    };\n    const hostStyle: Partial<CSSStyleDeclaration> = {\n      backgroundImage: \"\",\n    };\n    if (stateObj) {\n      // hide icon if we have entity picture\n      if (\n        (stateObj.attributes.entity_picture && !this.overrideIcon) ||\n        this.overrideImage\n      ) {\n        let imageUrl = this.overrideImage || stateObj.attributes.entity_picture;\n        if (this.hass) {\n          imageUrl = this.hass.hassUrl(imageUrl);\n        }\n        hostStyle.backgroundImage = `url(${imageUrl})`;\n        iconStyle.display = \"none\";\n      } else {\n        if (stateObj.attributes.hs_color) {\n          const hue = stateObj.attributes.hs_color[0];\n          const sat = stateObj.attributes.hs_color[1];\n          if (sat > 10) {\n            iconStyle.color = `hsl(${hue}, 100%, ${100 - sat / 2}%)`;\n          }\n        }\n        if (stateObj.attributes.brightness) {\n          const brightness = stateObj.attributes.brightness;\n          if (typeof brightness !== \"number\") {\n            const errorMessage = `Type error: state-badge expected number, but type of ${\n              stateObj.entity_id\n            }.attributes.brightness is ${typeof brightness} (${brightness})`;\n            // tslint:disable-next-line\n            console.warn(errorMessage);\n          }\n          // lowest brighntess will be around 50% (that's pretty dark)\n          iconStyle.filter = `brightness(${(brightness + 245) / 5}%)`;\n        }\n      }\n    }\n    Object.assign(this._icon.style, iconStyle);\n    Object.assign(this.style, hostStyle);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n        display: inline-block;\n        width: 40px;\n        color: var(--paper-item-icon-color, #44739e);\n        border-radius: 50%;\n        height: 40px;\n        text-align: center;\n        background-size: cover;\n        line-height: 40px;\n        vertical-align: middle;\n      }\n\n      ha-icon {\n        transition: color 0.3s ease-in-out, filter 0.3s ease-in-out;\n      }\n\n      /* Color the icon if light or sun is on */\n      ha-icon[data-domain=\"light\"][data-state=\"on\"],\n      ha-icon[data-domain=\"switch\"][data-state=\"on\"],\n      ha-icon[data-domain=\"binary_sensor\"][data-state=\"on\"],\n      ha-icon[data-domain=\"fan\"][data-state=\"on\"],\n      ha-icon[data-domain=\"sun\"][data-state=\"above_horizon\"] {\n        color: var(--paper-item-icon-active-color, #fdd835);\n      }\n\n      /* Color the icon if unavailable */\n      ha-icon[data-state=\"unavailable\"] {\n        color: var(--state-icon-unavailable-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"state-badge\": StateBadge;\n  }\n}\n\ncustomElements.define(\"state-badge\", StateBadge);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string => {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n};\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { domainIcon } from \"./domain_icon\";\n\nexport const coverIcon = (state: HassEntity): string => {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    case \"door\":\n      return open ? \"hass:door-open\" : \"hass:door-closed\";\n    case \"shutter\":\n      return open ? \"hass:window-shutter-open\" : \"hass:window-shutter\";\n    case \"blind\":\n      return open ? \"hass:blinds-open\" : \"hass:blinds\";\n    case \"window\":\n      return open ? \"hass:window-open\" : \"hass:window-closed\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n};\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport { domainIcon } from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport const sensorIcon = (state: HassEntity) => {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n};\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\nimport { binarySensorIcon } from \"./binary_sensor_icon\";\n\nimport { computeDomain } from \"./compute_domain\";\nimport { domainIcon } from \"./domain_icon\";\nimport { coverIcon } from \"./cover_icon\";\nimport { sensorIcon } from \"./sensor_icon\";\nimport { inputDateTimeIcon } from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport const stateIcon = (state: HassEntity) => {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport const binarySensorIcon = (state: HassEntity) => {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n};\n","/** Return an icon representing an input datetime state. */\nimport { domainIcon } from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const inputDateTimeIcon = (state: HassEntity): string => {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n};\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {PropertyValues} from 'lit-element/lib/updating-element';\n\nexport interface Observer {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (value: any, old: any): void;\n}\n\nexport const observer = (observer: Observer) =>\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (proto: any, propName: PropertyKey) => {\n      // if we haven't wrapped `updated` in this class, do so\n      if (!proto.constructor._observers) {\n        proto.constructor._observers = new Map<PropertyKey, Observer>();\n        const userUpdated = proto.updated;\n        proto.updated = function(changedProperties: PropertyValues) {\n          userUpdated.call(this, changedProperties);\n          changedProperties.forEach((v, k) => {\n            const observer = this.constructor._observers.get(k);\n            if (observer !== undefined) {\n              observer.call(this, this[k], v);\n            }\n          });\n        };\n        // clone any existing observers (superclasses)\n      } else if (!proto.constructor.hasOwnProperty('_observers')) {\n        const observers = proto.constructor._observers;\n        proto.constructor._observers = new Map();\n        observers.forEach(\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (v: any, k: PropertyKey) => proto.constructor._observers.set(k, v));\n      }\n      // set this method\n      proto.constructor._observers.set(propName, observer);\n    };\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n/**\n * Return an element assigned to a given slot that matches the given selector\n */\n\nimport {matches} from '@material/dom/ponyfill';\n\nexport function findAssignedElement(slot: HTMLSlotElement, selector: string) {\n  for (const node of slot.assignedNodes({flatten: true})) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const el = (node as HTMLElement);\n      if (matches(el, selector)) {\n        return el;\n      }\n    }\n  }\n\n  return null;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Constructor<T> = new (...args: any[]) => T;\n\nexport function addHasRemoveClass(element: HTMLElement) {\n  return {\n    addClass: (className: string) => {\n      element.classList.add(className);\n    },\n    removeClass: (className: string) => {\n      element.classList.remove(className);\n    },\n    hasClass: (className: string) => element.classList.contains(className),\n  };\n}\n\nlet supportsPassive = false;\nconst fn = () => {};\nconst optionsBlock: AddEventListenerOptions = {\n  get passive() {\n    supportsPassive = true;\n    return false;\n  }\n};\ndocument.addEventListener('x', fn, optionsBlock);\ndocument.removeEventListener('x', fn);\n/**\n * Do event listeners suport the `passive` option?\n */\nexport const supportsPassiveEventListener = supportsPassive;\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport {MDCFoundation} from '@material/base';\nimport {LitElement} from 'lit-element';\n\nimport {Constructor} from './utils.js';\nexport {observer} from './observer.js';\nexport {addHasRemoveClass} from './utils.js';\nexport * from '@material/base/types.js';\n\nexport abstract class BaseElement extends LitElement {\n  /**\n   * Root element for MDC Foundation usage.\n   *\n   * Define in your component with the `@query` decorator\n   */\n  protected abstract mdcRoot: HTMLElement;\n\n  /**\n   * Return the foundation class for this component\n   */\n  protected abstract readonly mdcFoundationClass: Constructor<MDCFoundation>;\n\n  /**\n   * An instance of the MDC Foundation class to attach to the root element\n   */\n  protected abstract mdcFoundation: MDCFoundation;\n\n  /**\n   * Create the adapter for the `mdcFoundation`.\n   *\n   * Override and return an object with the Adapter's functions implemented:\n   *\n   *    {\n   *      addClass: () => {},\n   *      removeClass: () => {},\n   *      ...\n   *    }\n   */\n  protected abstract createAdapter(): {}\n\n  /**\n   * Create and attach the MDC Foundation to the instance\n   */\n  protected createFoundation() {\n    if (this.mdcFoundation !== undefined) {\n      this.mdcFoundation.destroy();\n    }\n    this.mdcFoundation = new this.mdcFoundationClass(this.createAdapter());\n    this.mdcFoundation.init();\n  }\n\n  protected firstUpdated() {\n    this.createFoundation();\n  }\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@vaadin/vaadin-combo-box/theme/material/vaadin-combo-box-light\";\nimport memoizeOne from \"memoize-one\";\n\nimport \"./state-badge\";\n\nimport { computeStateName } from \"../../common/entity/compute_state_name\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeDomain } from \"../../common/entity/compute_domain\";\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n\nconst rowRenderer = (\n  root: HTMLElement,\n  _owner,\n  model: { item: HassEntity }\n) => {\n  if (!root.firstElementChild) {\n    root.innerHTML = `\n      <style>\n        paper-icon-item {\n          margin: -10px;\n          padding: 0;\n        }\n      </style>\n      <paper-icon-item>\n        <state-badge state-obj=\"[[item]]\" slot=\"item-icon\"></state-badge>\n        <paper-item-body two-line=\"\">\n          <div class='name'>[[_computeStateName(item)]]</div>\n          <div secondary>[[item.entity_id]]</div>\n        </paper-item-body>\n      </paper-icon-item>\n    `;\n  }\n\n  root.querySelector(\"state-badge\")!.stateObj = model.item;\n  root.querySelector(\".name\")!.textContent = computeStateName(model.item);\n  root.querySelector(\"[secondary]\")!.textContent = model.item.entity_id;\n};\n\nclass HaEntityPicker extends LitElement {\n  @property({ type: Boolean }) public autofocus?: boolean;\n  @property({ type: Boolean }) public disabled?: boolean;\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n  @property() public hass?: HomeAssistant;\n  @property() public label?: string;\n  @property() public value?: string;\n  /**\n   * Show entities from specific domains.\n   * @type {Array}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n  /**\n   * Show only entities of these device classes.\n   * @type {Array}\n   * @attr include-device-classes\n   */\n  @property({ type: Array, attribute: \"include-device-classes\" })\n  public includeDeviceClasses?: string[];\n  @property() public entityFilter?: HaEntityPickerEntityFilterFunc;\n  @property({ type: Boolean }) private _opened?: boolean;\n  @property() private _hass?: HomeAssistant;\n\n  private _getStates = memoizeOne(\n    (\n      hass: this[\"hass\"],\n      includeDomains: this[\"includeDomains\"],\n      excludeDomains: this[\"excludeDomains\"],\n      entityFilter: this[\"entityFilter\"],\n      includeDeviceClasses: this[\"includeDeviceClasses\"]\n    ) => {\n      let states: HassEntity[] = [];\n\n      if (!hass) {\n        return [];\n      }\n      let entityIds = Object.keys(hass.states);\n\n      if (includeDomains) {\n        entityIds = entityIds.filter((eid) =>\n          includeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      if (excludeDomains) {\n        entityIds = entityIds.filter(\n          (eid) => !excludeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      states = entityIds.sort().map((key) => hass!.states[key]);\n\n      if (includeDeviceClasses) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value ||\n            (stateObj.attributes.device_class &&\n              includeDeviceClasses.includes(stateObj.attributes.device_class))\n        );\n      }\n\n      if (entityFilter) {\n        states = states.filter(\n          (stateObj) =>\n            // We always want to include the entity of the current value\n            stateObj.entity_id === this.value || entityFilter!(stateObj)\n        );\n      }\n\n      return states;\n    }\n  );\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n\n    if (changedProps.has(\"hass\") && !this._opened) {\n      this._hass = this.hass;\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    const states = this._getStates(\n      this._hass,\n      this.includeDomains,\n      this.excludeDomains,\n      this.entityFilter,\n      this.includeDeviceClasses\n    );\n\n    return html`\n      <vaadin-combo-box-light\n        item-value-path=\"entity_id\"\n        item-label-path=\"entity_id\"\n        .items=${states}\n        .value=${this._value}\n        .allowCustomValue=${this.allowCustomEntity}\n        .renderer=${rowRenderer}\n        @opened-changed=${this._openedChanged}\n        @value-changed=${this._valueChanged}\n      >\n        <paper-input\n          .autofocus=${this.autofocus}\n          .label=${this.label === undefined && this._hass\n            ? this._hass.localize(\"ui.components.entity.entity-picker.entity\")\n            : this.label}\n          .value=${this._value}\n          .disabled=${this.disabled}\n          class=\"input\"\n          autocapitalize=\"none\"\n          autocomplete=\"off\"\n          autocorrect=\"off\"\n          spellcheck=\"false\"\n        >\n          ${this.value\n            ? html`\n                <paper-icon-button\n                  aria-label=${this.hass!.localize(\n                    \"ui.components.entity.entity-picker.clear\"\n                  )}\n                  slot=\"suffix\"\n                  class=\"clear-button\"\n                  icon=\"hass:close\"\n                  @click=${this._clearValue}\n                  no-ripple\n                >\n                  Clear\n                </paper-icon-button>\n              `\n            : \"\"}\n          ${states.length > 0\n            ? html`\n                <paper-icon-button\n                  aria-label=${this.hass!.localize(\n                    \"ui.components.entity.entity-picker.show_entities\"\n                  )}\n                  slot=\"suffix\"\n                  class=\"toggle-button\"\n                  .icon=${this._opened ? \"hass:menu-up\" : \"hass:menu-down\"}\n                >\n                  Toggle\n                </paper-icon-button>\n              `\n            : \"\"}\n        </paper-input>\n      </vaadin-combo-box-light>\n    `;\n  }\n\n  private _clearValue(ev: Event) {\n    ev.stopPropagation();\n    this._setValue(\"\");\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>) {\n    this._opened = ev.detail.value;\n  }\n\n  private _valueChanged(ev: PolymerChangedEvent<string>) {\n    const newValue = ev.detail.value;\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-entity-picker\", HaEntityPicker);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-picker\": HaEntityPicker;\n  }\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport './paper-dropdown-menu-icons.js';\nimport './paper-dropdown-menu-shared-styles.js';\n\nimport {IronButtonState} from '@polymer/iron-behaviors/iron-button-state.js';\nimport {IronControlState} from '@polymer/iron-behaviors/iron-control-state.js';\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {IronValidatableBehavior} from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport {PaperRippleBehavior} from '@polymer/paper-behaviors/paper-ripple-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport * as gestures from '@polymer/polymer/lib/utils/gestures.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design: [Dropdown\nmenus](https://www.google.com/design/spec/components/buttons.html#buttons-dropdown-buttons)\n\nThis is a faster, lighter version of `paper-dropdown-menu`, that does not\nuse a `<paper-input>` internally. Use this element if you're concerned about\nthe performance of this element, i.e., if you plan on using many dropdowns on\nthe same page. Note that this element has a slightly different styling API\nthan `paper-dropdown-menu`.\n\n`paper-dropdown-menu-light` is similar to a native browser select element.\n`paper-dropdown-menu-light` works with selectable content. The currently\nselected item is displayed in the control. If no item is selected, the `label`\nis displayed instead.\n\nExample:\n\n    <paper-dropdown-menu-light label=\"Your favourite pastry\">\n      <paper-listbox slot=\"dropdown-content\">\n        <paper-item>Croissant</paper-item>\n        <paper-item>Donut</paper-item>\n        <paper-item>Financier</paper-item>\n        <paper-item>Madeleine</paper-item>\n      </paper-listbox>\n    </paper-dropdown-menu-light>\n\nThis example renders a dropdown menu with 4 options.\n\nThe child element with the slot `dropdown-content` is used as the dropdown\nmenu. This can be a [`paper-listbox`](paper-listbox), or any other or\nelement that acts like an [`iron-selector`](iron-selector).\n\nSpecifically, the menu child must fire an\n[`iron-select`](iron-selector#event-iron-select) event when one of its\nchildren is selected, and an\n[`iron-deselect`](iron-selector#event-iron-deselect) event when a child is\ndeselected. The selected or deselected item must be passed as the event's\n`detail.item` property.\n\nApplications can listen for the `iron-select` and `iron-deselect` events\nto react when options are selected and deselected.\n\n### Styling\n\nThe following custom properties and mixins are also available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-dropdown-menu` | A mixin that is applied to the element host | `{}`\n`--paper-dropdown-menu-disabled` | A mixin that is applied to the element host when disabled | `{}`\n`--paper-dropdown-menu-ripple` | A mixin that is applied to the internal ripple | `{}`\n`--paper-dropdown-menu-button` | A mixin that is applied to the internal menu button | `{}`\n`--paper-dropdown-menu-icon` | A mixin that is applied to the internal icon | `{}`\n`--paper-dropdown-menu-disabled-opacity` | The opacity of the dropdown when disabled  | `0.33`\n`--paper-dropdown-menu-color` | The color of the input/label/underline when the dropdown is unfocused | `--primary-text-color`\n`--paper-dropdown-menu-focus-color` | The color of the label/underline when the dropdown is focused  | `--primary-color`\n`--paper-dropdown-error-color` | The color of the label/underline when the dropdown is invalid  | `--error-color`\n`--paper-dropdown-menu-label` | Mixin applied to the label | `{}`\n`--paper-dropdown-menu-input` | Mixin appled to the input | `{}`\n\nNote that in this element, the underline is just the bottom border of the\n\"input\". To style it:\n\n    <style is=custom-style>\n      paper-dropdown-menu-light.custom {\n        --paper-dropdown-menu-input: {\n          border-bottom: 2px dashed lavender;\n        };\n    </style>\n\n@group Paper Elements\n@element paper-dropdown-menu-light\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-dropdown-menu-shared-styles\">\n      :host(:focus) {\n        outline: none;\n      }\n\n      :host {\n        width: 200px;  /* Default size of an <input> */\n      }\n\n      /**\n       * All of these styles below are for styling the fake-input display\n       */\n      [slot=\"dropdown-trigger\"] {\n        box-sizing: border-box;\n        position: relative;\n        width: 100%;\n        padding: 16px 0 8px 0;\n      }\n\n      :host([disabled]) [slot=\"dropdown-trigger\"] {\n        pointer-events: none;\n        opacity: var(--paper-dropdown-menu-disabled-opacity, 0.33);\n      }\n\n      :host([no-label-float]) [slot=\"dropdown-trigger\"] {\n        padding-top: 8px;   /* If there's no label, we need less space up top. */\n      }\n\n      #input {\n        @apply --paper-font-subhead;\n        @apply --paper-font-common-nowrap;\n        line-height: 1.5;\n        border-bottom: 1px solid var(--paper-dropdown-menu-color, var(--secondary-text-color));\n        color: var(--paper-dropdown-menu-color, var(--primary-text-color));\n        width: 100%;\n        box-sizing: border-box;\n        padding: 12px 20px 0 0;   /* Right padding so that text doesn't overlap the icon */\n        outline: none;\n        @apply --paper-dropdown-menu-input;\n      }\n\n      #input:dir(rtl) {\n        padding-right: 0px;\n        padding-left: 20px;\n      }\n\n      :host([disabled]) #input {\n        border-bottom: 1px dashed var(--paper-dropdown-menu-color, var(--secondary-text-color));\n      }\n\n      :host([invalid]) #input {\n        border-bottom: 2px solid var(--paper-dropdown-error-color, var(--error-color));\n      }\n\n      :host([no-label-float]) #input {\n        padding-top: 0;   /* If there's no label, we need less space up top. */\n      }\n\n      label {\n        @apply --paper-font-subhead;\n        @apply --paper-font-common-nowrap;\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        /**\n         * The container has a 16px top padding, and there's 12px of padding\n         * between the input and the label (from the input's padding-top)\n         */\n        top: 28px;\n        box-sizing: border-box;\n        width: 100%;\n        padding-right: 20px;    /* Right padding so that text doesn't overlap the icon */\n        text-align: left;\n        transition-duration: .2s;\n        transition-timing-function: cubic-bezier(.4,0,.2,1);\n        color: var(--paper-dropdown-menu-color, var(--secondary-text-color));\n        @apply --paper-dropdown-menu-label;\n      }\n\n      label:dir(rtl) {\n        padding-right: 0px;\n        padding-left: 20px;\n      }\n\n      :host([no-label-float]) label {\n        top: 8px;\n        /* Since the label doesn't need to float, remove the animation duration\n        which slows down visibility changes (i.e. when a selection is made) */\n        transition-duration: 0s;\n      }\n\n      label.label-is-floating {\n        font-size: 12px;\n        top: 8px;\n      }\n\n      label.label-is-hidden {\n        visibility: hidden;\n      }\n\n      :host([focused]) label.label-is-floating {\n        color: var(--paper-dropdown-menu-focus-color, var(--primary-color));\n      }\n\n      :host([invalid]) label.label-is-floating {\n        color: var(--paper-dropdown-error-color, var(--error-color));\n      }\n\n      /**\n       * Sets up the focused underline. It's initially hidden, and becomes\n       * visible when it's focused.\n       */\n      label:after {\n        background-color: var(--paper-dropdown-menu-focus-color, var(--primary-color));\n        bottom: 7px;    /* The container has an 8px bottom padding */\n        content: '';\n        height: 2px;\n        left: 45%;\n        position: absolute;\n        transition-duration: .2s;\n        transition-timing-function: cubic-bezier(.4,0,.2,1);\n        visibility: hidden;\n        width: 8px;\n        z-index: 10;\n      }\n\n      :host([invalid]) label:after {\n        background-color: var(--paper-dropdown-error-color, var(--error-color));\n      }\n\n      :host([no-label-float]) label:after {\n        bottom: 7px;    /* The container has a 8px bottom padding */\n      }\n\n      :host([focused]:not([disabled])) label:after {\n        left: 0;\n        visibility: visible;\n        width: 100%;\n      }\n\n      iron-icon {\n        position: absolute;\n        right: 0px;\n        bottom: 8px;    /* The container has an 8px bottom padding */\n        @apply --paper-font-subhead;\n        color: var(--disabled-text-color);\n        @apply --paper-dropdown-menu-icon;\n      }\n\n      iron-icon:dir(rtl) {\n        left: 0;\n        right: auto;\n      }\n\n      :host([no-label-float]) iron-icon {\n        margin-top: 0px;\n      }\n\n      .error {\n        display: inline-block;\n        visibility: hidden;\n        color: var(--paper-dropdown-error-color, var(--error-color));\n        @apply --paper-font-caption;\n        position: absolute;\n        left:0;\n        right:0;\n        bottom: -12px;\n      }\n\n      :host([invalid]) .error {\n        visibility: visible;\n      }\n    </style>\n\n    <!-- this div fulfills an a11y requirement for combobox, do not remove -->\n    <span role=\"button\"></span>\n    <paper-menu-button id=\"menuButton\" vertical-align=\"[[verticalAlign]]\" horizontal-align=\"[[horizontalAlign]]\" vertical-offset=\"[[_computeMenuVerticalOffset(noLabelFloat, verticalOffset)]]\" disabled=\"[[disabled]]\" no-animations=\"[[noAnimations]]\" on-iron-select=\"_onIronSelect\" on-iron-deselect=\"_onIronDeselect\" opened=\"{{opened}}\" close-on-activate allow-outside-scroll=\"[[allowOutsideScroll]]\">\n      <!-- support hybrid mode: user might be using paper-menu-button 1.x which distributes via <content> -->\n      <div class=\"dropdown-trigger\" slot=\"dropdown-trigger\">\n        <label class\\$=\"[[_computeLabelClass(noLabelFloat,alwaysFloatLabel,hasContent)]]\">\n          [[label]]\n        </label>\n        <div id=\"input\" tabindex=\"-1\">&nbsp;</div>\n        <iron-icon icon=\"paper-dropdown-menu:arrow-drop-down\"></iron-icon>\n        <span class=\"error\">[[errorMessage]]</span>\n      </div>\n      <slot id=\"content\" name=\"dropdown-content\" slot=\"dropdown-content\"></slot>\n    </paper-menu-button>\n`,\n\n  is: 'paper-dropdown-menu-light',\n\n  behaviors: [\n    IronButtonState,\n    IronControlState,\n    PaperRippleBehavior,\n    IronFormElementBehavior,\n    IronValidatableBehavior\n  ],\n\n  properties: {\n    /**\n     * The derived \"label\" of the currently selected item. This value\n     * is the `label` property on the selected item if set, or else the\n     * trimmed text content of the selected item.\n     */\n    selectedItemLabel: {type: String, notify: true, readOnly: true},\n\n    /**\n     * The last selected item. An item is selected if the dropdown menu has\n     * a child with class `dropdown-content`, and that child triggers an\n     * `iron-select` event with the selected `item` in the `detail`.\n     *\n     * @type {?Object}\n     */\n    selectedItem: {type: Object, notify: true, readOnly: true},\n\n    /**\n     * The value for this element that will be used when submitting in\n     * a form. It reflects the value of `selectedItemLabel`. If set directly,\n     * it will not update the `selectedItemLabel` value.\n     */\n    value: {\n      type: String,\n      notify: true,\n      observer: '_valueChanged',\n    },\n\n    /**\n     * The label for the dropdown.\n     */\n    label: {type: String},\n\n    /**\n     * The placeholder for the dropdown.\n     */\n    placeholder: {type: String},\n\n    /**\n     * True if the dropdown is open. Otherwise, false.\n     */\n    opened:\n        {type: Boolean, notify: true, value: false, observer: '_openedChanged'},\n\n    /**\n     * By default, the dropdown will constrain scrolling on the page\n     * to itself when opened.\n     * Set to true in order to prevent scroll from being constrained\n     * to the dropdown when it opens.\n     */\n    allowOutsideScroll: {type: Boolean, value: false},\n\n    /**\n     * Set to true to disable the floating label. Bind this to the\n     * `<paper-input-container>`'s `noLabelFloat` property.\n     */\n    noLabelFloat: {type: Boolean, value: false, reflectToAttribute: true},\n\n    /**\n     * Set to true to always float the label. Bind this to the\n     * `<paper-input-container>`'s `alwaysFloatLabel` property.\n     */\n    alwaysFloatLabel: {type: Boolean, value: false},\n\n    /**\n     * Set to true to disable animations when opening and closing the\n     * dropdown.\n     */\n    noAnimations: {type: Boolean, value: false},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * horizontally relative to the dropdown trigger.\n     */\n    horizontalAlign: {type: String, value: 'right'},\n\n    /**\n     * The orientation against which to align the menu dropdown\n     * vertically relative to the dropdown trigger.\n     */\n    verticalAlign: {type: String, value: 'top'},\n\n    /**\n     * Overrides the vertical offset computed in\n     * _computeMenuVerticalOffset.\n     */\n    verticalOffset: Number,\n\n    hasContent: {type: Boolean, readOnly: true}\n  },\n\n  listeners: {'tap': '_onTap'},\n\n  /**\n   * @type {!Object}\n   */\n  keyBindings: {'up down': 'open', 'esc': 'close'},\n\n  hostAttributes: {\n    tabindex: 0,\n    role: 'combobox',\n    'aria-autocomplete': 'none',\n    'aria-haspopup': 'true'\n  },\n\n  observers: ['_selectedItemChanged(selectedItem)'],\n\n  attached: function() {\n    // NOTE(cdata): Due to timing, a preselected value in a `IronSelectable`\n    // child will cause an `iron-select` event to fire while the element is\n    // still in a `DocumentFragment`. This has the effect of causing\n    // handlers not to fire. So, we double check this value on attached:\n    var contentElement = this.contentElement;\n    if (contentElement && contentElement.selectedItem) {\n      this._setSelectedItem(contentElement.selectedItem);\n    }\n  },\n\n  /**\n   * The content element that is contained by the dropdown menu, if any.\n   */\n  get contentElement() {\n    // Polymer 2.x returns slot.assignedNodes which can contain text nodes.\n    var nodes = dom(this.$.content).getDistributedNodes();\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      if (nodes[i].nodeType === Node.ELEMENT_NODE) {\n        return nodes[i];\n      }\n    }\n  },\n\n  /**\n   * Show the dropdown content.\n   */\n  open: function() {\n    this.$.menuButton.open();\n  },\n\n  /**\n   * Hide the dropdown content.\n   */\n  close: function() {\n    this.$.menuButton.close();\n  },\n\n  /**\n   * A handler that is called when `iron-select` is fired.\n   *\n   * @param {CustomEvent} event An `iron-select` event.\n   */\n  _onIronSelect: function(event) {\n    this._setSelectedItem(event.detail.item);\n  },\n\n  /**\n   * A handler that is called when `iron-deselect` is fired.\n   *\n   * @param {CustomEvent} event An `iron-deselect` event.\n   */\n  _onIronDeselect: function(event) {\n    this._setSelectedItem(null);\n  },\n\n  /**\n   * A handler that is called when the dropdown is tapped.\n   *\n   * @param {CustomEvent} event A tap event.\n   */\n  _onTap: function(event) {\n    if (gestures.findOriginalTarget(event) === this) {\n      this.open();\n    }\n  },\n\n  /**\n   * Compute the label for the dropdown given a selected item.\n   *\n   * @param {Element} selectedItem A selected Element item, with an\n   * optional `label` property.\n   */\n  _selectedItemChanged: function(selectedItem) {\n    var value = '';\n    if (!selectedItem) {\n      value = '';\n    } else {\n      value = selectedItem.label || selectedItem.getAttribute('label') ||\n          selectedItem.textContent.trim();\n    }\n\n    this.value = value;\n    this._setSelectedItemLabel(value);\n  },\n\n  /**\n   * Compute the vertical offset of the menu based on the value of\n   * `noLabelFloat`.\n   *\n   * @param {boolean} noLabelFloat True if the label should not float\n   * @param {number=} opt_verticalOffset Optional offset from the user\n   * above the input, otherwise false.\n   */\n  _computeMenuVerticalOffset: function(noLabelFloat, opt_verticalOffset) {\n    // Override offset if it's passed from the user.\n    if (opt_verticalOffset) {\n      return opt_verticalOffset;\n    }\n\n    // NOTE(cdata): These numbers are somewhat magical because they are\n    // derived from the metrics of elements internal to `paper-input`'s\n    // template. The metrics will change depending on whether or not the\n    // input has a floating label.\n    return noLabelFloat ? -4 : 8;\n  },\n\n  /**\n   * Returns false if the element is required and does not have a selection,\n   * and true otherwise.\n   * @param {*=} _value Ignored.\n   * @return {boolean} true if `required` is false, or if `required` is true\n   * and the element has a valid selection.\n   */\n  _getValidity: function(_value) {\n    return this.disabled || !this.required || (this.required && !!this.value);\n  },\n\n  _openedChanged: function() {\n    var openState = this.opened ? 'true' : 'false';\n    var e = this.contentElement;\n    if (e) {\n      e.setAttribute('aria-expanded', openState);\n    }\n  },\n\n  _computeLabelClass: function(noLabelFloat, alwaysFloatLabel, hasContent) {\n    var cls = '';\n    if (noLabelFloat === true) {\n      return hasContent ? 'label-is-hidden' : '';\n    }\n\n    if (hasContent || alwaysFloatLabel === true) {\n      cls += ' label-is-floating';\n    }\n    return cls;\n  },\n\n  _valueChanged: function() {\n    // Only update if it's actually different.\n    if (this.$.input && this.$.input.textContent !== this.value) {\n      this.$.input.textContent = this.value;\n    }\n    this._setHasContent(!!this.value);\n  }\n});\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n * `Polymer.IronScrollTargetBehavior` allows an element to respond to scroll\n * events from a designated scroll target.\n *\n * Elements that consume this behavior can override the `_scrollHandler`\n * method to add logic on the scroll event.\n *\n * @demo demo/scrolling-region.html Scrolling Region\n * @demo demo/document.html Document Element\n * @polymerBehavior\n */\nexport const IronScrollTargetBehavior = {\n\n  properties: {\n\n    /**\n     * Specifies the element that will handle the scroll event\n     * on the behalf of the current element. This is typically a reference to an\n     *element, but there are a few more posibilities:\n     *\n     * ### Elements id\n     *\n     *```html\n     * <div id=\"scrollable-element\" style=\"overflow: auto;\">\n     *  <x-element scroll-target=\"scrollable-element\">\n     *    <!-- Content-->\n     *  </x-element>\n     * </div>\n     *```\n     * In this case, the `scrollTarget` will point to the outer div element.\n     *\n     * ### Document scrolling\n     *\n     * For document scrolling, you can use the reserved word `document`:\n     *\n     *```html\n     * <x-element scroll-target=\"document\">\n     *   <!-- Content -->\n     * </x-element>\n     *```\n     *\n     * ### Elements reference\n     *\n     *```js\n     * appHeader.scrollTarget = document.querySelector('#scrollable-element');\n     *```\n     *\n     * @type {HTMLElement}\n     * @default document\n     */\n    scrollTarget: {\n      type: HTMLElement,\n      value: function() {\n        return this._defaultScrollTarget;\n      }\n    }\n  },\n\n  observers: ['_scrollTargetChanged(scrollTarget, isAttached)'],\n\n  /**\n   * True if the event listener should be installed.\n   */\n  _shouldHaveListener: true,\n\n  _scrollTargetChanged: function(scrollTarget, isAttached) {\n    var eventTarget;\n\n    if (this._oldScrollTarget) {\n      this._toggleScrollListener(false, this._oldScrollTarget);\n      this._oldScrollTarget = null;\n    }\n    if (!isAttached) {\n      return;\n    }\n    // Support element id references\n    if (scrollTarget === 'document') {\n      this.scrollTarget = this._doc;\n\n    } else if (typeof scrollTarget === 'string') {\n      var domHost = this.domHost;\n\n      this.scrollTarget = domHost && domHost.$ ?\n          domHost.$[scrollTarget] :\n          dom(this.ownerDocument).querySelector('#' + scrollTarget);\n\n    } else if (this._isValidScrollTarget()) {\n      this._oldScrollTarget = scrollTarget;\n      this._toggleScrollListener(this._shouldHaveListener, scrollTarget);\n    }\n  },\n\n  /**\n   * Runs on every scroll event. Consumer of this behavior may override this\n   * method.\n   *\n   * @protected\n   */\n  _scrollHandler: function scrollHandler() {},\n\n  /**\n   * The default scroll target. Consumers of this behavior may want to customize\n   * the default scroll target.\n   *\n   * @type {Element}\n   */\n  get _defaultScrollTarget() {\n    return this._doc;\n  },\n\n  /**\n   * Shortcut for the document element\n   *\n   * @type {Element}\n   */\n  get _doc() {\n    return this.ownerDocument.documentElement;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  get _scrollTop() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageYOffset :\n                                               this.scrollTarget.scrollTop;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  get _scrollLeft() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.pageXOffset :\n                                               this.scrollTarget.scrollLeft;\n    }\n    return 0;\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled\n   * upward.\n   *\n   * @type {number}\n   */\n  set _scrollTop(top) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(window.pageXOffset, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Sets the number of pixels that the content of an element is scrolled to the\n   * left.\n   *\n   * @type {number}\n   */\n  set _scrollLeft(left) {\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, window.pageYOffset);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n    }\n  },\n\n  /**\n   * Scrolls the content to a particular place.\n   *\n   * @method scroll\n   * @param {number|!{left: number, top: number}} leftOrOptions The left position or scroll options\n   * @param {number=} top The top position\n   * @return {void}\n   */\n  scroll: function(leftOrOptions, top) {\n    var left;\n\n    if (typeof leftOrOptions === 'object') {\n      left = leftOrOptions.left;\n      top = leftOrOptions.top;\n    } else {\n      left = leftOrOptions;\n    }\n\n    left = left || 0;\n    top = top || 0;\n    if (this.scrollTarget === this._doc) {\n      window.scrollTo(left, top);\n    } else if (this._isValidScrollTarget()) {\n      this.scrollTarget.scrollLeft = left;\n      this.scrollTarget.scrollTop = top;\n    }\n  },\n\n  /**\n   * Gets the width of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetWidth() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerWidth :\n                                               this.scrollTarget.offsetWidth;\n    }\n    return 0;\n  },\n\n  /**\n   * Gets the height of the scroll target.\n   *\n   * @type {number}\n   */\n  get _scrollTargetHeight() {\n    if (this._isValidScrollTarget()) {\n      return this.scrollTarget === this._doc ? window.innerHeight :\n                                               this.scrollTarget.offsetHeight;\n    }\n    return 0;\n  },\n\n  /**\n   * Returns true if the scroll target is a valid HTMLElement.\n   *\n   * @return {boolean}\n   */\n  _isValidScrollTarget: function() {\n    return this.scrollTarget instanceof HTMLElement;\n  },\n\n  _toggleScrollListener: function(yes, scrollTarget) {\n    var eventTarget = scrollTarget === this._doc ? window : scrollTarget;\n    if (yes) {\n      if (!this._boundScrollHandler) {\n        this._boundScrollHandler = this._scrollHandler.bind(this);\n        eventTarget.addEventListener('scroll', this._boundScrollHandler);\n      }\n    } else {\n      if (this._boundScrollHandler) {\n        eventTarget.removeEventListener('scroll', this._boundScrollHandler);\n        this._boundScrollHandler = null;\n      }\n    }\n  },\n\n  /**\n   * Enables or disables the scroll event listener.\n   *\n   * @param {boolean} yes True to add the event, False to remove it.\n   */\n  toggleScrollListener: function(yes) {\n    this._shouldHaveListener = yes;\n    this._toggleScrollListener(yes, this.scrollTarget);\n  }\n\n};\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\n\nexport const isValidEntityId = (entityId: string) =>\n  validEntityId.test(entityId);\n\nexport const createValidEntityId = (input: string) =>\n  input\n    .toLowerCase()\n    .replace(/\\s|\\'/g, \"_\") // replace spaces and quotes with underscore\n    .replace(/\\W/g, \"\") // remove not allowed chars\n    .replace(/_{2,}/g, \"_\") // replace multiple underscores with 1\n    .replace(/_$/, \"\"); // remove underscores at the end\n","/**\n@license\nCopyright (c) 2018 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {PaperRippleBehavior} from '@polymer/paper-behaviors/paper-ripple-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {afterNextRender} from '@polymer/polymer/lib/utils/render-status.js';\n\n/**\nThis is a lighter version of `paper-icon-button`. Its goal is performance, not\ndeveloper ergonomics, so as a result it has fewer features than\n`paper-icon-button` itself. To use it, you must distribute a `button` containing\nthe `iron-icon` you want to use:\n\n<script type=\"module\">\n  import '@polymer/iron-icon/iron-icon.js';\n  import '@polymer/paper-icon-button/paper-icon-button-light.js';\n  import '@polymer/iron-icons/iron-icons.js';\n</script>\n\n<paper-icon-button-light>\n  <button title=\"heart\">\n    <iron-icon icon=\"favorite\"></iron-icon>\n  </button>\n</paper-icon-button-light>\n\nNote that this button is assumed to be distributed at the startup of\n`paper-icon-button-light`. Dynamically adding a `button` to this element is\nnot supported.\n\nThe `title`/`disabled` etc. attributes go on the distributed button, not on the\nwrapper.\n\nThe following custom properties and mixins are also available for styling:\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-icon-button-light-ripple` | Mixin applied to the paper ripple | `{}`\n\n@group Paper Elements\n@element paper-icon-button-light\n@demo demo/paper-icon-button-light.html\n*/\nPolymer({\n  is: 'paper-icon-button-light',\n\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        width: 24px;\n        height: 24px;\n      }\n\n      paper-ripple {\n        opacity: 0.6;\n        color: currentColor;\n        @apply --paper-icon-button-light-ripple;\n      }\n\n      :host > ::slotted(button) {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        margin: 0;\n        padding: 0;\n        background: none;\n        border: none;\n        outline: none;\n        vertical-align: middle;\n        color: inherit;\n        cursor: pointer;\n        /* NOTE: Both values are needed, since some phones require the value to be \\`transparent\\`. */\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n        -webkit-tap-highlight-color: transparent;\n      }\n      :host > ::slotted(button[disabled]) {\n        color: #9b9b9b;\n        pointer-events: none;\n        cursor: auto;\n      }\n    </style>\n    <slot></slot>\n  `,\n\n  behaviors: [PaperRippleBehavior],\n\n  registered: function() {\n    this._template.setAttribute('strip-whitespace', '');\n  },\n\n  ready: function() {\n    afterNextRender(this, () => {\n      // Add lazy host listeners\n      this.addEventListener('down', this._rippleDown.bind(this));\n      this.addEventListener('up', this._rippleUp.bind(this));\n\n      // Assume the button has already been distributed.\n      var button = this.getEffectiveChildren()[0];\n      this._rippleContainer = button;\n\n      // We need to set the focus/blur listeners on the distributed button,\n      // not the host, since the host isn't focusable.\n      button.addEventListener('focus', this._rippleDown.bind(this));\n      button.addEventListener('blur', this._rippleUp.bind(this));\n    });\n  },\n  _rippleDown: function() {\n    this.getRipple().uiDownAction();\n  },\n  _rippleUp: function() {\n    this.getRipple().uiUpAction();\n  },\n  /**\n   * @param {...*} var_args\n   */\n  ensureRipple: function(var_args) {\n    var lastRipple = this._ripple;\n    PaperRippleBehavior.ensureRipple.apply(this, arguments);\n    if (this._ripple && this._ripple !== lastRipple) {\n      this._ripple.center = true;\n      this._ripple.classList.add('circle');\n    }\n  }\n});\n","import {\n  LitElement,\n  TemplateResult,\n  property,\n  html,\n  customElement,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button-light\";\n\nimport { HomeAssistant } from \"../../types\";\nimport { PolymerChangedEvent } from \"../../polymer-types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { isValidEntityId } from \"../../common/entity/valid_entity_id\";\n\nimport \"./ha-entity-picker\";\n// Not a duplicate, type import\n// tslint:disable-next-line\nimport { HaEntityPickerEntityFilterFunc } from \"./ha-entity-picker\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\n@customElement(\"ha-entities-picker\")\nclass HaEntitiesPickerLight extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public value?: string[];\n  /**\n   * Show entities from specific domains.\n   * @type {string}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n  @property({ attribute: \"picked-entity-label\" })\n  public pickedEntityLabel?: string;\n  @property({ attribute: \"pick-entity-label\" }) public pickEntityLabel?: string;\n\n  protected render(): TemplateResult | void {\n    if (!this.hass) {\n      return;\n    }\n\n    const currentEntities = this._currentEntities;\n    return html`\n      ${currentEntities.map(\n        (entityId) => html`\n          <div>\n            <ha-entity-picker\n              allow-custom-entity\n              .curValue=${entityId}\n              .hass=${this.hass}\n              .includeDomains=${this.includeDomains}\n              .excludeDomains=${this.excludeDomains}\n              .entityFilter=${this._entityFilter}\n              .value=${entityId}\n              .label=${this.pickedEntityLabel}\n              @value-changed=${this._entityChanged}\n            ></ha-entity-picker>\n          </div>\n        `\n      )}\n      <div>\n        <ha-entity-picker\n          .hass=${this.hass}\n          .includeDomains=${this.includeDomains}\n          .excludeDomains=${this.excludeDomains}\n          .entityFilter=${this._entityFilter}\n          .label=${this.pickEntityLabel}\n          @value-changed=${this._addEntity}\n        ></ha-entity-picker>\n      </div>\n    `;\n  }\n\n  private _entityFilter: HaEntityPickerEntityFilterFunc = (\n    stateObj: HassEntity\n  ) => !this.value || !this.value.includes(stateObj.entity_id);\n\n  private get _currentEntities() {\n    return this.value || [];\n  }\n\n  private async _updateEntities(entities) {\n    fireEvent(this, \"value-changed\", {\n      value: entities,\n    });\n\n    this.value = entities;\n  }\n\n  private _entityChanged(event: PolymerChangedEvent<string>) {\n    event.stopPropagation();\n    const curValue = (event.currentTarget as any).curValue;\n    const newValue = event.detail.value;\n    if (\n      newValue === curValue ||\n      (newValue !== \"\" && !isValidEntityId(newValue))\n    ) {\n      return;\n    }\n    if (newValue === \"\") {\n      this._updateEntities(\n        this._currentEntities.filter((ent) => ent !== curValue)\n      );\n    } else {\n      this._updateEntities(\n        this._currentEntities.map((ent) => (ent === curValue ? newValue : ent))\n      );\n    }\n  }\n\n  private async _addEntity(event: PolymerChangedEvent<string>) {\n    event.stopPropagation();\n    const toAdd = event.detail.value;\n    (event.currentTarget as any).value = \"\";\n    if (!toAdd) {\n      return;\n    }\n    const currentEntities = this._currentEntities;\n    if (currentEntities.includes(toAdd)) {\n      return;\n    }\n\n    this._updateEntities([...currentEntities, toAdd]);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entities-picker\": HaEntitiesPickerLight;\n  }\n}\n","/**\n * @license\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n(() => {\n    var _a, _b, _c;\n    /* Symbols for private properties */\n    const _blockingElements = Symbol();\n    const _alreadyInertElements = Symbol();\n    const _topElParents = Symbol();\n    const _siblingsToRestore = Symbol();\n    const _parentMO = Symbol();\n    /* Symbols for private static methods */\n    const _topChanged = Symbol();\n    const _swapInertedSibling = Symbol();\n    const _inertSiblings = Symbol();\n    const _restoreInertedSiblings = Symbol();\n    const _getParents = Symbol();\n    const _getDistributedChildren = Symbol();\n    const _isInertable = Symbol();\n    const _handleMutations = Symbol();\n    class BlockingElementsImpl {\n        constructor() {\n            /**\n             * The blocking elements.\n             */\n            this[_a] = [];\n            /**\n             * Used to keep track of the parents of the top element, from the element\n             * itself up to body. When top changes, the old top might have been removed\n             * from the document, so we need to memoize the inerted parents' siblings\n             * in order to restore their inerteness when top changes.\n             */\n            this[_b] = [];\n            /**\n             * Elements that are already inert before the first blocking element is\n             * pushed.\n             */\n            this[_c] = new Set();\n        }\n        destructor() {\n            // Restore original inertness.\n            this[_restoreInertedSiblings](this[_topElParents]);\n            // Note we don't want to make these properties nullable on the class,\n            // since then we'd need non-null casts in many places. Calling a method on\n            // a BlockingElements instance after calling destructor will result in an\n            // exception.\n            const nullable = this;\n            nullable[_blockingElements] = null;\n            nullable[_topElParents] = null;\n            nullable[_alreadyInertElements] = null;\n        }\n        get top() {\n            const elems = this[_blockingElements];\n            return elems[elems.length - 1] || null;\n        }\n        push(element) {\n            if (!element || element === this.top) {\n                return;\n            }\n            // Remove it from the stack, we'll bring it to the top.\n            this.remove(element);\n            this[_topChanged](element);\n            this[_blockingElements].push(element);\n        }\n        remove(element) {\n            const i = this[_blockingElements].indexOf(element);\n            if (i === -1) {\n                return false;\n            }\n            this[_blockingElements].splice(i, 1);\n            // Top changed only if the removed element was the top element.\n            if (i === this[_blockingElements].length) {\n                this[_topChanged](this.top);\n            }\n            return true;\n        }\n        pop() {\n            const top = this.top;\n            top && this.remove(top);\n            return top;\n        }\n        has(element) {\n            return this[_blockingElements].indexOf(element) !== -1;\n        }\n        /**\n         * Sets `inert` to all document elements except the new top element, its\n         * parents, and its distributed content.\n         */\n        [(_a = _blockingElements, _b = _topElParents, _c = _alreadyInertElements, _topChanged)](newTop) {\n            const toKeepInert = this[_alreadyInertElements];\n            const oldParents = this[_topElParents];\n            // No new top, reset old top if any.\n            if (!newTop) {\n                this[_restoreInertedSiblings](oldParents);\n                toKeepInert.clear();\n                this[_topElParents] = [];\n                return;\n            }\n            const newParents = this[_getParents](newTop);\n            // New top is not contained in the main document!\n            if (newParents[newParents.length - 1].parentNode !== document.body) {\n                throw Error('Non-connected element cannot be a blocking element');\n            }\n            // Cast here because we know we'll call _inertSiblings on newParents\n            // below.\n            this[_topElParents] = newParents;\n            const toSkip = this[_getDistributedChildren](newTop);\n            // No previous top element.\n            if (!oldParents.length) {\n                this[_inertSiblings](newParents, toSkip, toKeepInert);\n                return;\n            }\n            let i = oldParents.length - 1;\n            let j = newParents.length - 1;\n            // Find common parent. Index 0 is the element itself (so stop before it).\n            while (i > 0 && j > 0 && oldParents[i] === newParents[j]) {\n                i--;\n                j--;\n            }\n            // If up the parents tree there are 2 elements that are siblings, swap\n            // the inerted sibling.\n            if (oldParents[i] !== newParents[j]) {\n                this[_swapInertedSibling](oldParents[i], newParents[j]);\n            }\n            // Restore old parents siblings inertness.\n            i > 0 && this[_restoreInertedSiblings](oldParents.slice(0, i));\n            // Make new parents siblings inert.\n            j > 0 && this[_inertSiblings](newParents.slice(0, j), toSkip, null);\n        }\n        /**\n         * Swaps inertness between two sibling elements.\n         * Sets the property `inert` over the attribute since the inert spec\n         * doesn't specify if it should be reflected.\n         * https://html.spec.whatwg.org/multipage/interaction.html#inert\n         */\n        [_swapInertedSibling](oldInert, newInert) {\n            const siblingsToRestore = oldInert[_siblingsToRestore];\n            // oldInert is not contained in siblings to restore, so we have to check\n            // if it's inertable and if already inert.\n            if (this[_isInertable](oldInert) && !oldInert.inert) {\n                oldInert.inert = true;\n                siblingsToRestore.add(oldInert);\n            }\n            // If newInert was already between the siblings to restore, it means it is\n            // inertable and must be restored.\n            if (siblingsToRestore.has(newInert)) {\n                newInert.inert = false;\n                siblingsToRestore.delete(newInert);\n            }\n            newInert[_parentMO] = oldInert[_parentMO];\n            newInert[_siblingsToRestore] = siblingsToRestore;\n            oldInert[_parentMO] = undefined;\n            oldInert[_siblingsToRestore] = undefined;\n        }\n        /**\n         * Restores original inertness to the siblings of the elements.\n         * Sets the property `inert` over the attribute since the inert spec\n         * doesn't specify if it should be reflected.\n         * https://html.spec.whatwg.org/multipage/interaction.html#inert\n         */\n        [_restoreInertedSiblings](elements) {\n            for (const element of elements) {\n                const mo = element[_parentMO];\n                mo.disconnect();\n                element[_parentMO] = undefined;\n                const siblings = element[_siblingsToRestore];\n                for (const sibling of siblings) {\n                    sibling.inert = false;\n                }\n                element[_siblingsToRestore] = undefined;\n            }\n        }\n        /**\n         * Inerts the siblings of the elements except the elements to skip. Stores\n         * the inerted siblings into the element's symbol `_siblingsToRestore`.\n         * Pass `toKeepInert` to collect the already inert elements.\n         * Sets the property `inert` over the attribute since the inert spec\n         * doesn't specify if it should be reflected.\n         * https://html.spec.whatwg.org/multipage/interaction.html#inert\n         */\n        [_inertSiblings](elements, toSkip, toKeepInert) {\n            for (const element of elements) {\n                // Assume element is not a Document, so it must have a parentNode.\n                const parent = element.parentNode;\n                const children = parent.children;\n                const inertedSiblings = new Set();\n                for (let j = 0; j < children.length; j++) {\n                    const sibling = children[j];\n                    // Skip the input element, if not inertable or to be skipped.\n                    if (sibling === element || !this[_isInertable](sibling) ||\n                        (toSkip && toSkip.has(sibling))) {\n                        continue;\n                    }\n                    // Should be collected since already inerted.\n                    if (toKeepInert && sibling.inert) {\n                        toKeepInert.add(sibling);\n                    }\n                    else {\n                        sibling.inert = true;\n                        inertedSiblings.add(sibling);\n                    }\n                }\n                // Store the siblings that were inerted.\n                element[_siblingsToRestore] = inertedSiblings;\n                // Observe only immediate children mutations on the parent.\n                const mo = new MutationObserver(this[_handleMutations].bind(this));\n                element[_parentMO] = mo;\n                let parentToObserve = parent;\n                // If we're using the ShadyDOM polyfill, then our parent could be a\n                // shady root, which is an object that acts like a ShadowRoot, but isn't\n                // actually a node in the real DOM. Observe the real DOM parent instead.\n                const maybeShadyRoot = parentToObserve;\n                if (maybeShadyRoot.__shady && maybeShadyRoot.host) {\n                    parentToObserve = maybeShadyRoot.host;\n                }\n                mo.observe(parentToObserve, {\n                    childList: true,\n                });\n            }\n        }\n        /**\n         * Handles newly added/removed nodes by toggling their inertness.\n         * It also checks if the current top Blocking Element has been removed,\n         * notifying and removing it.\n         */\n        [_handleMutations](mutations) {\n            const parents = this[_topElParents];\n            const toKeepInert = this[_alreadyInertElements];\n            for (const mutation of mutations) {\n                // If the target is a shadowRoot, get its host as we skip shadowRoots when\n                // computing _topElParents.\n                const target = mutation.target.host || mutation.target;\n                const idx = target === document.body ?\n                    parents.length :\n                    parents.indexOf(target);\n                const inertedChild = parents[idx - 1];\n                const inertedSiblings = inertedChild[_siblingsToRestore];\n                // To restore.\n                for (let i = 0; i < mutation.removedNodes.length; i++) {\n                    const sibling = mutation.removedNodes[i];\n                    if (sibling === inertedChild) {\n                        console.info('Detected removal of the top Blocking Element.');\n                        this.pop();\n                        return;\n                    }\n                    if (inertedSiblings.has(sibling)) {\n                        sibling.inert = false;\n                        inertedSiblings.delete(sibling);\n                    }\n                }\n                // To inert.\n                for (let i = 0; i < mutation.addedNodes.length; i++) {\n                    const sibling = mutation.addedNodes[i];\n                    if (!this[_isInertable](sibling)) {\n                        continue;\n                    }\n                    if (toKeepInert && sibling.inert) {\n                        toKeepInert.add(sibling);\n                    }\n                    else {\n                        sibling.inert = true;\n                        inertedSiblings.add(sibling);\n                    }\n                }\n            }\n        }\n        /**\n         * Returns if the element is inertable.\n         */\n        [_isInertable](element) {\n            return false === /^(style|template|script)$/.test(element.localName);\n        }\n        /**\n         * Returns the list of newParents of an element, starting from element\n         * (included) up to `document.body` (excluded).\n         */\n        [_getParents](element) {\n            const parents = [];\n            let current = element;\n            // Stop to body.\n            while (current && current !== document.body) {\n                // Skip shadow roots.\n                if (current.nodeType === Node.ELEMENT_NODE) {\n                    parents.push(current);\n                }\n                // ShadowDom v1\n                if (current.assignedSlot) {\n                    // Collect slots from deepest slot to top.\n                    while (current = current.assignedSlot) {\n                        parents.push(current);\n                    }\n                    // Continue the search on the top slot.\n                    current = parents.pop();\n                    continue;\n                }\n                current = current.parentNode ||\n                    current.host;\n            }\n            return parents;\n        }\n        /**\n         * Returns the distributed children of the element's shadow root.\n         * Returns null if the element doesn't have a shadow root.\n         */\n        [_getDistributedChildren](element) {\n            const shadowRoot = element.shadowRoot;\n            if (!shadowRoot) {\n                return null;\n            }\n            const result = new Set();\n            let i;\n            let j;\n            let nodes;\n            const slots = shadowRoot.querySelectorAll('slot');\n            if (slots.length && slots[0].assignedNodes) {\n                for (i = 0; i < slots.length; i++) {\n                    nodes = slots[i].assignedNodes({\n                        flatten: true,\n                    });\n                    for (j = 0; j < nodes.length; j++) {\n                        if (nodes[j].nodeType === Node.ELEMENT_NODE) {\n                            result.add(nodes[j]);\n                        }\n                    }\n                }\n                // No need to search for <content>.\n            }\n            return result;\n        }\n    }\n    document.$blockingElements =\n        new BlockingElementsImpl();\n})();\n//# sourceMappingURL=blocking-elements.js.map","/**\n * This work is licensed under the W3C Software and Document License\n * (http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document).\n */\n\n// Convenience function for converting NodeLists.\n/** @type {typeof Array.prototype.slice} */\nconst slice = Array.prototype.slice;\n\n/**\n * IE has a non-standard name for \"matches\".\n * @type {typeof Element.prototype.matches}\n */\nconst matches =\n    Element.prototype.matches || Element.prototype.msMatchesSelector;\n\n/** @type {string} */\nconst _focusableElementsString = ['a[href]',\n                                  'area[href]',\n                                  'input:not([disabled])',\n                                  'select:not([disabled])',\n                                  'textarea:not([disabled])',\n                                  'button:not([disabled])',\n                                  'iframe',\n                                  'object',\n                                  'embed',\n                                  '[contenteditable]'].join(',');\n\n/**\n * `InertRoot` manages a single inert subtree, i.e. a DOM subtree whose root element has an `inert`\n * attribute.\n *\n * Its main functions are:\n *\n * - to create and maintain a set of managed `InertNode`s, including when mutations occur in the\n *   subtree. The `makeSubtreeUnfocusable()` method handles collecting `InertNode`s via registering\n *   each focusable node in the subtree with the singleton `InertManager` which manages all known\n *   focusable nodes within inert subtrees. `InertManager` ensures that a single `InertNode`\n *   instance exists for each focusable node which has at least one inert root as an ancestor.\n *\n * - to notify all managed `InertNode`s when this subtree stops being inert (i.e. when the `inert`\n *   attribute is removed from the root node). This is handled in the destructor, which calls the\n *   `deregister` method on `InertManager` for each managed inert node.\n */\nclass InertRoot {\n  /**\n   * @param {!Element} rootElement The Element at the root of the inert subtree.\n   * @param {!InertManager} inertManager The global singleton InertManager object.\n   */\n  constructor(rootElement, inertManager) {\n    /** @type {!InertManager} */\n    this._inertManager = inertManager;\n\n    /** @type {!Element} */\n    this._rootElement = rootElement;\n\n    /**\n     * @type {!Set<!InertNode>}\n     * All managed focusable nodes in this InertRoot's subtree.\n     */\n    this._managedNodes = new Set();\n\n    // Make the subtree hidden from assistive technology\n    if (this._rootElement.hasAttribute('aria-hidden')) {\n      /** @type {?string} */\n      this._savedAriaHidden = this._rootElement.getAttribute('aria-hidden');\n    } else {\n      this._savedAriaHidden = null;\n    }\n    this._rootElement.setAttribute('aria-hidden', 'true');\n\n    // Make all focusable elements in the subtree unfocusable and add them to _managedNodes\n    this._makeSubtreeUnfocusable(this._rootElement);\n\n    // Watch for:\n    // - any additions in the subtree: make them unfocusable too\n    // - any removals from the subtree: remove them from this inert root's managed nodes\n    // - attribute changes: if `tabindex` is added, or removed from an intrinsically focusable\n    //   element, make that node a managed node.\n    this._observer = new MutationObserver(this._onMutation.bind(this));\n    this._observer.observe(this._rootElement, {attributes: true, childList: true, subtree: true});\n  }\n\n  /**\n   * Call this whenever this object is about to become obsolete.  This unwinds all of the state\n   * stored in this object and updates the state of all of the managed nodes.\n   */\n  destructor() {\n    this._observer.disconnect();\n\n    if (this._rootElement) {\n      if (this._savedAriaHidden !== null) {\n        this._rootElement.setAttribute('aria-hidden', this._savedAriaHidden);\n      } else {\n        this._rootElement.removeAttribute('aria-hidden');\n      }\n    }\n\n    this._managedNodes.forEach(function(inertNode) {\n      this._unmanageNode(inertNode.node);\n    }, this);\n\n    // Note we cast the nulls to the ANY type here because:\n    // 1) We want the class properties to be declared as non-null, or else we\n    //    need even more casts throughout this code. All bets are off if an\n    //    instance has been destroyed and a method is called.\n    // 2) We don't want to cast \"this\", because we want type-aware optimizations\n    //    to know which properties we're setting.\n    this._observer = /** @type {?} */ (null);\n    this._rootElement = /** @type {?} */ (null);\n    this._managedNodes = /** @type {?} */ (null);\n    this._inertManager = /** @type {?} */ (null);\n  }\n\n  /**\n   * @return {!Set<!InertNode>} A copy of this InertRoot's managed nodes set.\n   */\n  get managedNodes() {\n    return new Set(this._managedNodes);\n  }\n\n  /** @return {boolean} */\n  get hasSavedAriaHidden() {\n    return this._savedAriaHidden !== null;\n  }\n\n  /** @param {?string} ariaHidden */\n  set savedAriaHidden(ariaHidden) {\n    this._savedAriaHidden = ariaHidden;\n  }\n\n  /** @return {?string} */\n  get savedAriaHidden() {\n    return this._savedAriaHidden;\n  }\n\n  /**\n   * @param {!Node} startNode\n   */\n  _makeSubtreeUnfocusable(startNode) {\n    composedTreeWalk(startNode, (node) => this._visitNode(node));\n\n    let activeElement = document.activeElement;\n\n    if (!document.body.contains(startNode)) {\n      // startNode may be in shadow DOM, so find its nearest shadowRoot to get the activeElement.\n      let node = startNode;\n      /** @type {!ShadowRoot|undefined} */\n      let root = undefined;\n      while (node) {\n        if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n          root = /** @type {!ShadowRoot} */ (node);\n          break;\n        }\n        node = node.parentNode;\n      }\n      if (root) {\n        activeElement = root.activeElement;\n      }\n    }\n    if (startNode.contains(activeElement)) {\n      activeElement.blur();\n      // In IE11, if an element is already focused, and then set to tabindex=-1\n      // calling blur() will not actually move the focus.\n      // To work around this we call focus() on the body instead.\n      if (activeElement === document.activeElement) {\n        document.body.focus();\n      }\n    }\n  }\n\n  /**\n   * @param {!Node} node\n   */\n  _visitNode(node) {\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n      return;\n    }\n    const element = /** @type {!Element} */ (node);\n\n    // If a descendant inert root becomes un-inert, its descendants will still be inert because of\n    // this inert root, so all of its managed nodes need to be adopted by this InertRoot.\n    if (element !== this._rootElement && element.hasAttribute('inert')) {\n      this._adoptInertRoot(element);\n    }\n\n    if (matches.call(element, _focusableElementsString) || element.hasAttribute('tabindex')) {\n      this._manageNode(element);\n    }\n  }\n\n  /**\n   * Register the given node with this InertRoot and with InertManager.\n   * @param {!Node} node\n   */\n  _manageNode(node) {\n    const inertNode = this._inertManager.register(node, this);\n    this._managedNodes.add(inertNode);\n  }\n\n  /**\n   * Unregister the given node with this InertRoot and with InertManager.\n   * @param {!Node} node\n   */\n  _unmanageNode(node) {\n    const inertNode = this._inertManager.deregister(node, this);\n    if (inertNode) {\n      this._managedNodes.delete(inertNode);\n    }\n  }\n\n  /**\n   * Unregister the entire subtree starting at `startNode`.\n   * @param {!Node} startNode\n   */\n  _unmanageSubtree(startNode) {\n    composedTreeWalk(startNode, (node) => this._unmanageNode(node));\n  }\n\n  /**\n   * If a descendant node is found with an `inert` attribute, adopt its managed nodes.\n   * @param {!Element} node\n   */\n  _adoptInertRoot(node) {\n    let inertSubroot = this._inertManager.getInertRoot(node);\n\n    // During initialisation this inert root may not have been registered yet,\n    // so register it now if need be.\n    if (!inertSubroot) {\n      this._inertManager.setInert(node, true);\n      inertSubroot = this._inertManager.getInertRoot(node);\n    }\n\n    inertSubroot.managedNodes.forEach(function(savedInertNode) {\n      this._manageNode(savedInertNode.node);\n    }, this);\n  }\n\n  /**\n   * Callback used when mutation observer detects subtree additions, removals, or attribute changes.\n   * @param {!Array<!MutationRecord>} records\n   * @param {!MutationObserver} self\n   */\n  _onMutation(records, self) {\n    records.forEach(function(record) {\n      const target = /** @type {!Element} */ (record.target);\n      if (record.type === 'childList') {\n        // Manage added nodes\n        slice.call(record.addedNodes).forEach(function(node) {\n          this._makeSubtreeUnfocusable(node);\n        }, this);\n\n        // Un-manage removed nodes\n        slice.call(record.removedNodes).forEach(function(node) {\n          this._unmanageSubtree(node);\n        }, this);\n      } else if (record.type === 'attributes') {\n        if (record.attributeName === 'tabindex') {\n          // Re-initialise inert node if tabindex changes\n          this._manageNode(target);\n        } else if (target !== this._rootElement &&\n                   record.attributeName === 'inert' &&\n                   target.hasAttribute('inert')) {\n          // If a new inert root is added, adopt its managed nodes and make sure it knows about the\n          // already managed nodes from this inert subroot.\n          this._adoptInertRoot(target);\n          const inertSubroot = this._inertManager.getInertRoot(target);\n          this._managedNodes.forEach(function(managedNode) {\n            if (target.contains(managedNode.node)) {\n              inertSubroot._manageNode(managedNode.node);\n            }\n          });\n        }\n      }\n    }, this);\n  }\n}\n\n/**\n * `InertNode` initialises and manages a single inert node.\n * A node is inert if it is a descendant of one or more inert root elements.\n *\n * On construction, `InertNode` saves the existing `tabindex` value for the node, if any, and\n * either removes the `tabindex` attribute or sets it to `-1`, depending on whether the element\n * is intrinsically focusable or not.\n *\n * `InertNode` maintains a set of `InertRoot`s which are descendants of this `InertNode`. When an\n * `InertRoot` is destroyed, and calls `InertManager.deregister()`, the `InertManager` notifies the\n * `InertNode` via `removeInertRoot()`, which in turn destroys the `InertNode` if no `InertRoot`s\n * remain in the set. On destruction, `InertNode` reinstates the stored `tabindex` if one exists,\n * or removes the `tabindex` attribute if the element is intrinsically focusable.\n */\nclass InertNode {\n  /**\n   * @param {!Node} node A focusable element to be made inert.\n   * @param {!InertRoot} inertRoot The inert root element associated with this inert node.\n   */\n  constructor(node, inertRoot) {\n    /** @type {!Node} */\n    this._node = node;\n\n    /** @type {boolean} */\n    this._overrodeFocusMethod = false;\n\n    /**\n     * @type {!Set<!InertRoot>} The set of descendant inert roots.\n     *    If and only if this set becomes empty, this node is no longer inert.\n     */\n    this._inertRoots = new Set([inertRoot]);\n\n    /** @type {?number} */\n    this._savedTabIndex = null;\n\n    /** @type {boolean} */\n    this._destroyed = false;\n\n    // Save any prior tabindex info and make this node untabbable\n    this.ensureUntabbable();\n  }\n\n  /**\n   * Call this whenever this object is about to become obsolete.\n   * This makes the managed node focusable again and deletes all of the previously stored state.\n   */\n  destructor() {\n    this._throwIfDestroyed();\n\n    if (this._node && this._node.nodeType === Node.ELEMENT_NODE) {\n      const element = /** @type {!Element} */ (this._node);\n      if (this._savedTabIndex !== null) {\n        element.setAttribute('tabindex', this._savedTabIndex);\n      } else {\n        element.removeAttribute('tabindex');\n      }\n\n      // Use `delete` to restore native focus method.\n      if (this._overrodeFocusMethod) {\n        delete element.focus;\n      }\n    }\n\n    // See note in InertRoot.destructor for why we cast these nulls to ANY.\n    this._node = /** @type {?} */ (null);\n    this._inertRoots = /** @type {?} */ (null);\n    this._destroyed = true;\n  }\n\n  /**\n   * @type {boolean} Whether this object is obsolete because the managed node is no longer inert.\n   * If the object has been destroyed, any attempt to access it will cause an exception.\n   */\n  get destroyed() {\n    return /** @type {!InertNode} */ (this)._destroyed;\n  }\n\n  /**\n   * Throw if user tries to access destroyed InertNode.\n   */\n  _throwIfDestroyed() {\n    if (this.destroyed) {\n      throw new Error('Trying to access destroyed InertNode');\n    }\n  }\n\n  /** @return {boolean} */\n  get hasSavedTabIndex() {\n    return this._savedTabIndex !== null;\n  }\n\n  /** @return {!Node} */\n  get node() {\n    this._throwIfDestroyed();\n    return this._node;\n  }\n\n  /** @param {?number} tabIndex */\n  set savedTabIndex(tabIndex) {\n    this._throwIfDestroyed();\n    this._savedTabIndex = tabIndex;\n  }\n\n  /** @return {?number} */\n  get savedTabIndex() {\n    this._throwIfDestroyed();\n    return this._savedTabIndex;\n  }\n\n  /** Save the existing tabindex value and make the node untabbable and unfocusable */\n  ensureUntabbable() {\n    if (this.node.nodeType !== Node.ELEMENT_NODE) {\n      return;\n    }\n    const element = /** @type {!Element} */ (this.node);\n    if (matches.call(element, _focusableElementsString)) {\n      if (/** @type {!HTMLElement} */ (element).tabIndex === -1 &&\n          this.hasSavedTabIndex) {\n        return;\n      }\n\n      if (element.hasAttribute('tabindex')) {\n        this._savedTabIndex = /** @type {!HTMLElement} */ (element).tabIndex;\n      }\n      element.setAttribute('tabindex', '-1');\n      if (element.nodeType === Node.ELEMENT_NODE) {\n        element.focus = function() {};\n        this._overrodeFocusMethod = true;\n      }\n    } else if (element.hasAttribute('tabindex')) {\n      this._savedTabIndex = /** @type {!HTMLElement} */ (element).tabIndex;\n      element.removeAttribute('tabindex');\n    }\n  }\n\n  /**\n   * Add another inert root to this inert node's set of managing inert roots.\n   * @param {!InertRoot} inertRoot\n   */\n  addInertRoot(inertRoot) {\n    this._throwIfDestroyed();\n    this._inertRoots.add(inertRoot);\n  }\n\n  /**\n   * Remove the given inert root from this inert node's set of managing inert roots.\n   * If the set of managing inert roots becomes empty, this node is no longer inert,\n   * so the object should be destroyed.\n   * @param {!InertRoot} inertRoot\n   */\n  removeInertRoot(inertRoot) {\n    this._throwIfDestroyed();\n    this._inertRoots.delete(inertRoot);\n    if (this._inertRoots.size === 0) {\n      this.destructor();\n    }\n  }\n}\n\n/**\n * InertManager is a per-document singleton object which manages all inert roots and nodes.\n *\n * When an element becomes an inert root by having an `inert` attribute set and/or its `inert`\n * property set to `true`, the `setInert` method creates an `InertRoot` object for the element.\n * The `InertRoot` in turn registers itself as managing all of the element's focusable descendant\n * nodes via the `register()` method. The `InertManager` ensures that a single `InertNode` instance\n * is created for each such node, via the `_managedNodes` map.\n */\nclass InertManager {\n  /**\n   * @param {!Document} document\n   */\n  constructor(document) {\n    if (!document) {\n      throw new Error('Missing required argument; InertManager needs to wrap a document.');\n    }\n\n    /** @type {!Document} */\n    this._document = document;\n\n    /**\n     * All managed nodes known to this InertManager. In a map to allow looking up by Node.\n     * @type {!Map<!Node, !InertNode>}\n     */\n    this._managedNodes = new Map();\n\n    /**\n     * All inert roots known to this InertManager. In a map to allow looking up by Node.\n     * @type {!Map<!Node, !InertRoot>}\n     */\n    this._inertRoots = new Map();\n\n    /**\n     * Observer for mutations on `document.body`.\n     * @type {!MutationObserver}\n     */\n    this._observer = new MutationObserver(this._watchForInert.bind(this));\n\n    // Add inert style.\n    addInertStyle(document.head || document.body || document.documentElement);\n\n    // Wait for document to be loaded.\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', this._onDocumentLoaded.bind(this));\n    } else {\n      this._onDocumentLoaded();\n    }\n  }\n\n  /**\n   * Set whether the given element should be an inert root or not.\n   * @param {!Element} root\n   * @param {boolean} inert\n   */\n  setInert(root, inert) {\n    if (inert) {\n      if (this._inertRoots.has(root)) { // element is already inert\n        return;\n      }\n\n      const inertRoot = new InertRoot(root, this);\n      root.setAttribute('inert', '');\n      this._inertRoots.set(root, inertRoot);\n      // If not contained in the document, it must be in a shadowRoot.\n      // Ensure inert styles are added there.\n      if (!this._document.body.contains(root)) {\n        let parent = root.parentNode;\n        while (parent) {\n          if (parent.nodeType === 11) {\n            addInertStyle(parent);\n          }\n          parent = parent.parentNode;\n        }\n      }\n    } else {\n      if (!this._inertRoots.has(root)) { // element is already non-inert\n        return;\n      }\n\n      const inertRoot = this._inertRoots.get(root);\n      inertRoot.destructor();\n      this._inertRoots.delete(root);\n      root.removeAttribute('inert');\n    }\n  }\n\n  /**\n   * Get the InertRoot object corresponding to the given inert root element, if any.\n   * @param {!Node} element\n   * @return {!InertRoot|undefined}\n   */\n  getInertRoot(element) {\n    return this._inertRoots.get(element);\n  }\n\n  /**\n   * Register the given InertRoot as managing the given node.\n   * In the case where the node has a previously existing inert root, this inert root will\n   * be added to its set of inert roots.\n   * @param {!Node} node\n   * @param {!InertRoot} inertRoot\n   * @return {!InertNode} inertNode\n   */\n  register(node, inertRoot) {\n    let inertNode = this._managedNodes.get(node);\n    if (inertNode !== undefined) { // node was already in an inert subtree\n      inertNode.addInertRoot(inertRoot);\n    } else {\n      inertNode = new InertNode(node, inertRoot);\n    }\n\n    this._managedNodes.set(node, inertNode);\n\n    return inertNode;\n  }\n\n  /**\n   * De-register the given InertRoot as managing the given inert node.\n   * Removes the inert root from the InertNode's set of managing inert roots, and remove the inert\n   * node from the InertManager's set of managed nodes if it is destroyed.\n   * If the node is not currently managed, this is essentially a no-op.\n   * @param {!Node} node\n   * @param {!InertRoot} inertRoot\n   * @return {?InertNode} The potentially destroyed InertNode associated with this node, if any.\n   */\n  deregister(node, inertRoot) {\n    const inertNode = this._managedNodes.get(node);\n    if (!inertNode) {\n      return null;\n    }\n\n    inertNode.removeInertRoot(inertRoot);\n    if (inertNode.destroyed) {\n      this._managedNodes.delete(node);\n    }\n\n    return inertNode;\n  }\n\n  /**\n   * Callback used when document has finished loading.\n   */\n  _onDocumentLoaded() {\n    // Find all inert roots in document and make them actually inert.\n    const inertElements = slice.call(this._document.querySelectorAll('[inert]'));\n    inertElements.forEach(function(inertElement) {\n      this.setInert(inertElement, true);\n    }, this);\n\n    // Comment this out to use programmatic API only.\n    this._observer.observe(this._document.body, {attributes: true, subtree: true, childList: true});\n  }\n\n  /**\n   * Callback used when mutation observer detects attribute changes.\n   * @param {!Array<!MutationRecord>} records\n   * @param {!MutationObserver} self\n   */\n  _watchForInert(records, self) {\n    const _this = this;\n    records.forEach(function(record) {\n      switch (record.type) {\n      case 'childList':\n        slice.call(record.addedNodes).forEach(function(node) {\n          if (node.nodeType !== Node.ELEMENT_NODE) {\n            return;\n          }\n          const inertElements = slice.call(node.querySelectorAll('[inert]'));\n          if (matches.call(node, '[inert]')) {\n            inertElements.unshift(node);\n          }\n          inertElements.forEach(function(inertElement) {\n            this.setInert(inertElement, true);\n          }, _this);\n        }, _this);\n        break;\n      case 'attributes':\n        if (record.attributeName !== 'inert') {\n          return;\n        }\n        const target = /** @type {!Element} */ (record.target);\n        const inert = target.hasAttribute('inert');\n        _this.setInert(target, inert);\n        break;\n      }\n    }, this);\n  }\n}\n\n/**\n * Recursively walk the composed tree from |node|.\n * @param {!Node} node\n * @param {(function (!Element))=} callback Callback to be called for each element traversed,\n *     before descending into child nodes.\n * @param {?ShadowRoot=} shadowRootAncestor The nearest ShadowRoot ancestor, if any.\n */\nfunction composedTreeWalk(node, callback, shadowRootAncestor) {\n  if (node.nodeType == Node.ELEMENT_NODE) {\n    const element = /** @type {!Element} */ (node);\n    if (callback) {\n      callback(element);\n    }\n\n    // Descend into node:\n    // If it has a ShadowRoot, ignore all child elements - these will be picked\n    // up by the <content> or <shadow> elements. Descend straight into the\n    // ShadowRoot.\n    const shadowRoot = /** @type {!HTMLElement} */ (element).shadowRoot;\n    if (shadowRoot) {\n      composedTreeWalk(shadowRoot, callback, shadowRoot);\n      return;\n    }\n\n    // If it is a <content> element, descend into distributed elements - these\n    // are elements from outside the shadow root which are rendered inside the\n    // shadow DOM.\n    if (element.localName == 'content') {\n      const content = /** @type {!HTMLContentElement} */ (element);\n      // Verifies if ShadowDom v0 is supported.\n      const distributedNodes = content.getDistributedNodes ?\n        content.getDistributedNodes() : [];\n      for (let i = 0; i < distributedNodes.length; i++) {\n        composedTreeWalk(distributedNodes[i], callback, shadowRootAncestor);\n      }\n      return;\n    }\n\n    // If it is a <slot> element, descend into assigned nodes - these\n    // are elements from outside the shadow root which are rendered inside the\n    // shadow DOM.\n    if (element.localName == 'slot') {\n      const slot = /** @type {!HTMLSlotElement} */ (element);\n      // Verify if ShadowDom v1 is supported.\n      const distributedNodes = slot.assignedNodes ?\n        slot.assignedNodes({flatten: true}) : [];\n      for (let i = 0; i < distributedNodes.length; i++) {\n        composedTreeWalk(distributedNodes[i], callback, shadowRootAncestor);\n      }\n      return;\n    }\n  }\n\n  // If it is neither the parent of a ShadowRoot, a <content> element, a <slot>\n  // element, nor a <shadow> element recurse normally.\n  let child = node.firstChild;\n  while (child != null) {\n    composedTreeWalk(child, callback, shadowRootAncestor);\n    child = child.nextSibling;\n  }\n}\n\n/**\n * Adds a style element to the node containing the inert specific styles\n * @param {!Node} node\n */\nfunction addInertStyle(node) {\n  if (node.querySelector('style#inert-style')) {\n    return;\n  }\n  const style = document.createElement('style');\n  style.setAttribute('id', 'inert-style');\n  style.textContent = '\\n'+\n                      '[inert] {\\n' +\n                      '  pointer-events: none;\\n' +\n                      '  cursor: default;\\n' +\n                      '}\\n' +\n                      '\\n' +\n                      '[inert], [inert] * {\\n' +\n                      '  user-select: none;\\n' +\n                      '  -webkit-user-select: none;\\n' +\n                      '  -moz-user-select: none;\\n' +\n                      '  -ms-user-select: none;\\n' +\n                      '}\\n';\n  node.appendChild(style);\n}\n\n/** @type {!InertManager} */\nconst inertManager = new InertManager(document);\n\nif (!Element.prototype.hasOwnProperty('inert')) {\n  Object.defineProperty(Element.prototype, 'inert', {\n    enumerable: true,\n    /** @this {!Element} */\n    get: function() {\n      return this.hasAttribute('inert');\n    },\n    /** @this {!Element} */\n    set: function(inert) {\n      inertManager.setInert(this, inert);\n    },\n  });\n}\n","/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * Stores result from applyPassive to avoid redundant processing to detect\n * passive event listener support.\n */\nvar supportsPassive_;\n/**\n * Determine whether the current browser supports passive event listeners, and\n * if so, use them.\n */\nexport function applyPassive(globalObj, forceRefresh) {\n    if (globalObj === void 0) { globalObj = window; }\n    if (forceRefresh === void 0) { forceRefresh = false; }\n    if (supportsPassive_ === undefined || forceRefresh) {\n        var isSupported_1 = false;\n        try {\n            globalObj.document.addEventListener('test', function () { return undefined; }, {\n                get passive() {\n                    isSupported_1 = true;\n                    return isSupported_1;\n                },\n            });\n        }\n        catch (e) {\n        } // tslint:disable-line:no-empty cannot throw error due to tests. tslint also disables console.log.\n        supportsPassive_ = isSupported_1;\n    }\n    return supportsPassive_ ? { passive: true } : false;\n}\n//# sourceMappingURL=events.js.map","/**\n * @license\n * Copyright 2016 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nexport var cssClasses = {\n    CLOSING: 'mdc-dialog--closing',\n    OPEN: 'mdc-dialog--open',\n    OPENING: 'mdc-dialog--opening',\n    SCROLLABLE: 'mdc-dialog--scrollable',\n    SCROLL_LOCK: 'mdc-dialog-scroll-lock',\n    STACKED: 'mdc-dialog--stacked',\n};\nexport var strings = {\n    ACTION_ATTRIBUTE: 'data-mdc-dialog-action',\n    BUTTON_DEFAULT_ATTRIBUTE: 'data-mdc-dialog-button-default',\n    BUTTON_SELECTOR: '.mdc-dialog__button',\n    CLOSED_EVENT: 'MDCDialog:closed',\n    CLOSE_ACTION: 'close',\n    CLOSING_EVENT: 'MDCDialog:closing',\n    CONTAINER_SELECTOR: '.mdc-dialog__container',\n    CONTENT_SELECTOR: '.mdc-dialog__content',\n    DESTROY_ACTION: 'destroy',\n    INITIAL_FOCUS_ATTRIBUTE: 'data-mdc-dialog-initial-focus',\n    OPENED_EVENT: 'MDCDialog:opened',\n    OPENING_EVENT: 'MDCDialog:opening',\n    SCRIM_SELECTOR: '.mdc-dialog__scrim',\n    SUPPRESS_DEFAULT_PRESS_SELECTOR: [\n        'textarea',\n        '.mdc-menu .mdc-list-item',\n    ].join(', '),\n    SURFACE_SELECTOR: '.mdc-dialog__surface',\n};\nexport var numbers = {\n    DIALOG_ANIMATION_CLOSE_TIME_MS: 75,\n    DIALOG_ANIMATION_OPEN_TIME_MS: 150,\n};\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nvar MDCDialogFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCDialogFoundation, _super);\n    function MDCDialogFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCDialogFoundation.defaultAdapter, adapter)) || this;\n        _this.isOpen_ = false;\n        _this.animationFrame_ = 0;\n        _this.animationTimer_ = 0;\n        _this.layoutFrame_ = 0;\n        _this.escapeKeyAction_ = strings.CLOSE_ACTION;\n        _this.scrimClickAction_ = strings.CLOSE_ACTION;\n        _this.autoStackButtons_ = true;\n        _this.areButtonsStacked_ = false;\n        return _this;\n    }\n    Object.defineProperty(MDCDialogFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCDialogFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCDialogFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCDialogFoundation, \"defaultAdapter\", {\n        get: function () {\n            return {\n                addBodyClass: function () { return undefined; },\n                addClass: function () { return undefined; },\n                areButtonsStacked: function () { return false; },\n                clickDefaultButton: function () { return undefined; },\n                eventTargetMatches: function () { return false; },\n                getActionFromEvent: function () { return ''; },\n                getInitialFocusEl: function () { return null; },\n                hasClass: function () { return false; },\n                isContentScrollable: function () { return false; },\n                notifyClosed: function () { return undefined; },\n                notifyClosing: function () { return undefined; },\n                notifyOpened: function () { return undefined; },\n                notifyOpening: function () { return undefined; },\n                releaseFocus: function () { return undefined; },\n                removeBodyClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                reverseButtons: function () { return undefined; },\n                trapFocus: function () { return undefined; },\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCDialogFoundation.prototype.init = function () {\n        if (this.adapter_.hasClass(cssClasses.STACKED)) {\n            this.setAutoStackButtons(false);\n        }\n    };\n    MDCDialogFoundation.prototype.destroy = function () {\n        if (this.isOpen_) {\n            this.close(strings.DESTROY_ACTION);\n        }\n        if (this.animationTimer_) {\n            clearTimeout(this.animationTimer_);\n            this.handleAnimationTimerEnd_();\n        }\n        if (this.layoutFrame_) {\n            cancelAnimationFrame(this.layoutFrame_);\n            this.layoutFrame_ = 0;\n        }\n    };\n    MDCDialogFoundation.prototype.open = function () {\n        var _this = this;\n        this.isOpen_ = true;\n        this.adapter_.notifyOpening();\n        this.adapter_.addClass(cssClasses.OPENING);\n        // Wait a frame once display is no longer \"none\", to establish basis for animation\n        this.runNextAnimationFrame_(function () {\n            _this.adapter_.addClass(cssClasses.OPEN);\n            _this.adapter_.addBodyClass(cssClasses.SCROLL_LOCK);\n            _this.layout();\n            _this.animationTimer_ = setTimeout(function () {\n                _this.handleAnimationTimerEnd_();\n                _this.adapter_.trapFocus(_this.adapter_.getInitialFocusEl());\n                _this.adapter_.notifyOpened();\n            }, numbers.DIALOG_ANIMATION_OPEN_TIME_MS);\n        });\n    };\n    MDCDialogFoundation.prototype.close = function (action) {\n        var _this = this;\n        if (action === void 0) { action = ''; }\n        if (!this.isOpen_) {\n            // Avoid redundant close calls (and events), e.g. from keydown on elements that inherently emit click\n            return;\n        }\n        this.isOpen_ = false;\n        this.adapter_.notifyClosing(action);\n        this.adapter_.addClass(cssClasses.CLOSING);\n        this.adapter_.removeClass(cssClasses.OPEN);\n        this.adapter_.removeBodyClass(cssClasses.SCROLL_LOCK);\n        cancelAnimationFrame(this.animationFrame_);\n        this.animationFrame_ = 0;\n        clearTimeout(this.animationTimer_);\n        this.animationTimer_ = setTimeout(function () {\n            _this.adapter_.releaseFocus();\n            _this.handleAnimationTimerEnd_();\n            _this.adapter_.notifyClosed(action);\n        }, numbers.DIALOG_ANIMATION_CLOSE_TIME_MS);\n    };\n    MDCDialogFoundation.prototype.isOpen = function () {\n        return this.isOpen_;\n    };\n    MDCDialogFoundation.prototype.getEscapeKeyAction = function () {\n        return this.escapeKeyAction_;\n    };\n    MDCDialogFoundation.prototype.setEscapeKeyAction = function (action) {\n        this.escapeKeyAction_ = action;\n    };\n    MDCDialogFoundation.prototype.getScrimClickAction = function () {\n        return this.scrimClickAction_;\n    };\n    MDCDialogFoundation.prototype.setScrimClickAction = function (action) {\n        this.scrimClickAction_ = action;\n    };\n    MDCDialogFoundation.prototype.getAutoStackButtons = function () {\n        return this.autoStackButtons_;\n    };\n    MDCDialogFoundation.prototype.setAutoStackButtons = function (autoStack) {\n        this.autoStackButtons_ = autoStack;\n    };\n    MDCDialogFoundation.prototype.layout = function () {\n        var _this = this;\n        if (this.layoutFrame_) {\n            cancelAnimationFrame(this.layoutFrame_);\n        }\n        this.layoutFrame_ = requestAnimationFrame(function () {\n            _this.layoutInternal_();\n            _this.layoutFrame_ = 0;\n        });\n    };\n    /** Handles click on the dialog root element. */\n    MDCDialogFoundation.prototype.handleClick = function (evt) {\n        var isScrim = this.adapter_.eventTargetMatches(evt.target, strings.SCRIM_SELECTOR);\n        // Check for scrim click first since it doesn't require querying ancestors.\n        if (isScrim && this.scrimClickAction_ !== '') {\n            this.close(this.scrimClickAction_);\n        }\n        else {\n            var action = this.adapter_.getActionFromEvent(evt);\n            if (action) {\n                this.close(action);\n            }\n        }\n    };\n    /** Handles keydown on the dialog root element. */\n    MDCDialogFoundation.prototype.handleKeydown = function (evt) {\n        var isEnter = evt.key === 'Enter' || evt.keyCode === 13;\n        if (!isEnter) {\n            return;\n        }\n        var action = this.adapter_.getActionFromEvent(evt);\n        if (action) {\n            // Action button callback is handled in `handleClick`,\n            // since space/enter keydowns on buttons trigger click events.\n            return;\n        }\n        var isDefault = !this.adapter_.eventTargetMatches(evt.target, strings.SUPPRESS_DEFAULT_PRESS_SELECTOR);\n        if (isEnter && isDefault) {\n            this.adapter_.clickDefaultButton();\n        }\n    };\n    /** Handles keydown on the document. */\n    MDCDialogFoundation.prototype.handleDocumentKeydown = function (evt) {\n        var isEscape = evt.key === 'Escape' || evt.keyCode === 27;\n        if (isEscape && this.escapeKeyAction_ !== '') {\n            this.close(this.escapeKeyAction_);\n        }\n    };\n    MDCDialogFoundation.prototype.layoutInternal_ = function () {\n        if (this.autoStackButtons_) {\n            this.detectStackedButtons_();\n        }\n        this.detectScrollableContent_();\n    };\n    MDCDialogFoundation.prototype.handleAnimationTimerEnd_ = function () {\n        this.animationTimer_ = 0;\n        this.adapter_.removeClass(cssClasses.OPENING);\n        this.adapter_.removeClass(cssClasses.CLOSING);\n    };\n    /**\n     * Runs the given logic on the next animation frame, using setTimeout to factor in Firefox reflow behavior.\n     */\n    MDCDialogFoundation.prototype.runNextAnimationFrame_ = function (callback) {\n        var _this = this;\n        cancelAnimationFrame(this.animationFrame_);\n        this.animationFrame_ = requestAnimationFrame(function () {\n            _this.animationFrame_ = 0;\n            clearTimeout(_this.animationTimer_);\n            _this.animationTimer_ = setTimeout(callback, 0);\n        });\n    };\n    MDCDialogFoundation.prototype.detectStackedButtons_ = function () {\n        // Remove the class first to let us measure the buttons' natural positions.\n        this.adapter_.removeClass(cssClasses.STACKED);\n        var areButtonsStacked = this.adapter_.areButtonsStacked();\n        if (areButtonsStacked) {\n            this.adapter_.addClass(cssClasses.STACKED);\n        }\n        if (areButtonsStacked !== this.areButtonsStacked_) {\n            this.adapter_.reverseButtons();\n            this.areButtonsStacked_ = areButtonsStacked;\n        }\n    };\n    MDCDialogFoundation.prototype.detectScrollableContent_ = function () {\n        // Remove the class first to let us measure the natural height of the content.\n        this.adapter_.removeClass(cssClasses.SCROLLABLE);\n        if (this.adapter_.isContentScrollable()) {\n            this.adapter_.addClass(cssClasses.SCROLLABLE);\n        }\n    };\n    return MDCDialogFoundation;\n}(MDCFoundation));\nexport { MDCDialogFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCDialogFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * @fileoverview A \"ponyfill\" is a polyfill that doesn't modify the global prototype chain.\n * This makes ponyfills safer than traditional polyfills, especially for libraries like MDC.\n */\nexport function closest(element, selector) {\n    if (element.closest) {\n        return element.closest(selector);\n    }\n    var el = element;\n    while (el) {\n        if (matches(el, selector)) {\n            return el;\n        }\n        el = el.parentElement;\n    }\n    return null;\n}\nexport function matches(element, selector) {\n    var nativeMatches = element.matches\n        || element.webkitMatchesSelector\n        || element.msMatchesSelector;\n    return nativeMatches.call(element, selector);\n}\n//# sourceMappingURL=ponyfill.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<object, true>();\n\n// tslint:disable-next-line:no-any\nexport type DirectiveFactory = (...args: any[]) => object;\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = <F extends DirectiveFactory>(f: F): F =>\n    ((...args: unknown[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as F;\n\nexport const isDirective = (o: unknown): o is DirectiveFn => {\n  return typeof o === 'function' && directives.has(o);\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\ninterface MaybePolyfilledCe extends CustomElementRegistry {\n  readonly polyfillWrapFlushCallback?: object;\n}\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = window.customElements !== undefined &&\n    (window.customElements as MaybePolyfilledCe).polyfillWrapFlushCallback !==\n        undefined;\n\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.insertBefore(start!, before);\n        start = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes =\n    (container: Node, start: Node|null, end: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.removeChild(start!);\n        start = n;\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  readonly value: unknown;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: unknown): void;\n\n  /**\n   * Commits the current part value, causing it to actually be written to the\n   * DOM.\n   *\n   * Directives are run at the start of `commit`, so that if they call\n   * `part.setValue(...)` synchronously that value will be used in the current\n   * commit, and there's no need to call `part.commit()` within the directive.\n   * If directives set a part value asynchronously, then they must call\n   * `part.commit()` manually.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updateable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  readonly parts: TemplatePart[] = [];\n  readonly element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n\n    const nodesToRemove: Node[] = [];\n    const stack: Node[] = [];\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        element.content,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    // Keeps track of the last index associated with a part. We try to delete\n    // unnecessary nodes, but we never want to associate two different parts\n    // to the same index. They must have a constant node between.\n    let lastPartIndex = 0;\n    let index = -1;\n    let partIndex = 0;\n    const {strings, values: {length}} = result;\n    while (partIndex < length) {\n      const node = walker.nextNode() as Element | Comment | Text | null;\n      if (node === null) {\n        // We've exhausted the content inside a nested template element.\n        // Because we still have parts (the outer for-loop), we know:\n        // - There is a template in the stack\n        // - The walker will find a nextNode outside the template\n        walker.currentNode = stack.pop()!;\n        continue;\n      }\n      index++;\n\n      if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n        if ((node as Element).hasAttributes()) {\n          const attributes = (node as Element).attributes;\n          const {length} = attributes;\n          // Per\n          // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n          // attributes are not guaranteed to be returned in document order.\n          // In particular, Edge/IE can return them out of order, so we cannot\n          // assume a correspondence between part index and attribute index.\n          let count = 0;\n          for (let i = 0; i < length; i++) {\n            if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n              count++;\n            }\n          }\n          while (count-- > 0) {\n            // Get the template literal section leading up to the first\n            // expression in this attribute\n            const stringForPart = strings[partIndex];\n            // Find the attribute name\n            const name = lastAttributeNameRegex.exec(stringForPart)![2];\n            // Find the corresponding attribute\n            // All bound attributes have had a suffix added in\n            // TemplateResult#getHTML to opt out of special attribute\n            // handling. To look up the attribute value we also need to add\n            // the suffix.\n            const attributeLookupName =\n                name.toLowerCase() + boundAttributeSuffix;\n            const attributeValue =\n                (node as Element).getAttribute(attributeLookupName)!;\n            (node as Element).removeAttribute(attributeLookupName);\n            const statics = attributeValue.split(markerRegex);\n            this.parts.push({type: 'attribute', index, name, strings: statics});\n            partIndex += statics.length - 1;\n          }\n        }\n        if ((node as Element).tagName === 'TEMPLATE') {\n          stack.push(node);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n      } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n        const data = (node as Text).data;\n        if (data.indexOf(marker) >= 0) {\n          const parent = node.parentNode!;\n          const strings = data.split(markerRegex);\n          const lastIndex = strings.length - 1;\n          // Generate a new text node for each literal section\n          // These nodes are also used as the markers for node parts\n          for (let i = 0; i < lastIndex; i++) {\n            let insert: Node;\n            let s = strings[i];\n            if (s === '') {\n              insert = createMarker();\n            } else {\n              const match = lastAttributeNameRegex.exec(s);\n              if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                s = s.slice(0, match.index) + match[1] +\n                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n              }\n              insert = document.createTextNode(s);\n            }\n            parent.insertBefore(insert, node);\n            this.parts.push({type: 'node', index: ++index});\n          }\n          // If there's no text, we must insert a comment to mark our place.\n          // Else, we can trust it will stick around after cloning.\n          if (strings[lastIndex] === '') {\n            parent.insertBefore(createMarker(), node);\n            nodesToRemove.push(node);\n          } else {\n            (node as Text).data = strings[lastIndex];\n          }\n          // We have a part for each match found\n          partIndex += lastIndex;\n        }\n      } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n        if ((node as Comment).data === marker) {\n          const parent = node.parentNode!;\n          // Add a new marker node to be the startNode of the Part if any of\n          // the following are true:\n          //  * We don't have a previousSibling\n          //  * The previousSibling is already the start of a previous part\n          if (node.previousSibling === null || index === lastPartIndex) {\n            index++;\n            parent.insertBefore(createMarker(), node);\n          }\n          lastPartIndex = index;\n          this.parts.push({type: 'node', index});\n          // If we don't have a nextSibling, keep this node so we have an end.\n          // Else, we can remove it to save future costs.\n          if (node.nextSibling === null) {\n            (node as Comment).data = '';\n          } else {\n            nodesToRemove.push(node);\n            index--;\n          }\n          partIndex++;\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            // TODO (justinfagnani): consider whether it's even worth it to\n            // make bindings in comments work\n            this.parts.push({type: 'node', index: -1});\n            partIndex++;\n          }\n        }\n      }\n    }\n\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\nconst endsWith = (str: string, suffix: string): boolean => {\n  const index = str.length - suffix.length;\n  return index >= 0 && str.slice(index) === suffix;\n};\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  readonly type: 'node',\n  index: number\n}|{readonly type: 'attribute', index: number, readonly name: string, readonly strings: ReadonlyArray<string>};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  private readonly __parts: Array<Part|undefined> = [];\n  readonly processor: TemplateProcessor;\n  readonly options: RenderOptions;\n  readonly template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: ReadonlyArray<unknown>) {\n    let i = 0;\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // There are a number of steps in the lifecycle of a template instance's\n    // DOM fragment:\n    //  1. Clone - create the instance fragment\n    //  2. Adopt - adopt into the main document\n    //  3. Process - find part markers and create parts\n    //  4. Upgrade - upgrade custom elements\n    //  5. Update - set node, attribute, property, etc., values\n    //  6. Connect - connect to the document. Optional and outside of this\n    //     method.\n    //\n    // We have a few constraints on the ordering of these steps:\n    //  * We need to upgrade before updating, so that property values will pass\n    //    through any property setters.\n    //  * We would like to process before upgrading so that we're sure that the\n    //    cloned fragment is inert and not disturbed by self-modifying DOM.\n    //  * We want custom elements to upgrade even in disconnected fragments.\n    //\n    // Given these constraints, with full custom elements support we would\n    // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n    //\n    // But Safari dooes not implement CustomElementRegistry#upgrade, so we\n    // can not implement that order and still have upgrade-before-update and\n    // upgrade disconnected fragments. So we instead sacrifice the\n    // process-before-upgrade constraint, since in Custom Elements v1 elements\n    // must not modify their light DOM in the constructor. We still have issues\n    // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n    // that don't strictly adhere to the no-modification rule because shadow\n    // DOM, which may be created in the constructor, is emulated by being placed\n    // in the light DOM.\n    //\n    // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n    // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n    // in one step.\n    //\n    // The Custom Elements v1 polyfill supports upgrade(), so the order when\n    // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n    // Connect.\n\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const stack: Node[] = [];\n    const parts = this.template.parts;\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        fragment,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    let partIndex = 0;\n    let nodeIndex = 0;\n    let part: TemplatePart;\n    let node = walker.nextNode();\n    // Loop through all the nodes and parts of a template\n    while (partIndex < parts.length) {\n      part = parts[partIndex];\n      if (!isTemplatePartActive(part)) {\n        this.__parts.push(undefined);\n        partIndex++;\n        continue;\n      }\n\n      // Progress the tree walker until we find our next part's node.\n      // Note that multiple parts may share the same node (attribute parts\n      // on a single element), so this loop may not run at all.\n      while (nodeIndex < part.index) {\n        nodeIndex++;\n        if (node!.nodeName === 'TEMPLATE') {\n          stack.push(node!);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n        if ((node = walker.nextNode()) === null) {\n          // We've exhausted the content inside a nested template element.\n          // Because we still have parts (the outer for-loop), we know:\n          // - There is a template in the stack\n          // - The walker will find a nextNode outside the template\n          walker.currentNode = stack.pop()!;\n          node = walker.nextNode();\n        }\n      }\n\n      // We've arrived at our part's node.\n      if (part.type === 'node') {\n        const part = this.processor.handleTextExpression(this.options);\n        part.insertAfterNode(node!.previousSibling!);\n        this.__parts.push(part);\n      } else {\n        this.__parts.push(...this.processor.handleAttributeExpressions(\n            node as Element, part.name, part.strings, this.options));\n      }\n      partIndex++;\n    }\n\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\nconst commentMarker = ` ${marker} `;\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  readonly strings: TemplateStringsArray;\n  readonly values: ReadonlyArray<unknown>;\n  readonly type: string;\n  readonly processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: ReadonlyArray<unknown>,\n      type: string, processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const l = this.strings.length - 1;\n    let html = '';\n    let isCommentBinding = false;\n\n    for (let i = 0; i < l; i++) {\n      const s = this.strings[i];\n      // For each binding we want to determine the kind of marker to insert\n      // into the template source before it's parsed by the browser's HTML\n      // parser. The marker type is based on whether the expression is in an\n      // attribute, text, or comment poisition.\n      //   * For node-position bindings we insert a comment with the marker\n      //     sentinel as its text content, like <!--{{lit-guid}}-->.\n      //   * For attribute bindings we insert just the marker sentinel for the\n      //     first binding, so that we support unquoted attribute bindings.\n      //     Subsequent bindings can use a comment marker because multi-binding\n      //     attributes must be quoted.\n      //   * For comment bindings we insert just the marker sentinel so we don't\n      //     close the comment.\n      //\n      // The following code scans the template source, but is *not* an HTML\n      // parser. We don't need to track the tree structure of the HTML, only\n      // whether a binding is inside a comment, and if not, if it appears to be\n      // the first binding in an attribute.\n      const commentOpen = s.lastIndexOf('<!--');\n      // We're in comment position if we have a comment open with no following\n      // comment close. Because <-- can appear in an attribute value there can\n      // be false positives.\n      isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n          s.indexOf('-->', commentOpen + 1) === -1;\n      // Check to see if we have an attribute-like sequence preceeding the\n      // expression. This can match \"name=value\" like structures in text,\n      // comments, and attribute values, so there can be false-positives.\n      const attributeMatch = lastAttributeNameRegex.exec(s);\n      if (attributeMatch === null) {\n        // We're only in this branch if we don't have a attribute-like\n        // preceeding sequence. For comments, this guards against unusual\n        // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n        // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n        // below.\n        html += s + (isCommentBinding ? commentMarker : nodeMarker);\n      } else {\n        // For attributes we use just a marker sentinel, and also append a\n        // $lit$ suffix to the name to opt-out of attribute-specific parsing\n        // that IE and Edge do for style and certain SVG attributes.\n        html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n            attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n            marker;\n      }\n    }\n    html += this.strings[l];\n    return html;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = this.getHTML();\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\nexport type Primitive = null|undefined|boolean|number|string|Symbol|bigint;\nexport const isPrimitive = (value: unknown): value is Primitive => {\n  return (\n      value === null ||\n      !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value: unknown): value is Iterable<unknown> => {\n  return Array.isArray(value) ||\n      // tslint:disable-next-line:no-any\n      !!(value && (value as any)[Symbol.iterator]);\n};\n\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attibute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  readonly parts: ReadonlyArray<AttributePart>;\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      (this.parts as AttributePart[])[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): unknown {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = this.parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (isPrimitive(v) || !isIterable(v)) {\n          text += typeof v === 'string' ? v : String(v);\n        } else {\n          for (const t of v) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue() as string);\n    }\n  }\n}\n\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart implements Part {\n  readonly committer: AttributeCommitter;\n  value: unknown = undefined;\n\n  constructor(committer: AttributeCommitter) {\n    this.committer = committer;\n  }\n\n  setValue(value: unknown): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart implements Part {\n  readonly options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Appends this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n   * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n   * such as those that appear in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part.__insert(this.startNode = createMarker());\n    part.__insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref.__insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    const value = this.__pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this.__commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this.__commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this.__commitNode(value);\n    } else if (isIterable(value)) {\n      this.__commitIterable(value);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this.__commitText(value);\n    }\n  }\n\n  private __insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private __commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this.__insert(value);\n    this.value = value;\n  }\n\n  private __commitText(value: unknown): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    // If `value` isn't already a string, we explicitly convert it here in case\n    // it can't be implicitly converted - i.e. it's a symbol.\n    const valueAsString: string =\n        typeof value === 'string' ? value : String(value);\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = valueAsString;\n    } else {\n      this.__commitNode(document.createTextNode(valueAsString));\n    }\n    this.value = value;\n  }\n\n  private __commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value instanceof TemplateInstance &&\n        this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this.__commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private __commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n    const value = !!this.__pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n      this.value = value;\n    }\n    this.__pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  readonly single: boolean;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  protected _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      // tslint:disable-next-line:no-any\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the thrid\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\ntry {\n  const options = {\n    get capture() {\n      eventOptionsSupported = true;\n      return false;\n    }\n  };\n  // tslint:disable-next-line:no-any\n  window.addEventListener('test', options as any, options);\n  // tslint:disable-next-line:no-any\n  window.removeEventListener('test', options as any, options);\n} catch (_e) {\n}\n\n\ntype EventHandlerWithOptions =\n    EventListenerOrEventListenerObject&Partial<AddEventListenerOptions>;\nexport class EventPart implements Part {\n  readonly element: Element;\n  readonly eventName: string;\n  readonly eventContext?: EventTarget;\n  value: undefined|EventHandlerWithOptions = undefined;\n  private __options?: AddEventListenerOptions;\n  private __pendingValue: undefined|EventHandlerWithOptions = undefined;\n  private readonly __boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this.__boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: undefined|EventHandlerWithOptions): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange as EventHandlerWithOptions;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this.__pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    if (shouldAddListener) {\n      this.__options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    this.value = newListener;\n    this.__pendingValue = noChange as EventHandlerWithOptions;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      (this.value as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: AddEventListenerOptions|undefined) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture as AddEventListenerOptions);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): ReadonlyArray<Part> {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const committer = new PropertyCommitter(element, name.slice(1), strings);\n      return committer.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const committer = new AttributeCommitter(element, name, strings);\n    return committer.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behaviour, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport type templateCache = {\n  readonly stringsArray: WeakMap<TemplateStringsArray, Template>; //\n  readonly keyString: Map<string, Template>;\n};\n\nexport const templateCaches = new Map<string, templateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\ndeclare global {\n  interface Window {\n    litHtmlVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.1.2');\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {AttributePart, directive, Part, PropertyPart} from '../lit-html.js';\n\n\nexport interface ClassInfo {\n  readonly [name: string]: string|boolean|number;\n}\n\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst classMapCache = new WeakMap();\n\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `classList` if the property value is truthy; if the property value\n * is falsey, the property name is removed from the element's `classList`. For\n * example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nexport const classMap = directive((classInfo: ClassInfo) => (part: Part) => {\n  if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n      part.committer.name !== 'class' || part.committer.parts.length > 1) {\n    throw new Error(\n        'The `classMap` directive must be used in the `class` attribute ' +\n        'and must be the only part in the attribute.');\n  }\n\n  const {committer} = part;\n  const {element} = committer;\n\n  // handle static classes\n  if (!classMapCache.has(part)) {\n    element.className = committer.strings.join(' ');\n  }\n\n  const {classList} = element;\n\n  // remove old classes that no longer apply\n  const oldInfo = classMapCache.get(part);\n  for (const name in oldInfo) {\n    if (!(name in classInfo)) {\n      classList.remove(name);\n    }\n  }\n\n  // add new classes\n  for (const name in classInfo) {\n    const value = classInfo[name];\n    if (!oldInfo || value !== oldInfo[name]) {\n      // We explicitly want a loose truthy check here because\n      // it seems more convenient that '' and 0 are skipped.\n      const method = value ? 'add' : 'remove';\n      classList[method](name);\n    }\n  }\n  classMapCache.set(part, classInfo);\n});\n","/**\n@license\nCopyright 2019 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport 'blocking-elements';\nimport 'wicg-inert';\n\nimport {MDCDialogAdapter} from '@material/dialog/adapter.js';\nimport {cssClasses} from '@material/dialog/constants.js';\nimport MDCDialogFoundation from '@material/dialog/foundation.js';\nimport {applyPassive} from '@material/dom/events';\nimport {closest, matches} from '@material/dom/ponyfill';\nimport {addHasRemoveClass, BaseElement, observer} from '@material/mwc-base/base-element.js';\nimport {DocumentWithBlockingElements} from 'blocking-elements';\nimport {html, property, query} from 'lit-element';\nimport {classMap} from 'lit-html/directives/class-map';\n\nexport {MDCDialogCloseEventDetail} from '@material/dialog/types';\n\nconst blockingElements =\n    (document as DocumentWithBlockingElements).$blockingElements;\n\nexport class DialogBase extends BaseElement {\n  @query('.mdc-dialog') protected mdcRoot!: HTMLDivElement;\n\n  // _actionItemsSlot should have type HTMLSlotElement, but when TypeScript's\n  // emitDecoratorMetadata is enabled, the HTMLSlotElement constructor will\n  // be emitted into the runtime, which will cause an \"HTMLSlotElement is\n  // undefined\" error in browsers that don't define it (e.g. Edge and IE11).\n  @query('slot[name=\"primaryAction\"]') protected primarySlot!: HTMLElement;\n\n  // _actionItemsSlot should have type HTMLSlotElement, but when TypeScript's\n  // emitDecoratorMetadata is enabled, the HTMLSlotElement constructor will\n  // be emitted into the runtime, which will cause an \"HTMLSlotElement is\n  // undefined\" error in browsers that don't define it (e.g. Edge and IE11).\n  @query('slot[name=\"secondaryAction\"]') protected secondarySlot!: HTMLElement;\n\n  @query('.mdc-dialog__content') protected contentElement!: HTMLDivElement;\n\n  @query('.mdc-container') protected conatinerElement!: HTMLDivElement;\n\n  @property({type: Boolean}) hideActions = false;\n\n  @property({type: Boolean})\n  @observer(function(this: DialogBase) {\n    this.forceLayout();\n  })\n  stacked = false;\n\n  @property({type: String}) title = '';\n\n  @property({type: String})\n  @observer(function(this: DialogBase, newAction: string) {\n    this.mdcFoundation.setScrimClickAction(newAction);\n  })\n  scrimClickAction = 'close';\n\n  @property({type: String})\n  @observer(function(this: DialogBase, newAction: string) {\n    this.mdcFoundation.setEscapeKeyAction(newAction);\n  })\n  escapeKeyAction = 'close';\n\n  @property({type: Boolean, reflect: true})\n  @observer(function(this: DialogBase, isOpen: boolean) {\n    if (isOpen) {\n      if (this.mdcFoundation) {\n        this.setEventListeners();\n\n        this.mdcFoundation.open();\n      }\n    } else {\n      if (this.mdcFoundation) {\n        this.removeEventListeners();\n        this.mdcFoundation.close(this.currentAction || this.defaultAction);\n        this.currentAction = undefined;\n      }\n    }\n  })\n  open = false;\n\n  @property() defaultAction = 'close';\n  @property() actionAttribute = 'dialogAction';\n  @property() initialFocusAttribute = 'dialogInitialFocus';\n\n  protected get primaryButton(): HTMLElement|null {\n    let assignedNodes = (this.primarySlot as HTMLSlotElement).assignedNodes();\n    assignedNodes = assignedNodes.filter((node) => node instanceof HTMLElement);\n    const button = assignedNodes[0] as HTMLElement | undefined;\n    return button ? button : null;\n  }\n\n  protected currentAction: string|undefined;\n  protected mdcFoundationClass = MDCDialogFoundation;\n  protected mdcFoundation!: MDCDialogFoundation;\n  protected boundLayout: (() => void)|null = null;\n  protected boundHandleClick: ((ev: MouseEvent) => void)|null = null;\n  protected boundHandleKeydown: ((ev: KeyboardEvent) => void)|null = null;\n  protected boundHandleDocumentKeydown:\n      ((ev: KeyboardEvent) => void)|null = null;\n\n  protected emitNotification(name: string, action?: string) {\n    const init: CustomEventInit = {detail: action ? {action} : {}};\n    const ev = new CustomEvent(name, init);\n    this.dispatchEvent(ev);\n  }\n\n  protected getInitialFocusEl(): HTMLElement|null {\n    return this.querySelector(`[${this.initialFocusAttribute}]`);\n  }\n\n  protected createAdapter(): MDCDialogAdapter {\n    return {\n      ...addHasRemoveClass(this.mdcRoot),\n      addBodyClass: () => document.body.style.overflow = 'hidden',\n      removeBodyClass: () => document.body.style.overflow = '',\n      areButtonsStacked: () => this.stacked,\n      clickDefaultButton: () => {\n        const primary = this.primaryButton;\n        if (primary) {\n          primary.click();\n        }\n      },\n      eventTargetMatches: (target, selector) =>\n          target ? matches(target as Element, selector) : false,\n      getActionFromEvent: (e: Event) => {\n        if (!e.target) {\n          return '';\n        }\n\n        const element =\n            closest(e.target as Element, `[${this.actionAttribute}]`);\n        const action = element && element.getAttribute(this.actionAttribute);\n        return action;\n      },\n      getInitialFocusEl: () => {\n        return this.getInitialFocusEl();\n      },\n      isContentScrollable: () => {\n        const el = this.contentElement;\n        return el ? el.scrollHeight > el.offsetHeight : false;\n      },\n      notifyClosed: (action) => this.emitNotification('closed', action),\n      notifyClosing: (action) => {\n        this.open = false;\n        this.emitNotification('closing', action);\n      },\n      notifyOpened: () => this.emitNotification('opened'),\n      notifyOpening: () => {\n        this.open = true;\n        this.emitNotification('opening');\n      },\n      reverseButtons: () => {},\n      releaseFocus: () => {\n        blockingElements.remove(this);\n      },\n      trapFocus: (el) => {\n        blockingElements.push(this);\n        if (el) {\n          el.focus();\n        }\n      },\n    };\n  }\n\n  protected render() {\n    const classes = {\n      [cssClasses.STACKED]: this.stacked,\n    };\n\n    let title = html``;\n\n    if (this.title) {\n      title = html`<h2 class=\"mdc-dialog__title\">${this.title}</h2>`;\n    }\n\n    const actionsClasses = {\n      'mdc-dialog__actions': !this.hideActions,\n    };\n\n    return html`\n    <div class=\"mdc-dialog ${classMap(classes)}\"\n        role=\"alertdialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"my-dialog-title\"\n        aria-describedby=\"my-dialog-content\">\n      <div class=\"mdc-dialog__container\">\n        <div class=\"mdc-dialog__surface\">\n          ${title}\n          <div class=\"mdc-dialog__content\">\n            <slot></slot>\n          </div>\n          <footer\n              id=\"actions\"\n              class=\"${classMap(actionsClasses)}\">\n            <span>\n              <slot name=\"secondaryAction\"></slot>\n            </span>\n            <span>\n             <slot name=\"primaryAction\"></slot>\n            </span>\n          </footer>\n        </div>\n      </div>\n      <div class=\"mdc-dialog__scrim\"></div>\n    </div>`;\n  }\n\n  firstUpdated() {\n    super.firstUpdated();\n    this.mdcFoundation.setAutoStackButtons(true);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListeners();\n  }\n\n  forceLayout() {\n    this.mdcFoundation.layout();\n  }\n\n  focus() {\n    const initialFocusEl = this.getInitialFocusEl();\n    initialFocusEl && initialFocusEl.focus();\n  }\n\n  blur() {\n    if (!this.shadowRoot) {\n      return;\n    }\n\n    const activeEl = this.shadowRoot.activeElement;\n    if (activeEl) {\n      if (activeEl instanceof HTMLElement) {\n        activeEl.blur();\n      }\n    } else {\n      const root = this.getRootNode();\n      const activeEl = root instanceof Document ? root.activeElement : null;\n      if (activeEl instanceof HTMLElement) {\n        activeEl.blur();\n      }\n    }\n  }\n\n  protected setEventListeners() {\n    this.boundHandleClick = this.mdcFoundation.handleClick.bind(\n                                this.mdcFoundation) as EventListener;\n    this.boundLayout = () => {\n      if (this.open) {\n        this.mdcFoundation.layout.bind(this.mdcFoundation);\n      }\n    };\n    this.boundHandleKeydown = this.mdcFoundation.handleKeydown.bind(\n                                  this.mdcFoundation) as EventListener;\n    this.boundHandleDocumentKeydown =\n        this.mdcFoundation.handleDocumentKeydown.bind(this.mdcFoundation) as\n        EventListener;\n\n    this.mdcRoot.addEventListener('click', this.boundHandleClick);\n    window.addEventListener('resize', this.boundLayout, applyPassive());\n    window.addEventListener(\n        'orientationchange', this.boundLayout, applyPassive());\n    this.addEventListener('keydown', this.boundHandleKeydown, applyPassive());\n    document.addEventListener(\n        'keydown', this.boundHandleDocumentKeydown, applyPassive());\n  }\n\n  protected removeEventListeners() {\n    if (this.boundHandleClick) {\n      this.mdcRoot.removeEventListener('click', this.boundHandleClick);\n    }\n\n    if (this.boundLayout) {\n      window.removeEventListener('resize', this.boundLayout);\n      window.removeEventListener('orientationchange', this.boundLayout);\n    }\n\n    if (this.boundHandleKeydown) {\n      this.mdcRoot.removeEventListener('keydown', this.boundHandleKeydown);\n    }\n\n    if (this.boundHandleDocumentKeydown) {\n      this.mdcRoot.removeEventListener(\n          'keydown', this.boundHandleDocumentKeydown);\n    }\n  }\n}\n","/**\n@license\nCopyright 2018 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {css} from 'lit-element';\n\nexport const style = css`.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:7}.mdc-dialog .mdc-dialog__surface{background-color:#fff;background-color:var(--mdc-theme-surface, #fff)}.mdc-dialog .mdc-dialog__scrim{background-color:rgba(0,0,0,.32)}.mdc-dialog .mdc-dialog__title{color:rgba(0,0,0,.87)}.mdc-dialog .mdc-dialog__content{color:rgba(0,0,0,.6)}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions{border-color:rgba(0,0,0,.12)}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog .mdc-dialog__surface{border-radius:4px}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{box-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0,0,0,.12);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog[dir=rtl] .mdc-dialog__surface,[dir=rtl] .mdc-dialog .mdc-dialog__surface{text-align:right}.mdc-dialog__title{display:block;margin-top:0;line-height:normal;font-family:Roboto, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1.25rem;line-height:2rem;font-weight:500;letter-spacing:.0125em;text-decoration:inherit;text-transform:inherit;display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0;padding:0 24px 9px;border-bottom:1px solid transparent}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:\"\";vertical-align:0}.mdc-dialog[dir=rtl] .mdc-dialog__title,[dir=rtl] .mdc-dialog .mdc-dialog__title{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{padding-bottom:15px}.mdc-dialog__content{font-family:Roboto, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.5rem;font-weight:400;letter-spacing:.03125em;text-decoration:inherit;text-transform:inherit;flex-grow:1;box-sizing:border-box;margin:0;padding:20px 24px;overflow:auto;-webkit-overflow-scrolling:touch}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid transparent}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-dialog[dir=rtl] .mdc-dialog__button,[dir=rtl] .mdc-dialog .mdc-dialog__button{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:scale(1)}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:scale(1);opacity:1}.mdc-dialog-scroll-lock{overflow:hidden}#actions:not(.mdc-dialog__actions){display:none}@media(min-width: 560px){.mdc-dialog .mdc-dialog__surface{max-width:560px;max-width:var(--mdc-dialog-max-width, 560px)}}.mdc-dialog .mdc-dialog__scrim{background-color:rgba(0,0,0,.32);background-color:var(--mdc-dialog-scrim-color, rgba(0, 0, 0, 0.32))}.mdc-dialog .mdc-dialog__title{color:rgba(0,0,0,.87);color:var(--mdc-dialog-title-ink-color, rgba(0, 0, 0, 0.87))}.mdc-dialog .mdc-dialog__content{color:rgba(0,0,0,.6);color:var(--mdc-dialog-content-ink-color, rgba(0, 0, 0, 0.6))}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions{border-color:rgba(0,0,0,.12);border-color:var(--mdc-dialog-scroll-divider-color, rgba(0, 0, 0, 0.12))}.mdc-dialog .mdc-dialog__surface{min-width:280px;min-width:var(--mdc-dialog-min-width, 280px)}.mdc-dialog .mdc-dialog__surface{max-height:var(--mdc-dialog-max-height, calc(100% - 32px));border-radius:4px;border-radius:var(--mdc-dialog-shape-radius, 4px)}#actions ::slotted(*){margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] #actions ::slotted(*),#actions ::slotted(*)[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog[dir=rtl] #actions ::slotted(*),[dir=rtl] .mdc-dialog #actions ::slotted(*){text-align:left}.mdc-dialog--stacked #actions{flex-direction:column-reverse}.mdc-dialog--stacked #actions *:not(:last-child) ::slotted(*){flex-basis:1e-9px;margin-top:12px}`;\n","/**\n@license\nCopyright 2019 Google Inc. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\nimport {customElement} from 'lit-element';\n\nimport {DialogBase} from './mwc-dialog-base.js';\nimport {style} from './mwc-dialog-css.js';\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'mwc-dialog': Dialog;\n  }\n}\n\n@customElement('mwc-dialog')\nexport class Dialog extends DialogBase {\n  static styles = style;\n}\n","import \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu-light\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport memoizeOne from \"memoize-one\";\nimport {\n  LitElement,\n  TemplateResult,\n  html,\n  css,\n  CSSResult,\n  property,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../types\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { User, fetchUsers } from \"../../data/user\";\nimport { compare } from \"../../common/string/compare\";\n\nclass HaUserPicker extends LitElement {\n  public hass?: HomeAssistant;\n  @property() public label?: string;\n  @property() public value?: string;\n  @property() public users?: User[];\n\n  private _sortedUsers = memoizeOne((users?: User[]) => {\n    if (!users) {\n      return [];\n    }\n\n    return users\n      .filter((user) => !user.system_generated)\n      .sort((a, b) => compare(a.name, b.name));\n  });\n\n  protected render(): TemplateResult | void {\n    return html`\n      <paper-dropdown-menu-light .label=${this.label}>\n        <paper-listbox\n          slot=\"dropdown-content\"\n          .selected=${this._value}\n          attr-for-selected=\"data-user-id\"\n          @iron-select=${this._userChanged}\n        >\n          <paper-icon-item data-user-id=\"\">\n            No user\n          </paper-icon-item>\n          ${this._sortedUsers(this.users).map(\n            (user) => html`\n              <paper-icon-item data-user-id=${user.id}>\n                <ha-user-badge .user=${user} slot=\"item-icon\"></ha-user-badge>\n                ${user.name}\n              </paper-icon-item>\n            `\n          )}\n        </paper-listbox>\n      </paper-dropdown-menu-light>\n    `;\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    if (this.users === undefined) {\n      fetchUsers(this.hass!).then((users) => {\n        this.users = users;\n      });\n    }\n  }\n\n  private _userChanged(ev) {\n    const newValue = ev.detail.item.dataset.userId;\n\n    if (newValue !== this._value) {\n      this.value = ev.detail.value;\n      setTimeout(() => {\n        fireEvent(this, \"value-changed\", { value: newValue });\n        fireEvent(this, \"change\");\n      }, 0);\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: inline-block;\n      }\n      paper-dropdown-menu-light {\n        display: block;\n      }\n      paper-listbox {\n        min-width: 200px;\n      }\n      paper-icon-item {\n        cursor: pointer;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-user-picker\", HaUserPicker);\n","import {\n  LitElement,\n  html,\n  css,\n  CSSResult,\n  TemplateResult,\n  property,\n} from \"lit-element\";\nimport memoizeOne from \"memoize-one\";\n\nimport \"@polymer/paper-input/paper-input\";\nimport \"@material/mwc-button\";\nimport \"@material/mwc-dialog\";\n\nimport \"../../../components/entity/ha-entities-picker\";\nimport \"../../../components/user/ha-user-picker\";\nimport { PersonDetailDialogParams } from \"./show-dialog-person-detail\";\nimport { PolymerChangedEvent } from \"../../../polymer-types\";\nimport { HomeAssistant } from \"../../../types\";\nimport { PersonMutableParams } from \"../../../data/person\";\n\nclass DialogPersonDetail extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() private _name!: string;\n  @property() private _userId?: string;\n  @property() private _deviceTrackers!: string[];\n  @property() private _error?: string;\n  @property() private _params?: PersonDetailDialogParams;\n  @property() private _submitting: boolean = false;\n\n  private _deviceTrackersAvailable = memoizeOne((hass) => {\n    return Object.keys(hass.states).some(\n      (entityId) =>\n        entityId.substr(0, entityId.indexOf(\".\")) === \"device_tracker\"\n    );\n  });\n\n  public async showDialog(params: PersonDetailDialogParams): Promise<void> {\n    this._params = params;\n    this._error = undefined;\n    if (this._params.entry) {\n      this._name = this._params.entry.name || \"\";\n      this._userId = this._params.entry.user_id || undefined;\n      this._deviceTrackers = this._params.entry.device_trackers || [];\n    } else {\n      this._name = \"\";\n      this._userId = undefined;\n      this._deviceTrackers = [];\n    }\n    await this.updateComplete;\n  }\n\n  protected render(): TemplateResult | void {\n    if (!this._params) {\n      return html``;\n    }\n    const nameInvalid = this._name.trim() === \"\";\n    return html`\n      <mwc-dialog\n        open\n        @closing=\"${this._close}\"\n        .title=${this._params.entry\n          ? this._params.entry.name\n          : this.hass!.localize(\"ui.panel.config.person.detail.new_person\")}\n      >\n        <div>\n          ${this._error\n            ? html`\n                <div class=\"error\">${this._error}</div>\n              `\n            : \"\"}\n          <div class=\"form\">\n            <paper-input\n              .value=${this._name}\n              @value-changed=${this._nameChanged}\n              label=\"${this.hass!.localize(\n                \"ui.panel.config.person.detail.name\"\n              )}\"\n              error-message=\"${this.hass!.localize(\n                \"ui.panel.config.person.detail.name_error_msg\"\n              )}\"\n              .invalid=${nameInvalid}\n            ></paper-input>\n            <ha-user-picker\n              label=\"${this.hass!.localize(\n                \"ui.panel.config.person.detail.linked_user\"\n              )}\"\n              .hass=${this.hass}\n              .value=${this._userId}\n              .users=${this._params.users}\n              @value-changed=${this._userChanged}\n            ></ha-user-picker>\n            ${this._deviceTrackersAvailable(this.hass)\n              ? html`\n                  <p>\n                    ${this.hass.localize(\n                      \"ui.panel.config.person.detail.device_tracker_intro\"\n                    )}\n                  </p>\n                  <ha-entities-picker\n                    .hass=${this.hass}\n                    .value=${this._deviceTrackers}\n                    include-domains='[\"device_tracker\"]'\n                    .pickedEntityLabel=${this.hass.localize(\n                      \"ui.panel.config.person.detail.device_tracker_picked\"\n                    )}\n                    .pickEntityLabel=${this.hass.localize(\n                      \"ui.panel.config.person.detail.device_tracker_pick\"\n                    )}\n                    @value-changed=${this._deviceTrackersChanged}\n                  >\n                  </ha-entities-picker>\n                `\n              : html`\n                  <p>\n                    ${this.hass!.localize(\n                      \"ui.panel.config.person.detail.no_device_tracker_available_intro\"\n                    )}\n                  </p>\n                  <ul>\n                    <li>\n                      <a\n                        href=\"https://www.home-assistant.io/integrations/#presence-detection\"\n                        target=\"_blank\"\n                        >${this.hass!.localize(\n                          \"ui.panel.config.person.detail.link_presence_detection_integrations\"\n                        )}</a\n                      >\n                    </li>\n                    <li>\n                      <a\n                        @click=\"${this._closeDialog}\"\n                        href=\"/config/integrations\"\n                      >\n                        ${this.hass!.localize(\n                          \"ui.panel.config.person.detail.link_integrations_page\"\n                        )}</a\n                      >\n                    </li>\n                  </ul>\n                `}\n          </div>\n        </div>\n        ${this._params.entry\n          ? html`\n              <mwc-button\n                slot=\"secondaryAction\"\n                class=\"warning\"\n                @click=\"${this._deleteEntry}\"\n                .disabled=${this._submitting}\n              >\n                ${this.hass!.localize(\"ui.panel.config.person.detail.delete\")}\n              </mwc-button>\n            `\n          : html``}\n        <mwc-button\n          slot=\"primaryAction\"\n          @click=\"${this._updateEntry}\"\n          .disabled=${nameInvalid || this._submitting}\n        >\n          ${this._params.entry\n            ? this.hass!.localize(\"ui.panel.config.person.detail.update\")\n            : this.hass!.localize(\"ui.panel.config.person.detail.create\")}\n        </mwc-button>\n      </mwc-dialog>\n    `;\n  }\n\n  private _closeDialog() {\n    this._params = undefined;\n  }\n\n  private _nameChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._name = ev.detail.value;\n  }\n\n  private _userChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._userId = ev.detail.value;\n  }\n\n  private _deviceTrackersChanged(ev: PolymerChangedEvent<string[]>) {\n    this._error = undefined;\n    this._deviceTrackers = ev.detail.value;\n  }\n\n  private async _updateEntry() {\n    this._submitting = true;\n    try {\n      const values: PersonMutableParams = {\n        name: this._name.trim(),\n        device_trackers: this._deviceTrackers,\n        user_id: this._userId || null,\n      };\n      if (this._params!.entry) {\n        await this._params!.updateEntry(values);\n      } else {\n        await this._params!.createEntry(values);\n      }\n      this._params = undefined;\n    } catch (err) {\n      this._error = err ? err.message : \"Unknown error\";\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private async _deleteEntry() {\n    this._submitting = true;\n    try {\n      if (await this._params!.removeEntry()) {\n        this._params = undefined;\n      }\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private _close(): void {\n    this._params = undefined;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      css`\n        mwc-dialog {\n          min-width: 400px;\n          max-width: 600px;\n        }\n        .form {\n          padding-bottom: 24px;\n        }\n        ha-user-picker {\n          margin-top: 16px;\n        }\n        mwc-button.warning {\n          --mdc-theme-primary: var(--google-red-500);\n        }\n        .error {\n          color: var(--google-red-500);\n        }\n        a {\n          color: var(--primary-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-person-detail\": DialogPersonDetail;\n  }\n}\n\ncustomElements.define(\"dialog-person-detail\", DialogPersonDetail);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-input/iron-input.js';\nimport './paper-input-char-counter.js';\nimport './paper-input-container.js';\nimport './paper-input-error.js';\n\nimport {IronFormElementBehavior} from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport {DomModule} from '@polymer/polymer/lib/elements/dom-module.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\nimport {PaperInputBehavior} from './paper-input-behavior.js';\n\n/**\nMaterial design: [Text\nfields](https://www.google.com/design/spec/components/text-fields.html)\n\n`<paper-input>` is a single-line text field with Material Design styling.\n\n    <paper-input label=\"Input label\"></paper-input>\n\nIt may include an optional error message or character counter.\n\n    <paper-input error-message=\"Invalid input!\" label=\"Input\n    label\"></paper-input> <paper-input char-counter label=\"Input\n    label\"></paper-input>\n\nIt can also include custom prefix or suffix elements, which are displayed\nbefore or after the text input itself. In order for an element to be\nconsidered as a prefix, it must have the `prefix` attribute (and similarly\nfor `suffix`).\n\n    <paper-input label=\"total\">\n      <div prefix>$</div>\n      <paper-icon-button slot=\"suffix\" icon=\"clear\"></paper-icon-button>\n    </paper-input>\n\nA `paper-input` can use the native `type=search` or `type=file` features.\nHowever, since we can't control the native styling of the input (search icon,\nfile button, date placeholder, etc.), in these cases the label will be\nautomatically floated. The `placeholder` attribute can still be used for\nadditional informational text.\n\n    <paper-input label=\"search!\" type=\"search\"\n        placeholder=\"search for cats\" autosave=\"test\" results=\"5\">\n    </paper-input>\n\nSee `Polymer.PaperInputBehavior` for more API docs.\n\n### Focus\n\nTo focus a paper-input, you can call the native `focus()` method as long as the\npaper input has a tab index. Similarly, `blur()` will blur the element.\n\n### Styling\n\nSee `Polymer.PaperInputContainer` for a list of custom properties used to\nstyle this element.\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-input-container-ms-clear` | Mixin applied to the Internet Explorer reveal button (the eyeball) | {}\n\n@group Paper Elements\n@element paper-input\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  is: 'paper-input',\n\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([focused]) {\n        outline: none;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      input {\n        /* Firefox sets a min-width on the input, which can cause layout issues */\n        min-width: 0;\n      }\n\n      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.\n      In 2.x the <iron-input> is distributed to paper-input-container, which styles\n      it, but in order for this to work correctly, we need to reset some\n      of the native input's properties to inherit (from the iron-input) */\n      iron-input > input {\n        @apply --paper-input-container-shared-input-style;\n        font-family: inherit;\n        font-weight: inherit;\n        font-size: inherit;\n        letter-spacing: inherit;\n        word-spacing: inherit;\n        line-height: inherit;\n        text-shadow: inherit;\n        color: inherit;\n        cursor: inherit;\n      }\n\n      input:disabled {\n        @apply --paper-input-container-input-disabled;\n      }\n\n      input::-webkit-outer-spin-button,\n      input::-webkit-inner-spin-button {\n        @apply --paper-input-container-input-webkit-spinner;\n      }\n\n      input::-webkit-clear-button {\n        @apply --paper-input-container-input-webkit-clear;\n      }\n\n      input::-webkit-calendar-picker-indicator {\n        @apply --paper-input-container-input-webkit-calendar-picker-indicator;\n      }\n\n      input::-webkit-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input:-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-moz-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      input::-ms-clear {\n        @apply --paper-input-container-ms-clear;\n      }\n\n      input::-ms-reveal {\n        @apply --paper-input-container-ms-reveal;\n      }\n\n      input:-ms-input-placeholder {\n        color: var(--paper-input-container-color, var(--secondary-text-color));\n      }\n\n      label {\n        pointer-events: none;\n      }\n    </style>\n\n    <paper-input-container id=\"container\" no-label-float=\"[[noLabelFloat]]\" always-float-label=\"[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]\" auto-validate$=\"[[autoValidate]]\" disabled$=\"[[disabled]]\" invalid=\"[[invalid]]\">\n\n      <slot name=\"prefix\" slot=\"prefix\"></slot>\n\n      <label hidden$=\"[[!label]]\" aria-hidden=\"true\" for$=\"[[_inputId]]\" slot=\"label\">[[label]]</label>\n\n      <!-- Need to bind maxlength so that the paper-input-char-counter works correctly -->\n      <iron-input bind-value=\"{{value}}\" slot=\"input\" class=\"input-element\" id$=\"[[_inputId]]\" maxlength$=\"[[maxlength]]\" allowed-pattern=\"[[allowedPattern]]\" invalid=\"{{invalid}}\" validator=\"[[validator]]\">\n        <input aria-labelledby$=\"[[_ariaLabelledBy]]\" aria-describedby$=\"[[_ariaDescribedBy]]\" disabled$=\"[[disabled]]\" title$=\"[[title]]\" type$=\"[[type]]\" pattern$=\"[[pattern]]\" required$=\"[[required]]\" autocomplete$=\"[[autocomplete]]\" autofocus$=\"[[autofocus]]\" inputmode$=\"[[inputmode]]\" minlength$=\"[[minlength]]\" maxlength$=\"[[maxlength]]\" min$=\"[[min]]\" max$=\"[[max]]\" step$=\"[[step]]\" name$=\"[[name]]\" placeholder$=\"[[placeholder]]\" readonly$=\"[[readonly]]\" list$=\"[[list]]\" size$=\"[[size]]\" autocapitalize$=\"[[autocapitalize]]\" autocorrect$=\"[[autocorrect]]\" on-change=\"_onChange\" tabindex$=\"[[tabIndex]]\" autosave$=\"[[autosave]]\" results$=\"[[results]]\" accept$=\"[[accept]]\" multiple$=\"[[multiple]]\">\n      </iron-input>\n\n      <slot name=\"suffix\" slot=\"suffix\"></slot>\n\n      <template is=\"dom-if\" if=\"[[errorMessage]]\">\n        <paper-input-error aria-live=\"assertive\" slot=\"add-on\">[[errorMessage]]</paper-input-error>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[charCounter]]\">\n        <paper-input-char-counter slot=\"add-on\"></paper-input-char-counter>\n      </template>\n\n    </paper-input-container>\n  `,\n\n  behaviors: [PaperInputBehavior, IronFormElementBehavior],\n\n  properties: {\n    value: {\n      // Required for the correct TypeScript type-generation\n      type: String\n    }\n  },\n\n  /**\n   * Returns a reference to the focusable element. Overridden from\n   * PaperInputBehavior to correctly focus the native input.\n   *\n   * @return {!HTMLElement}\n   */\n  get _focusableElement() {\n    return this.inputElement._inputElement;\n  },\n\n  // Note: This event is only available in the 1.0 version of this element.\n  // In 2.0, the functionality of `_onIronInputReady` is done in\n  // PaperInputBehavior::attached.\n  listeners: {'iron-input-ready': '_onIronInputReady'},\n\n  _onIronInputReady: function() {\n    // Even though this is only used in the next line, save this for\n    // backwards compatibility, since the native input had this ID until 2.0.5.\n    if (!this.$.nativeInput) {\n      this.$.nativeInput = this.$$('input');\n    }\n    if (this.inputElement &&\n        this._typesThatHaveText.indexOf(this.$.nativeInput.type) !== -1) {\n      this.alwaysFloatLabel = true;\n    }\n\n    // Only validate when attached if the input already has a value.\n    if (!!this.inputElement.bindValue) {\n      this.$.container._handleValueAndAutoValidate(this.inputElement);\n    }\n  },\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nexport class IronSelection {\n  /**\n   * @param {!Function} selectCallback\n   * @suppress {missingProvide}\n   */\n  constructor(selectCallback) {\n    this.selection = [];\n    this.selectCallback = selectCallback;\n  }\n\n  /**\n   * Retrieves the selected item(s).\n   *\n   * @returns Returns the selected item(s). If the multi property is true,\n   * `get` will return an array, otherwise it will return\n   * the selected item or undefined if there is no selection.\n   */\n  get() {\n    return this.multi ? this.selection.slice() : this.selection[0];\n  }\n\n  /**\n   * Clears all the selection except the ones indicated.\n   *\n   * @param {Array} excludes items to be excluded.\n   */\n  clear(excludes) {\n    this.selection.slice().forEach(function(item) {\n      if (!excludes || excludes.indexOf(item) < 0) {\n        this.setItemSelected(item, false);\n      }\n    }, this);\n  }\n\n  /**\n   * Indicates if a given item is selected.\n   *\n   * @param {*} item The item whose selection state should be checked.\n   * @return {boolean} Returns true if `item` is selected.\n   */\n  isSelected(item) {\n    return this.selection.indexOf(item) >= 0;\n  }\n\n  /**\n   * Sets the selection state for a given item to either selected or deselected.\n   *\n   * @param {*} item The item to select.\n   * @param {boolean} isSelected True for selected, false for deselected.\n   */\n  setItemSelected(item, isSelected) {\n    if (item != null) {\n      if (isSelected !== this.isSelected(item)) {\n        // proceed to update selection only if requested state differs from\n        // current\n        if (isSelected) {\n          this.selection.push(item);\n        } else {\n          var i = this.selection.indexOf(item);\n          if (i >= 0) {\n            this.selection.splice(i, 1);\n          }\n        }\n        if (this.selectCallback) {\n          this.selectCallback(item, isSelected);\n        }\n      }\n    }\n  }\n\n  /**\n   * Sets the selection state for a given item. If the `multi` property\n   * is true, then the selected state of `item` will be toggled; otherwise\n   * the `item` will be selected.\n   *\n   * @param {*} item The item to select.\n   */\n  select(item) {\n    if (this.multi) {\n      this.toggle(item);\n    } else if (this.get() !== item) {\n      this.setItemSelected(this.get(), false);\n      this.setItemSelected(item, true);\n    }\n  }\n\n  /**\n   * Toggles the selection state for `item`.\n   *\n   * @param {*} item The item to toggle.\n   */\n  toggle(item) {\n    this.setItemSelected(item, !this.isSelected(item));\n  }\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport {dashToCamelCase} from '@polymer/polymer/lib/utils/case-map.js';\n\nimport {IronSelection} from './iron-selection.js';\n\n/**\n * @polymerBehavior\n */\nexport const IronSelectableBehavior = {\n\n  /**\n   * Fired when iron-selector is activated (selected or deselected).\n   * It is fired before the selected items are changed.\n   * Cancel the event to abort selection.\n   *\n   * @event iron-activate\n   */\n\n  /**\n   * Fired when an item is selected\n   *\n   * @event iron-select\n   */\n\n  /**\n   * Fired when an item is deselected\n   *\n   * @event iron-deselect\n   */\n\n  /**\n   * Fired when the list of selectable items changes (e.g., items are\n   * added or removed). The detail of the event is a mutation record that\n   * describes what changed.\n   *\n   * @event iron-items-changed\n   */\n\n  properties: {\n\n    /**\n     * If you want to use an attribute value or property of an element for\n     * `selected` instead of the index, set this to the name of the attribute\n     * or property. Hyphenated values are converted to camel case when used to\n     * look up the property of a selectable element. Camel cased values are\n     * *not* converted to hyphenated values for attribute lookup. It's\n     * recommended that you provide the hyphenated form of the name so that\n     * selection works in both cases. (Use `attr-or-property-name` instead of\n     * `attrOrPropertyName`.)\n     */\n    attrForSelected: {type: String, value: null},\n\n    /**\n     * Gets or sets the selected element. The default is to use the index of the\n     * item.\n     * @type {string|number}\n     */\n    selected: {type: String, notify: true},\n\n    /**\n     * Returns the currently selected item.\n     *\n     * @type {?Object}\n     */\n    selectedItem: {type: Object, readOnly: true, notify: true},\n\n    /**\n     * The event that fires from items when they are selected. Selectable\n     * will listen for this event from items and update the selection state.\n     * Set to empty string to listen to no events.\n     */\n    activateEvent:\n        {type: String, value: 'tap', observer: '_activateEventChanged'},\n\n    /**\n     * This is a CSS selector string.  If this is set, only items that match the\n     * CSS selector are selectable.\n     */\n    selectable: String,\n\n    /**\n     * The class to set on elements when selected.\n     */\n    selectedClass: {type: String, value: 'iron-selected'},\n\n    /**\n     * The attribute to set on elements when selected.\n     */\n    selectedAttribute: {type: String, value: null},\n\n    /**\n     * Default fallback if the selection based on selected with\n     * `attrForSelected` is not found.\n     */\n    fallbackSelection: {type: String, value: null},\n\n    /**\n     * The list of items from which a selection can be made.\n     */\n    items: {\n      type: Array,\n      readOnly: true,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    },\n\n    /**\n     * The set of excluded elements where the key is the `localName`\n     * of the element that will be ignored from the item list.\n     *\n     * @default {template: 1}\n     */\n    _excludedLocalNames: {\n      type: Object,\n      value: function() {\n        return {\n          'template': 1,\n          'dom-bind': 1,\n          'dom-if': 1,\n          'dom-repeat': 1,\n        };\n      }\n    }\n  },\n\n  observers: [\n    '_updateAttrForSelected(attrForSelected)',\n    '_updateSelected(selected)',\n    '_checkFallback(fallbackSelection)'\n  ],\n\n  created: function() {\n    this._bindFilterItem = this._filterItem.bind(this);\n    this._selection = new IronSelection(this._applySelection.bind(this));\n  },\n\n  attached: function() {\n    this._observer = this._observeItems(this);\n    this._addListener(this.activateEvent);\n  },\n\n  detached: function() {\n    if (this._observer) {\n      dom(this).unobserveNodes(this._observer);\n    }\n    this._removeListener(this.activateEvent);\n  },\n\n  /**\n   * Returns the index of the given item.\n   *\n   * @method indexOf\n   * @param {Object} item\n   * @returns Returns the index of the item\n   */\n  indexOf: function(item) {\n    return this.items ? this.items.indexOf(item) : -1;\n  },\n\n  /**\n   * Selects the given value.\n   *\n   * @method select\n   * @param {string|number} value the value to select.\n   */\n  select: function(value) {\n    this.selected = value;\n  },\n\n  /**\n   * Selects the previous item.\n   *\n   * @method selectPrevious\n   */\n  selectPrevious: function() {\n    var length = this.items.length;\n    var index = length - 1;\n    if (this.selected !== undefined) {\n      index = (Number(this._valueToIndex(this.selected)) - 1 + length) % length;\n    }\n    this.selected = this._indexToValue(index);\n  },\n\n  /**\n   * Selects the next item.\n   *\n   * @method selectNext\n   */\n  selectNext: function() {\n    var index = 0;\n    if (this.selected !== undefined) {\n      index =\n          (Number(this._valueToIndex(this.selected)) + 1) % this.items.length;\n    }\n    this.selected = this._indexToValue(index);\n  },\n\n  /**\n   * Selects the item at the given index.\n   *\n   * @method selectIndex\n   */\n  selectIndex: function(index) {\n    this.select(this._indexToValue(index));\n  },\n\n  /**\n   * Force a synchronous update of the `items` property.\n   *\n   * NOTE: Consider listening for the `iron-items-changed` event to respond to\n   * updates to the set of selectable items after updates to the DOM list and\n   * selection state have been made.\n   *\n   * WARNING: If you are using this method, you should probably consider an\n   * alternate approach. Synchronously querying for items is potentially\n   * slow for many use cases. The `items` property will update asynchronously\n   * on its own to reflect selectable items in the DOM.\n   */\n  forceSynchronousItemUpdate: function() {\n    if (this._observer && typeof this._observer.flush === 'function') {\n      // NOTE(bicknellr): `dom.flush` above is no longer sufficient to trigger\n      // `observeNodes` callbacks. Polymer 2.x returns an object from\n      // `observeNodes` with a `flush` that synchronously gives the callback any\n      // pending MutationRecords (retrieved with `takeRecords`). Any case where\n      // ShadyDOM flushes were expected to synchronously trigger item updates\n      // will now require calling `forceSynchronousItemUpdate`.\n      this._observer.flush();\n    } else {\n      this._updateItems();\n    }\n  },\n\n  // UNUSED, FOR API COMPATIBILITY\n  get _shouldUpdateSelection() {\n    return this.selected != null;\n  },\n\n  _checkFallback: function() {\n    this._updateSelected();\n  },\n\n  _addListener: function(eventName) {\n    this.listen(this, eventName, '_activateHandler');\n  },\n\n  _removeListener: function(eventName) {\n    this.unlisten(this, eventName, '_activateHandler');\n  },\n\n  _activateEventChanged: function(eventName, old) {\n    this._removeListener(old);\n    this._addListener(eventName);\n  },\n\n  _updateItems: function() {\n    var nodes = dom(this).queryDistributedElements(this.selectable || '*');\n    nodes = Array.prototype.filter.call(nodes, this._bindFilterItem);\n    this._setItems(nodes);\n  },\n\n  _updateAttrForSelected: function() {\n    if (this.selectedItem) {\n      this.selected = this._valueForItem(this.selectedItem);\n    }\n  },\n\n  _updateSelected: function() {\n    this._selectSelected(this.selected);\n  },\n\n  _selectSelected: function(selected) {\n    if (!this.items) {\n      return;\n    }\n\n    var item = this._valueToItem(this.selected);\n    if (item) {\n      this._selection.select(item);\n    } else {\n      this._selection.clear();\n    }\n    // Check for items, since this array is populated only when attached\n    // Since Number(0) is falsy, explicitly check for undefined\n    if (this.fallbackSelection && this.items.length &&\n        (this._selection.get() === undefined)) {\n      this.selected = this.fallbackSelection;\n    }\n  },\n\n  _filterItem: function(node) {\n    return !this._excludedLocalNames[node.localName];\n  },\n\n  _valueToItem: function(value) {\n    return (value == null) ? null : this.items[this._valueToIndex(value)];\n  },\n\n  _valueToIndex: function(value) {\n    if (this.attrForSelected) {\n      for (var i = 0, item; item = this.items[i]; i++) {\n        if (this._valueForItem(item) == value) {\n          return i;\n        }\n      }\n    } else {\n      return Number(value);\n    }\n  },\n\n  _indexToValue: function(index) {\n    if (this.attrForSelected) {\n      var item = this.items[index];\n      if (item) {\n        return this._valueForItem(item);\n      }\n    } else {\n      return index;\n    }\n  },\n\n  _valueForItem: function(item) {\n    if (!item) {\n      return null;\n    }\n    if (!this.attrForSelected) {\n      var i = this.indexOf(item);\n      return i === -1 ? null : i;\n    }\n    var propValue = item[dashToCamelCase(this.attrForSelected)];\n    return propValue != undefined ? propValue :\n                                    item.getAttribute(this.attrForSelected);\n  },\n\n  _applySelection: function(item, isSelected) {\n    if (this.selectedClass) {\n      this.toggleClass(this.selectedClass, isSelected, item);\n    }\n    if (this.selectedAttribute) {\n      this.toggleAttribute(this.selectedAttribute, isSelected, item);\n    }\n    this._selectionChange();\n    this.fire('iron-' + (isSelected ? 'select' : 'deselect'), {item: item});\n  },\n\n  _selectionChange: function() {\n    this._setSelectedItem(this._selection.get());\n  },\n\n  // observe items change under the given node.\n  _observeItems: function(node) {\n    return dom(node).observeNodes(function(mutation) {\n      this._updateItems();\n      this._updateSelected();\n\n      // Let other interested parties know about the change so that\n      // we don't have to recreate mutation observers everywhere.\n      this.fire(\n          'iron-items-changed', mutation, {bubbles: false, cancelable: false});\n    });\n  },\n\n  _activateHandler: function(e) {\n    var t = e.target;\n    var items = this.items;\n    while (t && t != this) {\n      var i = items.indexOf(t);\n      if (i >= 0) {\n        var value = this._indexToValue(i);\n        this._itemActivate(value, t);\n        return;\n      }\n      t = t.parentNode;\n    }\n  },\n\n  _itemActivate: function(value, item) {\n    if (!this.fire('iron-activate', {selected: value, item: item}, {\n               cancelable: true\n             })\n             .defaultPrevented) {\n      this.select(value);\n    }\n  }\n\n};\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\n`iron-a11y-announcer` is a singleton element that is intended to add a11y\nto features that require on-demand announcement from screen readers. In\norder to make use of the announcer, it is best to request its availability\nin the announcing element.\n\nExample:\n\n    Polymer({\n\n      is: 'x-chatty',\n\n      attached: function() {\n        // This will create the singleton element if it has not\n        // been created yet:\n        Polymer.IronA11yAnnouncer.requestAvailability();\n      }\n    });\n\nAfter the `iron-a11y-announcer` has been made available, elements can\nmake announces by firing bubbling `iron-announce` events.\n\nExample:\n\n    this.fire('iron-announce', {\n      text: 'This is an announcement!'\n    }, { bubbles: true });\n\nNote: announcements are only audible if you have a screen reader enabled.\n\n@group Iron Elements\n@demo demo/index.html\n*/\nexport const IronA11yAnnouncer = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: fixed;\n        clip: rect(0px,0px,0px,0px);\n      }\n    </style>\n    <div aria-live$=\"[[mode]]\">[[_text]]</div>\n`,\n\n  is: 'iron-a11y-announcer',\n\n  properties: {\n\n    /**\n     * The value of mode is used to set the `aria-live` attribute\n     * for the element that will be announced. Valid values are: `off`,\n     * `polite` and `assertive`.\n     */\n    mode: {type: String, value: 'polite'},\n\n    _text: {type: String, value: ''}\n  },\n\n  created: function() {\n    if (!IronA11yAnnouncer.instance) {\n      IronA11yAnnouncer.instance = this;\n    }\n\n    document.body.addEventListener(\n        'iron-announce', this._onIronAnnounce.bind(this));\n  },\n\n  /**\n   * Cause a text string to be announced by screen readers.\n   *\n   * @param {string} text The text that should be announced.\n   */\n  announce: function(text) {\n    this._text = '';\n    this.async(function() {\n      this._text = text;\n    }, 100);\n  },\n\n  _onIronAnnounce: function(event) {\n    if (event.detail && event.detail.text) {\n      this.announce(event.detail.text);\n    }\n  }\n});\n\nIronA11yAnnouncer.instance = null;\n\nIronA11yAnnouncer.requestAvailability = function() {\n  if (!IronA11yAnnouncer.instance) {\n    IronA11yAnnouncer.instance = document.createElement('iron-a11y-announcer');\n  }\n\n  document.body.appendChild(IronA11yAnnouncer.instance);\n};\n"],"sourceRoot":""}