{"version":3,"file":"fc29bc58.js","mappings":";;AAyDA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;AAGA;AACA;;AAEA;;;AAGA;AAGA;AACA;AACA;;;AAGA;AAGA;AACA;AACA;AACA;;;AA3DA;;;;;;;;;;;;;;;;;;;;AAAA;;ACjBA;;;;AAOA;;;;;;AAlBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA","sources":["webpack://home-assistant-frontend/./src/components/ha-button-related-filter-menu.ts","webpack://home-assistant-frontend/./src/panels/config/ha-config-section.ts"],"sourcesContent":["import type { Corner } from \"@material/mwc-menu\";\nimport \"@material/mwc-menu/mwc-menu-surface\";\nimport { mdiFilterVariant } from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { computeDeviceName } from \"../data/device_registry\";\nimport { findRelated, RelatedResult } from \"../data/search\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./device/ha-device-picker\";\nimport \"./entity/ha-entity-picker\";\nimport \"./ha-area-picker\";\nimport \"./ha-icon-button\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"related-changed\": {\n      value?: FilterValue;\n      items?: RelatedResult;\n      filter?: string;\n    };\n  }\n}\n\ninterface FilterValue {\n  area?: string;\n  device?: string;\n  entity?: string;\n}\n\n@customElement(\"ha-button-related-filter-menu\")\nexport class HaRelatedFilterButtonMenu extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public corner: Corner = \"TOP_START\";\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ attribute: false }) public value?: FilterValue;\n\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n\n  @state() private _open = false;\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-icon-button\n        @click=${this._handleClick}\n        .label=${this.hass.localize(\"ui.components.related-filter-menu.filter\")}\n        .path=${mdiFilterVariant}\n      ></ha-icon-button>\n      <mwc-menu-surface\n        .open=${this._open}\n        .anchor=${this}\n        .fullwidth=${this.narrow}\n        .corner=${this.corner}\n        @closed=${this._onClosed}\n      >\n        <ha-area-picker\n          .label=${this.hass.localize(\n            \"ui.components.related-filter-menu.filter_by_area\"\n          )}\n          .hass=${this.hass}\n          .value=${this.value?.area}\n          no-add\n          @value-changed=${this._areaPicked}\n        ></ha-area-picker>\n        <ha-device-picker\n          .label=${this.hass.localize(\n            \"ui.components.related-filter-menu.filter_by_device\"\n          )}\n          .hass=${this.hass}\n          .value=${this.value?.device}\n          @value-changed=${this._devicePicked}\n        ></ha-device-picker>\n        <ha-entity-picker\n          .label=${this.hass.localize(\n            \"ui.components.related-filter-menu.filter_by_entity\"\n          )}\n          .hass=${this.hass}\n          .value=${this.value?.entity}\n          .excludeDomains=${this.excludeDomains}\n          @value-changed=${this._entityPicked}\n        ></ha-entity-picker>\n      </mwc-menu-surface>\n    `;\n  }\n\n  private _handleClick(): void {\n    if (this.disabled) {\n      return;\n    }\n    this._open = true;\n  }\n\n  private _onClosed(): void {\n    this._open = false;\n  }\n\n  private async _entityPicked(ev: CustomEvent) {\n    const entityId = ev.detail.value;\n    if (!entityId) {\n      fireEvent(this, \"related-changed\", { value: undefined });\n      return;\n    }\n    const filter = this.hass.localize(\n      \"ui.components.related-filter-menu.filtered_by_entity\",\n      \"entity_name\",\n      computeStateName((ev.currentTarget as any).comboBox.selectedItem)\n    );\n    const items = await findRelated(this.hass, \"entity\", entityId);\n    fireEvent(this, \"related-changed\", {\n      value: { entity: entityId },\n      filter,\n      items,\n    });\n  }\n\n  private async _devicePicked(ev: CustomEvent) {\n    const deviceId = ev.detail.value;\n    if (!deviceId) {\n      fireEvent(this, \"related-changed\", { value: undefined });\n      return;\n    }\n    const filter = this.hass.localize(\n      \"ui.components.related-filter-menu.filtered_by_device\",\n      \"device_name\",\n      computeDeviceName(\n        (ev.currentTarget as any).comboBox.selectedItem,\n        this.hass\n      )\n    );\n    const items = await findRelated(this.hass, \"device\", deviceId);\n\n    fireEvent(this, \"related-changed\", {\n      value: { device: deviceId },\n      filter,\n      items,\n    });\n  }\n\n  private async _areaPicked(ev: CustomEvent) {\n    const areaId = ev.detail.value;\n    if (!areaId) {\n      fireEvent(this, \"related-changed\", { value: undefined });\n      return;\n    }\n    const filter = this.hass.localize(\n      \"ui.components.related-filter-menu.filtered_by_area\",\n      \"area_name\",\n      (ev.currentTarget as any).comboBox.selectedItem.name\n    );\n    const items = await findRelated(this.hass, \"area\", areaId);\n    fireEvent(this, \"related-changed\", {\n      value: { area: areaId },\n      filter,\n      items,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: inline-block;\n        position: relative;\n      }\n      :host([narrow]) {\n        position: static;\n      }\n      ha-area-picker,\n      ha-device-picker,\n      ha-entity-picker {\n        display: block;\n        width: 300px;\n        padding: 4px 16px;\n        box-sizing: border-box;\n      }\n      :host([narrow]) ha-area-picker,\n      :host([narrow]) ha-device-picker {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-button-related-filter-menu\": HaRelatedFilterButtonMenu;\n  }\n}\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\n\n@customElement(\"ha-config-section\")\nexport class HaConfigSection extends LitElement {\n  @property() public isWide = false;\n\n  @property({ type: Boolean }) public vertical = false;\n\n  @property({ type: Boolean, attribute: \"full-width\" })\n  public fullWidth = false;\n\n  protected render() {\n    return html`\n      <div\n        class=\"content ${classMap({\n          narrow: !this.isWide,\n          \"full-width\": this.fullWidth,\n        })}\"\n      >\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div\n          class=\"together layout ${classMap({\n            narrow: !this.isWide,\n            vertical: this.vertical || !this.isWide,\n            horizontal: !this.vertical && this.isWide,\n          })}\"\n        >\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n      }\n      .content {\n        padding: 28px 20px 0;\n        max-width: 1040px;\n        margin: 0 auto;\n      }\n\n      .layout {\n        display: flex;\n      }\n\n      .horizontal {\n        flex-direction: row;\n      }\n\n      .vertical {\n        flex-direction: column;\n      }\n\n      .flex-auto {\n        flex: 1 1 auto;\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 32px;\n      }\n\n      .intro {\n        font-family: var(--paper-font-subhead_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-subhead_-_-webkit-font-smoothing\n        );\n        font-weight: var(--paper-font-subhead_-_font-weight);\n        line-height: var(--paper-font-subhead_-_line-height);\n        width: 100%;\n        opacity: var(--dark-primary-opacity);\n        font-size: 14px;\n        padding-bottom: 20px;\n      }\n\n      .horizontal .intro {\n        max-width: 400px;\n        margin-right: 40px;\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n\n      .narrow.content {\n        max-width: 640px;\n      }\n      .narrow .together {\n        margin-top: 20px;\n      }\n      .narrow .intro {\n        padding-bottom: 20px;\n        margin-right: 0;\n        max-width: 500px;\n      }\n\n      .full-width {\n        padding: 0;\n      }\n\n      .full-width .layout {\n        flex-direction: column;\n      }\n    `;\n  }\n}\n"],"names":[],"sourceRoot":""}