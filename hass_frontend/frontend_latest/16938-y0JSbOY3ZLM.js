export const id=16938;export const ids=[16938];export const modules={72043:(t,e,a)=>{a.d(e,{A:()=>d});var s=a(23158),l=a(25101),c=a(66477);const d=(t,e,a,d,r)=>a.time_zone===c.c_.server?((t,e,a,c)=>{const d=a((0,s.Z)(t,e),c);return(0,l.Z)(d,e)})(t,d.time_zone,e,r):e(t,r)},92306:(t,e,a)=>{a.d(e,{v:()=>s});const s=(t,e)=>{const a={};for(const s of t){const t=e(s);t in a?a[t].push(s):a[t]=[s]}return a}},81582:(t,e,a)=>{a.d(e,{DJ:()=>c,LZ:()=>s,Nn:()=>i,Ny:()=>_,Pk:()=>h,Q4:()=>l,RQ:()=>r,SO:()=>o,T0:()=>u,iJ:()=>n,pB:()=>d});const s=32143==a.j?["migration_error","setup_error","setup_retry"]:null,l=32143==a.j?["not_loaded","loaded","setup_error","setup_retry"]:null,c=(t,e,a)=>{const s={type:"config_entries/subscribe"};return a&&a.type&&(s.type_filter=a.type),t.connection.subscribeMessage((t=>e(t)),s)},d=(t,e)=>{const a={};return e&&(e.type&&(a.type_filter=e.type),e.domain&&(a.domain=e.domain)),t.callWS({type:"config_entries/get",...a})},r=(t,e)=>t.callWS({type:"config_entries/get_single",entry_id:e}),o=(t,e,a)=>t.callWS({type:"config_entries/update",entry_id:e,...a}),n=(t,e)=>t.callApi("DELETE",`config/config_entries/entry/${e}`),i=(t,e)=>t.callApi("POST",`config/config_entries/entry/${e}/reload`),_=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:"user"}),u=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:null}),h=(t,e)=>{const a=[...t],s=t=>{const a=e[t.domain];return"helper"===(null==a?void 0:a.integration_type)?-1:1};return a.sort(((t,e)=>s(e)-s(t)))}},55424:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.d(e,{Bm:()=>p,Cj:()=>K,G9:()=>D,Jj:()=>T,KU:()=>C,P:()=>k,UB:()=>z,ZC:()=>j,_Z:()=>Z,b:()=>A,gy:()=>S,iK:()=>$,jB:()=>E,o1:()=>v,rl:()=>w,vE:()=>O,xZ:()=>W,yH:()=>M});var l=a(24112),c=a(32182),d=a(79021),r=a(39244),o=a(59429),n=a(93752),i=a(59699),_=a(97330),u=a(72043),h=a(49684),m=a(92306),y=a(81582),b=a(38014),g=t([h]);h=(g.then?(await g)():g)[0];const f=[],p=()=>({stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),v=()=>({stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}),$=()=>({type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}),w=()=>({type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}),k=()=>({type:"battery",stat_energy_from:"",stat_energy_to:""}),C=()=>({type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),K=()=>({type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),W=t=>t.callWS({type:"energy/info"}),S=async t=>(await t.loadBackendTranslation("issues","energy"),t.callWS({type:"energy/validate"})),j=t=>t.callWS({type:"energy/get_prefs"}),Z=async(t,e)=>{const a=t.callWS({type:"energy/save_prefs",...e});return x(t),a},P=async(t,e,a,s,l,c="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:null==l?void 0:l.toISOString(),energy_statistic_ids:a,co2_statistic_id:s,period:c}),T=t=>(0,m.v)(t.energy_sources,(t=>t.type)),M=(t,e,a)=>{const s=[];for(const l of t.energy_sources)if(!a||a.includes(l.type))if("solar"!==l.type)if("gas"!==l.type&&"water"!==l.type)if("battery"!==l.type){for(const t of l.flow_from){s.push(t.stat_energy_from),t.stat_cost&&s.push(t.stat_cost);const a=e.cost_sensors[t.stat_energy_from];a&&s.push(a)}for(const t of l.flow_to){s.push(t.stat_energy_to),t.stat_compensation&&s.push(t.stat_compensation);const a=e.cost_sensors[t.stat_energy_to];a&&s.push(a)}}else s.push(l.stat_energy_from),s.push(l.stat_energy_to);else{s.push(l.stat_energy_from),l.stat_cost&&s.push(l.stat_cost);const t=e.cost_sensors[l.stat_energy_from];t&&s.push(t)}else s.push(l.stat_energy_from);return s},R=async(t,e,a,s,o)=>{const[n,i]=await Promise.all([(0,y.pB)(t,{domain:"co2signal"}),W(t)]),_=n.length?n[0]:void 0;let u;if(_)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const a=t.states[e.entity_id];if(a&&"%"===a.attributes.unit_of_measurement){u=a.entity_id;break}}const h=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)h.push(e.stat_energy_from);const m=M(e,i,["grid","solar","battery","gas"]),g=M(e,i,["water"]),f=[...m,...g],p=(0,l.Z)(s||new Date,a),v=p>35?"month":p>2?"day":"hour",$=t.config.unit_system.length||"",w={energy:"kWh",volume:"km"===$?"m³":"ft³"},k={volume:"km"===$?"L":"gal"},C=m.length?(0,b.dL)(t,a,s,m,v,w,["change"]):{},K=g.length?(0,b.dL)(t,a,s,g,v,k,["change"]):{};let S,j,Z,T,R,x={},z={};o&&(j=p>27&&p<32?(0,c.Z)(a,-1):(0,d.Z)(a,-1*(p+1)),Z=(0,r.Z)(a,-1),m.length&&(x=(0,b.dL)(t,j,Z,m,v,w,["change"])),g.length&&(z=(0,b.dL)(t,j,Z,g,v,k,["change"]))),void 0!==u&&(T=P(t,a,h,u,s,p>35?"month":p>2?"day":"hour"),o&&(R=P(t,j,h,u,Z,p>35?"month":p>2?"day":"hour")));const E={},V=f.length?(0,b.Py)(t,f):[],[D,O,A,B,F,H,L]=await Promise.all([C,K,x,z,V,T,R]),q={...D,...O};o&&(S={...A,...B}),f.length&&F.forEach((t=>{E[t.statistic_id]=t}));return{start:a,end:s,startCompare:j,endCompare:Z,info:i,prefs:e,stats:q,statsMetadata:E,statsCompare:S,co2SignalConfigEntry:_,co2SignalEntity:u,fossilEnergyConsumption:H,fossilEnergyConsumptionCompare:L}},x=t=>{f.forEach((e=>{const a=z(t,{key:e});a.clearPrefs(),a._active&&a.refresh()}))},z=(t,e={})=>{let a="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");a=`_${e.key}`}if(t.connection[a])return t.connection[a];f.push(e.key);const s=(0,_._)(t.connection,a,(async()=>{if(s.prefs||(s.prefs=await j(t)),s._refreshTimeout&&clearTimeout(s._refreshTimeout),s._active&&(!s.end||s.end>new Date)){const t=new Date;t.getMinutes()>=20&&t.setHours(t.getHours()+1),t.setMinutes(20,0,0),s._refreshTimeout=window.setTimeout((()=>s.refresh()),t.getTime()-Date.now())}return R(t,s.prefs,s.start,s.end,s.compare)})),l=s.subscribe;s.subscribe=t=>{const e=l(t);return s._active++,()=>{s._active--,s._active<1&&(clearTimeout(s._refreshTimeout),s._refreshTimeout=void 0),e()}},s._active=0,s.prefs=e.prefs;const c=new Date,r=(0,h.Zs)(c,t.locale,t.config).split(":")[0];s.start=(0,u.A)("0"===r?(0,d.Z)(c,-1):c,o.Z,t.locale,t.config),s.end=(0,u.A)("0"===r?(0,d.Z)(c,-1):c,n.Z,t.locale,t.config);const m=()=>{s._updatePeriodTimeout=window.setTimeout((()=>{s.start=(0,u.A)(new Date,o.Z,t.locale,t.config),s.end=(0,u.A)(new Date,n.Z,t.locale,t.config),m()}),(0,i.Z)((0,u.A)(c,n.Z,t.locale,t.config),1).getTime()-Date.now())};return m(),s.clearPrefs=()=>{s.prefs=void 0},s.setPeriod=(e,a)=>{var l;s.start=e,s.end=a,s.start.getTime()!==(0,u.A)(new Date,o.Z,t.locale,t.config).getTime()||(null===(l=s.end)||void 0===l?void 0:l.getTime())!==(0,u.A)(new Date,n.Z,t.locale,t.config).getTime()||s._updatePeriodTimeout?s._updatePeriodTimeout&&(clearTimeout(s._updatePeriodTimeout),s._updatePeriodTimeout=void 0):m()},s.setCompare=t=>{s.compare=t},s},E=t=>t.callWS({type:"energy/solar_forecast"}),V=["volume","energy"],D=(t,e={},a)=>{for(const s of t.energy_sources){if("gas"!==s.type)continue;if(a&&a===s.stat_energy_from)continue;const t=e[s.stat_energy_from];if(V.includes(null==t?void 0:t.unit_class))return t.unit_class}},O=(t,e,a={})=>{const s=D(e,a);if(void 0!==s)return"energy"===s?"kWh":"km"===t.config.unit_system.length?"m³":"ft³"},A=t=>"km"===t.config.unit_system.length?"L":"gal";s()}catch(t){s(t)}}))},73826:(t,e,a)=>{a.d(e,{f:()=>r});var s=a(17463),l=a(34541),c=a(47838),d=a(79932);const r=t=>(0,s.Z)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,l.Z)((0,c.Z)(a.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,l.Z)((0,c.Z)(a.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,l.Z)((0,c.Z)(a.prototype),"updated",this).call(this,t),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((t=>void 0===this[t]))||(this.__unsubs=this.hassSubscribe())}}]}}),t)},16938:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.r(e),a.d(e,{HuiEnergySourcesTableCard:()=>b});var l=a(17463),c=a(40521),d=a(68144),r=a(79932),o=a(47501),n=a(15838),i=a(89525),_=a(18457),u=(a(22098),a(55424)),h=a(38014),m=a(73826),y=t([u]);u=(y.then?(await y)():y)[0];let b=(0,l.Z)([(0,r.Mo)("hui-energy-sources-table-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){var t;return[(0,u.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe((t=>{this._data=t}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"render",value:function(){var t,e,a,s,l,c,r,m,y;if(!this.hass||!this._config)return d.Ld;if(!this._data)return d.dy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;let b=0,g=0,f=0,p=0,v=0,$=0,w=0,k=0,C=!1,K=!1,W=!1,S=0,j=0,Z=0,P=0,T=0,M=0,R=0,x=0;const z=(0,u.Jj)(this._data.prefs),E=getComputedStyle(this),V=E.getPropertyValue("--energy-solar-color").trim(),D=E.getPropertyValue("--energy-battery-out-color").trim(),O=E.getPropertyValue("--energy-battery-in-color").trim(),A=E.getPropertyValue("--energy-grid-return-color").trim(),B=E.getPropertyValue("--energy-grid-consumption-color").trim(),F=E.getPropertyValue("--energy-gas-color").trim(),H=E.getPropertyValue("--energy-water-color").trim(),L=(null===(t=z.grid)||void 0===t?void 0:t[0].flow_from.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(e=z.grid)||void 0===e?void 0:e[0].flow_to.some((t=>t.stat_compensation||t.entity_energy_price||t.number_energy_price)))||(null===(a=z.gas)||void 0===a?void 0:a.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)))||(null===(s=z.water)||void 0===s?void 0:s.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))),q=(0,u.vE)(this.hass,this._data.prefs,this._data.statsMetadata)||"",J=(0,u.b)(this.hass)||"m³",U=void 0!==this._data.statsCompare;return d.dy` <ha-card> ${this._config.title?d.dy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="mdc-data-table"> <div class="mdc-data-table__table-container"> <table class="mdc-data-table__table" aria-label="Energy sources"> <thead> <tr class="mdc-data-table__header-row"> <th class="mdc-data-table__header-cell"></th> <th class="mdc-data-table__header-cell" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.source")} </th> ${U?d.dy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy")} </th> ${L?d.dy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost")} </th>`:""}`:""} <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.energy")} </th> ${L?d.dy` <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.cost")} </th>`:""} </tr> </thead> <tbody class="mdc-data-table__content"> ${null===(l=z.solar)||void 0===l?void 0:l.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;f+=s;const l=U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;Z+=l;const c=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(V)),e):(0,i.W)((0,n.Rw)((0,n.wK)(V)),e):void 0,r=c?(0,n.CO)((0,n.p3)(c)):V;return d.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:r,backgroundColor:r+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${z.solar?d.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.solar_total")} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(Z,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(f,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(c=z.battery)||void 0===c?void 0:c.map(((t,e)=>{var a,s;const l=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0,c=(0,h.Kj)(this._data.stats[t.stat_energy_to])||0;p+=l-c;const r=U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0,u=U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_to])||0;P+=r-u;const m=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(D)),e):(0,i.W)((0,n.Rw)((0,n.wK)(D)),e):void 0,y=m?(0,n.CO)((0,n.p3)(m)):D,b=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(O)),e):(0,i.W)((0,n.Rw)((0,n.wK)(O)),e):void 0,g=b?(0,n.CO)((0,n.p3)(b)):O;return d.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(r,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""} </tr> <tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:g,backgroundColor:g+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_to,null===(s=this._data)||void 0===s?void 0:s.statsMetadata[t.stat_energy_to])} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(-1*u,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(-1*c,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${z.battery?d.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.battery_total")} </th> ${U?d.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(P,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(p,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${null===(r=z.grid)||void 0===r?void 0:r.map((t=>d.dy`${t.flow_from.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;b+=s;const l=U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;S+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],r=c?(0,h.Kj)(this._data.stats[c])||0:null;null!==r&&(C=!0,g+=r);const u=U&&c?(0,h.Kj)(this._data.statsCompare[c])||0:null;null!==u&&(j+=u);const m=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(B)),e):(0,i.W)((0,n.Rw)((0,n.wK)(B)),e):void 0,y=m?(0,n.CO)((0,n.p3)(m)):B;return d.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,_.uf)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} kWh </td> ${L?d.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==r?(0,_.uf)(r,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${t.flow_to.map(((t,e)=>{var a;const s=-1*((0,h.Kj)(this._data.stats[t.stat_energy_to])||0);b+=s;const l=t.stat_compensation||this._data.info.cost_sensors[t.stat_energy_to],c=l?-1*((0,h.Kj)(this._data.stats[l])||0):null;null!==c&&(C=!0,g+=c);const r=-1*(U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_to])||0);S+=r;const u=U&&l?-1*((0,h.Kj)(this._data.statsCompare[l])||0):null;null!==u&&(j+=u);const m=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(A)),e):(0,i.W)((0,n.Rw)((0,n.wK)(A)),e):void 0,y=m?(0,n.CO)((0,n.p3)(m)):A;return d.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_to,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_to])} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(r,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,_.uf)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} kWh </td> ${L?d.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==c?(0,_.uf)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))}`))} ${z.grid?d.dy` <tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.grid_total")} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(S,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${C?(0,_.uf)(j,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(b,this.hass.locale)} kWh </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${C?(0,_.uf)(g,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${null===(m=z.gas)||void 0===m?void 0:m.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;v+=s;const l=U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;T+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],r=c?(0,h.Kj)(this._data.stats[c])||0:null;null!==r&&(K=!0,$+=r);const u=U&&c?(0,h.Kj)(this._data.statsCompare[c])||0:null;null!==u&&(M+=u);const m=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(F)),e):(0,i.W)((0,n.Rw)((0,n.wK)(F)),e):void 0,y=m?(0,n.CO)((0,n.p3)(m)):F;return d.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${U?d.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} ${q} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,_.uf)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} ${q} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==r?(0,_.uf)(r,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${z.gas?d.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.gas_total")} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(T,this.hass.locale)} ${q} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${K?(0,_.uf)(M,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(v,this.hass.locale)} ${q} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${K?(0,_.uf)($,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${null===(y=z.water)||void 0===y?void 0:y.map(((t,e)=>{var a;const s=(0,h.Kj)(this._data.stats[t.stat_energy_from])||0;w+=s;const l=U&&(0,h.Kj)(this._data.statsCompare[t.stat_energy_from])||0;R+=l;const c=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],r=c?(0,h.Kj)(this._data.stats[c])||0:null;null!==r&&(W=!0,k+=r);const u=U&&c?(0,h.Kj)(this._data.statsCompare[c])||0:null;null!==u&&(x+=u);const m=e>0?this.hass.themes.darkMode?(0,i.C)((0,n.Rw)((0,n.wK)(H)),e):(0,i.W)((0,n.Rw)((0,n.wK)(H)),e):void 0,y=m?(0,n.CO)((0,n.p3)(m)):H;return d.dy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.V)({borderColor:y,backgroundColor:y+"7F"})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.Kd)(this.hass,t.stat_energy_from,null===(a=this._data)||void 0===a?void 0:a.statsMetadata[t.stat_energy_from])} </th> ${U?d.dy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(l,this.hass.locale)} ${J} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,_.uf)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(s,this.hass.locale)} ${J} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==r?(0,_.uf)(r,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${z.water?d.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.water_total")} </th> ${U?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(R,this.hass.locale)} ${J} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${W?(0,_.uf)(x,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(w,this.hass.locale)} ${J} </td> ${L?d.dy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${W?(0,_.uf)(k,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${[K,W,C].filter(Boolean).length>1?d.dy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.total_costs")} </th> ${U?d.dy`<td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)(M+j+x,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} <td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.uf)($+g+k,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td> </tr>`:""} </tbody> </table> </div> </div> </ha-card>`}},{kind:"get",static:!0,key:"styles",value:function(){return d.iv`${(0,d.$m)(c)} .mdc-data-table{width:100%;border:0}.mdc-data-table__cell,.mdc-data-table__header-cell{color:var(--primary-text-color);border-bottom-color:var(--divider-color);text-align:var(--float-start)}.mdc-data-table__row:not(.mdc-data-table__row--selected):hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.total{--mdc-typography-body2-font-weight:500}.total .mdc-data-table__cell{border-top:1px solid var(--divider-color)}ha-card{height:100%;overflow:hidden}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.cell-bullet{width:32px;padding-right:0;padding-inline-end:0;padding-inline-start:16px;direction:var(--direction)}.bullet{border-width:1px;border-style:solid;border-radius:4px;height:16px;width:32px}.mdc-data-table__cell--numeric{direction:ltr}`}}]}}),(0,m.f)(d.oi));s()}catch(t){s(t)}}))}};
//# sourceMappingURL=16938-y0JSbOY3ZLM.js.map