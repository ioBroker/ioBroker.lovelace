{"version":3,"file":"d5dda648.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDA;;;;AC3DA;ACCA;;AAEA;AACA;;;;AAIA;;;;AAIA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAzBA;ACOA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsRA","sources":["webpack://home-assistant-frontend/./node_modules/@polymer/paper-item/paper-icon-item.js","webpack://home-assistant-frontend/./node_modules/@polymer/paper-item/paper-item-body.js","webpack://home-assistant-frontend/./src/components/ha-code-editor.ts","webpack://home-assistant-frontend/./src/components/ha-expansion-panel.ts","webpack://home-assistant-frontend/./src/components/ha-state-icon.ts","webpack://home-assistant-frontend/./src/panels/developer-tools/state/developer-tools-state.js"],"sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two-\nor three- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text\nstyling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height` | Minimum height of a two-line item | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item | `88px`\n`--paper-item-body-secondary-color` | Foreground color for the `secondary` area | `--secondary-text-color`\n`--paper-item-body-secondary` | Mixin applied to the `secondary` area | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","import type { EditorView, KeyBinding, ViewUpdate } from \"@codemirror/view\";\nimport { css, CSSResultGroup, PropertyValues, ReactiveElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { loadCodeMirror } from \"../resources/codemirror.ondemand\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"editor-save\": undefined;\n  }\n}\n\nconst saveKeyBinding: KeyBinding = {\n  key: \"Mod-s\",\n  run: (view: EditorView) => {\n    fireEvent(view.dom, \"editor-save\");\n    return true;\n  },\n};\n\n@customElement(\"ha-code-editor\")\nexport class HaCodeEditor extends ReactiveElement {\n  public codemirror?: EditorView;\n\n  @property() public mode = \"yaml\";\n\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ type: Boolean }) public readOnly = false;\n\n  @property() public error = false;\n\n  @state() private _value = \"\";\n\n  private _loadedCodeMirror?: typeof import(\"../resources/codemirror\");\n\n  public set value(value: string) {\n    this._value = value;\n  }\n\n  public get value(): string {\n    return this.codemirror ? this.codemirror.state.doc.toString() : this._value;\n  }\n\n  public get hasComments(): boolean {\n    if (!this.codemirror || !this._loadedCodeMirror) {\n      return false;\n    }\n    const className = this._loadedCodeMirror.HighlightStyle.get(\n      this.codemirror.state,\n      this._loadedCodeMirror.tags.comment\n    );\n    return !!this.shadowRoot!.querySelector(`span.${className}`);\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    if (!this.codemirror) {\n      return;\n    }\n    if (this.autofocus !== false) {\n      this.codemirror.focus();\n    }\n  }\n\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n\n    if (!this.codemirror) {\n      return;\n    }\n\n    if (changedProps.has(\"mode\")) {\n      this.codemirror.dispatch({\n        effects: this._loadedCodeMirror!.langCompartment!.reconfigure(\n          this._mode\n        ),\n      });\n    }\n    if (changedProps.has(\"readOnly\")) {\n      this.codemirror.dispatch({\n        effects: this._loadedCodeMirror!.readonlyCompartment!.reconfigure(\n          this._loadedCodeMirror!.EditorView!.editable.of(!this.readOnly)\n        ),\n      });\n    }\n    if (changedProps.has(\"_value\") && this._value !== this.value) {\n      this.codemirror.dispatch({\n        changes: {\n          from: 0,\n          to: this.codemirror.state.doc.length,\n          insert: this._value,\n        },\n      });\n    }\n    if (changedProps.has(\"error\")) {\n      this.classList.toggle(\"error-state\", this.error);\n    }\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this._blockKeyboardShortcuts();\n    this._load();\n  }\n\n  private get _mode() {\n    return this._loadedCodeMirror!.langs[this.mode];\n  }\n\n  private async _load(): Promise<void> {\n    this._loadedCodeMirror = await loadCodeMirror();\n\n    this.codemirror = new this._loadedCodeMirror.EditorView({\n      state: this._loadedCodeMirror.EditorState.create({\n        doc: this._value,\n        extensions: [\n          this._loadedCodeMirror.lineNumbers(),\n          this._loadedCodeMirror.EditorState.allowMultipleSelections.of(true),\n          this._loadedCodeMirror.history(),\n          this._loadedCodeMirror.highlightSelectionMatches(),\n          this._loadedCodeMirror.highlightActiveLine(),\n          this._loadedCodeMirror.drawSelection(),\n          this._loadedCodeMirror.rectangularSelection(),\n          this._loadedCodeMirror.keymap.of([\n            ...this._loadedCodeMirror.defaultKeymap,\n            ...this._loadedCodeMirror.searchKeymap,\n            ...this._loadedCodeMirror.historyKeymap,\n            ...this._loadedCodeMirror.tabKeyBindings,\n            saveKeyBinding,\n          ] as KeyBinding[]),\n          this._loadedCodeMirror.langCompartment.of(this._mode),\n          this._loadedCodeMirror.theme,\n          this._loadedCodeMirror.Prec.fallback(\n            this._loadedCodeMirror.highlightStyle\n          ),\n          this._loadedCodeMirror.readonlyCompartment.of(\n            this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)\n          ),\n          this._loadedCodeMirror.EditorView.updateListener.of((update) =>\n            this._onUpdate(update)\n          ),\n        ],\n      }),\n      root: this.shadowRoot!,\n      parent: this.shadowRoot!,\n    });\n  }\n\n  private _blockKeyboardShortcuts() {\n    this.addEventListener(\"keydown\", (ev) => ev.stopPropagation());\n  }\n\n  private _onUpdate(update: ViewUpdate): void {\n    if (!update.docChanged) {\n      return;\n    }\n    const newValue = this.value;\n    if (newValue === this._value) {\n      return;\n    }\n    this._value = newValue;\n    fireEvent(this, \"value-changed\", { value: this._value });\n  }\n\n  // Only Lit 2.0 will use this\n  static get styles(): CSSResultGroup {\n    return css`\n      :host(.error-state) div.cm-wrap .cm-gutters {\n        border-color: var(--error-state-color, red);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-code-editor\": HaCodeEditor;\n  }\n}\n","import { mdiChevronDown } from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { nextRender } from \"../common/util/render-status\";\nimport \"./ha-svg-icon\";\n\n@customElement(\"ha-expansion-panel\")\nclass HaExpansionPanel extends LitElement {\n  @property({ type: Boolean, reflect: true }) expanded = false;\n\n  @property({ type: Boolean, reflect: true }) outlined = false;\n\n  @property() header?: string;\n\n  @property() secondary?: string;\n\n  @query(\".container\") private _container!: HTMLDivElement;\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"summary\" @click=${this._toggleContainer}>\n        <slot class=\"header\" name=\"header\">\n          ${this.header}\n          <slot class=\"secondary\" name=\"secondary\">${this.secondary}</slot>\n        </slot>\n        <ha-svg-icon\n          .path=${mdiChevronDown}\n          class=\"summary-icon ${classMap({ expanded: this.expanded })}\"\n        ></ha-svg-icon>\n      </div>\n      <div\n        class=\"container ${classMap({ expanded: this.expanded })}\"\n        @transitionend=${this._handleTransitionEnd}\n      >\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  private _handleTransitionEnd() {\n    this._container.style.removeProperty(\"height\");\n  }\n\n  private async _toggleContainer(): Promise<void> {\n    const newExpanded = !this.expanded;\n    fireEvent(this, \"expanded-will-change\", { expanded: newExpanded });\n\n    if (newExpanded) {\n      // allow for dynamic content to be rendered\n      await nextRender();\n    }\n\n    const scrollHeight = this._container.scrollHeight;\n    this._container.style.height = `${scrollHeight}px`;\n\n    if (!newExpanded) {\n      setTimeout(() => {\n        this._container.style.height = \"0px\";\n      }, 0);\n    }\n\n    this.expanded = newExpanded;\n    fireEvent(this, \"expanded-changed\", { expanded: this.expanded });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: block;\n      }\n\n      :host([outlined]) {\n        box-shadow: none;\n        border-width: 1px;\n        border-style: solid;\n        border-color: var(\n          --ha-card-border-color,\n          var(--divider-color, #e0e0e0)\n        );\n        border-radius: var(--ha-card-border-radius, 4px);\n        padding: 0 8px;\n      }\n\n      .summary {\n        display: flex;\n        padding: var(--expansion-panel-summary-padding, 0);\n        min-height: 48px;\n        align-items: center;\n        cursor: pointer;\n        overflow: hidden;\n        font-weight: 500;\n      }\n\n      .summary-icon {\n        transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);\n        margin-left: auto;\n      }\n\n      .summary-icon.expanded {\n        transform: rotate(180deg);\n      }\n\n      .container {\n        overflow: hidden;\n        transition: height 300ms cubic-bezier(0.4, 0, 0.2, 1);\n        height: 0px;\n      }\n\n      .container.expanded {\n        height: auto;\n      }\n\n      .header {\n        display: block;\n      }\n\n      .secondary {\n        display: block;\n        color: var(--secondary-text-color);\n        font-size: 12px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-expansion-panel\": HaExpansionPanel;\n  }\n\n  // for fire event\n  interface HASSDomEvents {\n    \"expanded-changed\": {\n      expanded: boolean;\n    };\n    \"expanded-will-change\": {\n      expanded: boolean;\n    };\n  }\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { stateIconPath } from \"../common/entity/state_icon_path\";\nimport \"./ha-icon\";\nimport \"./ha-svg-icon\";\n\n@customElement(\"ha-state-icon\")\nexport class HaStateIcon extends LitElement {\n  @property({ attribute: false }) public state?: HassEntity;\n\n  @property() public icon?: string;\n\n  protected render(): TemplateResult {\n    if (this.icon || this.state?.attributes.icon) {\n      return html`<ha-icon\n        .icon=${this.icon || this.state?.attributes.icon}\n      ></ha-icon>`;\n    }\n    return html`<ha-svg-icon .path=${stateIconPath(this.state)}></ha-svg-icon>`;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-state-icon\": HaStateIcon;\n  }\n}\n","import \"@material/mwc-button\";\nimport {\n  mdiClipboardTextMultipleOutline,\n  mdiInformationOutline,\n  mdiRefresh,\n} from \"@mdi/js\";\nimport \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { dump, load } from \"js-yaml\";\nimport { formatDateTimeWithSeconds } from \"../../../common/datetime/format_date_time\";\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { escapeRegExp } from \"../../../common/string/escape_regexp\";\nimport { copyToClipboard } from \"../../../common/util/copy-clipboard\";\nimport \"../../../components/entity/ha-entity-picker\";\nimport \"../../../components/ha-code-editor\";\nimport \"../../../components/ha-icon-button\";\nimport \"../../../components/ha-svg-icon\";\nimport \"../../../components/ha-checkbox\";\nimport \"../../../components/ha-expansion-panel\";\nimport { showAlertDialog } from \"../../../dialogs/generic/show-dialog-box\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport \"../../../styles/polymer-ha-style\";\n\nconst ERROR_SENTINEL = {};\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HaPanelDevState extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style\">\n        :host {\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n          display: block;\n          padding: 16px;\n        }\n\n        ha-expansion-panel {\n          margin: 0 8px 16px;\n        }\n\n        .inputs {\n          width: 100%;\n          max-width: 400px;\n        }\n\n        .info {\n          padding: 0 16px;\n        }\n\n        .button-row {\n          display: flex;\n          margin-top: 8px;\n          align-items: center;\n        }\n\n        .table-wrapper {\n          width: 100%;\n          overflow: auto;\n        }\n\n        .entities th {\n          padding: 0 8px;\n          text-align: left;\n          font-size: var(\n            --paper-input-container-shared-input-style_-_font-size\n          );\n        }\n\n        th.attributes {\n          position: relative;\n        }\n\n        th.attributes ha-checkbox {\n          position: absolute;\n          bottom: -8px;\n        }\n\n        :host([rtl]) .entities th {\n          text-align: right;\n        }\n\n        .entities tr {\n          vertical-align: top;\n          direction: ltr;\n        }\n\n        .entities tr:nth-child(odd) {\n          background-color: var(--table-row-background-color, #fff);\n        }\n\n        .entities tr:nth-child(even) {\n          background-color: var(--table-row-alternative-background-color, #eee);\n        }\n        .entities td {\n          padding: 4px;\n          min-width: 200px;\n          word-break: break-word;\n        }\n        .entities ha-svg-icon {\n          --mdc-icon-size: 20px;\n          padding: 4px;\n          cursor: pointer;\n          flex-shrink: 0;\n          margin-right: 8px;\n        }\n        .entities td:nth-child(1) {\n          min-width: 300px;\n          width: 30%;\n        }\n        .entities td:nth-child(3) {\n          white-space: pre-wrap;\n          word-break: break-word;\n        }\n\n        .entities a {\n          color: var(--primary-color);\n        }\n\n        .entities .id-name-container {\n          display: flex;\n          flex-direction: column;\n        }\n        .entities .id-name-row {\n          display: flex;\n          align-items: center;\n        }\n\n        :host([narrow]) .state-wrapper {\n          flex-direction: column;\n        }\n\n        :host([narrow]) .info {\n          padding: 0;\n        }\n      </style>\n      <h1>\n        [[localize('ui.panel.developer-tools.tabs.states.current_entities')]]\n      </h1>\n      <ha-expansion-panel\n        header=\"Set state\"\n        outlined\n        expanded=\"[[_expanded]]\"\n        on-expanded-changed=\"expandedChanged\"\n      >\n        <p>\n          [[localize('ui.panel.developer-tools.tabs.states.description1')]]<br />\n          [[localize('ui.panel.developer-tools.tabs.states.description2')]]\n        </p>\n        <div class=\"state-wrapper flex layout horizontal\">\n          <div class=\"inputs\">\n            <ha-entity-picker\n              autofocus\n              hass=\"[[hass]]\"\n              value=\"{{_entityId}}\"\n              on-change=\"entityIdChanged\"\n              allow-custom-entity\n            ></ha-entity-picker>\n            <paper-input\n              label=\"[[localize('ui.panel.developer-tools.tabs.states.state')]]\"\n              required\n              autocapitalize=\"none\"\n              autocomplete=\"off\"\n              autocorrect=\"off\"\n              spellcheck=\"false\"\n              value=\"{{_state}}\"\n              class=\"state-input\"\n            ></paper-input>\n            <p>\n              [[localize('ui.panel.developer-tools.tabs.states.state_attributes')]]\n            </p>\n            <ha-code-editor\n              mode=\"yaml\"\n              value=\"[[_stateAttributes]]\"\n              error=\"[[!validJSON]]\"\n              on-value-changed=\"_yamlChanged\"\n            ></ha-code-editor>\n            <div class=\"button-row\">\n              <mwc-button\n                on-click=\"handleSetState\"\n                disabled=\"[[!validJSON]]\"\n                raised\n                >[[localize('ui.panel.developer-tools.tabs.states.set_state')]]</mwc-button\n              >\n              <ha-icon-button\n                on-click=\"entityIdChanged\"\n                label=\"[[localize('ui.common.refresh')]]\"\n                path=\"[[refreshIcon()]]\"\n              ></ha-icon-button>\n            </div>\n          </div>\n          <div class=\"info\">\n            <template is=\"dom-if\" if=\"[[_entity]]\">\n              <p>\n                <b\n                  >[[localize('ui.panel.developer-tools.tabs.states.last_changed')]]:</b\n                ><br />[[lastChangedString(_entity)]]\n              </p>\n              <p>\n                <b\n                  >[[localize('ui.panel.developer-tools.tabs.states.last_updated')]]:</b\n                ><br />[[lastUpdatedString(_entity)]]\n              </p>\n            </template>\n          </div>\n        </div>\n      </ha-expansion-panel>\n      <div class=\"table-wrapper\">\n        <table class=\"entities\">\n          <tr>\n            <th>[[localize('ui.panel.developer-tools.tabs.states.entity')]]</th>\n            <th>[[localize('ui.panel.developer-tools.tabs.states.state')]]</th>\n            <th hidden$=\"[[narrow]]\" class=\"attributes\">\n              [[localize('ui.panel.developer-tools.tabs.states.attributes')]]\n              <ha-checkbox\n                checked=\"[[_showAttributes]]\"\n                on-change=\"saveAttributeCheckboxState\"\n                reducedTouchTarget\n              ></ha-checkbox>\n            </th>\n          </tr>\n          <tr>\n            <th>\n              <paper-input\n                label=\"[[localize('ui.panel.developer-tools.tabs.states.filter_entities')]]\"\n                type=\"search\"\n                value=\"{{_entityFilter}}\"\n              ></paper-input>\n            </th>\n            <th>\n              <paper-input\n                label=\"[[localize('ui.panel.developer-tools.tabs.states.filter_states')]]\"\n                type=\"search\"\n                value=\"{{_stateFilter}}\"\n              ></paper-input>\n            </th>\n            <th hidden$=\"[[!computeShowAttributes(narrow, _showAttributes)]]\">\n              <paper-input\n                label=\"[[localize('ui.panel.developer-tools.tabs.states.filter_attributes')]]\"\n                type=\"search\"\n                value=\"{{_attributeFilter}}\"\n              ></paper-input>\n            </th>\n          </tr>\n          <tr hidden$=\"[[!computeShowEntitiesPlaceholder(_entities)]]\">\n            <td colspan=\"3\">\n              [[localize('ui.panel.developer-tools.tabs.states.no_entities')]]\n            </td>\n          </tr>\n          <template is=\"dom-repeat\" items=\"[[_entities]]\" as=\"entity\">\n            <tr>\n              <td>\n                <div class=\"id-name-container\">\n                  <div class=\"id-name-row\">\n                    <ha-svg-icon\n                      on-click=\"copyEntity\"\n                      alt=\"[[localize('ui.panel.developer-tools.tabs.states.copy_id')]]\"\n                      title=\"[[localize('ui.panel.developer-tools.tabs.states.copy_id')]]\"\n                      path=\"[[clipboardOutlineIcon()]]\"\n                    ></ha-svg-icon>\n                    <a href=\"#\" on-click=\"entitySelected\"\n                      >[[entity.entity_id]]</a\n                    >\n                  </div>\n                  <div class=\"id-name-row\">\n                    <ha-svg-icon\n                      on-click=\"entityMoreInfo\"\n                      alt=\"[[localize('ui.panel.developer-tools.tabs.states.more_info')]]\"\n                      title=\"[[localize('ui.panel.developer-tools.tabs.states.more_info')]]\"\n                      path=\"[[informationOutlineIcon()]]\"\n                    ></ha-svg-icon>\n                    <span class=\"secondary\">\n                      [[entity.attributes.friendly_name]]\n                    </span>\n                  </div>\n                </div>\n              </td>\n              <td>[[entity.state]]</td>\n              <template\n                is=\"dom-if\"\n                if=\"[[computeShowAttributes(narrow, _showAttributes)]]\"\n              >\n                <td>[[attributeString(entity)]]</td>\n              </template>\n            </tr>\n          </template>\n        </table>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      parsedJSON: {\n        type: Object,\n        computed: \"_computeParsedStateAttributes(_stateAttributes)\",\n      },\n\n      validJSON: {\n        type: Boolean,\n        computed: \"_computeValidJSON(parsedJSON)\",\n      },\n\n      _entityId: {\n        type: String,\n        value: \"\",\n      },\n\n      _entityFilter: {\n        type: String,\n        value: \"\",\n      },\n\n      _stateFilter: {\n        type: String,\n        value: \"\",\n      },\n\n      _attributeFilter: {\n        type: String,\n        value: \"\",\n      },\n\n      _entity: {\n        type: Object,\n      },\n\n      _state: {\n        type: String,\n        value: \"\",\n      },\n\n      _stateAttributes: {\n        type: String,\n        value: \"\",\n      },\n\n      _showAttributes: {\n        type: Boolean,\n        value: JSON.parse(\n          localStorage.getItem(\"devToolsShowAttributes\") || true\n        ),\n      },\n\n      _entities: {\n        type: Array,\n        computed:\n          \"computeEntities(hass, _entityFilter, _stateFilter, _attributeFilter)\",\n      },\n\n      _expanded: {\n        type: Boolean,\n        value: false,\n      },\n\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true,\n      },\n\n      rtl: {\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  copyEntity(ev) {\n    ev.preventDefault();\n    copyToClipboard(ev.model.entity.entity_id);\n  }\n\n  entitySelected(ev) {\n    const state = ev.model.entity;\n    this._entityId = state.entity_id;\n    this._entity = state;\n    this._state = state.state;\n    this._stateAttributes = dump(state.attributes);\n    this._expanded = true;\n    ev.preventDefault();\n  }\n\n  entityIdChanged() {\n    if (this._entityId === \"\") {\n      this._entity = undefined;\n      this._state = \"\";\n      this._stateAttributes = \"\";\n      return;\n    }\n    const state = this.hass.states[this._entityId];\n    if (!state) {\n      return;\n    }\n    this._entity = state;\n    this._state = state.state;\n    this._stateAttributes = dump(state.attributes);\n    this._expanded = true;\n  }\n\n  expandedChanged(ev) {\n    this._expanded = ev.detail.expanded;\n  }\n\n  entityMoreInfo(ev) {\n    ev.preventDefault();\n    this.fire(\"hass-more-info\", { entityId: ev.model.entity.entity_id });\n  }\n\n  handleSetState() {\n    if (!this._entityId) {\n      showAlertDialog(this, {\n        text: this.hass.localize(\n          \"ui.panel.developer-tools.tabs.states.alert_entity_field\"\n        ),\n      });\n      return;\n    }\n    this.hass.callApi(\"POST\", \"states/\" + this._entityId, {\n      state: this._state,\n      attributes: this.parsedJSON,\n    });\n  }\n\n  informationOutlineIcon() {\n    return mdiInformationOutline;\n  }\n\n  clipboardOutlineIcon() {\n    return mdiClipboardTextMultipleOutline;\n  }\n\n  refreshIcon() {\n    return mdiRefresh;\n  }\n\n  computeEntities(hass, _entityFilter, _stateFilter, _attributeFilter) {\n    const entityFilterRegExp =\n      _entityFilter &&\n      RegExp(escapeRegExp(_entityFilter).replace(/\\\\\\*/g, \".*\"), \"i\");\n\n    const stateFilterRegExp =\n      _stateFilter &&\n      RegExp(escapeRegExp(_stateFilter).replace(/\\\\\\*/g, \".*\"), \"i\");\n\n    let keyFilterRegExp;\n    let valueFilterRegExp;\n    let multiMode = false;\n\n    if (_attributeFilter) {\n      const colonIndex = _attributeFilter.indexOf(\":\");\n      multiMode = colonIndex !== -1;\n\n      const keyFilter = multiMode\n        ? _attributeFilter.substring(0, colonIndex).trim()\n        : _attributeFilter;\n      const valueFilter = multiMode\n        ? _attributeFilter.substring(colonIndex + 1).trim()\n        : _attributeFilter;\n\n      keyFilterRegExp = RegExp(\n        escapeRegExp(keyFilter).replace(/\\\\\\*/g, \".*\"),\n        \"i\"\n      );\n      valueFilterRegExp = multiMode\n        ? RegExp(escapeRegExp(valueFilter).replace(/\\\\\\*/g, \".*\"), \"i\")\n        : keyFilterRegExp;\n    }\n\n    return Object.values(hass.states)\n      .filter((value) => {\n        if (\n          entityFilterRegExp &&\n          !entityFilterRegExp.test(value.entity_id) &&\n          (value.attributes.friendly_name === undefined ||\n            !entityFilterRegExp.test(value.attributes.friendly_name))\n        ) {\n          return false;\n        }\n\n        if (stateFilterRegExp && !stateFilterRegExp.test(value.state)) {\n          return false;\n        }\n\n        if (keyFilterRegExp && valueFilterRegExp) {\n          for (const [key, attributeValue] of Object.entries(\n            value.attributes\n          )) {\n            const match = keyFilterRegExp.test(key);\n            if (match && !multiMode) {\n              return true; // in single mode we're already satisfied with this match\n            }\n            if (!match && multiMode) {\n              continue;\n            }\n\n            if (\n              attributeValue !== undefined &&\n              valueFilterRegExp.test(JSON.stringify(attributeValue))\n            ) {\n              return true;\n            }\n          }\n\n          // there are no attributes where the key and/or value can be matched\n          return false;\n        }\n\n        return true;\n      })\n      .sort((entityA, entityB) => {\n        if (entityA.entity_id < entityB.entity_id) {\n          return -1;\n        }\n        if (entityA.entity_id > entityB.entity_id) {\n          return 1;\n        }\n        return 0;\n      });\n  }\n\n  computeShowEntitiesPlaceholder(_entities) {\n    return _entities.length === 0;\n  }\n\n  computeShowAttributes(narrow, _showAttributes) {\n    return !narrow && _showAttributes;\n  }\n\n  attributeString(entity) {\n    let output = \"\";\n    let i;\n    let keys;\n    let key;\n    let value;\n\n    for (i = 0, keys = Object.keys(entity.attributes); i < keys.length; i++) {\n      key = keys[i];\n      value = this.formatAttributeValue(entity.attributes[key]);\n      output += `${key}: ${value}\\n`;\n    }\n    return output;\n  }\n\n  lastChangedString(entity) {\n    return formatDateTimeWithSeconds(\n      new Date(entity.last_changed),\n      this.hass.locale\n    );\n  }\n\n  lastUpdatedString(entity) {\n    return formatDateTimeWithSeconds(\n      new Date(entity.last_updated),\n      this.hass.locale\n    );\n  }\n\n  formatAttributeValue(value) {\n    if (\n      (Array.isArray(value) && value.some((val) => val instanceof Object)) ||\n      (!Array.isArray(value) && value instanceof Object)\n    ) {\n      return `\\n${dump(value)}`;\n    }\n    return Array.isArray(value) ? value.join(\", \") : value;\n  }\n\n  saveAttributeCheckboxState(ev) {\n    this._showAttributes = ev.target.checked;\n    try {\n      localStorage.setItem(\"devToolsShowAttributes\", ev.target.checked);\n    } catch (e) {\n      // Catch for Safari private mode\n    }\n  }\n\n  _computeParsedStateAttributes(stateAttributes) {\n    try {\n      return stateAttributes.trim() ? load(stateAttributes) : {};\n    } catch (err) {\n      return ERROR_SENTINEL;\n    }\n  }\n\n  _computeValidJSON(parsedJSON) {\n    return parsedJSON !== ERROR_SENTINEL;\n  }\n\n  _yamlChanged(ev) {\n    this._stateAttributes = ev.detail.value;\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n}\n\ncustomElements.define(\"developer-tools-state\", HaPanelDevState);\n"],"names":[],"sourceRoot":""}