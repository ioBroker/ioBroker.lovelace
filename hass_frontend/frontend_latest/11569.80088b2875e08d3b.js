export const __webpack_ids__=["11569"];export const __webpack_modules__={17712:function(t,e,a){a.r(e);var o=a(44249),i=a(72621),n=(a(75656),a(50100),a(18084),a(57243)),s=a(15093),d=(a(68424),a(29095),a(96194)),c=a(58014),r=a(72473),l=a(34798);let h=(0,o.Z)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_attached",value:()=>!1},{kind:"field",decorators:[(0,s.SB)()],key:"_waiting",value:()=>!1},{kind:"method",key:"connectedCallback",value:function(){(0,i.Z)(a,"connectedCallback",this,3)([]),this._attached=!0}},{kind:"method",key:"disconnectedCallback",value:function(){(0,i.Z)(a,"disconnectedCallback",this,3)([]),this._attached=!1}},{kind:"method",key:"render",value:function(){return this._attached&&this.stateObj?n.dy` <ha-camera-stream .hass="${this.hass}" .stateObj="${this.stateObj}" allow-exoplayer controls></ha-camera-stream> <div class="actions"> <ha-progress-button @click="${this._downloadSnapshot}" .progress="${this._waiting}" .disabled="${this.stateObj.state===d.nZ}"> ${this.hass.localize("ui.dialogs.more_info_control.camera.download_snapshot")} </ha-progress-button> </div> `:n.Ld}},{kind:"method",key:"_downloadSnapshot",value:async function(t){const e=t.currentTarget;this._waiting=!0;try{const t=await this.hass.callApiRaw("GET",`camera_proxy/${this.stateObj.entity_id}`);if(!t)throw new Error("No response from API");const e="image/png"===t.headers.get("content-type")?"png":"jpg",a=(new Date).toLocaleString(),o=`snapshot_${(0,l.l)(this.stateObj.entity_id)}_${a}.${e}`,i=await t.blob(),n=window.URL.createObjectURL(i);(0,c.N)(n,o)}catch(t){return this._waiting=!1,e.actionError(),void(0,r.C)(this,{message:this.hass.localize("ui.dialogs.more_info_control.camera.failed_to_download")})}this._waiting=!1,e.actionSuccess()}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`:host{display:block}.actions{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;box-sizing:border-box;padding:12px;z-index:1;gap:8px}`}]}}),n.oi);customElements.define("more-info-camera",h)},58014:function(t,e,a){a.d(e,{N:()=>i,G:()=>n});var o=a(18117);const i=(t,e="")=>{const a=document.createElement("a");a.target="_blank",a.href=t,a.download=e,a.style.display="none",document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)},n=t=>!(t=>!!t.auth.external&&o.G)(t)||!!t.auth.external?.config.downloadFileSupported},18117:function(t,e,a){a.d(e,{G:()=>o});const o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}};
//# sourceMappingURL=11569.80088b2875e08d3b.js.map