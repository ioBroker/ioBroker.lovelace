{"version":3,"file":"9e392ea4.js","mappings":";AAqMA;AAEA;AACA;AAEA;AACA;AAIA;AAkCA;AACA;AACA;AAIA;;;;;;;;;;;;;;;;AA8JA;;AAkBA;;AAQA;;;;;;AAYA;;AAKA;;;;;AA/KA;;;;;AAOA;AAGA;;;;;AAOA;AAGA;;;;;AAOA;;;;;AAOA;AAGA;;;;;;;;;AAWA;AAGA;;;;;;;;;;;;;;;;;AAmBA;AAGA;;;;;;;;;AAWA;AAGA;;;;;;;;;AAWA;AAGA;;;;;;;;;;;;;AAeA;AAGA;;;;;AAOA;AAkDA;;;AAOA;;AAJA;;ACtYA;;AAKA;;AAaA;AAGA;AACA;AAIA;;AAEA;;;AAIA;;;;;AAKA;AAGA;AACA;;AAKA;;;AAGA;AAGA;AACA;;;AAMA;AAOA;AAIA;;;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AArGA","sources":["webpack://home-assistant-frontend/./src/data/weather.ts","webpack://home-assistant-frontend/./src/panels/lovelace/entity-rows/hui-weather-entity-row.ts"],"sourcesContent":["import {\n  mdiAlertCircleOutline,\n  mdiGauge,\n  mdiWaterPercent,\n  mdiWeatherFog,\n  mdiWeatherRainy,\n  mdiWeatherWindy,\n} from \"@mdi/js\";\nimport {\n  HassEntityAttributeBase,\n  HassEntityBase,\n} from \"home-assistant-js-websocket\";\nimport { css, html, svg, SVGTemplateResult, TemplateResult } from \"lit\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { formatNumber } from \"../common/number/format_number\";\nimport \"../components/ha-svg-icon\";\nimport type { HomeAssistant } from \"../types\";\n\ninterface ForecastAttribute {\n  temperature: number;\n  datetime: string;\n  templow?: number;\n  precipitation?: number;\n  precipitation_probability?: number;\n  humidity?: number;\n  condition?: string;\n  daytime?: boolean;\n}\n\ninterface WeatherEntityAttributes extends HassEntityAttributeBase {\n  temperature: number;\n  humidity?: number;\n  forecast?: ForecastAttribute[];\n  wind_speed: string;\n  wind_bearing: string;\n}\n\nexport interface WeatherEntity extends HassEntityBase {\n  attributes: WeatherEntityAttributes;\n}\n\nexport const weatherSVGs = new Set<string>([\n  \"clear-night\",\n  \"cloudy\",\n  \"fog\",\n  \"lightning\",\n  \"lightning-rainy\",\n  \"partlycloudy\",\n  \"pouring\",\n  \"rainy\",\n  \"hail\",\n  \"snowy\",\n  \"snowy-rainy\",\n  \"sunny\",\n  \"windy\",\n  \"windy-variant\",\n]);\n\nexport const weatherIcons = {\n  exceptional: mdiAlertCircleOutline,\n};\n\nexport const weatherAttrIcons = {\n  humidity: mdiWaterPercent,\n  wind_bearing: mdiWeatherWindy,\n  wind_speed: mdiWeatherWindy,\n  pressure: mdiGauge,\n  visibility: mdiWeatherFog,\n  precipitation: mdiWeatherRainy,\n};\n\nconst cloudyStates = new Set<string>([\n  \"partlycloudy\",\n  \"cloudy\",\n  \"fog\",\n  \"windy\",\n  \"windy-variant\",\n  \"hail\",\n  \"rainy\",\n  \"snowy\",\n  \"snowy-rainy\",\n  \"pouring\",\n  \"lightning\",\n  \"lightning-rainy\",\n]);\n\nconst rainStates = new Set<string>([\"hail\", \"rainy\", \"pouring\"]);\n\nconst windyStates = new Set<string>([\"windy\", \"windy-variant\"]);\n\nconst snowyStates = new Set<string>([\"snowy\", \"snowy-rainy\"]);\n\nconst lightningStates = new Set<string>([\"lightning\", \"lightning-rainy\"]);\n\nconst cardinalDirections = [\n  \"N\",\n  \"NNE\",\n  \"NE\",\n  \"ENE\",\n  \"E\",\n  \"ESE\",\n  \"SE\",\n  \"SSE\",\n  \"S\",\n  \"SSW\",\n  \"SW\",\n  \"WSW\",\n  \"W\",\n  \"WNW\",\n  \"NW\",\n  \"NNW\",\n  \"N\",\n];\n\nconst getWindBearingText = (degree: string): string => {\n  const degreenum = parseInt(degree, 10);\n  if (isFinite(degreenum)) {\n    // eslint-disable-next-line no-bitwise\n    return cardinalDirections[(((degreenum + 11.25) / 22.5) | 0) % 16];\n  }\n  return degree;\n};\n\nconst getWindBearing = (bearing: string): string => {\n  if (bearing != null) {\n    return getWindBearingText(bearing);\n  }\n  return \"\";\n};\n\nexport const getWind = (\n  hass: HomeAssistant,\n  speed: string,\n  bearing: string\n): string => {\n  const speedText = `${formatNumber(speed, hass.locale)} ${getWeatherUnit(\n    hass!,\n    \"wind_speed\"\n  )}`;\n  if (bearing !== null) {\n    const cardinalDirection = getWindBearing(bearing);\n    return `${speedText} (${\n      hass.localize(\n        `ui.card.weather.cardinal_direction.${cardinalDirection.toLowerCase()}`\n      ) || cardinalDirection\n    })`;\n  }\n  return speedText;\n};\n\nexport const getWeatherUnit = (\n  hass: HomeAssistant,\n  measure: string\n): string => {\n  switch (measure) {\n    case \"visibility\":\n      return hass.config.unit_system.length || \"\";\n    case \"precipitation\":\n      return hass.config.unit_system.accumulated_precipitation || \"\";\n    case \"humidity\":\n    case \"precipitation_probability\":\n      return \"%\";\n    default:\n      return hass.config.unit_system[measure] || \"\";\n  }\n};\n\nexport const getSecondaryWeatherAttribute = (\n  hass: HomeAssistant,\n  stateObj: WeatherEntity\n): TemplateResult | undefined => {\n  const extrema = getWeatherExtrema(hass, stateObj);\n\n  if (extrema) {\n    return extrema;\n  }\n\n  let value: number;\n  let attribute: string;\n\n  if (\n    stateObj.attributes.forecast?.length &&\n    stateObj.attributes.forecast[0].precipitation !== undefined &&\n    stateObj.attributes.forecast[0].precipitation !== null\n  ) {\n    value = stateObj.attributes.forecast[0].precipitation!;\n    attribute = \"precipitation\";\n  } else if (\"humidity\" in stateObj.attributes) {\n    value = stateObj.attributes.humidity!;\n    attribute = \"humidity\";\n  } else {\n    return undefined;\n  }\n\n  const weatherAttrIcon = weatherAttrIcons[attribute];\n\n  return html`\n    ${weatherAttrIcon\n      ? html`\n          <ha-svg-icon class=\"attr-icon\" .path=${weatherAttrIcon}></ha-svg-icon>\n        `\n      : hass!.localize(`ui.card.weather.attributes.${attribute}`)}\n    ${formatNumber(value, hass.locale, { maximumFractionDigits: 1 })}\n    ${getWeatherUnit(hass!, attribute)}\n  `;\n};\n\nconst getWeatherExtrema = (\n  hass: HomeAssistant,\n  stateObj: WeatherEntity\n): TemplateResult | undefined => {\n  if (!stateObj.attributes.forecast?.length) {\n    return undefined;\n  }\n\n  let tempLow: number | undefined;\n  let tempHigh: number | undefined;\n  const today = new Date().getDate();\n\n  for (const forecast of stateObj.attributes.forecast!) {\n    if (new Date(forecast.datetime).getDate() !== today) {\n      break;\n    }\n    if (!tempHigh || forecast.temperature > tempHigh) {\n      tempHigh = forecast.temperature;\n    }\n    if (!tempLow || (forecast.templow && forecast.templow < tempLow)) {\n      tempLow = forecast.templow;\n    }\n    if (!forecast.templow && (!tempLow || forecast.temperature < tempLow)) {\n      tempLow = forecast.temperature;\n    }\n  }\n\n  if (!tempLow && !tempHigh) {\n    return undefined;\n  }\n\n  const unit = getWeatherUnit(hass!, \"temperature\");\n\n  return html`\n    ${tempHigh ? `${formatNumber(tempHigh, hass.locale)} ${unit}` : \"\"}\n    ${tempLow && tempHigh ? \" / \" : \"\"}\n    ${tempLow ? `${formatNumber(tempLow, hass.locale)} ${unit}` : \"\"}\n  `;\n};\n\nexport const weatherSVGStyles = css`\n  .rain {\n    fill: var(--weather-icon-rain-color, #30b3ff);\n  }\n  .sun {\n    fill: var(--weather-icon-sun-color, #fdd93c);\n  }\n  .moon {\n    fill: var(--weather-icon-moon-color, #fcf497);\n  }\n  .cloud-back {\n    fill: var(--weather-icon-cloud-back-color, #d4d4d4);\n  }\n  .cloud-front {\n    fill: var(--weather-icon-cloud-front-color, #f9f9f9);\n  }\n`;\n\nconst getWeatherStateSVG = (\n  state: string,\n  nightTime?: boolean\n): SVGTemplateResult => svg`\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 17 17\"\n  >\n  ${\n    state === \"sunny\"\n      ? svg`\n          <path\n            class=\"sun\"\n            d=\"m 14.39303,8.4033507 c 0,3.3114723 -2.684145,5.9956173 -5.9956169,5.9956173 -3.3114716,0 -5.9956168,-2.684145 -5.9956168,-5.9956173 0,-3.311471 2.6841452,-5.995617 5.9956168,-5.995617 3.3114719,0 5.9956169,2.684146 5.9956169,5.995617\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    state === \"clear-night\"\n      ? svg`\n          <path\n            class=\"moon\"\n            d=\"m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    state === \"partlycloudy\" && nightTime\n      ? svg`\n          <path\n            class=\"moon\"\n            d=\"m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484\"\n          />\n        `\n      : state === \"partlycloudy\"\n      ? svg`\n          <path\n            class=\"sun\"\n            d=\"m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    cloudyStates.has(state)\n      ? svg`\n          <path\n            class=\"cloud-back\"\n            d=\"m3.8863 5.035c-0.54892 0.16898-1.04 0.46637-1.4372 0.8636-0.63077 0.63041-1.0206 1.4933-1.0206 2.455 0 1.9251 1.5589 3.4682 3.4837 3.4682h6.9688c1.9251 0 3.484-1.5981 3.484-3.5232 0-1.9251-1.5589-3.5232-3.484-3.5232h-1.0834c-0.25294-1.6916-1.6986-2.9083-3.4463-2.9083-1.7995 0-3.2805 1.4153-3.465 3.1679\"\n          />\n          <path\n            class=\"cloud-front\"\n            d=\"m4.1996 7.6995c-0.33902 0.10407-0.64276 0.28787-0.88794 0.5334-0.39017 0.38982-0.63147 0.92322-0.63147 1.5176 0 1.1896 0.96414 2.1431 2.1537 2.1431h4.3071c1.1896 0 2.153-0.98742 2.153-2.1777 0-1.1896-0.96344-2.1777-2.153-2.1777h-0.66992c-0.15593-1.0449-1.0499-1.7974-2.1297-1.7974-1.112 0-2.0274 0.87524-2.1417 1.9586\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    rainStates.has(state)\n      ? svg`\n          <path\n            class=\"rain\"\n            d=\"m5.2852 14.734c-0.22401 0.24765-0.57115 0.2988-0.77505 0.11395-0.20391-0.1845-0.18732-0.53481 0.036689-0.78281 0.14817-0.16298 0.59126-0.32914 0.87559-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.065617 0.2921-0.18732 0.74965-0.33514 0.91299\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m11.257 14.163c-0.22437 0.24765-0.57115 0.2988-0.77505 0.11395-0.2039-0.1845-0.18768-0.53481 0.03669-0.78281 0.14817-0.16298 0.59126-0.32914 0.8756-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.06562 0.2921-0.18732 0.74965-0.33514 0.91299\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m8.432 15.878c-0.15452 0.17039-0.3937 0.20567-0.53446 0.07867-0.14041-0.12735-0.12876-0.36865 0.025753-0.53975 0.10195-0.11218 0.40711-0.22684 0.60325-0.29175 0.085725-0.02858 0.15628 0.03563 0.13652 0.12382-0.045508 0.20108-0.12912 0.51647-0.23107 0.629\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m7.9991 14.118c-0.19226 0.21237-0.49001 0.25612-0.66499 0.09737-0.17462-0.15804-0.16051-0.45861 0.03175-0.67098 0.12665-0.14005 0.50729-0.28293 0.75071-0.36336 0.10689-0.03563 0.19473 0.0441 0.17004 0.15346-0.056092 0.25082-0.16051 0.64347-0.28751 0.78352\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    state === \"pouring\"\n      ? svg`\n          <path\n            class=\"rain\"\n            d=\"m10.648 16.448c-0.19226 0.21449-0.49001 0.25894-0.66499 0.09878-0.17498-0.16016-0.16087-0.4639 0.03175-0.67874 0.12665-0.14146 0.50694-0.2854 0.75071-0.36724 0.10689-0.03563 0.19473 0.0448 0.17004 0.15558-0.05645 0.25365-0.16051 0.65017-0.28751 0.79163\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m5.9383 16.658c-0.22437 0.25012-0.5715 0.30162-0.77505 0.11501-0.20391-0.18627-0.18768-0.54046 0.036689-0.79093 0.14817-0.1651 0.59126-0.33267 0.87559-0.42827 0.12418-0.04127 0.22648 0.05221 0.19791 0.18168-0.065617 0.29528-0.18732 0.75741-0.33514 0.92251\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    windyStates.has(state)\n      ? svg`\n          <path\n            class=\"cloud-back\"\n            d=\"m 13.59616,15.30968 c 0,0 -0.09137,-0.0071 -0.250472,-0.0187 -0.158045,-0.01235 -0.381353,-0.02893 -0.64382,-0.05715 -0.262466,-0.02716 -0.564444,-0.06385 -0.877358,-0.124531 -0.156986,-0.03034 -0.315383,-0.06844 -0.473781,-0.111478 -0.157691,-0.04551 -0.313266,-0.09842 -0.463902,-0.161219 l -0.267406,-0.0949 c -0.09984,-0.02646 -0.205669,-0.04904 -0.305153,-0.06738 -0.193322,-0.02716 -0.3838218,-0.03316 -0.5640912,-0.02011 -0.3626556,0.02611 -0.6847417,0.119239 -0.94615,0.226483 -0.2617611,0.108656 -0.4642556,0.230364 -0.600075,0.324203 -0.1358195,0.09419 -0.2049639,0.160514 -0.2049639,0.160514 0,0 0.089958,-0.01623 0.24765,-0.04445 0.1559278,-0.02575 0.3764139,-0.06174 0.6367639,-0.08714 0.2596444,-0.02646 0.5591527,-0.0441 0.8678333,-0.02328 0.076905,0.0035 0.1538111,0.01658 0.2321278,0.02293 0.077611,0.01058 0.1534581,0.02893 0.2314221,0.04022 0.07267,0.01834 0.1397,0.03986 0.213078,0.05644 l 0.238125,0.08925 c 0.09207,0.03281 0.183444,0.07055 0.275872,0.09878 0.09243,0.0261 0.185208,0.05327 0.277636,0.07161 0.184856,0.0388 0.367947,0.06174 0.543983,0.0702 0.353131,0.01905 0.678745,-0.01341 0.951442,-0.06456 0.27305,-0.05292 0.494595,-0.123119 0.646642,-0.181681 0.152047,-0.05785 0.234597,-0.104069 0.234597,-0.104069\"\n          />\n          <path\n            class=\"cloud-back\"\n            d=\"m 4.7519154,13.905801 c 0,0 0.091369,-0.0032 0.2511778,-0.0092 0.1580444,-0.0064 0.3820583,-0.01446 0.6455833,-0.03281 0.2631722,-0.01729 0.5662083,-0.04269 0.8812389,-0.09137 0.1576916,-0.02434 0.3175,-0.05609 0.4776611,-0.09384 0.1591027,-0.03951 0.3167944,-0.08643 0.4699,-0.14358 l 0.2702277,-0.08467 c 0.1008945,-0.02222 0.2074334,-0.04127 0.3072695,-0.05574 0.1943805,-0.01976 0.3848805,-0.0187 0.5651499,0.0014 0.3608917,0.03951 0.67945,0.144639 0.936625,0.261761 0.2575278,0.118534 0.4554364,0.247297 0.5873754,0.346781 0.132291,0.09913 0.198966,0.168275 0.198966,0.168275 0,0 -0.08925,-0.01976 -0.245886,-0.05397 C 9.9423347,14.087088 9.7232597,14.042988 9.4639681,14.00736 9.2057347,13.97173 8.9072848,13.94245 8.5978986,13.95162 c -0.077258,7.06e-4 -0.1541638,0.01058 -0.2328333,0.01411 -0.077964,0.0078 -0.1545166,0.02328 -0.2331861,0.03175 -0.073025,0.01588 -0.1404055,0.03422 -0.2141361,0.04798 l -0.2420055,0.08008 c -0.093486,0.02963 -0.1859139,0.06421 -0.2794,0.0889 C 7.3028516,14.23666 7.2093653,14.2603 7.116232,14.27512 6.9303181,14.30722 6.7465209,14.3231 6.5697792,14.32486 6.2166487,14.33046 5.8924459,14.28605 5.6218654,14.224318 5.3505793,14.161565 5.1318571,14.082895 4.9822793,14.01869 4.8327015,13.95519 4.7519154,13.905801 4.7519154,13.905801\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    snowyStates.has(state)\n      ? svg`\n          <path\n            class=\"rain\"\n            d=\"m 8.4319893,15.348341 c 0,0.257881 -0.209197,0.467079 -0.467078,0.467079 -0.258586,0 -0.46743,-0.209198 -0.46743,-0.467079 0,-0.258233 0.208844,-0.467431 0.46743,-0.467431 0.257881,0 0.467078,0.209198 0.467078,0.467431\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m 11.263878,14.358553 c 0,0.364067 -0.295275,0.659694 -0.659695,0.659694 -0.364419,0 -0.6596937,-0.295627 -0.6596937,-0.659694 0,-0.364419 0.2952747,-0.659694 0.6596937,-0.659694 0.36442,0 0.659695,0.295275 0.659695,0.659694\"\n          />\n          <path\n            class=\"rain\"\n            d=\"m 5.3252173,13.69847 c 0,0.364419 -0.295275,0.660047 -0.659695,0.660047 -0.364067,0 -0.659694,-0.295628 -0.659694,-0.660047 0,-0.364067 0.295627,-0.659694 0.659694,-0.659694 0.36442,0 0.659695,0.295627 0.659695,0.659694\"\n          />\n        `\n      : \"\"\n  }\n  ${\n    lightningStates.has(state)\n      ? svg`\n          <path\n            class=\"sun\"\n            d=\"m 9.9252695,10.935875 -1.6483986,2.341014 1.1170184,0.05929 -1.2169864,2.02141 3.0450261,-2.616159 H 9.8864918 L 10.97937,11.294651 10.700323,10.79794 h -0.508706 l -0.2663475,0.137936\"\n          />\n        `\n      : \"\"\n  }\n  </svg>`;\n\n// IoB\nexport const weatherStateIsImage = (state: string): boolean => {\n  const imageRexExt = /.+\\.png|\\.svg|\\.jpg|\\.jpeg/i;\n  return imageRexExt.test(state);\n};\n\nexport const getWeatherStateIcon = (\n  state: string,\n  element: HTMLElement,\n  nightTime?: boolean,\n  token?: string // IoB - weather icons with auth.\n): TemplateResult | undefined => {\n  const userDefinedIcon = getComputedStyle(element).getPropertyValue(\n    `--weather-icon-${state}`\n  );\n\n  if (userDefinedIcon) {\n    return html`\n      <div\n        style=\"background-size: cover;${styleMap({\n          \"background-image\": userDefinedIcon,\n        })}\"\n      ></div>\n    `;\n  }\n\n  // IoB weather icon\n  if (weatherStateIsImage(state)) {\n    let imgUrl = state.toString();\n    if (imgUrl.startsWith(\"/adapter\")) {\n      // make sure we do not send token to 3rd parties!\n      imgUrl += token ? \"?token=\" + token : \"\";\n    }\n    return html`\n      <div\n        style=\"\n            min-width: 32px;\n            min-height: 32px;\n            background-size: cover; \n               background-image: url(${imgUrl});\"\n      ></div>\n    `;\n  }\n\n  if (weatherSVGs.has(state)) {\n    return html`${getWeatherStateSVG(state, nightTime)}`;\n  }\n\n  if (state in weatherIcons) {\n    return html`\n      <ha-svg-icon\n        class=\"weather-icon\"\n        .path=${weatherIcons[state]}\n      ></ha-svg-icon>\n    `;\n  }\n\n  return undefined;\n};\n","import {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { ifDefined } from \"lit/directives/if-defined\";\nimport { computeStateDisplay } from \"../../../common/entity/compute_state_display\";\nimport { computeStateName } from \"../../../common/entity/compute_state_name\";\nimport { formatNumber } from \"../../../common/number/format_number\";\nimport \"../../../components/entity/state-badge\";\nimport { UNAVAILABLE_STATES } from \"../../../data/entity\";\nimport { ActionHandlerEvent } from \"../../../data/lovelace\";\nimport {\n  getSecondaryWeatherAttribute,\n  getWeatherStateIcon,\n  getWeatherUnit,\n  WeatherEntity,\n  weatherSVGStyles,\n} from \"../../../data/weather\";\nimport type { HomeAssistant } from \"../../../types\";\nimport type { EntitiesCardEntityConfig } from \"../cards/types\";\nimport { actionHandler } from \"../common/directives/action-handler-directive\";\nimport { handleAction } from \"../common/handle-action\";\nimport { hasAction } from \"../common/has-action\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\nimport \"../components/hui-generic-entity-row\";\nimport { createEntityNotFoundWarning } from \"../components/hui-warning\";\nimport type { LovelaceRow } from \"./types\";\n\n@customElement(\"hui-weather-entity-row\")\nclass HuiWeatherEntityRow extends LitElement implements LovelaceRow {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @state() private _config?: EntitiesCardEntityConfig;\n\n  public setConfig(config: EntitiesCardEntityConfig): void {\n    if (!config?.entity) {\n      throw new Error(\"Entity must be specified\");\n    }\n\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult {\n    if (!this.hass || !this._config) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity] as WeatherEntity;\n\n    if (!stateObj) {\n      return html`\n        <hui-warning>\n          ${createEntityNotFoundWarning(this.hass, this._config.entity)}\n        </hui-warning>\n      `;\n    }\n\n    const pointer = !(\n      this._config.tap_action && this._config.tap_action.action !== \"none\"\n    );\n\n    const weatherStateIcon = getWeatherStateIcon(\n      stateObj.state,\n      this,\n      false,\n      this.hass.auth.accessToken\n    );\n\n    return html`\n      <div\n        class=\"icon-image ${classMap({\n          pointer,\n        })}\"\n        @action=${this._handleAction}\n        .actionHandler=${actionHandler({\n          hasHold: hasAction(this._config!.hold_action),\n          hasDoubleClick: hasAction(this._config!.double_tap_action),\n        })}\n        tabindex=${ifDefined(pointer ? \"0\" : undefined)}\n      >\n        ${weatherStateIcon ||\n        html`\n          <ha-state-icon\n            class=\"weather-icon\"\n            .state=${stateObj}\n          ></ha-state-icon>\n        `}\n      </div>\n      <div\n        class=\"info ${classMap({\n          pointer,\n        })}\"\n        @action=${this._handleAction}\n        .actionHandler=${actionHandler({\n          hasHold: hasAction(this._config!.hold_action),\n          hasDoubleClick: hasAction(this._config!.double_tap_action),\n        })}\n      >\n        ${this._config.name || computeStateName(stateObj)}\n      </div>\n      <div\n        class=\"attributes ${classMap({\n          pointer,\n        })}\"\n        @action=${this._handleAction}\n        .actionHandler=${actionHandler({\n          hasHold: hasAction(this._config!.hold_action),\n          hasDoubleClick: hasAction(this._config!.double_tap_action),\n        })}\n      >\n        <div>\n          ${UNAVAILABLE_STATES.includes(stateObj.state)\n            ? computeStateDisplay(\n                this.hass.localize,\n                stateObj,\n                this.hass.locale\n              )\n            : html`\n                ${formatNumber(\n                  stateObj.attributes.temperature,\n                  this.hass.locale\n                )}\n                ${getWeatherUnit(this.hass, \"temperature\")}\n              `}\n        </div>\n        <div class=\"secondary\">\n          ${getSecondaryWeatherAttribute(this.hass!, stateObj)}\n        </div>\n      </div>\n    `;\n  }\n\n  private _handleAction(ev: ActionHandlerEvent) {\n    handleAction(this, this.hass!, this._config!, ev.detail.action!);\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      weatherSVGStyles,\n      css`\n        :host {\n          display: flex;\n          align-items: center;\n          flex-direction: row;\n        }\n\n        .info {\n          margin-left: 16px;\n          flex: 1 0 60px;\n        }\n\n        .info,\n        .info > * {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n        .icon-image {\n          display: flex;\n          align-items: center;\n          min-width: 40px;\n        }\n\n        .icon-image > * {\n          flex: 0 0 40px;\n          height: 40px;\n        }\n\n        .icon-image:focus {\n          outline: none;\n          background-color: var(--divider-color);\n          border-radius: 50%;\n        }\n\n        .weather-icon {\n          --mdc-icon-size: 40px;\n        }\n\n        :host([rtl]) .flex {\n          margin-left: 0;\n          margin-right: 16px;\n        }\n\n        .pointer {\n          cursor: pointer;\n        }\n\n        .attributes {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          text-align: right;\n          margin-left: 8px;\n        }\n\n        .secondary {\n          color: var(--secondary-text-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-weather-entity-row\": HuiWeatherEntityRow;\n  }\n}\n"],"names":[],"sourceRoot":""}