{"version":3,"sources":["webpack:///./src/resources/markdown_worker.ts","webpack:///../src/rpc-wrapper.js","webpack:///./src/components/ha-markdown.ts","webpack:///./src/components/ha-paper-slider.js","webpack:///./src/components/ha-form/ha-form-string.ts","webpack:///./src/components/ha-form/ha-form-integer.ts","webpack:///./src/components/ha-form/ha-form-float.ts","webpack:///./src/components/ha-form/ha-form-boolean.ts","webpack:///./src/components/ha-form/ha-form-select.ts","webpack:///./src/components/ha-form/ha-form-positive_time_period_dict.ts","webpack:///./src/components/ha-form/ha-form.ts","webpack:///./src/components/dialog/ha-iron-focusables-helper.js","webpack:///./src/components/dialog/ha-paper-dialog.ts","webpack:///./node_modules/@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","webpack:///./src/panels/profile/ha-mfa-module-setup-flow.js"],"names":["addMethods","__webpack_require__","methods","module","exports","w","Worker","p","name","worker","c","callbacks","e","d","data","id","f","error","Object","Error","evt","document","method","Promise","a","b","type","params","customElement","HaMarkdown","_UpdatingElement","[object Object]","args","super","_initialize","this","property","Boolean","changedProps","_get","_getPrototypeOf","prototype","call","markdownWorker","_render","async","innerHTML","renderMarkdown","content","breaks","gfm","tables","allowSvg","_resize","walker","createTreeWalker","nextNode","node","currentNode","HTMLAnchorElement","host","location","target","rel","addEventListener","fireEvent","UpdatingElement","PaperSliderClass","customElements","get","define","template","tpl","createElement","styleEl","appendChild","_decorate","_LitElement","F","kind","decorators","key","value","query","_input","focus","schema","includes","html","_unmaskedPassword","label","required","_valueChanged","_toggleUnmaskedPassword","_stringType","ev","active","format","LitElement","ha_form_integer_decorate","_value","valueMin","valueMax","Number","ha_form_float_decorate","suffix","ha_form_boolean_decorate","checked","static","css","ha_form_select_decorate","options","map","item","_optionValue","_optionLabel","Array","isArray","detail","itemValue","ha_form_positive_time_period_dict_decorate","_parseDuration","_hours","_minutes","_seconds","_hourChanged","_minChanged","_secChanged","hours","minutes","seconds","toString","padStart","_durationChanged","unit","Math","floor","assign","ha_form_decorate","input","_childForm","_elementContainer","lastChild","undefined","base","_computeError","_getValue","computeError","computeLabel","computeSuffix","changedProperties","schemaChanged","has","oldSchema","element","_computeLabel","_computeSuffix","removeChild","description","obj","stopPropagation","HaIronFocusablesHelper","getTabbableNodes","result","_collectTabbableNodes","IronFocusablesHelper","_sortByTabIndex","nodeType","Node","ELEMENT_NODE","_isVisible","children","tabIndex","_normalizedTabIndex","needsSort","push","localName","dom","getDistributedNodes","shadowRoot","root","i","length","paperDialogClass","haTabFixBehaviorImpl","_focusableNodes","mixinBehaviors","_polymer_paper_dialog_behavior_paper_dialog_behavior_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","Polymer","_template","is","properties","dialogElement","scrollTarget","$","scrollable","ready","_ensureTarget","classList","add","attached","requestAnimationFrame","updateScrollState","bind","toggleClass","scrollTop","offsetHeight","scrollHeight","parentElement","behaviors","indexOf","PaperDialogBehaviorImpl","sizingTarget","remove","r","__webpack_exports__","_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_4__","_mixins_events_mixin__WEBPACK_IMPORTED_MODULE_9__","_mixins_localize_mixin__WEBPACK_IMPORTED_MODULE_10__","instance","LocalizeMixin","EventsMixin","PolymerElement","_hass","_dialogClosedCallback","Function","_instance","_loading","_errorMsg","String","_opened","_step","_stepData","keyCode","_submitStep","showDialog","hass","continueFlowId","mfaModuleId","dialogClosedCallback","_createdFromHandler","fetchStep","callWS","flow_id","mfa_module_id","curInstance","then","step","_processStep","setTimeout","dialog","center","user_input","err","body","message","errors","keys","_flowDone","flowFinished","_equals","_openedChanged","_computeStepAbortedReason","localize","handler","reason","_computeStepTitle","step_id","_computeStepDescription","placeholders","description_placeholders","forEach","_computeLabelCallback","_computeErrorCallback"],"mappings":"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","file":"chunk.b0251dfdcc838fc8d342.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"renderMarkdown\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"48042296b4a769c11d78.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","export default function addMethods(worker, methods) {\n\tlet c = 0;\n\tlet callbacks = {};\n\tworker.addEventListener('message', (e) => {\n\t\tlet d = e.data;\n\t\tif (d.type!=='RPC') return;\n\t\tif (d.id) {\n\t\t\tlet f = callbacks[d.id];\n\t\t\tif (f) {\n\t\t\t\tdelete callbacks[d.id];\n\t\t\t\tif (d.error) {\n\t\t\t\t\tf[1](Object.assign(Error(d.error.message), d.error));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf[0](d.result);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tlet evt = document.createEvent('Event');\n\t\t\tevt.initEvent(d.method, false, false);\n\t\t\tevt.data = d.params;\n\t\t\tworker.dispatchEvent(evt);\n\t\t}\n\t});\n\tmethods.forEach( method => {\n\t\tworker[method] = (...params) => new Promise( (a, b) => {\n\t\t\tlet id = ++c;\n\t\t\tcallbacks[id] = [a, b];\n\t\t\tworker.postMessage({ type: 'RPC', id, method, params });\n\t\t});\n\t});\n}\n","import { UpdatingElement, property, customElement } from \"lit-element\";\n// eslint-disable-next-line import/no-webpack-loader-syntax\n// @ts-ignore\n// tslint:disable-next-line: no-implicit-dependencies\nimport markdownWorker from \"workerize-loader!../resources/markdown_worker\";\nimport { fireEvent } from \"../common/dom/fire_event\";\n\nlet worker: any | undefined;\n\n@customElement(\"ha-markdown\")\nclass HaMarkdown extends UpdatingElement {\n  @property() public content = \"\";\n  @property({ type: Boolean }) public allowSvg = false;\n\n  protected update(changedProps) {\n    super.update(changedProps);\n\n    if (!worker) {\n      worker = markdownWorker();\n    }\n\n    this._render();\n  }\n\n  private async _render() {\n    this.innerHTML = await worker.renderMarkdown(\n      this.content,\n      {\n        breaks: true,\n        gfm: true,\n        tables: true,\n      },\n      {\n        allowSvg: this.allowSvg,\n      }\n    );\n\n    this._resize();\n\n    const walker = document.createTreeWalker(\n      this,\n      1 /* SHOW_ELEMENT */,\n      null,\n      false\n    );\n\n    while (walker.nextNode()) {\n      const node = walker.currentNode;\n\n      // Open external links in a new window\n      if (\n        node instanceof HTMLAnchorElement &&\n        node.host !== document.location.host\n      ) {\n        node.target = \"_blank\";\n\n        // protect referrer on external links and deny window.opener access for security reasons\n        // (see https://mathiasbynens.github.io/rel-noopener/)\n        node.rel = \"noreferrer noopener\";\n\n        // Fire a resize event when images loaded to notify content resized\n      } else if (node) {\n        node.addEventListener(\"load\", this._resize);\n      }\n    }\n  }\n\n  private _resize = () => fireEvent(this, \"iron-resize\");\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-markdown\": HaMarkdown;\n  }\n}\n","import \"@polymer/paper-slider/paper-slider\";\n\n/**\n * @polymer\n * @customElement\n * @appliesMixin paper-slider\n */\nconst PaperSliderClass = customElements.get(\"paper-slider\");\n\nclass HaPaperSlider extends PaperSliderClass {\n  static get template() {\n    const tpl = document.createElement(\"template\");\n    tpl.innerHTML = PaperSliderClass.template.innerHTML;\n    const styleEl = document.createElement(\"style\");\n    styleEl.innerHTML = `\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n\n      :host([dir=\"rtl\"]) .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        transform: scale(1) translate(0, -17px) scaleX(-1) !important;\n        }\n    `;\n    tpl.content.appendChild(styleEl);\n    return tpl;\n  }\n}\ncustomElements.define(\"ha-paper-slider\", HaPaperSlider);\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  query,\n} from \"lit-element\";\n\nimport { HaFormElement, HaFormStringData, HaFormStringSchema } from \"./ha-form\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\n// Not duplicate, is for typing\n// tslint:disable-next-line\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\n@customElement(\"ha-form-string\")\nexport class HaFormString extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormStringSchema;\n  @property() public data!: HaFormStringData;\n  @property() public label!: string;\n  @property() public suffix!: string;\n  @property() private _unmaskedPassword = false;\n  @query(\"paper-input\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return this.schema.name.includes(\"password\")\n      ? html`\n          <paper-input\n            .type=${this._unmaskedPassword ? \"text\" : \"password\"}\n            .label=${this.label}\n            .value=${this.data}\n            .required=${this.schema.required}\n            .autoValidate=${this.schema.required}\n            @value-changed=${this._valueChanged}\n          >\n            <paper-icon-button\n              toggles\n              .active=${this._unmaskedPassword}\n              slot=\"suffix\"\n              .icon=${this._unmaskedPassword ? \"hass:eye-off\" : \"hass:eye\"}\n              id=\"iconButton\"\n              title=\"Click to toggle between masked and clear password\"\n              @click=${this._toggleUnmaskedPassword}\n            >\n            </paper-icon-button>\n          </paper-input>\n        `\n      : html`\n          <paper-input\n            .type=${this._stringType}\n            .label=${this.label}\n            .value=${this.data}\n            .required=${this.schema.required}\n            .autoValidate=${this.schema.required}\n            error-message=\"Required\"\n            @value-changed=${this._valueChanged}\n          ></paper-input>\n        `;\n  }\n\n  private _toggleUnmaskedPassword(ev: Event) {\n    this._unmaskedPassword = (ev.target as any).active;\n  }\n\n  private _valueChanged(ev: Event) {\n    const value = (ev.target as PaperInputElement).value;\n    if (this.data === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  private _stringType() {\n    if (this.schema.format) {\n      if ([\"email\", \"url\"].includes(this.schema.format)) {\n        return this.schema.format;\n      }\n      if (this.schema.format === \"fqdnurl\") {\n        return \"url\";\n      }\n    }\n    return \"text\";\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-string\": HaFormString;\n  }\n}\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  query,\n} from \"lit-element\";\nimport {\n  HaFormElement,\n  HaFormIntegerData,\n  HaFormIntegerSchema,\n} from \"./ha-form\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nimport \"../ha-paper-slider\";\nimport \"@polymer/paper-input/paper-input\";\n// Not duplicate, is for typing\n// tslint:disable-next-line\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport { PaperSliderElement } from \"@polymer/paper-slider/paper-slider\";\n\n@customElement(\"ha-form-integer\")\nexport class HaFormInteger extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormIntegerSchema;\n  @property() public data!: HaFormIntegerData;\n  @property() public label!: string;\n  @property() public suffix!: string;\n  @query(\"paper-input ha-paper-slider\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return \"valueMin\" in this.schema && \"valueMax\" in this.schema\n      ? html`\n          <div>\n            ${this.label}\n            <ha-paper-slider\n              pin=\"\"\n              .value=${this._value}\n              .min=${this.schema.valueMin}\n              .max=${this.schema.valueMax}\n              @value-changed=${this._valueChanged}\n            ></ha-paper-slider>\n          </div>\n        `\n      : html`\n          <paper-input\n            type=\"number\"\n            .label=${this.label}\n            .value=${this.data}\n            .required=${this.schema.required}\n            .autoValidate=${this.schema.required}\n            @value-changed=${this._valueChanged}\n          ></paper-input>\n        `;\n  }\n\n  private get _value() {\n    return this.data || 0;\n  }\n\n  private _valueChanged(ev: Event) {\n    const value = Number(\n      (ev.target as PaperInputElement | PaperSliderElement).value\n    );\n    if (this._value === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-integer\": HaFormInteger;\n  }\n}\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  query,\n} from \"lit-element\";\nimport { HaFormElement, HaFormFloatData, HaFormFloatSchema } from \"./ha-form\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nimport \"@polymer/paper-input/paper-input\";\n// Not duplicate, is for typing\n// tslint:disable-next-line\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\n@customElement(\"ha-form-float\")\nexport class HaFormFloat extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormFloatSchema;\n  @property() public data!: HaFormFloatData;\n  @property() public label!: string;\n  @property() public suffix!: string;\n  @query(\"paper-input\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-input\n        .label=${this.label}\n        .value=${this._value}\n        .required=${this.schema.required}\n        .autoValidate=${this.schema.required}\n        @value-changed=${this._valueChanged}\n      >\n        <span suffix=\"\" slot=\"suffix\">${this.suffix}</span>\n      </paper-input>\n    `;\n  }\n\n  private get _value() {\n    return this.data || 0;\n  }\n\n  private _valueChanged(ev: Event) {\n    const value = Number((ev.target as PaperInputElement).value);\n    if (this._value === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-float\": HaFormFloat;\n  }\n}\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  CSSResult,\n  css,\n  query,\n} from \"lit-element\";\nimport {\n  HaFormElement,\n  HaFormBooleanData,\n  HaFormBooleanSchema,\n} from \"./ha-form\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nimport \"@polymer/paper-checkbox/paper-checkbox\";\n// Not duplicate, is for typing\n// tslint:disable-next-line\nimport { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\n\n@customElement(\"ha-form-boolean\")\nexport class HaFormBoolean extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormBooleanSchema;\n  @property() public data!: HaFormBooleanData;\n  @property() public label!: string;\n  @property() public suffix!: string;\n  @query(\"paper-checkbox\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-checkbox .checked=${this.data} @change=${this._valueChanged}>\n        ${this.label}\n      </paper-checkbox>\n    `;\n  }\n\n  private _valueChanged(ev: Event) {\n    fireEvent(this, \"value-changed\", {\n      value: (ev.target as PaperCheckboxElement).checked,\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      paper-checkbox {\n        display: inline-block;\n        padding: 22px 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-boolean\": HaFormBoolean;\n  }\n}\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  query,\n} from \"lit-element\";\nimport { HaFormElement, HaFormSelectData, HaFormSelectSchema } from \"./ha-form\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-item/paper-item\";\n\n@customElement(\"ha-form-select\")\nexport class HaFormSelect extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormSelectSchema;\n  @property() public data!: HaFormSelectData;\n  @property() public label!: string;\n  @property() public suffix!: string;\n  @query(\"paper-dropdown-menu\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-dropdown-menu .label=${this.label}>\n        <paper-listbox\n          slot=\"dropdown-content\"\n          attr-for-selected=\"item-value\"\n          .selected=${this.data}\n          @selected-item-changed=${this._valueChanged}\n        >\n          ${this.schema.options!.map(\n            (item) => html`\n              <paper-item .itemValue=${this._optionValue(item)}>\n                ${this._optionLabel(item)}\n              </paper-item>\n            `\n          )}\n        </paper-listbox>\n      </paper-dropdown-menu>\n    `;\n  }\n\n  private _optionValue(item) {\n    return Array.isArray(item) ? item[0] : item;\n  }\n\n  private _optionLabel(item) {\n    return Array.isArray(item) ? item[1] : item;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    if (!ev.detail.value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value: ev.detail.value.itemValue,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-select\": HaFormSelect;\n  }\n}\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  TemplateResult,\n  query,\n} from \"lit-element\";\nimport { HaFormElement, HaFormTimeData, HaFormTimeSchema } from \"./ha-form\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\n@customElement(\"ha-form-positive_time_period_dict\")\nexport class HaFormTimePeriod extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormTimeSchema;\n  @property() public data!: HaFormTimeData;\n  @property() public label!: string;\n  @property() public suffix!: string;\n  @query(\"paper-time-input\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult | void {\n    return html`\n      <paper-time-input\n        .label=${this.label}\n        .required=${this.schema.required}\n        .autoValidate=${this.schema.required}\n        error-message=\"Required\"\n        enable-second\n        format=\"24\"\n        .hour=${this._parseDuration(this._hours)}\n        .min=${this._parseDuration(this._minutes)}\n        .sec=${this._parseDuration(this._seconds)}\n        @hour-changed=${this._hourChanged}\n        @min-changed=${this._minChanged}\n        @sec-changed=${this._secChanged}\n        float-input-labels\n        no-hours-limit\n        always-float-input-labels\n        hour-label=\"hh\"\n        min-label=\"mm\"\n        sec-label=\"ss\"\n      ></paper-time-input>\n    `;\n  }\n\n  private get _hours() {\n    return this.data && this.data.hours ? Number(this.data.hours) : 0;\n  }\n\n  private get _minutes() {\n    return this.data && this.data.minutes ? Number(this.data.minutes) : 0;\n  }\n\n  private get _seconds() {\n    return this.data && this.data.seconds ? Number(this.data.seconds) : 0;\n  }\n\n  private _parseDuration(value) {\n    return value.toString().padStart(2, \"0\");\n  }\n\n  private _hourChanged(ev) {\n    this._durationChanged(ev, \"hours\");\n  }\n\n  private _minChanged(ev) {\n    this._durationChanged(ev, \"minutes\");\n  }\n\n  private _secChanged(ev) {\n    this._durationChanged(ev, \"seconds\");\n  }\n\n  private _durationChanged(ev, unit) {\n    let value = Number(ev.detail.value);\n\n    if (value === this[`_${unit}`]) {\n      return;\n    }\n\n    let hours = this._hours;\n    let minutes = this._minutes;\n\n    if (unit === \"seconds\" && value > 59) {\n      minutes = minutes + Math.floor(value / 60);\n      value %= 60;\n    }\n\n    if (unit === \"minutes\" && value > 59) {\n      hours = hours + Math.floor(value / 60);\n      value %= 60;\n    }\n\n    fireEvent(this, \"value-changed\", {\n      value: {\n        hours,\n        minutes,\n        seconds: this._seconds,\n        ...{ [unit]: value },\n      },\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-positive_time_period_dict\": HaFormTimePeriod;\n  }\n}\n","import {\n  customElement,\n  LitElement,\n  html,\n  property,\n  query,\n  CSSResult,\n  css,\n  PropertyValues,\n} from \"lit-element\";\n\nimport \"./ha-form-string\";\nimport \"./ha-form-integer\";\nimport \"./ha-form-float\";\nimport \"./ha-form-boolean\";\nimport \"./ha-form-select\";\nimport \"./ha-form-positive_time_period_dict\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\nexport type HaFormSchema =\n  | HaFormStringSchema\n  | HaFormIntegerSchema\n  | HaFormFloatSchema\n  | HaFormBooleanSchema\n  | HaFormSelectSchema\n  | HaFormTimeSchema;\n\nexport interface HaFormBaseSchema {\n  name: string;\n  default?: HaFormData;\n  required?: boolean;\n  optional?: boolean;\n  description?: { suffix?: string };\n}\n\nexport interface HaFormIntegerSchema extends HaFormBaseSchema {\n  type: \"integer\";\n  default?: HaFormIntegerData;\n  valueMin?: number;\n  valueMax?: number;\n}\n\nexport interface HaFormSelectSchema extends HaFormBaseSchema {\n  type: \"select\";\n  options?: string[];\n}\n\nexport interface HaFormFloatSchema extends HaFormBaseSchema {\n  type: \"float\";\n}\n\nexport interface HaFormStringSchema extends HaFormBaseSchema {\n  type: \"string\";\n  format?: string;\n}\n\nexport interface HaFormBooleanSchema extends HaFormBaseSchema {\n  type: \"boolean\";\n}\n\nexport interface HaFormTimeSchema extends HaFormBaseSchema {\n  type: \"time\";\n}\n\nexport interface HaFormDataContainer {\n  [key: string]: HaFormData;\n}\n\nexport type HaFormData =\n  | HaFormStringData\n  | HaFormIntegerData\n  | HaFormFloatData\n  | HaFormBooleanData\n  | HaFormSelectData\n  | HaFormTimeData;\n\nexport type HaFormStringData = string;\nexport type HaFormIntegerData = number;\nexport type HaFormFloatData = number;\nexport type HaFormBooleanData = boolean;\nexport type HaFormSelectData = string;\nexport interface HaFormTimeData {\n  hours?: number;\n  minutes?: number;\n  seconds?: number;\n}\n\nexport interface HaFormElement extends LitElement {\n  schema: HaFormSchema;\n  data: HaFormDataContainer | HaFormData;\n  label?: string;\n  suffix?: string;\n}\n\n@customElement(\"ha-form\")\nexport class HaForm extends LitElement implements HaFormElement {\n  @property() public data!: HaFormDataContainer | HaFormData;\n  @property() public schema!: HaFormSchema;\n  @property() public error;\n  @property() public computeError?: (schema: HaFormSchema, error) => string;\n  @property() public computeLabel?: (schema: HaFormSchema) => string;\n  @property() public computeSuffix?: (schema: HaFormSchema) => string;\n  @query(\"ha-form\") private _childForm?: HaForm;\n  @query(\"#element\") private _elementContainer?: HTMLDivElement;\n\n  public focus() {\n    const input = this._childForm\n      ? this._childForm\n      : this._elementContainer\n      ? this._elementContainer.lastChild\n      : undefined;\n\n    if (!input) {\n      return;\n    }\n\n    (input as HTMLElement).focus();\n  }\n\n  protected render() {\n    if (Array.isArray(this.schema)) {\n      return html`\n        ${this.error && this.error.base\n          ? html`\n              <div class=\"error\">\n                ${this._computeError(this.error.base, this.schema)}\n              </div>\n            `\n          : \"\"}\n        ${this.schema.map(\n          (item) => html`\n            <ha-form\n              .data=${this._getValue(this.data, item)}\n              .schema=${item}\n              .error=${this._getValue(this.error, item)}\n              @value-changed=${this._valueChanged}\n              .computeError=${this.computeError}\n              .computeLabel=${this.computeLabel}\n              .computeSuffix=${this.computeSuffix}\n            ></ha-form>\n          `\n        )}\n      `;\n    }\n\n    return html`\n      ${this.error\n        ? html`\n            <div class=\"error\">\n              ${this._computeError(this.error, this.schema)}\n            </div>\n          `\n        : \"\"}\n      <div id=\"element\"></div>\n    `;\n  }\n\n  protected updated(changedProperties: PropertyValues) {\n    const schemaChanged = changedProperties.has(\"schema\");\n    const oldSchema = schemaChanged\n      ? changedProperties.get(\"schema\")\n      : undefined;\n    if (\n      !Array.isArray(this.schema) &&\n      schemaChanged &&\n      (!oldSchema || (oldSchema as HaFormSchema).type !== this.schema.type)\n    ) {\n      const element = document.createElement(\n        `ha-form-${this.schema.type}`\n      ) as HaFormElement;\n      element.schema = this.schema;\n      element.data = this.data;\n      element.label = this._computeLabel(this.schema);\n      element.suffix = this._computeSuffix(this.schema);\n      if (this._elementContainer!.lastChild) {\n        this._elementContainer!.removeChild(this._elementContainer!.lastChild);\n      }\n      this._elementContainer!.appendChild(element);\n    } else if (this._elementContainer && this._elementContainer.lastChild) {\n      const element = this._elementContainer!.lastChild as HaFormElement;\n      element.schema = this.schema;\n      element.data = this.data;\n      element.label = this._computeLabel(this.schema);\n      element.suffix = this._computeSuffix(this.schema);\n    }\n  }\n\n  private _computeLabel(schema: HaFormSchema) {\n    return this.computeLabel\n      ? this.computeLabel(schema)\n      : schema\n      ? schema.name\n      : \"\";\n  }\n\n  private _computeSuffix(schema: HaFormSchema) {\n    return this.computeSuffix\n      ? this.computeSuffix(schema)\n      : schema && schema.description\n      ? schema.description.suffix\n      : \"\";\n  }\n\n  private _computeError(error, schema: HaFormSchema) {\n    return this.computeError ? this.computeError(error, schema) : error;\n  }\n\n  private _getValue(obj, item) {\n    if (obj) {\n      return obj[item.name];\n    }\n    return null;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    ev.stopPropagation();\n    const schema = (ev.target as HaFormElement).schema;\n    const data = this.data as HaFormDataContainer;\n    data[schema.name] = ev.detail.value;\n    fireEvent(this, \"value-changed\", {\n      value: { ...data },\n    });\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .error {\n        color: var(--error-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form\": HaForm;\n  }\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n  Fixes issue with not using shadow dom properly in iron-overlay-behavior/icon-focusables-helper.js\n*/\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n\nimport { IronFocusablesHelper } from \"@polymer/iron-overlay-behavior/iron-focusables-helper.js\";\n\nexport const HaIronFocusablesHelper = {\n  /**\n   * Returns a sorted array of tabbable nodes, including the root node.\n   * It searches the tabbable nodes in the light and shadow dom of the chidren,\n   * sorting the result by tabindex.\n   * @param {!Node} node\n   * @return {!Array<!HTMLElement>}\n   */\n  getTabbableNodes: function(node) {\n    var result = [];\n    // If there is at least one element with tabindex > 0, we need to sort\n    // the final array by tabindex.\n    var needsSortByTabIndex = this._collectTabbableNodes(node, result);\n    if (needsSortByTabIndex) {\n      return IronFocusablesHelper._sortByTabIndex(result);\n    }\n    return result;\n  },\n\n  /**\n   * Searches for nodes that are tabbable and adds them to the `result` array.\n   * Returns if the `result` array needs to be sorted by tabindex.\n   * @param {!Node} node The starting point for the search; added to `result`\n   * if tabbable.\n   * @param {!Array<!HTMLElement>} result\n   * @return {boolean}\n   * @private\n   */\n  _collectTabbableNodes: function(node, result) {\n    // If not an element or not visible, no need to explore children.\n    if (\n      node.nodeType !== Node.ELEMENT_NODE ||\n      !IronFocusablesHelper._isVisible(node)\n    ) {\n      return false;\n    }\n    var element = /** @type {!HTMLElement} */ (node);\n    var tabIndex = IronFocusablesHelper._normalizedTabIndex(element);\n    var needsSort = tabIndex > 0;\n    if (tabIndex >= 0) {\n      result.push(element);\n    }\n\n    // In ShadowDOM v1, tab order is affected by the order of distrubution.\n    // E.g. getTabbableNodes(#root) in ShadowDOM v1 should return [#A, #B];\n    // in ShadowDOM v0 tab order is not affected by the distrubution order,\n    // in fact getTabbableNodes(#root) returns [#B, #A].\n    //  <div id=\"root\">\n    //   <!-- shadow -->\n    //     <slot name=\"a\">\n    //     <slot name=\"b\">\n    //   <!-- /shadow -->\n    //   <input id=\"A\" slot=\"a\">\n    //   <input id=\"B\" slot=\"b\" tabindex=\"1\">\n    //  </div>\n    // TODO(valdrin) support ShadowDOM v1 when upgrading to Polymer v2.0.\n    var children;\n    if (element.localName === \"content\" || element.localName === \"slot\") {\n      children = dom(element).getDistributedNodes();\n    } else {\n      // /////////////////////////\n      // Use shadow root if possible, will check for distributed nodes.\n      // THIS IS THE CHANGED LINE\n      children = dom(element.shadowRoot || element.root || element).children;\n      // /////////////////////////\n    }\n    for (var i = 0; i < children.length; i++) {\n      // Ensure method is always invoked to collect tabbable children.\n      needsSort = this._collectTabbableNodes(children[i], result) || needsSort;\n    }\n    return needsSort;\n  },\n};\n","import \"@polymer/paper-dialog/paper-dialog\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { HaIronFocusablesHelper } from \"./ha-iron-focusables-helper.js\";\n// tslint:disable-next-line\nimport { PaperDialogElement } from \"@polymer/paper-dialog/paper-dialog\";\n\nconst paperDialogClass = customElements.get(\"paper-dialog\");\n\n// behavior that will override existing iron-overlay-behavior and call the fixed implementation\nconst haTabFixBehaviorImpl = {\n  get _focusableNodes() {\n    return HaIronFocusablesHelper.getTabbableNodes(this);\n  },\n};\n\n// paper-dialog that uses the haTabFixBehaviorImpl behvaior\n// export class HaPaperDialog extends paperDialogClass {}\n// @ts-ignore\nexport class HaPaperDialog\n  extends mixinBehaviors([haTabFixBehaviorImpl], paperDialogClass)\n  implements PaperDialogElement {}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dialog\": HaPaperDialog;\n  }\n}\ncustomElements.define(\"ha-paper-dialog\", HaPaperDialog);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\n\nimport {PaperDialogBehaviorImpl} from '@polymer/paper-dialog-behavior/paper-dialog-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Dialogs](https://www.google.com/design/spec/components/dialogs.html)\n\n`paper-dialog-scrollable` implements a scrolling area used in a Material Design\ndialog. It shows a divider at the top and/or bottom indicating more content,\ndepending on scroll position. Use this together with elements implementing\n`Polymer.PaperDialogBehavior`.\n\n    <paper-dialog-impl>\n      <h2>Header</h2>\n      <paper-dialog-scrollable>\n        Lorem ipsum...\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button>OK</paper-button>\n      </div>\n    </paper-dialog-impl>\n\nIt shows a top divider after scrolling if it is not the first child in its\nparent container, indicating there is more content above. It shows a bottom\ndivider if it is scrollable and it is not the last child in its parent\ncontainer, indicating there is more content below. The bottom divider is hidden\nif it is scrolled to the bottom.\n\nIf `paper-dialog-scrollable` is not a direct child of the element implementing\n`Polymer.PaperDialogBehavior`, remember to set the `dialogElement`:\n\n    <paper-dialog-impl id=\"myDialog\">\n      <h2>Header</h2>\n      <div class=\"my-content-wrapper\">\n        <h4>Sub-header</h4>\n        <paper-dialog-scrollable>\n          Lorem ipsum...\n        </paper-dialog-scrollable>\n      </div>\n      <div class=\"buttons\">\n        <paper-button>OK</paper-button>\n      </div>\n    </paper-dialog-impl>\n\n    <script>\n      var scrollable =\nPolymer.dom(myDialog).querySelector('paper-dialog-scrollable');\n      scrollable.dialogElement = myDialog;\n    </script>\n\n### Styling\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-dialog-scrollable` | Mixin for the scrollable content | {}\n\n@group Paper Elements\n@element paper-dialog-scrollable\n@demo demo/index.html\n@hero hero.svg\n*/\nPolymer({\n  _template: html`\n    <style>\n\n      :host {\n        display: block;\n        @apply --layout-relative;\n      }\n\n      :host(.is-scrolled:not(:first-child))::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: var(--divider-color);\n      }\n\n      :host(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: var(--divider-color);\n      }\n\n      .scrollable {\n        padding: 0 24px;\n\n        @apply --layout-scroll;\n        @apply --paper-dialog-scrollable;\n      }\n\n      .fit {\n        @apply --layout-fit;\n      }\n    </style>\n\n    <div id=\"scrollable\" class=\"scrollable\" on-scroll=\"updateScrollState\">\n      <slot></slot>\n    </div>\n`,\n\n  is: 'paper-dialog-scrollable',\n\n  properties: {\n\n    /**\n     * The dialog element that implements `Polymer.PaperDialogBehavior`\n     * containing this element.\n     * @type {?Node}\n     */\n    dialogElement: {type: Object}\n\n  },\n\n  /**\n   * Returns the scrolling element.\n   */\n  get scrollTarget() {\n    return this.$.scrollable;\n  },\n\n  ready: function() {\n    this._ensureTarget();\n    this.classList.add('no-padding');\n  },\n\n  attached: function() {\n    this._ensureTarget();\n    requestAnimationFrame(this.updateScrollState.bind(this));\n  },\n\n  updateScrollState: function() {\n    this.toggleClass('is-scrolled', this.scrollTarget.scrollTop > 0);\n    this.toggleClass(\n        'can-scroll',\n        this.scrollTarget.offsetHeight < this.scrollTarget.scrollHeight);\n    this.toggleClass(\n        'scrolled-to-bottom',\n        this.scrollTarget.scrollTop + this.scrollTarget.offsetHeight >=\n            this.scrollTarget.scrollHeight);\n  },\n\n  _ensureTarget: function() {\n    // Read parentElement instead of parentNode in order to skip shadowRoots.\n    this.dialogElement = this.dialogElement || this.parentElement;\n    // Check if dialog implements paper-dialog-behavior. If not, fit\n    // scrollTarget to host.\n    if (this.dialogElement && this.dialogElement.behaviors &&\n        this.dialogElement.behaviors.indexOf(PaperDialogBehaviorImpl) >= 0) {\n      this.dialogElement.sizingTarget = this.scrollTarget;\n      this.scrollTarget.classList.remove('fit');\n    } else if (this.dialogElement) {\n      this.scrollTarget.classList.add('fit');\n    }\n  }\n});\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../components/dialog/ha-paper-dialog\";\nimport \"../../components/ha-form/ha-form\";\nimport \"../../components/ha-markdown\";\nimport \"../../resources/ha-style\";\n\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport LocalizeMixin from \"../../mixins/localize-mixin\";\n\nlet instance = 0;\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaMfaModuleSetupFlow extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style include=\"ha-style-dialog\">\n        .error {\n          color: red;\n        }\n        ha-paper-dialog {\n          max-width: 500px;\n        }\n        ha-markdown img:first-child:last-child,\n        ha-markdown svg:first-child:last-child {\n          background-color: white;\n          display: block;\n          margin: 0 auto;\n        }\n        ha-markdown a {\n          color: var(--primary-color);\n        }\n        .init-spinner {\n          padding: 10px 100px 34px;\n          text-align: center;\n        }\n        .submit-spinner {\n          margin-right: 16px;\n        }\n      </style>\n      <ha-paper-dialog\n        id=\"dialog\"\n        with-backdrop=\"\"\n        opened=\"{{_opened}}\"\n        on-opened-changed=\"_openedChanged\"\n      >\n        <h2>\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n            [[localize('ui.panel.profile.mfa_setup.title_aborted')]]\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n            [[localize('ui.panel.profile.mfa_setup.title_success')]]\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n            [[_computeStepTitle(localize, _step)]]\n          </template>\n        </h2>\n        <paper-dialog-scrollable>\n          <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n            <div class=\"error\">[[_errorMsg]]</div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_step]]\">\n            <div class=\"init-spinner\">\n              <paper-spinner active></paper-spinner>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[_step]]\">\n            <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n              <ha-markdown\n                allowsvg\n                content=\"[[_computeStepAbortedReason(localize, _step)]]\"\n              ></ha-markdown>\n            </template>\n\n            <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n              <p>\n                [[localize('ui.panel.profile.mfa_setup.step_done', 'step',\n                _step.title)]]\n              </p>\n            </template>\n\n            <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n              <template\n                is=\"dom-if\"\n                if=\"[[_computeStepDescription(localize, _step)]]\"\n              >\n                <ha-markdown\n                  allowsvg\n                  content=\"[[_computeStepDescription(localize, _step)]]\"\n                ></ha-markdown>\n              </template>\n\n              <ha-form\n                data=\"{{_stepData}}\"\n                schema=\"[[_step.data_schema]]\"\n                error=\"[[_step.errors]]\"\n                compute-label=\"[[_computeLabelCallback(localize, _step)]]\"\n                compute-error=\"[[_computeErrorCallback(localize, _step)]]\"\n              ></ha-form>\n            </template>\n          </template>\n        </paper-dialog-scrollable>\n        <div class=\"buttons\">\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n            <mwc-button on-click=\"_flowDone\"\n              >[[localize('ui.panel.profile.mfa_setup.close')]]</mwc-button\n            >\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n            <mwc-button on-click=\"_flowDone\"\n              >[[localize('ui.panel.profile.mfa_setup.close')]]</mwc-button\n            >\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n            <template is=\"dom-if\" if=\"[[_loading]]\">\n              <div class=\"submit-spinner\">\n                <paper-spinner active></paper-spinner>\n              </div>\n            </template>\n            <template is=\"dom-if\" if=\"[[!_loading]]\">\n              <mwc-button on-click=\"_submitStep\"\n                >[[localize('ui.panel.profile.mfa_setup.submit')]]</mwc-button\n              >\n            </template>\n          </template>\n        </div>\n      </ha-paper-dialog>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _hass: Object,\n      _dialogClosedCallback: Function,\n      _instance: Number,\n\n      _loading: {\n        type: Boolean,\n        value: false,\n      },\n\n      // Error message when can't talk to server etc\n      _errorMsg: String,\n\n      _opened: {\n        type: Boolean,\n        value: false,\n      },\n\n      _step: {\n        type: Object,\n        value: null,\n      },\n\n      /*\n       * Store user entered data.\n       */\n      _stepData: Object,\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"keypress\", (ev) => {\n      if (ev.keyCode === 13) {\n        this._submitStep();\n      }\n    });\n  }\n\n  showDialog({ hass, continueFlowId, mfaModuleId, dialogClosedCallback }) {\n    this.hass = hass;\n    this._instance = instance++;\n    this._dialogClosedCallback = dialogClosedCallback;\n    this._createdFromHandler = !!mfaModuleId;\n    this._loading = true;\n    this._opened = true;\n\n    const fetchStep = continueFlowId\n      ? this.hass.callWS({\n          type: \"auth/setup_mfa\",\n          flow_id: continueFlowId,\n        })\n      : this.hass.callWS({\n          type: \"auth/setup_mfa\",\n          mfa_module_id: mfaModuleId,\n        });\n\n    const curInstance = this._instance;\n\n    fetchStep.then((step) => {\n      if (curInstance !== this._instance) return;\n\n      this._processStep(step);\n      this._loading = false;\n      // When the flow changes, center the dialog.\n      // Don't do it on each step or else the dialog keeps bouncing.\n      setTimeout(() => this.$.dialog.center(), 0);\n    });\n  }\n\n  _submitStep() {\n    this._loading = true;\n    this._errorMsg = null;\n\n    const curInstance = this._instance;\n\n    this.hass\n      .callWS({\n        type: \"auth/setup_mfa\",\n        flow_id: this._step.flow_id,\n        user_input: this._stepData,\n      })\n      .then(\n        (step) => {\n          if (curInstance !== this._instance) return;\n\n          this._processStep(step);\n          this._loading = false;\n        },\n        (err) => {\n          this._errorMsg =\n            (err && err.body && err.body.message) || \"Unknown error occurred\";\n          this._loading = false;\n        }\n      );\n  }\n\n  _processStep(step) {\n    if (!step.errors) step.errors = {};\n    this._step = step;\n    // We got a new form if there are no errors.\n    if (Object.keys(step.errors).length === 0) {\n      this._stepData = {};\n    }\n  }\n\n  _flowDone() {\n    this._opened = false;\n    const flowFinished =\n      this._step && [\"create_entry\", \"abort\"].includes(this._step.type);\n\n    if (this._step && !flowFinished && this._createdFromHandler) {\n      // console.log('flow not finish');\n    }\n\n    this._dialogClosedCallback({\n      flowFinished,\n    });\n\n    this._errorMsg = null;\n    this._step = null;\n    this._stepData = {};\n    this._dialogClosedCallback = null;\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _openedChanged(ev) {\n    // Closed dialog by clicking on the overlay\n    if (this._step && !ev.detail.value) {\n      this._flowDone();\n    }\n  }\n\n  _computeStepAbortedReason(localize, step) {\n    return localize(\n      `component.auth.mfa_setup.${step.handler}.abort.${step.reason}`\n    );\n  }\n\n  _computeStepTitle(localize, step) {\n    return (\n      localize(\n        `component.auth.mfa_setup.${step.handler}.step.${step.step_id}.title`\n      ) || \"Setup Multi-factor Authentication\"\n    );\n  }\n\n  _computeStepDescription(localize, step) {\n    const args = [\n      `component.auth.mfa_setup.${step.handler}.step.${step.step_id}.description`,\n    ];\n    const placeholders = step.description_placeholders || {};\n    Object.keys(placeholders).forEach((key) => {\n      args.push(key);\n      args.push(placeholders[key]);\n    });\n    return localize(...args);\n  }\n\n  _computeLabelCallback(localize, step) {\n    // Returns a callback for ha-form to calculate labels per schema object\n    return (schema) =>\n      localize(\n        `component.auth.mfa_setup.${step.handler}.step.${step.step_id}.data.${schema.name}`\n      ) || schema.name;\n  }\n\n  _computeErrorCallback(localize, step) {\n    // Returns a callback for ha-form to calculate error messages\n    return (error) =>\n      localize(`component.auth.mfa_setup.${step.handler}.error.${error}`) ||\n      error;\n  }\n}\n\ncustomElements.define(\"ha-mfa-module-setup-flow\", HaMfaModuleSetupFlow);\n"],"sourceRoot":""}