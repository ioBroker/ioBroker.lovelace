"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_common_generate-lovelace-config_ts"],{

/***/ "./src/common/entity/split_by_groups.ts":
/*!**********************************************!*\
  !*** ./src/common/entity/split_by_groups.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   splitByGroups: () => (/* binding */ splitByGroups)\n/* harmony export */ });\n/* harmony import */ var _compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./compute_domain */ \"./src/common/entity/compute_domain.ts\");\n\n\n// Split a collection into a list of groups and a 'rest' list of ungrouped\n// entities.\n// Returns { groups: [], ungrouped: {} }\nconst splitByGroups = entities => {\n  const groups = [];\n  const ungrouped = {};\n  Object.keys(entities).forEach(entityId => {\n    const entity = entities[entityId];\n    if ((0,_compute_domain__WEBPACK_IMPORTED_MODULE_0__.computeDomain)(entityId) === \"group\") {\n      groups.push(entity);\n    } else {\n      ungrouped[entityId] = entity;\n    }\n  });\n  groups.forEach(group => group.attributes.entity_id.forEach(entityId => {\n    delete ungrouped[entityId];\n  }));\n  return {\n    groups,\n    ungrouped\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2VudGl0eS9zcGxpdF9ieV9ncm91cHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbW1vbi9lbnRpdHkvc3BsaXRfYnlfZ3JvdXBzLnRzPzQ2ODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFzc0VudGl0aWVzIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgR3JvdXBFbnRpdHkgfSBmcm9tIFwiLi4vLi4vZGF0YS9ncm91cFwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuL2NvbXB1dGVfZG9tYWluXCI7XG5cbi8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIGEgbGlzdCBvZiBncm91cHMgYW5kIGEgJ3Jlc3QnIGxpc3Qgb2YgdW5ncm91cGVkXG4vLyBlbnRpdGllcy5cbi8vIFJldHVybnMgeyBncm91cHM6IFtdLCB1bmdyb3VwZWQ6IHt9IH1cbmV4cG9ydCBjb25zdCBzcGxpdEJ5R3JvdXBzID0gKGVudGl0aWVzOiBIYXNzRW50aXRpZXMpID0+IHtcbiAgY29uc3QgZ3JvdXBzOiBHcm91cEVudGl0eVtdID0gW107XG4gIGNvbnN0IHVuZ3JvdXBlZDogSGFzc0VudGl0aWVzID0ge307XG5cbiAgT2JqZWN0LmtleXMoZW50aXRpZXMpLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgY29uc3QgZW50aXR5ID0gZW50aXRpZXNbZW50aXR5SWRdO1xuXG4gICAgaWYgKGNvbXB1dGVEb21haW4oZW50aXR5SWQpID09PSBcImdyb3VwXCIpIHtcbiAgICAgIGdyb3Vwcy5wdXNoKGVudGl0eSBhcyBHcm91cEVudGl0eSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuZ3JvdXBlZFtlbnRpdHlJZF0gPSBlbnRpdHk7XG4gICAgfVxuICB9KTtcblxuICBncm91cHMuZm9yRWFjaCgoZ3JvdXApID0+XG4gICAgZ3JvdXAuYXR0cmlidXRlcy5lbnRpdHlfaWQuZm9yRWFjaCgoZW50aXR5SWQpID0+IHtcbiAgICAgIGRlbGV0ZSB1bmdyb3VwZWRbZW50aXR5SWRdO1xuICAgIH0pXG4gICk7XG5cbiAgcmV0dXJuIHsgZ3JvdXBzLCB1bmdyb3VwZWQgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/entity/split_by_groups.ts\n");

/***/ }),

/***/ "./src/common/entity/strip_prefix_from_entity_name.ts":
/*!************************************************************!*\
  !*** ./src/common/entity/strip_prefix_from_entity_name.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stripPrefixFromEntityName: () => (/* binding */ stripPrefixFromEntityName)\n/* harmony export */ });\nconst SUFFIXES = [\" \", \": \"];\n\n/**\n * Strips a device name from an entity name.\n * @param entityName the entity name\n * @param lowerCasedPrefix the prefix to strip, lower cased\n * @returns\n */\nconst stripPrefixFromEntityName = (entityName, lowerCasedPrefix) => {\n  const lowerCasedEntityName = entityName.toLowerCase();\n  for (const suffix of SUFFIXES) {\n    const lowerCasedPrefixWithSuffix = `${lowerCasedPrefix}${suffix}`;\n    if (lowerCasedEntityName.startsWith(lowerCasedPrefixWithSuffix)) {\n      const newName = entityName.substring(lowerCasedPrefixWithSuffix.length);\n\n      // If first word already has an upper case letter (e.g. from brand name)\n      // leave as-is, otherwise capitalize the first word.\n      return hasUpperCase(newName.substr(0, newName.indexOf(\" \"))) ? newName : newName[0].toUpperCase() + newName.slice(1);\n    }\n  }\n  return undefined;\n};\nconst hasUpperCase = str => str.toLowerCase() !== str;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2VudGl0eS9zdHJpcF9wcmVmaXhfZnJvbV9lbnRpdHlfbmFtZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vZW50aXR5L3N0cmlwX3ByZWZpeF9mcm9tX2VudGl0eV9uYW1lLnRzP2IxNDYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU1VGRklYRVMgPSBbXCIgXCIsIFwiOiBcIl07XG5cbi8qKlxuICogU3RyaXBzIGEgZGV2aWNlIG5hbWUgZnJvbSBhbiBlbnRpdHkgbmFtZS5cbiAqIEBwYXJhbSBlbnRpdHlOYW1lIHRoZSBlbnRpdHkgbmFtZVxuICogQHBhcmFtIGxvd2VyQ2FzZWRQcmVmaXggdGhlIHByZWZpeCB0byBzdHJpcCwgbG93ZXIgY2FzZWRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBjb25zdCBzdHJpcFByZWZpeEZyb21FbnRpdHlOYW1lID0gKFxuICBlbnRpdHlOYW1lOiBzdHJpbmcsXG4gIGxvd2VyQ2FzZWRQcmVmaXg6IHN0cmluZ1xuKSA9PiB7XG4gIGNvbnN0IGxvd2VyQ2FzZWRFbnRpdHlOYW1lID0gZW50aXR5TmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gIGZvciAoY29uc3Qgc3VmZml4IG9mIFNVRkZJWEVTKSB7XG4gICAgY29uc3QgbG93ZXJDYXNlZFByZWZpeFdpdGhTdWZmaXggPSBgJHtsb3dlckNhc2VkUHJlZml4fSR7c3VmZml4fWA7XG5cbiAgICBpZiAobG93ZXJDYXNlZEVudGl0eU5hbWUuc3RhcnRzV2l0aChsb3dlckNhc2VkUHJlZml4V2l0aFN1ZmZpeCkpIHtcbiAgICAgIGNvbnN0IG5ld05hbWUgPSBlbnRpdHlOYW1lLnN1YnN0cmluZyhsb3dlckNhc2VkUHJlZml4V2l0aFN1ZmZpeC5sZW5ndGgpO1xuXG4gICAgICAvLyBJZiBmaXJzdCB3b3JkIGFscmVhZHkgaGFzIGFuIHVwcGVyIGNhc2UgbGV0dGVyIChlLmcuIGZyb20gYnJhbmQgbmFtZSlcbiAgICAgIC8vIGxlYXZlIGFzLWlzLCBvdGhlcndpc2UgY2FwaXRhbGl6ZSB0aGUgZmlyc3Qgd29yZC5cbiAgICAgIHJldHVybiBoYXNVcHBlckNhc2UobmV3TmFtZS5zdWJzdHIoMCwgbmV3TmFtZS5pbmRleE9mKFwiIFwiKSkpXG4gICAgICAgID8gbmV3TmFtZVxuICAgICAgICA6IG5ld05hbWVbMF0udG9VcHBlckNhc2UoKSArIG5ld05hbWUuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IGhhc1VwcGVyQ2FzZSA9IChzdHI6IHN0cmluZyk6IGJvb2xlYW4gPT4gc3RyLnRvTG93ZXJDYXNlKCkgIT09IHN0cjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/entity/strip_prefix_from_entity_name.ts\n");

/***/ }),

/***/ "./src/data/user.ts":
/*!**************************!*\
  !*** ./src/data/user.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GROUPS: () => (/* binding */ GROUPS),\n/* harmony export */   SYSTEM_GROUP_ID_ADMIN: () => (/* binding */ SYSTEM_GROUP_ID_ADMIN),\n/* harmony export */   SYSTEM_GROUP_ID_READ_ONLY: () => (/* binding */ SYSTEM_GROUP_ID_READ_ONLY),\n/* harmony export */   SYSTEM_GROUP_ID_USER: () => (/* binding */ SYSTEM_GROUP_ID_USER),\n/* harmony export */   computeUserBadges: () => (/* binding */ computeUserBadges),\n/* harmony export */   computeUserInitials: () => (/* binding */ computeUserInitials),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   fetchUsers: () => (/* binding */ fetchUsers),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\nconst mdiCrownCircleOutline = \"M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z\";\nconst mdiAlphaSCircleOutline = \"M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z\";\nconst mdiHomeCircleOutline = \"M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14\";\nconst mdiCancel = \"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z\";\nconst SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nconst SYSTEM_GROUP_ID_USER = \"system-users\";\nconst SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\nconst GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\nconst fetchUsers = async hass => hass.callWS({\n  type: \"config/auth/list\"\n});\nconst createUser = async (hass, name, group_ids, local_only) => hass.callWS({\n  type: \"config/auth/create\",\n  name,\n  group_ids,\n  local_only\n});\nconst updateUser = async (hass, userId, params) => hass.callWS({\n  ...params,\n  type: \"config/auth/update\",\n  user_id: userId\n});\nconst deleteUser = async (hass, userId) => hass.callWS({\n  type: \"config/auth/delete\",\n  user_id: userId\n});\nconst computeUserInitials = name => {\n  if (!name) {\n    return \"?\";\n  }\n  return name.trim()\n  // Split by space and take first 3 words\n  .split(\" \").slice(0, 3)\n  // Of each word, take first letter\n  .map(s => s.substring(0, 1)).join(\"\");\n};\nconst OWNER_ICON = mdiCrownCircleOutline;\nconst SYSTEM_ICON = mdiAlphaSCircleOutline;\nconst LOCAL_ICON = mdiHomeCircleOutline;\nconst DISABLED_ICON = mdiCancel;\nconst computeUserBadges = (hass, user, includeSystem) => {\n  const labels = [];\n  const translate = key => hass.localize(`ui.panel.config.users.${key}`);\n  if (user.is_owner) {\n    labels.push([OWNER_ICON, translate(\"is_owner\")]);\n  }\n  if (includeSystem && user.system_generated) {\n    labels.push([SYSTEM_ICON, translate(\"is_system\")]);\n  }\n  if (user.local_only) {\n    labels.push([LOCAL_ICON, translate(\"is_local\")]);\n  }\n  if (!user.is_active) {\n    labels.push([DISABLED_ICON, translate(\"is_not_active\")]);\n  }\n  return labels;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS91c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFxQkE7QUFFQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFHQTtBQUFBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL3VzZXIudHM/ZWZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBtZGlDcm93bkNpcmNsZU91dGxpbmUsXG4gIG1kaUFscGhhU0NpcmNsZU91dGxpbmUsXG4gIG1kaUhvbWVDaXJjbGVPdXRsaW5lLFxuICBtZGlDYW5jZWwsXG59IGZyb20gXCJAbWRpL2pzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50LCBUcmFuc2xhdGlvbkRpY3QgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IENyZWRlbnRpYWwgfSBmcm9tIFwiLi9hdXRoXCI7XG5cbmV4cG9ydCBjb25zdCBTWVNURU1fR1JPVVBfSURfQURNSU4gPSBcInN5c3RlbS1hZG1pblwiO1xuZXhwb3J0IGNvbnN0IFNZU1RFTV9HUk9VUF9JRF9VU0VSID0gXCJzeXN0ZW0tdXNlcnNcIjtcbmV4cG9ydCBjb25zdCBTWVNURU1fR1JPVVBfSURfUkVBRF9PTkxZID0gXCJzeXN0ZW0tcmVhZC1vbmx5XCI7XG5cbmV4cG9ydCBjb25zdCBHUk9VUFMgPSBbU1lTVEVNX0dST1VQX0lEX1VTRVIsIFNZU1RFTV9HUk9VUF9JRF9BRE1JTl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBuYW1lOiBzdHJpbmc7XG4gIGlzX293bmVyOiBib29sZWFuO1xuICBpc19hY3RpdmU6IGJvb2xlYW47XG4gIGxvY2FsX29ubHk6IGJvb2xlYW47XG4gIHN5c3RlbV9nZW5lcmF0ZWQ6IGJvb2xlYW47XG4gIGdyb3VwX2lkczogKGtleW9mIFRyYW5zbGF0aW9uRGljdFtcImdyb3Vwc1wiXSlbXTtcbiAgY3JlZGVudGlhbHM6IENyZWRlbnRpYWxbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVVc2VyUGFyYW1zIHtcbiAgbmFtZT86IFVzZXJbXCJuYW1lXCJdO1xuICBpc19hY3RpdmU/OiBVc2VyW1wiaXNfYWN0aXZlXCJdO1xuICBncm91cF9pZHM/OiBVc2VyW1wiZ3JvdXBfaWRzXCJdO1xuICBsb2NhbF9vbmx5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGZldGNoVXNlcnMgPSBhc3luYyAoaGFzczogSG9tZUFzc2lzdGFudCkgPT5cbiAgaGFzcy5jYWxsV1M8VXNlcltdPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9saXN0XCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgbmFtZTogc3RyaW5nLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmU6IHZhcmlhYmxlLW5hbWVcbiAgZ3JvdXBfaWRzPzogVXNlcltcImdyb3VwX2lkc1wiXSxcbiAgbG9jYWxfb25seT86IGJvb2xlYW5cbikgPT5cbiAgaGFzcy5jYWxsV1M8eyB1c2VyOiBVc2VyIH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoL2NyZWF0ZVwiLFxuICAgIG5hbWUsXG4gICAgZ3JvdXBfaWRzLFxuICAgIGxvY2FsX29ubHksXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHBhcmFtczogVXBkYXRlVXNlclBhcmFtc1xuKSA9PlxuICBoYXNzLmNhbGxXUzx7IHVzZXI6IFVzZXIgfT4oe1xuICAgIC4uLnBhcmFtcyxcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoL3VwZGF0ZVwiLFxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKGhhc3M6IEhvbWVBc3Npc3RhbnQsIHVzZXJJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxXUzx2b2lkPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9kZWxldGVcIixcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY29tcHV0ZVVzZXJJbml0aWFscyA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgaWYgKCFuYW1lKSB7XG4gICAgcmV0dXJuIFwiP1wiO1xuICB9XG4gIHJldHVybiAoXG4gICAgbmFtZVxuICAgICAgLnRyaW0oKVxuICAgICAgLy8gU3BsaXQgYnkgc3BhY2UgYW5kIHRha2UgZmlyc3QgMyB3b3Jkc1xuICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAvLyBPZiBlYWNoIHdvcmQsIHRha2UgZmlyc3QgbGV0dGVyXG4gICAgICAubWFwKChzKSA9PiBzLnN1YnN0cmluZygwLCAxKSlcbiAgICAgIC5qb2luKFwiXCIpXG4gICk7XG59O1xuXG5jb25zdCBPV05FUl9JQ09OID0gbWRpQ3Jvd25DaXJjbGVPdXRsaW5lO1xuY29uc3QgU1lTVEVNX0lDT04gPSBtZGlBbHBoYVNDaXJjbGVPdXRsaW5lO1xuY29uc3QgTE9DQUxfSUNPTiA9IG1kaUhvbWVDaXJjbGVPdXRsaW5lO1xuY29uc3QgRElTQUJMRURfSUNPTiA9IG1kaUNhbmNlbDtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVVc2VyQmFkZ2VzID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB1c2VyOiBVc2VyLFxuICBpbmNsdWRlU3lzdGVtOiBib29sZWFuXG4pID0+IHtcbiAgY29uc3QgbGFiZWxzOiBbc3RyaW5nLCBzdHJpbmddW10gPSBbXTtcbiAgY29uc3QgdHJhbnNsYXRlID0gKFxuICAgIGtleTogRXh0cmFjdDxcbiAgICAgIGtleW9mIFRyYW5zbGF0aW9uRGljdFtcInVpXCJdW1wicGFuZWxcIl1bXCJjb25maWdcIl1bXCJ1c2Vyc1wiXSxcbiAgICAgIGBpc18ke3N0cmluZ31gXG4gICAgPlxuICApID0+IGhhc3MubG9jYWxpemUoYHVpLnBhbmVsLmNvbmZpZy51c2Vycy4ke2tleX1gKTtcblxuICBpZiAodXNlci5pc19vd25lcikge1xuICAgIGxhYmVscy5wdXNoKFtPV05FUl9JQ09OLCB0cmFuc2xhdGUoXCJpc19vd25lclwiKV0pO1xuICB9XG4gIGlmIChpbmNsdWRlU3lzdGVtICYmIHVzZXIuc3lzdGVtX2dlbmVyYXRlZCkge1xuICAgIGxhYmVscy5wdXNoKFtTWVNURU1fSUNPTiwgdHJhbnNsYXRlKFwiaXNfc3lzdGVtXCIpXSk7XG4gIH1cbiAgaWYgKHVzZXIubG9jYWxfb25seSkge1xuICAgIGxhYmVscy5wdXNoKFtMT0NBTF9JQ09OLCB0cmFuc2xhdGUoXCJpc19sb2NhbFwiKV0pO1xuICB9XG4gIGlmICghdXNlci5pc19hY3RpdmUpIHtcbiAgICBsYWJlbHMucHVzaChbRElTQUJMRURfSUNPTiwgdHJhbnNsYXRlKFwiaXNfbm90X2FjdGl2ZVwiKV0pO1xuICB9XG5cbiAgcmV0dXJuIGxhYmVscztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/user.ts\n");

/***/ }),

/***/ "./src/panels/config/helpers/const.ts":
/*!********************************************!*\
  !*** ./src/panels/config/helpers/const.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HELPER_DOMAINS: () => (/* binding */ HELPER_DOMAINS),\n/* harmony export */   isHelperDomain: () => (/* binding */ isHelperDomain)\n/* harmony export */ });\n/* harmony import */ var _common_array_literal_includes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/array/literal-includes */ \"./src/common/array/literal-includes.ts\");\n\nconst HELPER_DOMAINS = [\"input_boolean\", \"input_button\", \"input_text\", \"input_number\", \"input_datetime\", \"input_select\", \"counter\", \"timer\", \"schedule\"];\nconst isHelperDomain = (0,_common_array_literal_includes__WEBPACK_IMPORTED_MODULE_0__.arrayLiteralIncludes)(HELPER_DOMAINS);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2NvbmZpZy9oZWxwZXJzL2NvbnN0LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBV0E7QUFhQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9jb25maWcvaGVscGVycy9jb25zdC50cz81MzE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFycmF5TGl0ZXJhbEluY2x1ZGVzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcnJheS9saXRlcmFsLWluY2x1ZGVzXCI7XG5pbXBvcnQgdHlwZSB7IENvdW50ZXIgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9jb3VudGVyXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0Qm9vbGVhbiB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X2Jvb2xlYW5cIjtcbmltcG9ydCB0eXBlIHsgSW5wdXRCdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dF9idXR0b25cIjtcbmltcG9ydCB0eXBlIHsgSW5wdXREYXRlVGltZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X2RhdGV0aW1lXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0TnVtYmVyIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfbnVtYmVyXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0U2VsZWN0IH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfc2VsZWN0XCI7XG5pbXBvcnQgdHlwZSB7IElucHV0VGV4dCB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X3RleHRcIjtcbmltcG9ydCB0eXBlIHsgU2NoZWR1bGUgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9zY2hlZHVsZVwiO1xuaW1wb3J0IHR5cGUgeyBUaW1lciB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3RpbWVyXCI7XG5cbmV4cG9ydCBjb25zdCBIRUxQRVJfRE9NQUlOUyA9IFtcbiAgXCJpbnB1dF9ib29sZWFuXCIsXG4gIFwiaW5wdXRfYnV0dG9uXCIsXG4gIFwiaW5wdXRfdGV4dFwiLFxuICBcImlucHV0X251bWJlclwiLFxuICBcImlucHV0X2RhdGV0aW1lXCIsXG4gIFwiaW5wdXRfc2VsZWN0XCIsXG4gIFwiY291bnRlclwiLFxuICBcInRpbWVyXCIsXG4gIFwic2NoZWR1bGVcIixcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEhlbHBlckRvbWFpbiA9ICh0eXBlb2YgSEVMUEVSX0RPTUFJTlMpW251bWJlcl07XG5leHBvcnQgY29uc3QgaXNIZWxwZXJEb21haW4gPSBhcnJheUxpdGVyYWxJbmNsdWRlcyhIRUxQRVJfRE9NQUlOUyk7XG5cbmV4cG9ydCB0eXBlIEhlbHBlciA9XG4gIHwgSW5wdXRCb29sZWFuXG4gIHwgSW5wdXRCdXR0b25cbiAgfCBJbnB1dFRleHRcbiAgfCBJbnB1dE51bWJlclxuICB8IElucHV0U2VsZWN0XG4gIHwgSW5wdXREYXRlVGltZVxuICB8IENvdW50ZXJcbiAgfCBUaW1lclxuICB8IFNjaGVkdWxlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/config/helpers/const.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/common/generate-lovelace-config.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/common/generate-lovelace-config.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeCards: () => (/* binding */ computeCards),\n/* harmony export */   generateDefaultViewConfig: () => (/* binding */ generateDefaultViewConfig),\n/* harmony export */   generateViewConfig: () => (/* binding */ generateViewConfig)\n/* harmony export */ });\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/split_by_groups */ \"./src/common/entity/split_by_groups.ts\");\n/* harmony import */ var _common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/strip_prefix_from_entity_name */ \"./src/common/entity/strip_prefix_from_entity_name.ts\");\n/* harmony import */ var _common_string_compare__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/string/compare */ \"./src/common/string/compare.ts\");\n/* harmony import */ var _data_integration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/integration */ \"./src/data/integration.ts\");\n/* harmony import */ var _data_user__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/user */ \"./src/data/user.ts\");\n/* harmony import */ var _config_helpers_const__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../config/helpers/const */ \"./src/panels/config/helpers/const.ts\");\n\n\n\n\n\n\n\n\n\n\nconst HIDE_DOMAIN = new Set([\"automation\", \"configurator\", \"device_tracker\", \"geo_location\", \"persistent_notification\", \"script\", \"sun\", \"zone\"]);\nconst HIDE_PLATFORM = new Set([\"mobile_app\"]);\nconst splitByAreaDevice = (areaEntries, deviceEntries, entityEntries, entities) => {\n  const allEntities = {\n    ...entities\n  };\n  const areasWithEntities = {};\n  const devicesWithEntities = {};\n  for (const entity of Object.values(entityEntries)) {\n    var _deviceEntries$entity;\n    const areaId = entity.area_id || entity.device_id && ((_deviceEntries$entity = deviceEntries[entity.device_id]) === null || _deviceEntries$entity === void 0 ? void 0 : _deviceEntries$entity.area_id);\n    if (areaId && areaId in areaEntries && entity.entity_id in allEntities) {\n      if (!(areaId in areasWithEntities)) {\n        areasWithEntities[areaId] = [];\n      }\n      areasWithEntities[areaId].push(allEntities[entity.entity_id]);\n      delete allEntities[entity.entity_id];\n    } else if (entity.device_id && entity.device_id in deviceEntries && entity.entity_id in allEntities) {\n      if (!(entity.device_id in devicesWithEntities)) {\n        devicesWithEntities[entity.device_id] = [];\n      }\n      devicesWithEntities[entity.device_id].push(allEntities[entity.entity_id]);\n      delete allEntities[entity.entity_id];\n    }\n  }\n  for (const [deviceId, deviceEntities] of Object.entries(devicesWithEntities)) {\n    if (deviceEntities.length === 1) {\n      allEntities[deviceEntities[0].entity_id] = deviceEntities[0];\n      delete devicesWithEntities[deviceId];\n    }\n  }\n  return {\n    areasWithEntities,\n    devicesWithEntities,\n    otherEntities: allEntities\n  };\n};\nconst computeCards = (states, entityIds, entityCardOptions, renderFooterEntities = true) => {\n  const cards = [];\n\n  // For entity card\n  const entitiesConf = [];\n  const titlePrefix = entityCardOptions.title ? entityCardOptions.title.toLowerCase() : undefined;\n  const footerEntities = [];\n  for (const entityId of entityIds) {\n    const stateObj = states[entityId];\n    const domain = (0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(entityId);\n    if (domain === \"alarm_control_panel\") {\n      const cardConfig = {\n        type: \"alarm-panel\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"camera\") {\n      const cardConfig = {\n        type: \"picture-entity\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"climate\") {\n      const cardConfig = {\n        type: \"thermostat\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"humidifier\") {\n      const cardConfig = {\n        type: \"humidifier\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"media_player\") {\n      const cardConfig = {\n        type: \"media-control\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"plant\") {\n      const cardConfig = {\n        type: \"plant-status\",\n        entity: entityId\n      };\n      cards.push(cardConfig);\n    } else if (domain === \"weather\") {\n      const cardConfig = {\n        type: \"weather-forecast\",\n        entity: entityId,\n        show_forecast: false\n      };\n      cards.push(cardConfig);\n    } else if (renderFooterEntities && (domain === \"scene\" || domain === \"script\")) {\n      const conf = {\n        entity: entityId,\n        show_icon: true,\n        show_name: true\n      };\n      let name;\n      if (titlePrefix && stateObj && (\n      // eslint-disable-next-line no-cond-assign\n      name = (0,_common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_5__.stripPrefixFromEntityName)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(stateObj), titlePrefix))) {\n        conf.name = name;\n      }\n      footerEntities.push(conf);\n    } else {\n      let name;\n      const entityConf = titlePrefix && stateObj && (\n      // eslint-disable-next-line no-cond-assign\n      name = (0,_common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_5__.stripPrefixFromEntityName)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(stateObj), titlePrefix)) ? {\n        entity: entityId,\n        name\n      } : entityId;\n      entitiesConf.push(entityConf);\n    }\n  }\n  entitiesConf.sort((a, b) => {\n    const entityIdA = typeof a === \"string\" ? a : a.entity;\n    const entityIdB = typeof b === \"string\" ? b : b.entity;\n    const categoryA = _common_const__WEBPACK_IMPORTED_MODULE_0__.SENSOR_ENTITIES.includes((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(entityIdA)) ? \"sensor\" : \"control\";\n    const categoryB = _common_const__WEBPACK_IMPORTED_MODULE_0__.SENSOR_ENTITIES.includes((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(entityIdB)) ? \"sensor\" : \"control\";\n    if (categoryA !== categoryB) {\n      return categoryA === \"sensor\" ? 1 : -1;\n    }\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_6__.stringCompare)(typeof a === \"string\" ? states[a] ? (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(states[a]) : \"\" : a.name || \"\", typeof b === \"string\" ? states[b] ? (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(states[b]) : \"\" : b.name || \"\");\n  });\n\n  // If we ended up with footer entities but no normal entities,\n  // render the footer entities as normal entities.\n  if (entitiesConf.length === 0 && footerEntities.length > 0) {\n    return computeCards(states, entityIds, entityCardOptions, false);\n  }\n  if (entitiesConf.length > 0 || footerEntities.length > 0) {\n    const card = {\n      type: \"entities\",\n      entities: entitiesConf,\n      ...entityCardOptions\n    };\n    if (footerEntities.length > 0) {\n      card.footer = {\n        type: \"buttons\",\n        entities: footerEntities\n      };\n    }\n    cards.unshift(card);\n  }\n  if (cards.length < 2) {\n    return cards;\n  }\n  return [{\n    type: \"grid\",\n    square: false,\n    columns: 1,\n    cards\n  }];\n};\nconst computeDefaultViewStates = (entities, entityEntries) => {\n  const states = {};\n  const hiddenEntities = new Set(Object.values(entityEntries).filter(entry => entry.entity_category || entry.platform && HIDE_PLATFORM.has(entry.platform) || entry.hidden).map(entry => entry.entity_id));\n  for (const entityId of Object.keys(entities)) {\n    const stateObj = entities[entityId];\n    if (!HIDE_DOMAIN.has((0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_2__.computeStateDomain)(stateObj)) && !hiddenEntities.has(stateObj.entity_id)) {\n      states[entityId] = entities[entityId];\n    }\n  }\n  return states;\n};\nconst generateViewConfig = (localize, path, title, icon, entities) => {\n  const ungroupedEntitites = {};\n\n  // Organize ungrouped entities in ungrouped things\n  for (const entityId of Object.keys(entities)) {\n    const state = entities[entityId];\n    const domain = (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_2__.computeStateDomain)(state);\n    if (!(domain in ungroupedEntitites)) {\n      ungroupedEntitites[domain] = [];\n    }\n    ungroupedEntitites[domain].push(state.entity_id);\n  }\n  const cards = [];\n  if (\"person\" in ungroupedEntitites) {\n    const personCards = [];\n    if (ungroupedEntitites.person.length === 1) {\n      cards.push({\n        type: \"entities\",\n        entities: ungroupedEntitites.person\n      });\n    } else {\n      let backgroundColor;\n      let foregroundColor = \"\";\n      for (const personEntityId of ungroupedEntitites.person) {\n        const stateObj = entities[personEntityId];\n        let image = stateObj.attributes.entity_picture;\n        if (!image) {\n          if (backgroundColor === undefined) {\n            const computedStyle = getComputedStyle(document.body);\n            backgroundColor = encodeURIComponent(computedStyle.getPropertyValue(\"--light-primary-color\").trim());\n            foregroundColor = encodeURIComponent((computedStyle.getPropertyValue(\"--text-light-primary-color\") || computedStyle.getPropertyValue(\"--primary-text-color\")).trim());\n          }\n          const initials = (0,_data_user__WEBPACK_IMPORTED_MODULE_8__.computeUserInitials)(stateObj.attributes.friendly_name || \"\");\n          image = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${backgroundColor}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${foregroundColor}' font-size='1.3em' dy='.3em'%3E${initials}%3C/text%3E%3C/g%3E%3C/svg%3E`;\n        }\n        personCards.push({\n          type: \"picture-entity\",\n          entity: personEntityId,\n          aspect_ratio: \"1\",\n          show_name: false,\n          image\n        });\n      }\n      cards.push({\n        type: \"grid\",\n        square: true,\n        columns: 3,\n        cards: personCards\n      });\n    }\n    delete ungroupedEntitites.person;\n  }\n\n  // Group helper entities in a single card\n  const helperEntities = [];\n  for (const domain of _config_helpers_const__WEBPACK_IMPORTED_MODULE_9__.HELPER_DOMAINS) {\n    if (!(domain in ungroupedEntitites)) {\n      continue;\n    }\n    helperEntities.push(...ungroupedEntitites[domain]);\n    delete ungroupedEntitites[domain];\n  }\n\n  // Prepare translations for cards\n  const domainTranslations = {};\n  for (const domain of Object.keys(ungroupedEntitites)) {\n    domainTranslations[domain] = (0,_data_integration__WEBPACK_IMPORTED_MODULE_7__.domainToName)(localize, domain);\n  }\n  if (helperEntities.length) {\n    ungroupedEntitites._helpers = helperEntities;\n    domainTranslations._helpers = localize(\"ui.panel.lovelace.strategy.original-states.helpers\");\n  }\n  Object.keys(ungroupedEntitites).sort((domain1, domain2) => (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_6__.stringCompare)(domainTranslations[domain1], domainTranslations[domain2])).forEach(domain => {\n    cards.push(...computeCards(entities, ungroupedEntitites[domain].sort((a, b) => (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_6__.stringCompare)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(entities[a]), (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(entities[b]))), {\n      title: domainTranslations[domain]\n    }));\n  });\n  const view = {\n    path,\n    title,\n    cards\n  };\n  if (icon) {\n    view.icon = icon;\n  }\n  return view;\n};\nconst generateDefaultViewConfig = (areaEntries, deviceEntries, entityEntries, entities, localize, energyPrefs) => {\n  const states = computeDefaultViewStates(entities, entityEntries);\n  const path = \"default_view\";\n  const title = \"Home\";\n  const icon = undefined;\n\n  // In the case of a default view, we want to use the group order attribute\n  const groupOrders = {};\n  for (const entityId of Object.keys(states)) {\n    const stateObj = states[entityId];\n    if (stateObj.attributes.order) {\n      groupOrders[entityId] = stateObj.attributes.order;\n    }\n  }\n  const splittedByAreaDevice = splitByAreaDevice(areaEntries, deviceEntries, entityEntries, states);\n  const splittedByGroups = (0,_common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_4__.splitByGroups)(splittedByAreaDevice.otherEntities);\n  splittedByGroups.groups.sort((gr1, gr2) => groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id]);\n  const groupCards = [];\n  for (const groupEntity of splittedByGroups.groups) {\n    groupCards.push(...computeCards(entities, groupEntity.attributes.entity_id, {\n      title: (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(groupEntity),\n      show_header_toggle: groupEntity.attributes.control !== \"hidden\"\n    }));\n  }\n  const config = generateViewConfig(localize, path, title, icon, splittedByGroups.ungrouped);\n  const areaCards = [];\n  const sortedAreas = Object.entries(splittedByAreaDevice.areasWithEntities).sort((a, b) => {\n    const areaA = areaEntries[a[0]];\n    const areaB = areaEntries[b[0]];\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_6__.stringCompare)(areaA.name, areaB.name);\n  });\n  for (const [areaId, areaEntities] of sortedAreas) {\n    const area = areaEntries[areaId];\n    areaCards.push(...computeCards(entities, areaEntities.map(entity => entity.entity_id), {\n      title: area.name\n    }));\n  }\n  const deviceCards = [];\n  const sortedDevices = Object.entries(splittedByAreaDevice.devicesWithEntities).sort((a, b) => {\n    const deviceA = deviceEntries[a[0]];\n    const deviceB = deviceEntries[b[0]];\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_6__.stringCompare)(deviceA.name_by_user || deviceA.name || \"\", deviceB.name_by_user || deviceB.name || \"\");\n  });\n  for (const [deviceId, deviceEntities] of sortedDevices) {\n    const device = deviceEntries[deviceId];\n    deviceCards.push(...computeCards(entities, deviceEntities.map(entity => entity.entity_id), {\n      title: device.name_by_user || device.name || localize(\"ui.panel.config.devices.unnamed_device\", \"type\", localize(`ui.panel.config.devices.type.${device.entry_type || \"device\"}`))\n    }));\n  }\n  let energyCard;\n  if (energyPrefs) {\n    // Distribution card requires the grid to be configured\n    const grid = energyPrefs.energy_sources.find(source => source.type === \"grid\");\n    if (grid && grid.flow_from.length > 0) {\n      energyCard = {\n        title: localize(\"ui.panel.lovelace.cards.energy.energy_distribution.title_today\"),\n        type: \"energy-distribution\",\n        link_dashboard: true\n      };\n    }\n  }\n  config.cards.unshift(...areaCards, ...groupCards, ...(energyCard ? [energyCard] : []));\n  config.cards.push(...deviceCards);\n  return config;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9nZW5lcmF0ZS1sb3ZlbGFjZS1jb25maWcudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUVBO0FBV0E7QUFXQTtBQVFBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BOztBQUVBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFZQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFNQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBS0E7QUFVQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFRQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQVVBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vZ2VuZXJhdGUtbG92ZWxhY2UtY29uZmlnLnRzPzg0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFzc0VudGl0aWVzLCBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgU0VOU09SX0VOVElUSUVTIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgc3BsaXRCeUdyb3VwcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3NwbGl0X2J5X2dyb3Vwc1wiO1xuaW1wb3J0IHsgc3RyaXBQcmVmaXhGcm9tRW50aXR5TmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3N0cmlwX3ByZWZpeF9mcm9tX2VudGl0eV9uYW1lXCI7XG5pbXBvcnQgeyBzdHJpbmdDb21wYXJlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zdHJpbmcvY29tcGFyZVwiO1xuaW1wb3J0IHsgTG9jYWxpemVGdW5jIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi90cmFuc2xhdGlvbnMvbG9jYWxpemVcIjtcbmltcG9ydCB7XG4gIEVuZXJneVByZWZlcmVuY2VzLFxuICBHcmlkU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2UsXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2VuZXJneVwiO1xuaW1wb3J0IHsgZG9tYWluVG9OYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW50ZWdyYXRpb25cIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZENvbmZpZywgTG92ZWxhY2VWaWV3Q29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IGNvbXB1dGVVc2VySW5pdGlhbHMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS91c2VyXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIRUxQRVJfRE9NQUlOUyB9IGZyb20gXCIuLi8uLi9jb25maWcvaGVscGVycy9jb25zdFwiO1xuaW1wb3J0IHtcbiAgQWxhcm1QYW5lbENhcmRDb25maWcsXG4gIEVudGl0aWVzQ2FyZENvbmZpZyxcbiAgSHVtaWRpZmllckNhcmRDb25maWcsXG4gIFBpY3R1cmVFbnRpdHlDYXJkQ29uZmlnLFxuICBUaGVybW9zdGF0Q2FyZENvbmZpZyxcbn0gZnJvbSBcIi4uL2NhcmRzL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IEJ1dHRvbnNIZWFkZXJGb290ZXJDb25maWcgfSBmcm9tIFwiLi4vaGVhZGVyLWZvb3Rlci90eXBlc1wiO1xuXG5jb25zdCBISURFX0RPTUFJTiA9IG5ldyBTZXQoW1xuICBcImF1dG9tYXRpb25cIixcbiAgXCJjb25maWd1cmF0b3JcIixcbiAgXCJkZXZpY2VfdHJhY2tlclwiLFxuICBcImdlb19sb2NhdGlvblwiLFxuICBcInBlcnNpc3RlbnRfbm90aWZpY2F0aW9uXCIsXG4gIFwic2NyaXB0XCIsXG4gIFwic3VuXCIsXG4gIFwiem9uZVwiLFxuXSk7XG5cbmNvbnN0IEhJREVfUExBVEZPUk0gPSBuZXcgU2V0KFtcIm1vYmlsZV9hcHBcIl0pO1xuXG5pbnRlcmZhY2UgU3BsaXR0ZWRCeUFyZWFEZXZpY2Uge1xuICBhcmVhc1dpdGhFbnRpdGllczogeyBbYXJlYUlkOiBzdHJpbmddOiBIYXNzRW50aXR5W10gfTtcbiAgZGV2aWNlc1dpdGhFbnRpdGllczogeyBbZGV2aWNlSWQ6IHN0cmluZ106IEhhc3NFbnRpdHlbXSB9O1xuICBvdGhlckVudGl0aWVzOiBIYXNzRW50aXRpZXM7XG59XG5cbmNvbnN0IHNwbGl0QnlBcmVhRGV2aWNlID0gKFxuICBhcmVhRW50cmllczogSG9tZUFzc2lzdGFudFtcImFyZWFzXCJdLFxuICBkZXZpY2VFbnRyaWVzOiBIb21lQXNzaXN0YW50W1wiZGV2aWNlc1wiXSxcbiAgZW50aXR5RW50cmllczogSG9tZUFzc2lzdGFudFtcImVudGl0aWVzXCJdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzXG4pOiBTcGxpdHRlZEJ5QXJlYURldmljZSA9PiB7XG4gIGNvbnN0IGFsbEVudGl0aWVzID0geyAuLi5lbnRpdGllcyB9O1xuICBjb25zdCBhcmVhc1dpdGhFbnRpdGllczogU3BsaXR0ZWRCeUFyZWFEZXZpY2VbXCJhcmVhc1dpdGhFbnRpdGllc1wiXSA9IHt9O1xuICBjb25zdCBkZXZpY2VzV2l0aEVudGl0aWVzOiBTcGxpdHRlZEJ5QXJlYURldmljZVtcImRldmljZXNXaXRoRW50aXRpZXNcIl0gPSB7fTtcblxuICBmb3IgKGNvbnN0IGVudGl0eSBvZiBPYmplY3QudmFsdWVzKGVudGl0eUVudHJpZXMpKSB7XG4gICAgY29uc3QgYXJlYUlkID1cbiAgICAgIGVudGl0eS5hcmVhX2lkIHx8XG4gICAgICAoZW50aXR5LmRldmljZV9pZCAmJiBkZXZpY2VFbnRyaWVzW2VudGl0eS5kZXZpY2VfaWRdPy5hcmVhX2lkKTtcbiAgICBpZiAoYXJlYUlkICYmIGFyZWFJZCBpbiBhcmVhRW50cmllcyAmJiBlbnRpdHkuZW50aXR5X2lkIGluIGFsbEVudGl0aWVzKSB7XG4gICAgICBpZiAoIShhcmVhSWQgaW4gYXJlYXNXaXRoRW50aXRpZXMpKSB7XG4gICAgICAgIGFyZWFzV2l0aEVudGl0aWVzW2FyZWFJZF0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGFyZWFzV2l0aEVudGl0aWVzW2FyZWFJZF0ucHVzaChhbGxFbnRpdGllc1tlbnRpdHkuZW50aXR5X2lkXSk7XG4gICAgICBkZWxldGUgYWxsRW50aXRpZXNbZW50aXR5LmVudGl0eV9pZF07XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGVudGl0eS5kZXZpY2VfaWQgJiZcbiAgICAgIGVudGl0eS5kZXZpY2VfaWQgaW4gZGV2aWNlRW50cmllcyAmJlxuICAgICAgZW50aXR5LmVudGl0eV9pZCBpbiBhbGxFbnRpdGllc1xuICAgICkge1xuICAgICAgaWYgKCEoZW50aXR5LmRldmljZV9pZCBpbiBkZXZpY2VzV2l0aEVudGl0aWVzKSkge1xuICAgICAgICBkZXZpY2VzV2l0aEVudGl0aWVzW2VudGl0eS5kZXZpY2VfaWRdID0gW107XG4gICAgICB9XG4gICAgICBkZXZpY2VzV2l0aEVudGl0aWVzW2VudGl0eS5kZXZpY2VfaWRdLnB1c2goYWxsRW50aXRpZXNbZW50aXR5LmVudGl0eV9pZF0pO1xuICAgICAgZGVsZXRlIGFsbEVudGl0aWVzW2VudGl0eS5lbnRpdHlfaWRdO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IFtkZXZpY2VJZCwgZGV2aWNlRW50aXRpZXNdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgIGRldmljZXNXaXRoRW50aXRpZXNcbiAgKSkge1xuICAgIGlmIChkZXZpY2VFbnRpdGllcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGFsbEVudGl0aWVzW2RldmljZUVudGl0aWVzWzBdLmVudGl0eV9pZF0gPSBkZXZpY2VFbnRpdGllc1swXTtcbiAgICAgIGRlbGV0ZSBkZXZpY2VzV2l0aEVudGl0aWVzW2RldmljZUlkXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhcmVhc1dpdGhFbnRpdGllcyxcbiAgICBkZXZpY2VzV2l0aEVudGl0aWVzLFxuICAgIG90aGVyRW50aXRpZXM6IGFsbEVudGl0aWVzLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVDYXJkcyA9IChcbiAgc3RhdGVzOiBIYXNzRW50aXRpZXMsXG4gIGVudGl0eUlkczogc3RyaW5nW10sXG4gIGVudGl0eUNhcmRPcHRpb25zOiBQYXJ0aWFsPEVudGl0aWVzQ2FyZENvbmZpZz4sXG4gIHJlbmRlckZvb3RlckVudGl0aWVzID0gdHJ1ZVxuKTogTG92ZWxhY2VDYXJkQ29uZmlnW10gPT4ge1xuICBjb25zdCBjYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICAvLyBGb3IgZW50aXR5IGNhcmRcbiAgY29uc3QgZW50aXRpZXNDb25mOiBBcnJheTxzdHJpbmcgfCBFbnRpdHlDb25maWc+ID0gW107XG5cbiAgY29uc3QgdGl0bGVQcmVmaXggPSBlbnRpdHlDYXJkT3B0aW9ucy50aXRsZVxuICAgID8gZW50aXR5Q2FyZE9wdGlvbnMudGl0bGUudG9Mb3dlckNhc2UoKVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIGNvbnN0IGZvb3RlckVudGl0aWVzOiBCdXR0b25zSGVhZGVyRm9vdGVyQ29uZmlnW1wiZW50aXRpZXNcIl0gPSBbXTtcblxuICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGVudGl0eUlkcykge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gc3RhdGVzW2VudGl0eUlkXTtcbiAgICBjb25zdCBkb21haW4gPSBjb21wdXRlRG9tYWluKGVudGl0eUlkKTtcblxuICAgIGlmIChkb21haW4gPT09IFwiYWxhcm1fY29udHJvbF9wYW5lbFwiKSB7XG4gICAgICBjb25zdCBjYXJkQ29uZmlnOiBBbGFybVBhbmVsQ2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJhbGFybS1wYW5lbFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwiY2FtZXJhXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWc6IFBpY3R1cmVFbnRpdHlDYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcInBpY3R1cmUtZW50aXR5XCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9O1xuICAgICAgY2FyZHMucHVzaChjYXJkQ29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJjbGltYXRlXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWc6IFRoZXJtb3N0YXRDYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcInRoZXJtb3N0YXRcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH07XG4gICAgICBjYXJkcy5wdXNoKGNhcmRDb25maWcpO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcImh1bWlkaWZpZXJcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZzogSHVtaWRpZmllckNhcmRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6IFwiaHVtaWRpZmllclwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwibWVkaWFfcGxheWVyXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6IFwibWVkaWEtY29udHJvbFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwicGxhbnRcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJwbGFudC1zdGF0dXNcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH07XG4gICAgICBjYXJkcy5wdXNoKGNhcmRDb25maWcpO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcIndlYXRoZXJcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJ3ZWF0aGVyLWZvcmVjYXN0XCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgIHNob3dfZm9yZWNhc3Q6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHJlbmRlckZvb3RlckVudGl0aWVzICYmXG4gICAgICAoZG9tYWluID09PSBcInNjZW5lXCIgfHwgZG9tYWluID09PSBcInNjcmlwdFwiKVxuICAgICkge1xuICAgICAgY29uc3QgY29uZjogKHR5cGVvZiBmb290ZXJFbnRpdGllcylbMF0gPSB7XG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgICAgc2hvd19uYW1lOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIGxldCBuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRpdGxlUHJlZml4ICYmXG4gICAgICAgIHN0YXRlT2JqICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25kLWFzc2lnblxuICAgICAgICAobmFtZSA9IHN0cmlwUHJlZml4RnJvbUVudGl0eU5hbWUoXG4gICAgICAgICAgY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iaiksXG4gICAgICAgICAgdGl0bGVQcmVmaXhcbiAgICAgICAgKSlcbiAgICAgICkge1xuICAgICAgICBjb25mLm5hbWUgPSBuYW1lO1xuICAgICAgfVxuICAgICAgZm9vdGVyRW50aXRpZXMucHVzaChjb25mKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGVudGl0eUNvbmYgPVxuICAgICAgICB0aXRsZVByZWZpeCAmJlxuICAgICAgICBzdGF0ZU9iaiAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgICAgICAgKG5hbWUgPSBzdHJpcFByZWZpeEZyb21FbnRpdHlOYW1lKFxuICAgICAgICAgIGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgICAgIHRpdGxlUHJlZml4XG4gICAgICAgICkpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiBlbnRpdHlJZDtcblxuICAgICAgZW50aXRpZXNDb25mLnB1c2goZW50aXR5Q29uZik7XG4gICAgfVxuICB9XG5cbiAgZW50aXRpZXNDb25mLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBlbnRpdHlJZEEgPSB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiA/IGEgOiBhLmVudGl0eTtcbiAgICBjb25zdCBlbnRpdHlJZEIgPSB0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIiA/IGIgOiBiLmVudGl0eTtcblxuICAgIGNvbnN0IGNhdGVnb3J5QSA9IFNFTlNPUl9FTlRJVElFUy5pbmNsdWRlcyhjb21wdXRlRG9tYWluKGVudGl0eUlkQSkpXG4gICAgICA/IFwic2Vuc29yXCJcbiAgICAgIDogXCJjb250cm9sXCI7XG4gICAgY29uc3QgY2F0ZWdvcnlCID0gU0VOU09SX0VOVElUSUVTLmluY2x1ZGVzKGNvbXB1dGVEb21haW4oZW50aXR5SWRCKSlcbiAgICAgID8gXCJzZW5zb3JcIlxuICAgICAgOiBcImNvbnRyb2xcIjtcblxuICAgIGlmIChjYXRlZ29yeUEgIT09IGNhdGVnb3J5Qikge1xuICAgICAgcmV0dXJuIGNhdGVnb3J5QSA9PT0gXCJzZW5zb3JcIiA/IDEgOiAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyaW5nQ29tcGFyZShcbiAgICAgIHR5cGVvZiBhID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gc3RhdGVzW2FdXG4gICAgICAgICAgPyBjb21wdXRlU3RhdGVOYW1lKHN0YXRlc1thXSlcbiAgICAgICAgICA6IFwiXCJcbiAgICAgICAgOiBhLm5hbWUgfHwgXCJcIixcbiAgICAgIHR5cGVvZiBiID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gc3RhdGVzW2JdXG4gICAgICAgICAgPyBjb21wdXRlU3RhdGVOYW1lKHN0YXRlc1tiXSlcbiAgICAgICAgICA6IFwiXCJcbiAgICAgICAgOiBiLm5hbWUgfHwgXCJcIlxuICAgICk7XG4gIH0pO1xuXG4gIC8vIElmIHdlIGVuZGVkIHVwIHdpdGggZm9vdGVyIGVudGl0aWVzIGJ1dCBubyBub3JtYWwgZW50aXRpZXMsXG4gIC8vIHJlbmRlciB0aGUgZm9vdGVyIGVudGl0aWVzIGFzIG5vcm1hbCBlbnRpdGllcy5cbiAgaWYgKGVudGl0aWVzQ29uZi5sZW5ndGggPT09IDAgJiYgZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBjb21wdXRlQ2FyZHMoc3RhdGVzLCBlbnRpdHlJZHMsIGVudGl0eUNhcmRPcHRpb25zLCBmYWxzZSk7XG4gIH1cblxuICBpZiAoZW50aXRpZXNDb25mLmxlbmd0aCA+IDAgfHwgZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGNhcmQ6IEVudGl0aWVzQ2FyZENvbmZpZyA9IHtcbiAgICAgIHR5cGU6IFwiZW50aXRpZXNcIixcbiAgICAgIGVudGl0aWVzOiBlbnRpdGllc0NvbmYsXG4gICAgICAuLi5lbnRpdHlDYXJkT3B0aW9ucyxcbiAgICB9O1xuICAgIGlmIChmb290ZXJFbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBjYXJkLmZvb3RlciA9IHtcbiAgICAgICAgdHlwZTogXCJidXR0b25zXCIsXG4gICAgICAgIGVudGl0aWVzOiBmb290ZXJFbnRpdGllcyxcbiAgICAgIH0gYXMgQnV0dG9uc0hlYWRlckZvb3RlckNvbmZpZztcbiAgICB9XG4gICAgY2FyZHMudW5zaGlmdChjYXJkKTtcbiAgfVxuXG4gIGlmIChjYXJkcy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIGNhcmRzO1xuICB9XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICB0eXBlOiBcImdyaWRcIixcbiAgICAgIHNxdWFyZTogZmFsc2UsXG4gICAgICBjb2x1bW5zOiAxLFxuICAgICAgY2FyZHMsXG4gICAgfSxcbiAgXTtcbn07XG5cbmNvbnN0IGNvbXB1dGVEZWZhdWx0Vmlld1N0YXRlcyA9IChcbiAgZW50aXRpZXM6IEhhc3NFbnRpdGllcyxcbiAgZW50aXR5RW50cmllczogSG9tZUFzc2lzdGFudFtcImVudGl0aWVzXCJdXG4pOiBIYXNzRW50aXRpZXMgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSB7fTtcbiAgY29uc3QgaGlkZGVuRW50aXRpZXMgPSBuZXcgU2V0KFxuICAgIE9iamVjdC52YWx1ZXMoZW50aXR5RW50cmllcylcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgICBlbnRyeS5lbnRpdHlfY2F0ZWdvcnkgfHxcbiAgICAgICAgICAoZW50cnkucGxhdGZvcm0gJiYgSElERV9QTEFURk9STS5oYXMoZW50cnkucGxhdGZvcm0pKSB8fFxuICAgICAgICAgIGVudHJ5LmhpZGRlblxuICAgICAgKVxuICAgICAgLm1hcCgoZW50cnkpID0+IGVudHJ5LmVudGl0eV9pZClcbiAgKTtcblxuICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIE9iamVjdC5rZXlzKGVudGl0aWVzKSkge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gZW50aXRpZXNbZW50aXR5SWRdO1xuICAgIGlmIChcbiAgICAgICFISURFX0RPTUFJTi5oYXMoY29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlT2JqKSkgJiZcbiAgICAgICFoaWRkZW5FbnRpdGllcy5oYXMoc3RhdGVPYmouZW50aXR5X2lkKVxuICAgICkge1xuICAgICAgc3RhdGVzW2VudGl0eUlkXSA9IGVudGl0aWVzW2VudGl0eUlkXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0YXRlcztcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVZpZXdDb25maWcgPSAoXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmMsXG4gIHBhdGg6IHN0cmluZyxcbiAgdGl0bGU6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgaWNvbjogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCB1bmdyb3VwZWRFbnRpdGl0ZXM6IHsgW2RvbWFpbjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuXG4gIC8vIE9yZ2FuaXplIHVuZ3JvdXBlZCBlbnRpdGllcyBpbiB1bmdyb3VwZWQgdGhpbmdzXG4gIGZvciAoY29uc3QgZW50aXR5SWQgb2YgT2JqZWN0LmtleXMoZW50aXRpZXMpKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBlbnRpdGllc1tlbnRpdHlJZF07XG4gICAgY29uc3QgZG9tYWluID0gY29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlKTtcblxuICAgIGlmICghKGRvbWFpbiBpbiB1bmdyb3VwZWRFbnRpdGl0ZXMpKSB7XG4gICAgICB1bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXSA9IFtdO1xuICAgIH1cblxuICAgIHVuZ3JvdXBlZEVudGl0aXRlc1tkb21haW5dLnB1c2goc3RhdGUuZW50aXR5X2lkKTtcbiAgfVxuXG4gIGNvbnN0IGNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gIGlmIChcInBlcnNvblwiIGluIHVuZ3JvdXBlZEVudGl0aXRlcykge1xuICAgIGNvbnN0IHBlcnNvbkNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gICAgaWYgKHVuZ3JvdXBlZEVudGl0aXRlcy5wZXJzb24ubGVuZ3RoID09PSAxKSB7XG4gICAgICBjYXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJlbnRpdGllc1wiLFxuICAgICAgICBlbnRpdGllczogdW5ncm91cGVkRW50aXRpdGVzLnBlcnNvbixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgYmFja2dyb3VuZENvbG9yOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBsZXQgZm9yZWdyb3VuZENvbG9yID0gXCJcIjtcblxuICAgICAgZm9yIChjb25zdCBwZXJzb25FbnRpdHlJZCBvZiB1bmdyb3VwZWRFbnRpdGl0ZXMucGVyc29uKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlT2JqID0gZW50aXRpZXNbcGVyc29uRW50aXR5SWRdO1xuXG4gICAgICAgIGxldCBpbWFnZSA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmU7XG5cbiAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi0tbGlnaHQtcHJpbWFyeS1jb2xvclwiKS50cmltKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3IgPSBlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItLXRleHQtbGlnaHQtcHJpbWFyeS1jb2xvclwiKSB8fFxuICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi0tcHJpbWFyeS10ZXh0LWNvbG9yXCIpXG4gICAgICAgICAgICAgICkudHJpbSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBpbml0aWFscyA9IGNvbXB1dGVVc2VySW5pdGlhbHMoXG4gICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLmZyaWVuZGx5X25hbWUgfHwgXCJcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgaW1hZ2UgPSBgZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MCA1MCcgd2lkdGg9JzUwJyBoZWlnaHQ9JzUwJyBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjoke2JhY2tncm91bmRDb2xvcn0nJTNFJTNDZyUzRSUzQ3RleHQgZm9udC1mYW1pbHk9J3JvYm90bycgeD0nNTAlMjUnIHk9JzUwJTI1JyB0ZXh0LWFuY2hvcj0nbWlkZGxlJyBzdHJva2U9JyR7Zm9yZWdyb3VuZENvbG9yfScgZm9udC1zaXplPScxLjNlbScgZHk9Jy4zZW0nJTNFJHtpbml0aWFsc30lM0MvdGV4dCUzRSUzQy9nJTNFJTNDL3N2ZyUzRWA7XG4gICAgICAgIH1cblxuICAgICAgICBwZXJzb25DYXJkcy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInBpY3R1cmUtZW50aXR5XCIsXG4gICAgICAgICAgZW50aXR5OiBwZXJzb25FbnRpdHlJZCxcbiAgICAgICAgICBhc3BlY3RfcmF0aW86IFwiMVwiLFxuICAgICAgICAgIHNob3dfbmFtZTogZmFsc2UsXG4gICAgICAgICAgaW1hZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJncmlkXCIsXG4gICAgICAgIHNxdWFyZTogdHJ1ZSxcbiAgICAgICAgY29sdW1uczogMyxcbiAgICAgICAgY2FyZHM6IHBlcnNvbkNhcmRzLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVsZXRlIHVuZ3JvdXBlZEVudGl0aXRlcy5wZXJzb247XG4gIH1cblxuICAvLyBHcm91cCBoZWxwZXIgZW50aXRpZXMgaW4gYSBzaW5nbGUgY2FyZFxuICBjb25zdCBoZWxwZXJFbnRpdGllczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBIRUxQRVJfRE9NQUlOUykge1xuICAgIGlmICghKGRvbWFpbiBpbiB1bmdyb3VwZWRFbnRpdGl0ZXMpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaGVscGVyRW50aXRpZXMucHVzaCguLi51bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXSk7XG4gICAgZGVsZXRlIHVuZ3JvdXBlZEVudGl0aXRlc1tkb21haW5dO1xuICB9XG5cbiAgLy8gUHJlcGFyZSB0cmFuc2xhdGlvbnMgZm9yIGNhcmRzXG4gIGNvbnN0IGRvbWFpblRyYW5zbGF0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZG9tYWluIG9mIE9iamVjdC5rZXlzKHVuZ3JvdXBlZEVudGl0aXRlcykpIHtcbiAgICBkb21haW5UcmFuc2xhdGlvbnNbZG9tYWluXSA9IGRvbWFpblRvTmFtZShsb2NhbGl6ZSwgZG9tYWluKTtcbiAgfVxuXG4gIGlmIChoZWxwZXJFbnRpdGllcy5sZW5ndGgpIHtcbiAgICB1bmdyb3VwZWRFbnRpdGl0ZXMuX2hlbHBlcnMgPSBoZWxwZXJFbnRpdGllcztcbiAgICBkb21haW5UcmFuc2xhdGlvbnMuX2hlbHBlcnMgPSBsb2NhbGl6ZShcbiAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uuc3RyYXRlZ3kub3JpZ2luYWwtc3RhdGVzLmhlbHBlcnNcIlxuICAgICk7XG4gIH1cblxuICBPYmplY3Qua2V5cyh1bmdyb3VwZWRFbnRpdGl0ZXMpXG4gICAgLnNvcnQoKGRvbWFpbjEsIGRvbWFpbjIpID0+XG4gICAgICBzdHJpbmdDb21wYXJlKGRvbWFpblRyYW5zbGF0aW9uc1tkb21haW4xXSwgZG9tYWluVHJhbnNsYXRpb25zW2RvbWFpbjJdKVxuICAgIClcbiAgICAuZm9yRWFjaCgoZG9tYWluKSA9PiB7XG4gICAgICBjYXJkcy5wdXNoKFxuICAgICAgICAuLi5jb21wdXRlQ2FyZHMoXG4gICAgICAgICAgZW50aXRpZXMsXG4gICAgICAgICAgdW5ncm91cGVkRW50aXRpdGVzW2RvbWFpbl0uc29ydCgoYSwgYikgPT5cbiAgICAgICAgICAgIHN0cmluZ0NvbXBhcmUoXG4gICAgICAgICAgICAgIGNvbXB1dGVTdGF0ZU5hbWUoZW50aXRpZXNbYV0pLFxuICAgICAgICAgICAgICBjb21wdXRlU3RhdGVOYW1lKGVudGl0aWVzW2JdKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IGRvbWFpblRyYW5zbGF0aW9uc1tkb21haW5dLFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcblxuICBjb25zdCB2aWV3OiBMb3ZlbGFjZVZpZXdDb25maWcgPSB7XG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBjYXJkcyxcbiAgfTtcblxuICBpZiAoaWNvbikge1xuICAgIHZpZXcuaWNvbiA9IGljb247XG4gIH1cblxuICByZXR1cm4gdmlldztcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZURlZmF1bHRWaWV3Q29uZmlnID0gKFxuICBhcmVhRW50cmllczogSG9tZUFzc2lzdGFudFtcImFyZWFzXCJdLFxuICBkZXZpY2VFbnRyaWVzOiBIb21lQXNzaXN0YW50W1wiZGV2aWNlc1wiXSxcbiAgZW50aXR5RW50cmllczogSG9tZUFzc2lzdGFudFtcImVudGl0aWVzXCJdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzLFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jLFxuICBlbmVyZ3lQcmVmcz86IEVuZXJneVByZWZlcmVuY2VzXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSBjb21wdXRlRGVmYXVsdFZpZXdTdGF0ZXMoZW50aXRpZXMsIGVudGl0eUVudHJpZXMpO1xuICBjb25zdCBwYXRoID0gXCJkZWZhdWx0X3ZpZXdcIjtcbiAgY29uc3QgdGl0bGUgPSBcIkhvbWVcIjtcbiAgY29uc3QgaWNvbiA9IHVuZGVmaW5lZDtcblxuICAvLyBJbiB0aGUgY2FzZSBvZiBhIGRlZmF1bHQgdmlldywgd2Ugd2FudCB0byB1c2UgdGhlIGdyb3VwIG9yZGVyIGF0dHJpYnV0ZVxuICBjb25zdCBncm91cE9yZGVycyA9IHt9O1xuICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIE9iamVjdC5rZXlzKHN0YXRlcykpIHtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHN0YXRlc1tlbnRpdHlJZF07XG4gICAgaWYgKHN0YXRlT2JqLmF0dHJpYnV0ZXMub3JkZXIpIHtcbiAgICAgIGdyb3VwT3JkZXJzW2VudGl0eUlkXSA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMub3JkZXI7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUFyZWFEZXZpY2UgPSBzcGxpdEJ5QXJlYURldmljZShcbiAgICBhcmVhRW50cmllcyxcbiAgICBkZXZpY2VFbnRyaWVzLFxuICAgIGVudGl0eUVudHJpZXMsXG4gICAgc3RhdGVzXG4gICk7XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUdyb3VwcyA9IHNwbGl0QnlHcm91cHMoc3BsaXR0ZWRCeUFyZWFEZXZpY2Uub3RoZXJFbnRpdGllcyk7XG4gIHNwbGl0dGVkQnlHcm91cHMuZ3JvdXBzLnNvcnQoXG4gICAgKGdyMSwgZ3IyKSA9PiBncm91cE9yZGVyc1tncjEuZW50aXR5X2lkXSAtIGdyb3VwT3JkZXJzW2dyMi5lbnRpdHlfaWRdXG4gICk7XG5cbiAgY29uc3QgZ3JvdXBDYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGdyb3VwRW50aXR5IG9mIHNwbGl0dGVkQnlHcm91cHMuZ3JvdXBzKSB7XG4gICAgZ3JvdXBDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKGVudGl0aWVzLCBncm91cEVudGl0eS5hdHRyaWJ1dGVzLmVudGl0eV9pZCwge1xuICAgICAgICB0aXRsZTogY29tcHV0ZVN0YXRlTmFtZShncm91cEVudGl0eSksXG4gICAgICAgIHNob3dfaGVhZGVyX3RvZ2dsZTogZ3JvdXBFbnRpdHkuYXR0cmlidXRlcy5jb250cm9sICE9PSBcImhpZGRlblwiLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3QgY29uZmlnID0gZ2VuZXJhdGVWaWV3Q29uZmlnKFxuICAgIGxvY2FsaXplLFxuICAgIHBhdGgsXG4gICAgdGl0bGUsXG4gICAgaWNvbixcbiAgICBzcGxpdHRlZEJ5R3JvdXBzLnVuZ3JvdXBlZFxuICApO1xuXG4gIGNvbnN0IGFyZWFDYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBjb25zdCBzb3J0ZWRBcmVhcyA9IE9iamVjdC5lbnRyaWVzKFxuICAgIHNwbGl0dGVkQnlBcmVhRGV2aWNlLmFyZWFzV2l0aEVudGl0aWVzXG4gICkuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFyZWFBID0gYXJlYUVudHJpZXNbYVswXV07XG4gICAgY29uc3QgYXJlYUIgPSBhcmVhRW50cmllc1tiWzBdXTtcbiAgICByZXR1cm4gc3RyaW5nQ29tcGFyZShhcmVhQS5uYW1lLCBhcmVhQi5uYW1lKTtcbiAgfSk7XG5cbiAgZm9yIChjb25zdCBbYXJlYUlkLCBhcmVhRW50aXRpZXNdIG9mIHNvcnRlZEFyZWFzKSB7XG4gICAgY29uc3QgYXJlYSA9IGFyZWFFbnRyaWVzW2FyZWFJZF07XG4gICAgYXJlYUNhcmRzLnB1c2goXG4gICAgICAuLi5jb21wdXRlQ2FyZHMoXG4gICAgICAgIGVudGl0aWVzLFxuICAgICAgICBhcmVhRW50aXRpZXMubWFwKChlbnRpdHkpID0+IGVudGl0eS5lbnRpdHlfaWQpLFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGFyZWEubmFtZSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBjb25zdCBkZXZpY2VDYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBjb25zdCBzb3J0ZWREZXZpY2VzID0gT2JqZWN0LmVudHJpZXMoXG4gICAgc3BsaXR0ZWRCeUFyZWFEZXZpY2UuZGV2aWNlc1dpdGhFbnRpdGllc1xuICApLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBkZXZpY2VBID0gZGV2aWNlRW50cmllc1thWzBdXTtcbiAgICBjb25zdCBkZXZpY2VCID0gZGV2aWNlRW50cmllc1tiWzBdXTtcbiAgICByZXR1cm4gc3RyaW5nQ29tcGFyZShcbiAgICAgIGRldmljZUEubmFtZV9ieV91c2VyIHx8IGRldmljZUEubmFtZSB8fCBcIlwiLFxuICAgICAgZGV2aWNlQi5uYW1lX2J5X3VzZXIgfHwgZGV2aWNlQi5uYW1lIHx8IFwiXCJcbiAgICApO1xuICB9KTtcblxuICBmb3IgKGNvbnN0IFtkZXZpY2VJZCwgZGV2aWNlRW50aXRpZXNdIG9mIHNvcnRlZERldmljZXMpIHtcbiAgICBjb25zdCBkZXZpY2UgPSBkZXZpY2VFbnRyaWVzW2RldmljZUlkXTtcbiAgICBkZXZpY2VDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKFxuICAgICAgICBlbnRpdGllcyxcbiAgICAgICAgZGV2aWNlRW50aXRpZXMubWFwKChlbnRpdHkpID0+IGVudGl0eS5lbnRpdHlfaWQpLFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6XG4gICAgICAgICAgICBkZXZpY2UubmFtZV9ieV91c2VyIHx8XG4gICAgICAgICAgICBkZXZpY2UubmFtZSB8fFxuICAgICAgICAgICAgbG9jYWxpemUoXG4gICAgICAgICAgICAgIFwidWkucGFuZWwuY29uZmlnLmRldmljZXMudW5uYW1lZF9kZXZpY2VcIixcbiAgICAgICAgICAgICAgXCJ0eXBlXCIsXG4gICAgICAgICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgICAgIGB1aS5wYW5lbC5jb25maWcuZGV2aWNlcy50eXBlLiR7ZGV2aWNlLmVudHJ5X3R5cGUgfHwgXCJkZXZpY2VcIn1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgbGV0IGVuZXJneUNhcmQ6IExvdmVsYWNlQ2FyZENvbmZpZyB8IHVuZGVmaW5lZDtcblxuICBpZiAoZW5lcmd5UHJlZnMpIHtcbiAgICAvLyBEaXN0cmlidXRpb24gY2FyZCByZXF1aXJlcyB0aGUgZ3JpZCB0byBiZSBjb25maWd1cmVkXG4gICAgY29uc3QgZ3JpZCA9IGVuZXJneVByZWZzLmVuZXJneV9zb3VyY2VzLmZpbmQoXG4gICAgICAoc291cmNlKSA9PiBzb3VyY2UudHlwZSA9PT0gXCJncmlkXCJcbiAgICApIGFzIEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChncmlkICYmIGdyaWQuZmxvd19mcm9tLmxlbmd0aCA+IDApIHtcbiAgICAgIGVuZXJneUNhcmQgPSB7XG4gICAgICAgIHRpdGxlOiBsb2NhbGl6ZShcbiAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLmVuZXJneS5lbmVyZ3lfZGlzdHJpYnV0aW9uLnRpdGxlX3RvZGF5XCJcbiAgICAgICAgKSxcbiAgICAgICAgdHlwZTogXCJlbmVyZ3ktZGlzdHJpYnV0aW9uXCIsXG4gICAgICAgIGxpbmtfZGFzaGJvYXJkOiB0cnVlLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBjb25maWcuY2FyZHMhLnVuc2hpZnQoXG4gICAgLi4uYXJlYUNhcmRzLFxuICAgIC4uLmdyb3VwQ2FyZHMsXG4gICAgLi4uKGVuZXJneUNhcmQgPyBbZW5lcmd5Q2FyZF0gOiBbXSlcbiAgKTtcblxuICBjb25maWcuY2FyZHMhLnB1c2goLi4uZGV2aWNlQ2FyZHMpO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/lovelace/common/generate-lovelace-config.ts\n");

/***/ })

}]);