"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[67901],{69470:(e,t,n)=>{n.d(t,{$y:()=>l,fs:()=>i,j:()=>r});const s=(e,t,n)=>new Promise(((s,r)=>{const i=document.createElement(e);let l="src",o="body";switch(i.onload=()=>s(t),i.onerror=()=>r(t),e){case"script":i.async=!0,n&&(i.type=n);break;case"link":i.type="text/css",i.rel="stylesheet",l="href",o="head"}i[l]=t,document[o].appendChild(i)})),r=e=>s("link",e),i=e=>s("script",e),l=e=>s("script",e,"module")},67901:(e,t,n)=>{n.r(t),n.d(t,{HaPanelCustom:()=>m});var s=n(17463),r=n(34541),i=n(47838),l=n(68144),o=n(79932),a=n(83849),c=n(36639);var u=n(69470);const d={},h=e=>e.html_url?{type:"html",url:e.html_url}:e.module_url&&e.js_url||e.module_url?{type:"module",url:e.module_url}:{type:"js",url:e.js_url},p=(e,t)=>{"setProperties"in e?e.setProperties(t):Object.keys(t).forEach((n=>{e[n]=t[n]}))};let m=(0,s.Z)(null,(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"narrow",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"route",value:void 0},{kind:"field",decorators:[(0,o.Cb)()],key:"panel",value:void 0},{kind:"field",key:"_setProperties",value:void 0},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"field",key:"navigate",value:()=>(e,t)=>(0,a.c)(e,t)},{kind:"method",key:"registerIframe",value:function(e,t){e(this.panel,{hass:this.hass,narrow:this.narrow,route:this.route}),this._setProperties=t}},{kind:"method",key:"disconnectedCallback",value:function(){(0,r.Z)((0,i.Z)(n.prototype),"disconnectedCallback",this).call(this),this._cleanupPanel()}},{kind:"method",key:"update",value:function(e){if((0,r.Z)((0,i.Z)(n.prototype),"update",this).call(this,e),e.has("panel")){const t=e.get("panel");if(!(0,c.v)(t,this.panel))return t&&this._cleanupPanel(),void this._createPanel(this.panel)}if(!this._setProperties)return;const t={};for(const n of e.keys())t[n]=this[n];this._setProperties(t)}},{kind:"method",key:"_cleanupPanel",value:function(){for(delete window.customPanel,this._setProperties=void 0;this.lastChild;)this.removeChild(this.lastChild)}},{kind:"method",key:"_createPanel",value:function(e){const t=e.config._panel_custom,n=h(t),s=document.createElement("a");if(s.href=n.url,!t.trust_external&&!["localhost","127.0.0.1",location.hostname].includes(s.hostname)&&!confirm(`${this.hass.localize("ui.panel.custom.external_panel.question_trust","name",t.name,"link",s.href)}\n\n           ${this.hass.localize("ui.panel.custom.external_panel.complete_access")}\n\n           (${this.hass.localize("ui.panel.custom.external_panel.hide_message")})`))return;if(!t.embed_iframe)return void(e=>{const t=h(e);return"js"===t.type?(t.url in d||(d[t.url]=(0,u.fs)(t.url)),d[t.url]):"module"===t.type?(0,u.$y)(t.url):Promise.reject("No valid url found in panel config.")})(t).then((()=>{const n=(e=>{const t="html_url"in e?`ha-panel-${e.name}`:e.name;return document.createElement(t)})(t);this._setProperties=e=>p(n,e),p(n,{panel:e,hass:this.hass,narrow:this.narrow,route:this.route}),this.appendChild(n)}),(()=>{alert(`Unable to load custom panel from ${s.href}`)}));window.customPanel=this;const r=this.panel.title?`title="${this.panel.title}"`:"";this.innerHTML=`\n      <style>\n        iframe {\n          border: 0;\n          width: 100%;\n          height: 100%;\n          display: block;\n          background-color: var(--primary-background-color);\n        }\n      </style>\n      <iframe ${r}></iframe>`.trim();const i=this.querySelector("iframe").contentWindow.document;i.open(),i.write(`<!doctype html><script src='${window.customPanelJS}'><\/script>`),i.close()}}]}}),l.fl);customElements.define("ha-panel-custom",m)}}]);
//# sourceMappingURL=67901-09FanZixWnY.js.map