{"version":3,"sources":["webpack:///./src/panels/config/cloud/ha-config-cloud-forgot-password.js"],"names":["HaConfigCloudForgotPassword","EventsMixin","PolymerElement","template","html","properties","hass","Object","email","type","String","notify","observer","_requestInProgress","Boolean","value","_error","_emailChanged","$","invalid","_keyDown","ev","keyCode","_handleEmailPasswordReset","preventDefault","includes","callApi","then","fire","flashMessage","err","setProperties","body","message","customElements","define"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;AAGA,MAAMA,2BAAN,SAA0CC,wEAAW,CAACC,+EAAD,CAArD,CAAsE;AACpE,aAAWC,QAAX,GAAsB;AACpB,WAAOC,wEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAAZ;AA6DD;;AAED,aAAWC,UAAX,GAAwB;AACtB,WAAO;AACLC,UAAI,EAAEC,MADD;AAELC,WAAK,EAAE;AACLC,YAAI,EAAEC,MADD;AAELC,cAAM,EAAE,IAFH;AAGLC,gBAAQ,EAAE;AAHL,OAFF;AAOLC,wBAAkB,EAAE;AAClBJ,YAAI,EAAEK,OADY;AAElBC,aAAK,EAAE;AAFW,OAPf;AAWLC,YAAM,EAAE;AACNP,YAAI,EAAEC,MADA;AAENK,aAAK,EAAE;AAFD;AAXH,KAAP;AAgBD;;AAEDE,eAAa,GAAG;AACd,SAAKD,MAAL,GAAc,EAAd;AACA,SAAKE,CAAL,CAAOV,KAAP,CAAaW,OAAb,GAAuB,KAAvB;AACD;;AAEDC,UAAQ,CAACC,EAAD,EAAK;AACX;AACA,QAAIA,EAAE,CAACC,OAAH,KAAe,EAAnB,EAAuB;AACrB,WAAKC,yBAAL;;AACAF,QAAE,CAACG,cAAH;AACD;AACF;;AAEDD,2BAAyB,GAAG;AAC1B,QAAI,CAAC,KAAKf,KAAN,IAAe,CAAC,KAAKA,KAAL,CAAWiB,QAAX,CAAoB,GAApB,CAApB,EAA8C;AAC5C,WAAKP,CAAL,CAAOV,KAAP,CAAaW,OAAb,GAAuB,IAAvB;AACD;;AAED,QAAI,KAAKD,CAAL,CAAOV,KAAP,CAAaW,OAAjB,EAA0B;AAE1B,SAAKN,kBAAL,GAA0B,IAA1B;AAEA,SAAKP,IAAL,CACGoB,OADH,CACW,MADX,EACmB,uBADnB,EAC4C;AACxClB,WAAK,EAAE,KAAKA;AAD4B,KAD5C,EAIGmB,IAJH,CAKI,MAAM;AACJ,WAAKd,kBAAL,GAA0B,KAA1B;AACA,WAAKe,IAAL,CAAU,YAAV,EAAwB;AACtBC,oBAAY,EACV;AAFoB,OAAxB;AAID,KAXL,EAYKC,GAAD,IACE,KAAKC,aAAL,CAAmB;AACjBlB,wBAAkB,EAAE,KADH;AAEjBG,YAAM,EACJc,GAAG,IAAIA,GAAG,CAACE,IAAX,IAAmBF,GAAG,CAACE,IAAJ,CAASC,OAA5B,GACIH,GAAG,CAACE,IAAJ,CAASC,OADb,GAEI;AALW,KAAnB,CAbN;AAqBD;;AA/HmE;;AAkItEC,cAAc,CAACC,MAAf,CACE,iCADF,EAEEnC,2BAFF,E","file":"2.chunk.js","sourcesContent":["import \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/buttons/ha-progress-button\";\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../resources/ha-style\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudForgotPassword extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding-bottom: 24px;\n          direction: ltr;\n        }\n\n        ha-card {\n          max-width: 600px;\n          margin: 0 auto;\n          margin-top: 24px;\n        }\n        h1 {\n          @apply --paper-font-headline;\n          margin: 0;\n        }\n        .error {\n          color: var(--google-red-500);\n        }\n        .card-actions {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .card-actions a {\n          color: var(--primary-text-color);\n        }\n        [hidden] {\n          display: none;\n        }\n      </style>\n      <hass-subpage header=\"Forgot Password\">\n        <div class=\"content\">\n          <ha-card header=\"Forgot your password\">\n            <div class=\"card-content\">\n              <p>\n                Enter your email address and we will send you a link to reset\n                your password.\n              </p>\n              <div class=\"error\" hidden$=\"[[!_error]]\">[[_error]]</div>\n              <paper-input\n                autofocus=\"\"\n                id=\"email\"\n                label=\"E-mail\"\n                value=\"{{email}}\"\n                type=\"email\"\n                on-keydown=\"_keyDown\"\n                error-message=\"Invalid email\"\n              ></paper-input>\n            </div>\n            <div class=\"card-actions\">\n              <ha-progress-button\n                on-click=\"_handleEmailPasswordReset\"\n                progress=\"[[_requestInProgress]]\"\n                >Send reset email</ha-progress-button\n              >\n            </div>\n          </ha-card>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      email: {\n        type: String,\n        notify: true,\n        observer: \"_emailChanged\",\n      },\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      _error: {\n        type: String,\n        value: \"\",\n      },\n    };\n  }\n\n  _emailChanged() {\n    this._error = \"\";\n    this.$.email.invalid = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleEmailPasswordReset();\n      ev.preventDefault();\n    }\n  }\n\n  _handleEmailPasswordReset() {\n    if (!this.email || !this.email.includes(\"@\")) {\n      this.$.email.invalid = true;\n    }\n\n    if (this.$.email.invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass\n      .callApi(\"post\", \"cloud/forgot_password\", {\n        email: this.email,\n      })\n      .then(\n        () => {\n          this._requestInProgress = false;\n          this.fire(\"cloud-done\", {\n            flashMessage:\n              \"Check your email for instructions on how to reset your password.\",\n          });\n        },\n        (err) =>\n          this.setProperties({\n            _requestInProgress: false,\n            _error:\n              err && err.body && err.body.message\n                ? err.body.message\n                : \"Unknown error\",\n          })\n      );\n  }\n}\n\ncustomElements.define(\n  \"ha-config-cloud-forgot-password\",\n  HaConfigCloudForgotPassword\n);\n"],"sourceRoot":""}